{
    "abstractText": "Food production is a complex process which can benefit from many optimisation approaches. However, there is growing interest in methods that support customisation of food properties to satisfy individual consumer preferences. This paper addresses the personalisation of beer properties. Having identified components of the production process for beers, we introduce a system which enables brewers to map the desired beer properties into ingredients dosage and combination. Previously explored approaches include direct use of structural equations as well as global machine learning methods. We introduce a framework which uses an evolutionary method supporting multi-objective optimisation. This work identifies problem-dependent objectives, their associations, and proposes a workflow to automate the discovery of multiple novel recipes based on user-defined criteria. The quality of the solutions generated by the multi-objective optimiser is compared against solutions from multiple runs of the method, and those of a single objective evolutionary technique. This comparison provides a road-map allowing the users to choose among more varied options or to fine-tune one of the preferred solutions. The experiments presented here demonstrate the usability of the framework as well as the transparency of its criteria.",
    "authors": [
        {
            "affiliations": [],
            "name": "Mohammad Majid al-Rifaie"
        },
        {
            "affiliations": [],
            "name": "Marc Cavazza"
        }
    ],
    "id": "SP:ef88679c44df0f6b6d325418b2fc29748be16ff8",
    "references": [
        {
            "authors": [
                "Mohammad Majid al-Rifaie"
            ],
            "title": "Dispersive flies optimisation",
            "venue": "Proceedings of the 2014 Federated Conference on Computer Science and Information Systems,",
            "year": 2014
        },
        {
            "authors": [
                "Mohammad Majid al-Rifaie"
            ],
            "title": "Exploration and exploitation zones in a minimalist swarm optimiser",
            "year": 2021
        },
        {
            "authors": [
                "Mohammad Majid al-Rifaie"
            ],
            "title": "Investigating knowledge-based exploration-exploitation balance in a minimalist swarm optimiser",
            "venue": "In IEEE Congress on Evolutionary Computation,",
            "year": 2021
        },
        {
            "authors": [
                "Mohammad Majid al-Rifaie",
                "Marc Cavazza"
            ],
            "title": "Beer organoleptic optimisation: Utilising swarm intelligence and evolutionary computation methods",
            "venue": "In Proceedings of the 2020 Genetic and Evolutionary Computation Conference Companion,",
            "year": 2020
        },
        {
            "authors": [
                "Mohammad Majid al-Rifaie",
                "Marc Cavazza"
            ],
            "title": "Evolutionary optimisation of beer organoleptic properties: A simulation framework",
            "year": 2022
        },
        {
            "authors": [
                "Gustavo Charry-Parra",
                "Maritza DeJesus-Echevarria",
                "Fernando J Perez"
            ],
            "title": "Beer volatile analysis: optimization of hs/spme coupled to gc/ms/fid",
            "venue": "Journal of food science,",
            "year": 2011
        },
        {
            "authors": [
                "Carlos A Coello Coello",
                "Gary B Lamont",
                "David A Van Veldhuizen"
            ],
            "title": "Evolutionary algorithms for solving multi-objective problems, volume",
            "year": 2007
        },
        {
            "authors": [
                "Ray Daniels"
            ],
            "title": "Designing great beers: The ultimate guide to brewing classic beer styles",
            "venue": "Brewers Publications,",
            "year": 1998
        },
        {
            "authors": [
                "Swagatam Das",
                "Ponnuthurai Nagaratnam Suganthan"
            ],
            "title": "Differential evolution: A survey of the state-of-the-art",
            "venue": "IEEE transactions on evolutionary computation,",
            "year": 2010
        },
        {
            "authors": [
                "Kalyanmoy Deb",
                "Ram Bhushan Agrawal"
            ],
            "title": "Simulated binary crossover for continuous search space",
            "venue": "Complex systems,",
            "year": 1995
        },
        {
            "authors": [
                "Kalyanmoy Deb",
                "Amrit Pratap",
                "Sameer Agarwal",
                "TAMT Meyarivan"
            ],
            "title": "A fast and elitist multiobjective genetic algorithm: Nsga-ii",
            "venue": "IEEE transactions on evolutionary computation,",
            "year": 2002
        },
        {
            "authors": [
                "Kalyanmoy Deb",
                "Karthik Sindhya",
                "Tatsuya Okabe"
            ],
            "title": "Self-adaptive simulated binary crossover for real-parameter optimization",
            "venue": "In Proceedings of the 9th annual conference on genetic and evolutionary computation,",
            "year": 2007
        },
        {
            "authors": [
                "David L Donoho",
                "Yaakov Tsaig",
                "Iddo Drori",
                "Jean-Luc Starck"
            ],
            "title": "Sparse solution of underdetermined systems of linear equations by stagewise orthogonal matching pursuit",
            "venue": "IEEE transactions on Information Theory,",
            "year": 2012
        },
        {
            "authors": [
                "Gracie Ermi",
                "Ellyn Ayton",
                "Nolan Price",
                "Brian Hutchinson"
            ],
            "title": "Deep learning approaches to chemical property prediction from brewing recipes",
            "venue": "In 2018 International Joint Conference on Neural Networks (IJCNN),",
            "year": 2018
        },
        {
            "authors": [
                "Claudia Gonzalez Viejo",
                "Christopher H Caboche",
                "Edward D Kerr",
                "Cassandra L Pegg",
                "Benjamin L Schulz",
                "Kate Howell",
                "Sigfredo Fuentes"
            ],
            "title": "Development of a rapid method to assess beer foamability based on relative protein content using robobeer and machine learning modeling. Beverages",
            "year": 2020
        },
        {
            "authors": [
                "Claudia Gonzalez Viejo",
                "Sigfredo Fuentes"
            ],
            "title": "A digital approach to model quality and sensory traits of beers fermented under sonication based on chemical fingerprinting",
            "venue": "Fermentation,",
            "year": 2020
        },
        {
            "authors": [
                "Claudia Gonzalez Viejo",
                "Sigfredo Fuentes",
                "Carmen"
            ],
            "title": "Hernandez-Brenes. Smart detection of faults in beers using near-infrared spectroscopy, a low-cost electronic nose and artificial intelligence. Fermentation",
            "year": 2021
        },
        {
            "authors": [
                "Claudia Gonzalez Viejo",
                "Sigfredo Fuentes",
                "Damir D Torrico",
                "Kate Howell",
                "Frank R Dunshea"
            ],
            "title": "Assessment of beer quality based on a robotic pourer, computer vision, and machine learning algorithms using commercial beers",
            "venue": "Journal of food science,",
            "year": 2018
        },
        {
            "authors": [
                "Michael L Hall"
            ],
            "title": "Brew by the numbers: add up what\u2019s in your beer",
            "venue": "Zymurgy,",
            "year": 1995
        },
        {
            "authors": [
                "Kristoffer Krogerus",
                "Eugene Fletcher",
                "Nils Rettberg",
                "Brian Gibson",
                "Richard Preiss"
            ],
            "title": "Efficient breeding of industrial brewing yeast strains using crispr/cas9-aided mating-type switching",
            "venue": "Applied Microbiology and Biotechnology,",
            "year": 2021
        },
        {
            "authors": [
                "Daniel Morey"
            ],
            "title": "Hop schedule guidelines: Award winning homebrew and classic beer style recipes",
            "year": 2000
        },
        {
            "authors": [
                "John J Palmer"
            ],
            "title": "How to brew: everything you need to know to brew great beer every time",
            "venue": "Brewers Publications,",
            "year": 2017
        },
        {
            "authors": [
                "Donald L Phillips",
                "Richard Inger",
                "Stuart Bearhop",
                "Andrew L Jackson",
                "Jonathan W Moore",
                "Andrew C Parnell",
                "Brice X Semmens",
                "Eric J Ward"
            ],
            "title": "Best practices for use of stable isotope mixing models in food-web studies",
            "venue": "Canadian Journal of Zoology,",
            "year": 2014
        },
        {
            "authors": [
                "Alistair D Rodman",
                "Dimitrios I Gerogiorgis"
            ],
            "title": "Multi-objective optimisation of flavour and processing time in beer fermentation via dynamic simulation",
            "venue": "In Computer Aided Chemical Engineering,",
            "year": 2016
        },
        {
            "authors": [
                "Qifan Frank Shen",
                "Megan Weaser",
                "Lee Griffiths",
                "Dimitrios I Gerogiorgis"
            ],
            "title": "Statistical modelling for optimisation of mash separation efficiency in industrial beer production",
            "venue": "In Computer Aided Chemical Engineering,",
            "year": 2019
        },
        {
            "authors": [
                "Bart Steenackers",
                "Luc De Cooman",
                "Dirk De Vos"
            ],
            "title": "Chemical transformations of characteristic hop secondary metabolites in relation to beer properties and the brewing process: a review",
            "venue": "Food Chemistry,",
            "year": 2015
        },
        {
            "authors": [
                "Irwin Stone",
                "Morrow C Miller"
            ],
            "title": "The standardization of methods for the determination of color in beer",
            "venue": "In Proceedings. Annual meeting-American Society of Brewing Chemists,",
            "year": 1949
        },
        {
            "authors": [
                "Ye Tian",
                "Ran Cheng",
                "Xingyi Zhang",
                "Yansen Su",
                "Yaochu Jin"
            ],
            "title": "A strengthened dominance relation considering convergence and diversity for evolutionary many-objective optimization",
            "venue": "IEEE Transactions on Evolutionary Computation,",
            "year": 2018
        },
        {
            "authors": [
                "Ioan Cristian Trelea",
                "Mariana Titica",
                "Georges Corrieu"
            ],
            "title": "Dynamic optimisation of the aroma production in brewing fermentation",
            "venue": "Journal of process control,",
            "year": 2004
        },
        {
            "authors": [
                "Claudia Gonzalez Viejo",
                "Sigfredo Fuentes"
            ],
            "title": "Beer aroma and quality traits assessment using artificial intelligence",
            "venue": "Fermentation,",
            "year": 2020
        },
        {
            "authors": [
                "Claudia Gonzalez Viejo",
                "Sigfredo Fuentes",
                "Kate Howell",
                "Damir Torrico",
                "Frank R Dunshea"
            ],
            "title": "Robotics and computer vision techniques combined with non-invasive consumer biometrics to assess quality traits from beer foamability using machine learning: A potential for artificial intelligence applications",
            "venue": "Food control,",
            "year": 2018
        }
    ],
    "sections": [
        {
            "text": "Food production is a complex process which can benefit from many optimisation approaches. However, there is growing interest in methods that support customisation of food properties to satisfy individual consumer preferences. This paper addresses the personalisation of beer properties. Having identified components of the production process for beers, we introduce a system which enables brewers to map the desired beer properties into ingredients dosage and combination. Previously explored approaches include direct use of structural equations as well as global machine learning methods. We introduce a framework which uses an evolutionary method supporting multi-objective optimisation. This work identifies problem-dependent objectives, their associations, and proposes a workflow to automate the discovery of multiple novel recipes based on user-defined criteria. The quality of the solutions generated by the multi-objective optimiser is compared against solutions from multiple runs of the method, and those of a single objective evolutionary technique. This comparison provides a road-map allowing the users to choose among more varied options or to fine-tune one of the preferred solutions. The experiments presented here demonstrate the usability of the framework as well as the transparency of its criteria."
        },
        {
            "heading": "1 Introduction",
            "text": "Optimisation of food production processes, given its real-world significance, has been seen primarily through the lens of process optimisation with the sole objective of finding solutions that meet the precise characteristics of the product. Acknowledging the potential for several viable solutions when optimising the food processes, this real-world problem poses itself as a challenging tasks with an inherently underdetermined characteristic [13, 24]. This work addresses the issue through a workflow based on a multi-objective optimiser, non-dominated sorting genetic algorithm II or NSGA-II to (1) generate solutions with the required characteristics defined by the domain experts, and (2) investigate solutions quality.\nWe use brewing as an application domain, as it follows a well-defined process yet allows many variants of the end-product to be generated based on a range of ingredients and parameters of the brewing process itself. The common practice of the strict reliance on the existing beer recipes (as opposed to exploring novel ones) was dictated by the complexity of the process which is unforgiving towards errors [27]. This is particularly the case when the principal goal is the production of a product with precise and stable physio-chemical properties.\n\u2217Corresponding author.\nar X\niv :2\n20 4.\n02 75\n2v 2\n[ cs\n.N E\n] 1\n3 A\nIn order to progress from current practice, the aim of this work is to propose a brewing optimisation system that returns several realistically acceptable ingredient combinations when these exist. This is primed by the finding that brewing allows several levels of experimentation, which are however not directly compatible with a scalable production process. Our contribution would thus consists in reconciling optimisation and exploration of new recipes and recipe space.\nThe proposed method aims to map the brewing elements onto target properties. Basic knowledge is acquired through \u2018reverse engineering\u2019 of some well-recognised labels based on their known characteristics. These characteristics allow both the validation of the generated solutions, and lay the foundations to reformulate the task as a multi-objective problem. The motivation is to demonstrate the system\u2019s ability in offering various solutions, in order to allow the domain experts the ease and flexibility of choosing from a suite of validated solutions; this is of practical relevance when either the diversity of the solutions is a priority, or the ability to fine-tune one or more of the identified solutions.\nIn this paper, previous related research are presented in Section 2 which are then followed by a summary of some of the key concepts and formulas guiding the fermentation process. This enables an introduction to the objectives associated to the optimisation process. Subsequently, the evolutionary methods used to address the problem are presented. The experiments and results of \u2018cloning\u2019 twenty products are reported in Section 3 where search and objective spaces are investigated. Directions for extending our results are suggested in the conclusion."
        },
        {
            "heading": "2 Background",
            "text": "Several attempts have been made at optimising various elements of beer brewing; this is because of the its mix of standardisation and ingredient-based variability. Previous work have however, most often, considered specific or causal relationships between ingredients and individual properties known to play a significant role in consumers\u2019 preferences (e.g. foamability, flavour profile, temperature, aroma) or process parameters (e.g. processing time). These work can be categorised as processcentric, when the objective is process improvement, often with the intention to partially automate, or outcome-centric when researching the determinants of beer quality and organoleptic properties. In the latter case, focus can be on specific determinants or adopt a more global perspective on the end-product.\nBeer foamability is studied in [32] where robotics and computer vision techniques are combined with non-invasive consumer biometrics to assess quality traits from beer foamability. It is known that foam-related parameters are associated with beer quality and dependent on the protein content. A recent study explored the development of a machine learning model to predict the pattern and presence of 54 proteins [15]. Furthermore, in another study, an objective predictive model is developed to investigate the intensity levels of sensory descriptors in beer using the physical measurements of colour and foam-related parameters, where a robotic pourer was used to obtain some colour and foam-related parameters from a number of different commercial beer samples [18]. It is also claimed that this method could be useful as a rapid screening procedure to evaluate beer quality at the end of the production line.\nAnother recent work centred on process optimisation [16] investigated sonication and traditional brewing techniques, with results demonstrating that the models developed using supervised machine learning based on near-infrared spectroscopy can accurately estimate physico-chemical parameters.\nOn a related topic, mash separation is known to be a critical pre-processing step in beer production where a high-quality stream of solubilised grain carbohydrates and nutrients is fed to the fermentors. Recent work by Shen et al. [26] performed a sensitivity analysis towards mash separation improvements. It concluded that strong wort volume and incoming feed quality to the mash filter have the strongest effect on filtration time, which it sees as a key performance metric for process optimisation. Some recent research have also been exploring faults detection in beers using artificial intelligence methods, as well as using strain development methodology to breed industrial brewing yeast [17, 20].\nIn another beer optimisation related task by Charry-Parra et al. [6], a technique was developed for the identification and quantification of volatile compounds of beer. This validation methodology enables its use as a quality control procedure for beer flavour analysis. A computational implementation of\na kinetic model has also been proposed to rapidly generate temperature manipulations, simulating the operation of each candidate profile [25].\nCompared to process improvement, optimising the aroma profile has been dedicated less work. For instance, Trelea et al. [30] obtained various desired final aroma profiles while reducing the total processing time using dynamic optimisation of three control variables: temperature, top pressure and initial yeast concentration in the fermentation tank; the optimisation is based on a sequential quadratic programming algorithm on top of a dynamic model of alcoholic fermentation and on an aroma production model. Another recent work assesses the final aromatic profiles and physicochemical characteristics of beers [31]. This work presents artificial intelligence models based on aroma profiles, chemometrics, and chemical fingerprinting obtained from 20 commercial beers used as targets.\nErmi et al. [14] explored two deep learning architectures with the aim of classifying coarse- and fine-grained beer types and predicting ranges for original gravity (OG), final gravity (FG), alcohol by volume (ABV), international bitterness units (IBU), and colour.\nIn summary, previous work have used various optimisation techniques, sometimes combined with modelling approaches (structural equations), targeting fermentation, foam, aroma profile, predicting beer flavours, , and controlling of beer fermentation process.\nThe majority of approaches can still be categorised as traditional optimisation models, some based on process (e.g. kinetic) modelling, and others on specific relationship between limited number of key variables. To some extent, even previous use of DL was more focused on establishing direct relationships between parameters than uncovering global behaviour. They remain relevant in their identification of key elements of the process, parameters and local optimisation issues. However, there is a need for a more global approach, unifying local determinants within an outcome-centred optimisation approach.\nTo address the novel challenge of reverse brewing, our work proposes to use a gradient-free, evolutionary approach to facilitate the discovery of validated, yet high fidelity and novel recipes, while taking into account both users preferences, and their constraints. Our approach takes advantage of the evolutionary methods in terms of optimisation dynamics and exploration of the solution space; this is not directly covered by the previous methods which have been mainly focusing on optimisation of specific aspects of the brewing processes, often starting from ingredients or recipe towards determining beer properties, whereas in this work, we take the reverse process of discovering recipes and the prerequisite ingredients from user tailored beer properties."
        },
        {
            "heading": "2.1 Process Equations and Objectives",
            "text": "Before articulating the technical assumptions underpinning the optimisation framework, we need to introduce some relevant elements of the underlying application. This will also constitute a first description of the relevant parameters and their dependencies.\nThe key objectives contributing towards the optimisation process are original gravity (OG) which is the gravity of the wort pre-fermentation, final gravity (FG) referring to the gravity post fermentation, alcohol by volume (ABV), bitterness or international bitterness unit (IBU) and colour which are used by the optimiser to determine the suitability of each proposed solution. In the brewing process, ingredients are divided in three broad categories: hops, fermentables and yeasts. In addition to weight, several other relevant features are needed to calculate their impact on the brewing process (e.g. hops: alpha and beta and time values; fermentable: yield, colour, moisture and diastatic power; yeast: minimum and maximum temperatures, and attenuation). Beer\u2019s taste changes significantly depending on the exact quantities and varieties of ingredients and their timing in the process. From a food science perspective, the brewing process, although in some parts empirical, has been the subject of many descriptions and partial formalisation which are however sufficient to derive relevant equations. The overall process can thus be described as a set of elementary transformations that can be integrated within an optimisation framework. More specifically, a number of formal relationships between ingredients and target properties are sufficiently specific to support the generation of fitness functions. Some of the relevant formulas are discussed next.\nFG = f(OG,Yeast Attenuation), the gravity (i.e. sugar leftover from malt) after the fermentation, is defined as:\nFG = OG\u2212 (OG\u2212 1)\u00d7 Yeast Attenuation (1)\nGravity refers to the density of the solution and two items impact the overall density of wort: water, with density of 1.000, and sugar from the malt. Given the heavier and larger molecule of sugar, when dissolved in water, the overall density increases. However, a third item, ethanol, which is produced by the yeast, has a lighter density of 0.789. Subsequently, during the fermentation process, when the sugar is consumed, ethanol is produced, which in turn reduces the overall density of the solution, leading to FG < OG [22]. A dry or crisp flavor is the result of a lower FG, while a sweet or malty flavor has a higher FG. The distance between OG and FG determines the amount of alcohol in the product.\nABV = f(OG,FG) and is defined as [19, 8]:\nABV = 76.08 (OG\u2212 FG)FG 0.794 (1.775\u2212 OG)\n(2)\nIBU is determined by taking into account the bitterness produced by hops or the hop extracts (from the fermentables), thus IBU = f( ~hops, ~fermentables, volume). The bitterness produced by hop is calculated as follows:\nIBUh = Nh\u2211 i=1 10wi\u03b1i(1\u2212 exp\u22120.04ti) 4.15 v 1.65\u00d7 0.000125(OG\u22121) (3)\nwhere Nh is the number of hops; ~w represents the weight; v is the volume or batch size; ~t is time in minutes; and fermentables\u2019 bitterness is defined as:\nIBUf = Nf\u2211 i=1 gi wi v\n(4)\nwhere Nf is the number of fermentables; and ~g is \u2018IBU gal per lb\u2019 which is associated with each fermentable and is known for each ingredients. The final IBU is the sum of the individual IBUs: IBU = IBUh + IBUf .\nIBU/GU is often described in the following categories: cloying, slightly malty, balanced, slightly hoppy, extra hoppy, and very hoppy. IBU/GU = f(OG, IBU):\nIBU/GU = IBU\n1000(OG\u2212 1) (5)\nColour is mainly determined by malts and hops. The two main protocols to measure colour are Standard Reference Method (SRM) and European Brewing Convention (EBC). SRM, which is used in this work, was initially adopted in 1950 by the American Society of Brewing Chemists. The value of SRM is determined by measuring the attenuation of light of a particular wavelength (430 nm) in passing through 1 cm of the beer, expressing the attenuation as an absorption and scaling the absorption by a constant (12.7 for SRM or 25 for EBC, where EBC = SRM \u00d7 1.97). Stone and Miller [28] proposed malt colour unit (MCU), which is defined as:\nMCU = Nf\u2211 i=1 ci wi v\n(6)\nwhere ~c refers to grains\u2019 colour (fermentables\u2019 colour). As shown in the equation above, for more than one grain type, the MUC is calculated for each and all the values are aggregated. However, MUC tends to overestimate the colour value for darker beers (MUC > 10.5). Thus, Morey [21] derived the following to deal with SRM up to 50:\nSRM = 1.4922 Nf\u2211 i=1 ci w 0.6859 i v (7)"
        },
        {
            "heading": "2.2 Evolutionary Optimisation",
            "text": "We propose an optimisation framework which in essence unifies the various elements of the brewing process from the individual reaction mechanisms to the articulation between the various parameters. This framework relies mainly on the multi-objective optimiser, yet provides both a comparison and a potential integrative workflow with a single objective evolutionary optimiser. These algorithms are presented next."
        },
        {
            "heading": "2.2.1 NSGA-II",
            "text": "Non-dominated sorting genetic algorithm II [11] is an efficient methods dealing with multi-objective optimisation problems. This method identifies non-dominated solutions which represent different trade-offs between a number of objectives, the optimal trade-off being represented by a set of Pareto solutions generated. In addition to using the standard genetic algorithm processes (mutation, crossover and selection), it benefits from an elitist strategy, utilising diversity preserving mechanism, and deploying non-dominated solutions, where individuals are selected based on their crowding distances and non-dominated ranks. Moreover, previous work has demonstrated the potential for NGSA-II to work alongside other analytic or decision-making tools."
        },
        {
            "heading": "2.2.2 DE",
            "text": "The Differential evolution algorithm is used to provide a comparative analysis of the results1 in some aspects of the experiments. In this work, from the different varieties of the algorithm, DE/best/1 version, known for its competitiveness and robustness, is used [9]. The cross-over rate and the differential weight are CR \u2208 [0, 1] and F \u2208 [0, 2]."
        },
        {
            "heading": "3 Experiments and Results",
            "text": "This section presents a set of experiments where physico-chemical properties of several commercial beers are used along with the in-stock inventory to evaluate the proposed system by \u201creverse manufacturing\u201d these commercial beers from their target physico-chemical properties. The list of ingredients in this experiment is shown in Table 1, and the desired physio-chemical properties are selected from the list of twenty commercial beers as shown in Table 2.\nIn this work, the optimiser takes an inventory of the existing ingredients and their weights (as dimensionality of the problem and bounds to each dimension respectively) along with a desired set of organoleptic properties for a particular product (as the means to measure solution fitness), and returns an optimal set of ingredient lists and their associated amounts (as solution vectors) which facilitate the production of the target product.\nThe experiments conducted in this section are to cater for a proof of principle study, which simulate a realistic scenario in a small-scale brewery, where the brewer\u2019s efficiency is set to 58%2, boil size of 24L, batch size of 20L, and boil time of 60 minutes. Despite following a simulative approach, the grounding for our experiments is found in the pre-existing descriptions associated to commercial products being \u201creverse engineered\u201d. This covers all the relevant parameters as well as user preferences and organoleptic properties through respectively published ingredients, label contents, advertising material and product reviews."
        },
        {
            "heading": "3.1 Experiment Setup",
            "text": "The experiments reported here give an indication of the overall performance of the system on each product when generating solutions whose diversity and quality will be analysed. Based on the experiment results and depending on domain experts\u2019 needs, recommendation on brewing strategies\n1For a detailed study of the experiments limited to single objective optimisers, see [4, 5]. This analysis shows the superiority of one of the single objective methods introduced in [1] with its exploration-exploitation study investigated in [2, 3].\n2This refers to the efficiency of equipment in extracting sugars from malts during the mashing stage. Efficiency is higher for larger-scale industrial setups.\n* IBU gal per lb is 0 for all the fermentables.\nwill be provided. These strategies depend on whether users are interested in exploring a varied set of solutions, or to fine-tune a preferred solution from the solution space.\nThe population size for NSGA-II is set to 100, generating the same number of offsprings. In each generation, duplicate individuals are removed, and given the continuous nature of the solution space, simulated binary crossover and polynomial mutation are used [12]. The crossover probability is set to pc = 0.9 and using distribution indexes [10], the crossover and mutation operators are set to \u03b7c = 15 and \u03b7m = 20 respectively. The termination criterion is set to 1000 generations. The population size in DE is 100, and F and CR are set to 0.5. The termination criteria are set to either reaching 100,000 function evaluations or the error threshold defined below.\nIn the experiments, at the end of each run, the number of successful solution vectors in the population with the overall error of e \u2264 0.05 (which is defined next) is used as one of the performance measures, along with the count of non-dominated solutions for NSGA-II. There are 30 independent runs for each experiment and the results are summarised over these independent simulations.\nIn this work, given OG, FG and ABV are interdependent (see Eq. 2), the task is formulated into a 3-objective problem with f1, which takes into account the Euclidean distance between the desired OG, FG, ABV and the corresponding generated values; f2, the proximity to user-specified IBU, and f3 which returns the distance from the desired colour.\nf1(~x) = \u221a (fOG(~x)\u2212 OG)2 + (fFG(~x)\u2212 FG)2 + (fABV(~x)\u2212 ABV)2\nf2(~x) = \u221a (fIBU(~x)\u2212 IBU)2\nf3(~x) = \u221a (fSRM(~x)\u2212 SRM)2\nwhere ~x is the list of ingredients, and OG, FG, ABV, IBU and SRM represent the desired values for a product as provided by the brewers (in this case from Table 2).\nThe overall error, e = f1 + f2 + f3, is defined by the quality of the solution in terms of the proximity of the solution\u2019s fitness to the objective values. Note that e is not used by the multiobjective optimiser to guide the optimisation."
        },
        {
            "heading": "1 100 16.03 41.5 31.15",
            "text": ""
        },
        {
            "heading": "2 96 15.42 18 33.56",
            "text": ""
        },
        {
            "heading": "3 95 13.40 52.5 33.48",
            "text": ""
        },
        {
            "heading": "3.2 Results and Discussion",
            "text": "Table 3 reports the number of non-dominated individuals found at the end of the process; also, from these individuals, the ones with pre-determined proximity to the optimal values are indicated as successful solutions. During the optimisation process, the majority of individuals within the population approach constitute part of the Pareto front (\u2265 95%); however, not all return the desired overall error, e. As shown in the table, for the majority of the products, approximately 20 \u2212 50% of the individuals on the Pareto front are successful. In three of the products (i.e. 4, 7 and 14), no suitable solution is found. The reason behind these failures will be investigated by exploring each objective individually.\nTo evaluate the proximity of the objectives, f1\u22123, of successful solutions in each run, initially the standard deviation of each objective is calculated in each run; these values are then averaged to mea-\nsure the nearness of the objectives, or their deviations. Table 4 reports the results, which illustrate the closeness of each independent objective values.\nIn under-determined systems [13] where there are fewer equations than unknowns (and by extension, more solutions to a problem), the proximity of the objectives in solution vectors does not strictly imply the proximity of solution vectors themselves. To establish the distance of solution vectors within each run, a similar analysis is conducted, this time for each of the sixteen components in the solution vectors and the results are shown in Table 6. It is evident that in each of the independent instances not only the distances between the objectives are modest, but also the solutions are not radically distant in the context of this real-world problem. This enables the optimiser to return several similar candidate solutions with delicate differences for the users to choose from depending on their production processes and criteria. This is a valuable feature which allows for a balanced choice to be made from the existing solutions.\nFig. 1-a illustrates the closeness of solutions generated in a single NSGA-II run for one of the products, Guinness Extra Stout (the same observation is seen in the others products). This sample run, resulted in 53 successful solutions; each line on the y-axis represents a solution vector which illustrates the amount of uptake in each ingredients on the x-axis; a darker shade indicates a higher uptake from the existing ingredient (e.g. ingredient 15 representing flaked barley) and a brighter shade highlights a lower uptake (e.g. ingredient 10 referring to wheat malt).\nTo investigate whether more distinct solutions are available to this problem and if the optimiser (in each independent run) tends to \u2018navigate\u2019 the individuals towards a particular \u2018zone\u2019 within the Pareto front, the proximity of sampled solutions from each independent run is taken into account and visualised. Taking a sample solution from each independent run (i.e. naturally, with varying starting points) demonstrates a greater distinctiveness in the diversity of the solution vectors (see Fig. 1-b). This confirms that NSGA-II, in the context of this problem, leads the population towards a particular segment of the Pareto front in each run. This experiment evidences the availability of more varied solutions in the solution space (utilising further crowd distancing measures and diversity preserving/promoting strategies in this context can be beneficial [7, 29, 23]). To confirm this finding, DE, as the single objective evolutionary optimiser, is run 30 times and the generated solutions are visualised in Fig. 1-c.\nThe observations on the performance of NSGA-II are extendable to the objective space, which as shown in Fig. 3, demonstrate a stronger proximity in a single run NSGA-II, than sampling solutions from multiple runs of the algorithm.\nTo further evaluate the solutions\u2019 uniqueness, the distance between each pair is calculated. These values are presented as distance matrices and visualised in Fig. 2, showing that depending of the user-specific needs, from less diverse to more diverse set of solutions, the following is recommended: single run of NSGA-II and choosing successful solutions; multiple runs of NSGA-II with a sample solution picked from each run; and multiple runs of single objective differential evolutionary optimiser. The maximum distances between solution vectors, which are shown in the labelled colour bar in Fig. 2, are 0.0265 (Fig. 2-a), 3.5156 (Fig. 2-b) and 5.3905 (Fig. 2-c) respectively.\nIn the results reported, there have been instances where the optimiser fails to suggest suitable ingredient combinations, more specifically, in three products. The average objective values in the three failed products in 30 runs is calculated, where each run results in 100 non-dominant individ-\nuals. Average objective distance of the individuals from the desired objective values is shown in Table 5. Looking at the desired objective values in these products, there is a shared characteristic which prevents them from being optimised given the existing inventory. The reason lies in the high SRM values (\u2265 71), which can only be achieved with greater availability of ingredients such as chocolate malt or roasted barley (i.e. ingredients 11 and 14 in Table 1 respectively). The optimiser aims to increase the SRM value by using the other fermentables, resulting in adverse effects on the objectives, including f1 and f2. To investigate the influence of the input ingredients, the amount of roasted barley, which offers a higher SRM value, is increased to 5 kg (from the original 0.5 kg) and the optimisation is re-run 30 times for one of the failed products, product 7 (i.e. Sunmaid Stout). The result demonstrates an uptake in using the \u2018topped-up\u2019 ingredient (on average 3.12 kg) to meet the objectives. In summary, the process returns 45 \u00b1 31 successful solutions, out of the 85 \u00b1 20 non-dominated ones, which is in line with the figures viewed for the other products.\nTo summarise, in instances where domain experts require more diverse set of solutions, the single objective optimisation method presents a greater promise. On the other hand, the multi-objective optimiser provides a delicate choice of solutions from a particular region within the solution space with inherent proximity in the objective space which allows the exploitation of a promising region of the solution space. Therefore, an overall suitable solutions can be identified through the first method, and then the second can be deployed to fine-tune the favourite solution."
        },
        {
            "heading": "4 Conclusion",
            "text": "When aiming for innovation, the high experimental costs associated with the beer brewing process is shown to be efficiently reducible by taking into account the key product characteristics (and reformulating them as objectives) along with the input ingredients. The proposed method automates the quantitative ingredients selection, which is one of the key experimental aspects of brewing. Although we established this primarily with volumes corresponding to low cost production environments, the presented system can be geared towards scalability. Therefore, the core challenge of generating novel and dynamically changing recipes, based on the product characteristics, is alleviated. This allows the design of high quality beer by commercial venues where quantities and varieties of ingredients are not hard constraints, as well as less equipped and more flexible microbreweries where constraints play a bigger role. A number of strategies are suggested depending on user preferences in terms of the solution choice, either from a narrow set of solution with delicate differences, or a diverse pool of potential solutions with further discriminability.\nMore investigation is required to determine the impact of multi-criteria decision-making (MCDM) methods on the existing workflow. An important next step, with a potentially greater impact, is to explore crowd distancing mechanism which may result in building a more comprehensive Pareto front, allowing control on either exploiting a narrow solution space, or covering a diverse set of more radically different solutions. Considering additional and more complex objectives, such as aroma profile, flavour and foam is part of an ongoing research."
        }
    ],
    "title": "Multi-Objective Evolutionary Beer Optimisation",
    "year": 2022
}