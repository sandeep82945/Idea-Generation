{
    "abstractText": "The ASTRI Mini-Array is a project for the Cherenkov astronomy in the TeV energy range. ASTRI MiniArray consists of nine Imaging Atmospheric Cherenkov telescopes located at the Teide Observatory (Canarias Islands). Large volumes of monitoring and logging data result from the operation of a large-scale astrophysical observatory. In the last few years, several \u201cBig Data\u201d technologies have been developed to deal with such volumes of data, especially in the Internet of Things (IoT) framework. We present the Monitoring, Logging, and Alarm (MLA) system for the ASTRI Mini-Array aimed at supporting the analysis of scientific data and improving the operational activities of the telescope facility. The MLA system was designed and built considering the latest software tools and concepts coming from Big Data and IoT to respond to the challenges posed by the operation of the array. A particular relevance has been given to satisfying the reliability, availability, and maintainability requirements towards all the array sub-systems and auxiliary devices. The system architecture has been designed to scale up with the number of devices to be monitored and with the number of software components to be considered in the distributed logging system.",
    "authors": [
        {
            "affiliations": [],
            "name": "Federico Incardona"
        },
        {
            "affiliations": [],
            "name": "Alessandro Costa"
        },
        {
            "affiliations": [],
            "name": "Kevin Munari"
        },
        {
            "affiliations": [],
            "name": "Salvatore Gambadoro"
        },
        {
            "affiliations": [],
            "name": "Stefano Germani"
        },
        {
            "affiliations": [],
            "name": "Pietro Bruno"
        },
        {
            "affiliations": [],
            "name": "Andrea Bulgarelli"
        },
        {
            "affiliations": [],
            "name": "Vito Conforti"
        },
        {
            "affiliations": [],
            "name": "Fulvio Gianotti"
        },
        {
            "affiliations": [],
            "name": "Alessandro Grillo"
        },
        {
            "affiliations": [],
            "name": "Valerio Pastore"
        },
        {
            "affiliations": [],
            "name": "Federico Russo"
        },
        {
            "affiliations": [],
            "name": "Joseph Schwarz"
        },
        {
            "affiliations": [],
            "name": "Gino Tosti"
        }
    ],
    "id": "SP:26555a136ae1ad34a19210d5ee96c8dbf29c07de",
    "references": [
        {
            "authors": [
                "B Acharya"
            ],
            "title": "Introducing the cta concept",
            "venue": "Astroparticle physics 43, 3\u201318 (2013).",
            "year": 2013
        },
        {
            "authors": [
                "G Pareschi"
            ],
            "title": "The astri sst-2m prototype and mini-array for the cherenkov telescope array (cta)",
            "venue": "[Ground-based and Airborne Telescopes VI ], 9906, 99065T, International Society for Optics and Photonics (2016).",
            "year": 2016
        },
        {
            "authors": [
                "S Scuderi"
            ],
            "title": "The astri mini-array of cherenkov telescopes at the observatorio del teide",
            "venue": "Journal of High Energy Astrophysics (2022).",
            "year": 2022
        },
        {
            "authors": [
                "S Vercellone"
            ],
            "title": "Astri mini-array core science at the observatorio del teide",
            "venue": "Journal of High Energy Astrophysics (2022).",
            "year": 2022
        },
        {
            "authors": [
                "E Pena"
            ],
            "title": "Framework to use modern big data software tools to improve operations at the paranal observatory",
            "venue": "[Observatory Operations: Strategies, Processes, and Systems VII ], 10704, 107042J, International Society for Optics and Photonics (2018).",
            "year": 2018
        },
        {
            "authors": [
                "A. Costa",
                "K. Munari",
                "F. Incardona",
                "P.G. Bruno",
                "S. Germani",
                "A. Grillo",
                "I. Oya",
                "E. Sciacca",
                "U. Becciani",
                "M. Raciti"
            ],
            "title": "The Monitoring, Logging, and Alarm system for the Cherenkov Telescope Array",
            "venue": "[Proceedings of 37th International Cosmic Ray Conference \u2014 PoS(ICRC2021) ], 395, 700 (2021).",
            "year": 2021
        },
        {
            "authors": [
                "A Costa"
            ],
            "title": "Big Data Architectures for Logging and Monitoring Large Scale Telescope Arrays",
            "venue": "[Proc. ICALEPCS\u201919 ], International Conference on Accelerator and Large Experimental Physics Control Systems, 268\u2013271, JACoW Publishing, Geneva, Switzerland (08 2020).",
            "year": 2020
        },
        {
            "authors": [
                "G Chiozzi"
            ],
            "title": "The alma common software: a developer-friendly corba-based framework",
            "venue": "[Advanced Software, Control, and Communication Systems for Astronomy ], 5496, 205\u2013218, International Society for Optics and Photonics (2004).",
            "year": 2004
        },
        {
            "authors": [
                "A Bulgarelli"
            ],
            "title": "The Software Architecture and development approach for the ASTRI Mini-Array gamma-ray air-Cherenkov experiment at the Observatorio del Teide",
            "venue": "Software and Cyberinfrastructure for Astronomy VII, edited by Jorge Ibsen, Gianluca Chiozzi, Proc. of SPIE 12189-15 .",
            "year": 1218
        },
        {
            "authors": [
                "F Incardona"
            ],
            "title": "Optimization of the storage database for the Monitoring system of the Cherenkov Telescope Array",
            "venue": "[Proc. ADASSXXXI 2021 ],",
            "year": 2021
        },
        {
            "authors": [
                "F. Incardona",
                "A. Costa",
                "K. Munari",
                "P.G. Bruno",
                "A. Bulgarelli",
                "S. Germani",
                "A. Grillo",
                "J. Schwarz",
                "E. Sciacca",
                "G. Tosti",
                "F. Vitello",
                "G. Tudisco"
            ],
            "title": "LOgging UnifieD for ASTRI Mini Array",
            "venue": "[Proceedings of 37th International Cosmic Ray Conference \u2014 PoS(ICRC2021) ], 395, 195 (2021).",
            "year": 2021
        },
        {
            "authors": [
                "V. Conforti",
                "F. Gianotti",
                "V. Pastore",
                "M. Trifoglio",
                "A. Bulgarelli",
                "A. Addisa",
                "B.L.",
                "M. Capalbi",
                "V. Fioretti",
                "N. Parmiggiani",
                "P. Sangiorgi",
                "M. Corpora",
                "O. Catalano",
                "A. Costa",
                "F. Incardona",
                "F. Russo"
            ],
            "title": "The Array Data Acquisition System software architecture of the ASTRI Mini-Array Project",
            "venue": "Software and Cyberinfrastructure for Astronomy VII, edited by Jorge Ibsen, Gianluca Chiozzi, Proc. of SPIE 12189-25 .",
            "year": 1218
        },
        {
            "authors": [
                "V. Pastore",
                "V. Conforti",
                "F. Gianotti",
                "A. Bulgarelli",
                "N. Parmiggiani",
                "F. Incardona",
                "A. Costa",
                "F. Russo"
            ],
            "title": "Array Data Acquisition System interface for online distribution of acquired data in the ASTRI Mini- Array project",
            "venue": "Software and Cyberinfrastructure for Astronomy VII, edited by Jorge Ibsen, Gianluca Chiozzi, Proc. of SPIE 12189-77 .",
            "year": 1218
        },
        {
            "authors": [
                "F. Russo",
                "G Tosti"
            ],
            "title": "The telescope control system for the ASTRI mini-array of imaging atmospheric Cherenkov telescopes",
            "venue": "Software and Cyberinfrastructure for Astronomy VII, edited by Jorge Ibsen, Gianluca Chiozzi, Proc. of SPIE 12189-91 .",
            "year": 1218
        },
        {
            "authors": [
                "A. Caproni",
                "E. Schmid"
            ],
            "title": "The integrated alarm system for the alma observatory",
            "venue": "[\u201dProceedings, 16th International Conference on Accelerator and Large Experimental Physics Control Systems (ICALEPCS 2017)\u201d ], (10 2017).",
            "year": 2017
        },
        {
            "authors": [
                "A. Costa",
                "G. Tosti",
                "J. Schwarz",
                "P. Bruno",
                "A. Bulgarelli",
                "A. Calanducci",
                "V. Conforti",
                "S. Germani",
                "F. Gianotti",
                "A. Grillo",
                "F. Incardona",
                "K. Munari",
                "F. Russo",
                "E. Sciacca",
                "F. Vitello"
            ],
            "title": "Architectural design and prototype for the logging, monitoring, and alarm system for the ASTRI mini-array",
            "venue": "[Software and Cyberinfrastructure for Astronomy VI ], Guzman, J. C. and Ibsen, J., eds., 11452, International Society for Optics and Photonics, SPIE (2020).",
            "year": 2020
        }
    ],
    "sections": [
        {
            "text": "Keywords: ASTRI, monitoring, logging, alarms, Cherenkov Telescope, CTA"
        },
        {
            "heading": "1. INTRODUCTION",
            "text": "The ASTRI (Astrofisica con Specchi a Tecnologia Replicante Italiana) project started in 2010 to support the development of technologies within the Cherenkov Telescope Array 1. The ASTRI Mini-Array project 2 has expanded becoming an international effort led by the Italian National Institute for Astrophysics (INAF). It is planned to consist of nine Cherenkov telescopes and cameras in full operations 3, 4, and is based on the experience provided by the ASTRI prototype. Internet of Things (IoT) is an emerging technology that is becoming a major topic of interest among technology giants and business communities. The data generated by IoT devices is large in volume and needs to be analyzed using Big Data analytics engine (see, e.g. 5) in order to extract the critical information and detect behavioral patterns. This paper presents the monitoring, logging, and alarm software architecture currently under development for the ASTRI Mini-Array (see, also 6). This architecture takes advantage of continuing technological evolution 7 to\nFurther author information: (Send correspondence to F. Incardona) F. Incardona: E-mail: federico.incardona@inaf.it\nar X\niv :2\n20 7.\n06 37\n2v 1\n[ as\ntr o-\nph .I\nrespond to the challenges posed by the operation of the array, in particular, to satisfy the reliability, availability, and maintainability requirements of all its sub-systems and auxiliary devices. The system architecture is based on the ALMA Common Software\u2217 (ACS 8) and has been designed to scale up with the number of devices to be monitored and with the number of software components to be taken into account in the distributed logging system."
        },
        {
            "heading": "2. LOGGING, MONITORING AND ALARM SYSTEMS ARCHITECTURE",
            "text": "The Monitoring, Logging, and Alarm (MLA) System monitors the overall performance of the ASTRI Mini-Array through the acquisition of environmental housekeeping data, log files, and alarms from instruments, and generates status reports or notifications to the operator via an Operator Human Machine Interface (HMI). In the context of ASTRI Software 9, the HMI provides the interested users with a set of different Graphical User Interfaces (GUIs), accessible from the web, desktop, and mobile clients, through which they can watch in real-time the data streaming, and can browse and query the historical one. It is made up of a backend exposing data through HTTP/GraphQL\u2020 APIs and Websockets\u2021 to multiple front-ends. The Alarm System provides the service that gathers, filters, exposes, and persists all the relevant alarms raised by both devices (such as telescopes and other devices) and Supervisory Control And Data Acquisition (SCADA) processes. The monitoring, logging, and alarm data are saved in the MLA Archives, which are databases optimized for real-time applications 10 (high read-write throughput\u00a7) used to keep historical events. These archives are able to resolve any queries coming from operators and engineering GUIs and are periodically transferred to the ASTRI Data Center."
        },
        {
            "heading": "3. THE MONITORING SYSTEM",
            "text": "The ASTRI Mini-Array system will generate a significant amount of monitoring data, collecting information on the performance of a variety of critical and complex electrical and mechanical components. We foresee about 20000 monitoring points, and the updating frequency will be no higher than about 1 Hz, except for shortterm debugging campaigns that may require more frequent updates. This monitoring information enriches and complements observational data, and is crucial for most troubleshooting efforts performed by engineering teams. The Monitoring System (Fig. 1) will enable the staff to use a systematic approach to fault detection and diagnosis and support corrective and predictive maintenance to minimize the downtime of the system. The Monitoring System provides the services that gather monitoring data from the telescopes, the Environmental Monitoring System, and other instruments, and saves them in the Monitoring Archive. It also provides a framework for the evaluation and analysis of abnormal situations. The Monitoring System works continuously to record any monitoring data. It provides a global base support service and is supposed to be up, running, and available to any client that wants to use it at all times. The Monitoring System functionality can be broadly classified into three main areas: collection, persistence, and (limited) processing.\n\u2022 Collection: anything collected by the monitoring subsystem is associated with a time-stamp. Monitoring System collects sensor data and other similar data that change over time, status, and other information.\n\u2022 Persistence: most monitoring data are persisted for later analysis and processing. The persisting may operate on the raw monitoring data, or on slightly processed material. The Monitoring System is able to acquire, process, and save environmental condition data and monitoring points into the Monitoring Archive.\n\u2022 Processing capabilities: (i) suppression of duplicate values, e.g., if there is no need to keep repeating with full frequency a sensor\u2019s value or a component\u2019s state as long as that value or state does not change; (ii) comparison functions, so that processing emits a value only if an incoming monitoring point lies within a predefined window of values; (iii) statistical processing; (iv) sensor values filtering, depending on their status.\n\u2217ACS: https://www.eso.org/projects/alma/develop/acs/ \u2020HTTP/GraphQL: https://graphql.org/learn/serving-over-http/ \u2021The WebSocket Protocol: https://tools.ietf.org/html/rfc6455 \u00a7Apache Cassandra: https://cassandra.apache.org/\nThe Monitoring System allows also browsing of the monitoring data offline either to reconstruct past events or for further investigations, and it provides the capability to re-sample the monitoring information coming in the form of irregular and unevenly-spaced time-series data to a consistent and regular frequency.\nThe breakdown structure of the Monitoring System is the following (see Fig. 1):\n\u2022 Data Collector is responsible for retrieving monitoring points from the hardware devices (through the OPC-UA\u00b6 and ACS components 8). The Data Collector is also in charge of data processing, filtering out duplicate values, and normalizing retrieved data in a common format (i.e., Apache AVRO \u2016). It reads the data sources (i.e., OPC-UA and ACS endpoints) and the set of nodes from which collecting data from the Configuration Database (CDB), which is responsible for storing the System Configuration Data Model. The Data Collector is optimized for efficiency. In particular, the OPC-UA subscriptions are grouped by the sampling interval.\n\u2022 Mon Queue takes formatted and validated monitoring points from the Data Collector. It uses a very fastin-memory database discarding data after a given retention period and serves as a: (i) buffer to synchronize data collectors, (ii) dispatchers that operate at different speeds, (iii) subscription/notification service to any clients interested in receiving streaming of real-time monitoring data.\n\u00b6The OPC Unified Architecture (UA): https://opcfoundation.org/about/opc-technologies/opc-ua/ \u2016Apache AVRO: https://avro.apache.org/\n\u2022 Monitoring Point Dispatcher consumes data from the Mon Queue, delivering them to a long-term data storage and to the HMI.\n\u2022 Monitor Manager acts as a coordinator: its tasks are to start and stop the entire subsystem and to provide the current status of the monitoring subsystem components."
        },
        {
            "heading": "4. LOGGING SYSTEM",
            "text": "The ASTRI Mini-Array System can generate a significant amount of log files, in the order of about 200 Mbps, and the logging architecture must be designed taking into account its impact on the performance of the system as a whole. Particular attention has been paid to enabling filtering of log events both at the device and central level. Such filtering capability is based on log priority and it can be configured at the system level. Logs will not only be useful to diagnose failures detected during operation but they will also be needed for long-term performance analysis. The Logging System (LOUD 11) (Fig. 2) gets logging information from relevant software and hardware components. It ingests software logs produced by: (i) subsystems using the control framework, (ii) observation scripts, and (iii) low-level firmware, which requires reformatting to adapt to the rest of the logs, (iv) hardware systems, (v) records of actions of the user over the HMIs, in order to keep track of the activities that the operators perform on the system.\nThe breakdown structure of the Logging System is the following (see Fig. 2):\n\u2022 Log Collector is responsible for reading and collecting log records from the system components and User Interfaces. It also processes them, generating a log entry according to the log data model and sending them to the Log Queue. The list of the component endpoints is stored in the Configuration Database.\n\u2022 Log Queue acts as a buffer to synchronize the other components of the subsystem that could operate at different speeds.\n\u2022 Log Consumer sends log entries to the Log Archive and communicates with the Operator HMI to provide selected near-real-time logging information.\n\u2022 Logging Manager acts as a coordinator: its tasks are to start and stop the entire subsystem and to provide the current status of the logging subsystem components."
        },
        {
            "heading": "5. ALARM SYSTEM",
            "text": "The Alarm System (AS) (Fig. 3) provides the service that gathers, filters, exposes, and persists all the relevant alarms raised by devices (such as the telescopes) and software processes (e.g., Monitoring System, Logging System, Array Data Acquisition System 12, 13, Telescope Control System 14, etc.). It also creates and filters new alarms based on a selection of the most critical monitoring points. The alarms, which by definition require human attention and response, are sent to Operators via the HMI. The current implementation of the alarm system is a customization of the Integrated Alarm System\u2217\u2217 (IAS 15) (Fig. 4).\nThe breakdown structure of the Alarm System is the following (see Fig. 3):\n\u2217\u2217IAS: https://integratedalarmsystem-group.github.io\n\u2022 Data Acquisition is a software component that interfaces with the ACS remote control software. It is also in charge of filtering out and discarding duplicate values. The acquisition is performed by the so-called PluginQueue (Fig. 4) that sends the collected Basic Alarm events (from ACS) to a dedicated Apache Kafka \u2020\u2020 data stream.\n\u2022 Data Processing is performed by the Converter in the IAS context. It takes the data points from the PluginQueue and normalizes them in a common data structure, as defined in the data model. Then it sends them back to the general Alarm Queue that, in the Alarm System framework, is a Kafka data stream named Back Stage Database (BSDB).\n\u2022 Supervisor is the core of the subsystem. Its task is to evaluate the inputs provided by the remote systems through the Basic Alarm Queue against the model and the defined rules (found in the Configuration Database), and ultimately generates a number of alarms, either set or cleared. The Supervisor receives also a selection of monitoring values with the aim of combining them and calculating corresponding alarms. The Supervisor manages a set of Distributed Alarm System Computing Units (DASUs), which interact with the BSDB to gather input values and generate outputs in terms of new Alarms or synthetic parameters. The DASUs output is obtained in one or more steps from the inputs by the Alarm System Computing Elements (ASCEs).\n\u2022 Alarm Queue (Fig. 4) serves as temporary storage both of a subset of monitoring points and actual alarm events. It also acts as a buffer to synchronize the other consumer components of the subsystem that\n\u2020\u2020Apache Kafka https://kafka.apache.org\ncould operate at different speeds. The Alarm Queue is the BSDB, the BASIC ALARM Queue, and the PluginQueue; it is based on Apache Kafka.\n\u2022 Alarm Dispatcher is performed by a Kafka Consumer; it notifies and sends alarm data points both to the long-term alarm archive and operator GUIs.\n\u2022 Alarm Manager acts as a coordinator with the task to start and stop the entire Alarm System and provides the current status of AS components."
        },
        {
            "heading": "6. CONCLUSION AND FUTURE DEVELOPMENTS",
            "text": "We presented the architecture of the Monitoring, Logging, and Alarm System that monitors and logs the data needed to check and improve the operational activities of a large-scale telescope array such as ASTRI. The MLA prototype was designed and built considering the current software tools and concepts coming from Big Data and Internet of Things 16. The software stack is based on open-source software, thus reducing the need for unnecessary extra software development. Future work is planned to integrate Machine Learning algorithms to perform anomaly detection and failure prediction."
        },
        {
            "heading": "ACKNOWLEDGMENTS",
            "text": "This work was conducted in the context of the ASTRI Project thanks to the support of the Italian Ministry of University and Research (MUR) as well as the Ministry for Economic Development (MISE) with funds specifically assigned to the Italian National Institute of Astrophysics (INAF). We acknowledge support from the Brazilian Funding Agency FAPESP (Grant 2013/10559-5) and from the South African Department of Science and Technology through Funding Agreement 0227/2014 for the South African Gamma-Ray Astronomy Programme. IAC is supported by the Spanish Ministry of Science and Innovation (MICIU). This work has also been partially supported by H2020-ASTERICS, a project funded by the European Commission Framework Programme Horizon 2020 Research and Innovation action under grant agreement n. 653477. The ASTRI project is becoming a reality thanks to Giovanni \u201cNanni\u201d Bignami, Nicolo\u0300 \u201cNichi\u201d D\u2019Amico two outstanding scientists who, in their capability of INAF Presidents, provided continuous support and invaluable guidance. While Nanni was instrumental to start the ASTRI telescope, Nichi transformed it into the Mini Array in Tenerife. Now the project is being built owing to the unfaltering support of Marco Tavani, the current INAF President. Paolo Vettolani and Filippo Zerbi, the past and current INAF Science Directors, as well as Massimo Cappi, the Coordinator of the High Energy branch of INAF, have been also very supportive to our work. We are very grateful to all of them. Nanni and Nichi, unfortunately, passed away but their vision is still guiding us. This article has gone through the internal ASTRI review process."
        }
    ],
    "title": "The Monitoring Logging and Alarm System of the ASTRI Mini-Array gamma-ray air-Cherenkov experiment at the Observatorio del Teide",
    "year": 2022
}