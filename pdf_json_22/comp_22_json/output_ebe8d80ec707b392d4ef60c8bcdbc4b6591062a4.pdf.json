{
    "abstractText": "Port supply chains play a very important role in the process of economic globalization. Lack of trust of the mechanism is the main factor in restricting the development of port supply chains. Blockchains have great potential to solve the trust problem among all participants using port supply chains, which can reduce costs and improve efficiency. As the bridge between blockchains and port supply chains, smart contracts reconstruct the business process of blockchain-empowered port supply chains. In this article, we present an architecture of a consortium blockchain-empowered port supply chain system, and propose a system verification framework for the smart contracts of port supply chains with probabilistic behaviors. The smart contracts are modeled as DTMCs (Discrete-Time Markov Chains), which are automatically transformed through the BPMN (Business Process Model and Notation) description of the smart contracts. The requirements are specified by PCTL (Probabilistic Computation Tree Logic). Moreover, we implement the customs clearance process of the Shanghai Yangshan Port based on blockchain Hyperledger Fabric, and reconstruct the clearance process with smart contracts. We use it to demonstrate the effectiveness of this framework, and identify the smart contracts that do not meet the expected needs of users.",
    "authors": [
        {
            "affiliations": [],
            "name": "Yang Liu"
        },
        {
            "affiliations": [],
            "name": "Ziyu Zhou"
        },
        {
            "affiliations": [],
            "name": "Yongsheng Yang"
        },
        {
            "affiliations": [],
            "name": "Yan Ma"
        }
    ],
    "id": "SP:04cf018edb7e2ca857084d907ba2f62a812b5b40",
    "references": [
        {
            "authors": [
                "C. Han"
            ],
            "title": "Assessing the impacts of port supply chain integration on port performance",
            "venue": "Asian J. Shipp. Logist",
            "year": 2018
        },
        {
            "authors": [
                "M. Dotolia",
                "M.P. Fantia",
                "A.M. Manginia",
                "G. Steccob",
                "W. Ukovich"
            ],
            "title": "The impact of ICT on intermodal transportation systems: A modelling approach by Petri nets",
            "venue": "Control. Eng. Pract",
            "year": 2010
        },
        {
            "authors": [
                "V. Jafari-Sadeghi",
                "A. Garcia-Perez",
                "E. Candelo",
                "J. Couturier"
            ],
            "title": "Exploring the impact of digital transformation on technology entrepreneurship and technological market expansion: The role of technology readiness, exploration and exploitation",
            "venue": "J. Bus. Res",
            "year": 2021
        },
        {
            "authors": [
                "L.S. Alotaibi",
                "S.S. Alshamrani"
            ],
            "title": "Smart Contract: Security and Privacy",
            "venue": "Comput. Syst. Sci. Eng",
            "year": 2021
        },
        {
            "authors": [
                "S. Fiorentino",
                "S. Bartolucci"
            ],
            "title": "Blockchain-based smart contracts as new governance tools for the sharing economy",
            "venue": "Cities",
            "year": 2021
        },
        {
            "authors": [
                "S. Tsiulin",
                "K.H. Reinau",
                "O.-P. Hilmola",
                "N. Goryaev",
                "A. Karam"
            ],
            "title": "Blockchain-based applications in shipping and port management: A literature review towards defining key conceptual frameworks",
            "venue": "Rev. Int. Bus. Strategy 2020,",
            "year": 2020
        },
        {
            "authors": [
                "S.E. Chang",
                "Y.C. Chen",
                "M.F. Lu"
            ],
            "title": "Supply chain re-engineering using blockchain technology: A case of smart contract based tracking process",
            "venue": "Technol. Forecast. Soc. Change",
            "year": 2019
        },
        {
            "authors": [
                "M. Rogerson",
                "G.C. Parry"
            ],
            "title": "Blockchain: Case studies in food supply chain visibility",
            "venue": "Supply Chain. Manag. Int. J. 2020,",
            "year": 2022
        },
        {
            "authors": [
                "P. De Giovanni"
            ],
            "title": "Digital supply chain through dynamic inventory and smart contracts",
            "venue": "Mathematics 2019,",
            "year": 2019
        },
        {
            "authors": [
                "A. Dolgui",
                "D. Ivanov",
                "S. Potryasaev",
                "B. Sokolov",
                "M. Ivanova",
                "F. Werner"
            ],
            "title": "Blockchain-oriented dynamic modelling of smart contract design and execution in the supply chain",
            "venue": "Int. J. Prod. Res",
            "year": 2020
        },
        {
            "authors": [
                "H. Hasan",
                "E. AlHadhrami",
                "A. AlDhaheri",
                "K. Salaha",
                "R. Jayaraman"
            ],
            "title": "Smart contract-based approach for efficient shipment management",
            "venue": "Comput. Ind. Eng",
            "year": 2019
        },
        {
            "authors": [
                "A.L. Vivar",
                "A.L.S. Orozco",
                "L.J.G. Villalba"
            ],
            "title": "A security framework for Ethereum smart contracts",
            "venue": "Comput. Commun",
            "year": 2021
        },
        {
            "authors": [
                "T.H. Pranto",
                "A.A. Noman",
                "A. Mahmud",
                "A.K.M. Bahalul Haque"
            ],
            "title": "Blockchain and smart contract for IoT enabled smart agriculture",
            "venue": "PeerJ Comput. Sci. 2021,",
            "year": 2021
        },
        {
            "authors": [
                "I.A. Omar",
                "R. Jayaraman",
                "M.S. Debe",
                "K. Salah",
                "I. Yaqoob",
                "M. Omar"
            ],
            "title": "Automating procurement contracts in the healthcare supply chain using blockchain smart contracts",
            "venue": "IEEE Access 2021,",
            "year": 2021
        },
        {
            "authors": [
                "I.A. Omar",
                "H.R. Hasan",
                "R. Jayaraman",
                "K. Salah",
                "M. Omar"
            ],
            "title": "Implementing decentralized auctions using blockchain smart contracts",
            "venue": "Technol. Forecast. Soc. Change",
            "year": 2021
        },
        {
            "authors": [
                "M. Ahmed",
                "C. Taconet",
                "M. Ould",
                "S. Chabridon",
                "A. Bouzeghoub"
            ],
            "title": "IoT Data Qualification for a Logistic Chain Traceability Smart Contract",
            "venue": "Sensors 2021,",
            "year": 2021
        },
        {
            "authors": [
                "M. Yoo",
                "Y. Won"
            ],
            "title": "A study on the transparent price tracing system in supply chain management based on blockchain",
            "venue": "Sustainability 2018,",
            "year": 2018
        },
        {
            "authors": [
                "Z. Xu",
                "J. Zhang",
                "Z. Song",
                "Y. Liu",
                "J. Li",
                "J. Zhou"
            ],
            "title": "A scheme for intelligent blockchain-based manufacturing industry supply chain management",
            "year": 2021
        },
        {
            "authors": [
                "X. Liu",
                "K. Muhammad",
                "J. Lloret",
                "Y.-W. Chen",
                "S.-M. Yuan"
            ],
            "title": "Elastic and cost-effective data carrier architecture for smart contract in blockchain",
            "venue": "Future Gener. Comput. Syst",
            "year": 2019
        },
        {
            "authors": [
                "P. De Giovanni"
            ],
            "title": "Blockchain and smart contracts in supply chain management: A game theoretic model",
            "venue": "Int. J. Prod. Econ",
            "year": 2020
        },
        {
            "authors": [
                "A. Banerjee"
            ],
            "title": "Blockchain technology: Supply chain insights from ERP",
            "venue": "Adv. Comput. 2018,",
            "year": 2018
        },
        {
            "authors": [
                "G. Prause"
            ],
            "title": "Smart contracts for smart supply chains",
            "venue": "IFAC-PapersOnLine",
            "year": 2019
        },
        {
            "authors": [
                "Z. Li",
                "X. Zhou",
                "K. Wu",
                "F.-B. Chen"
            ],
            "title": "Formalization of BPMN based on extended Petri net model",
            "venue": "Comput. Sci. 2016,",
            "year": 2016
        },
        {
            "authors": [
                "T. Najem",
                "A. Perucci"
            ],
            "title": "Mapping BPMN2 Service Choreographies to Colored Petri Nets",
            "venue": "In Proceedings of the International Conference on Software Engineering and Formal Methods, Oslo, Norway,",
            "year": 2019
        },
        {
            "authors": [
                "L. Hang",
                "D.H. Kim"
            ],
            "title": "Reliable task management based on a smart contract for runtime verification of sensing and actuating tasks in IoT environments",
            "venue": "Sensors",
            "year": 2020
        },
        {
            "authors": [
                "A. Singh",
                "R.M. Parizi",
                "Q. Zhang",
                "C.K.K. Raymond",
                "A. Dehghantanh"
            ],
            "title": "Blockchain smart contracts formalization: Approaches and challenges to address vulnerabilities",
            "venue": "Comput. Secur",
            "year": 2020
        },
        {
            "authors": [
                "J.H. Huh",
                "S.K. Kim"
            ],
            "title": "Verification plan using neural algorithm blockchain smart contract for secure P2P real estate transactions",
            "venue": "Electronics 2020,",
            "year": 2020
        },
        {
            "authors": [
                "T. Osterland",
                "T. Rose"
            ],
            "title": "Model checking smart contracts for ethereum",
            "venue": "Pervasive Mob. Comput",
            "year": 2020
        },
        {
            "authors": [
                "M. Almakhour",
                "L. Sliman",
                "A.E. Samhat",
                "A. Mellouk"
            ],
            "title": "Verification of smart contracts: A survey",
            "venue": "Pervasive Mob. Comput",
            "year": 2020
        },
        {
            "authors": [
                "D. Unal",
                "M. Hammoudeh",
                "M.S. Kiraz"
            ],
            "title": "Policy specification and verification for blockchain and smart contracts in 5G networks",
            "venue": "ICT Express 2020,",
            "year": 2020
        },
        {
            "authors": [
                "S. Zhang",
                "T. Yao",
                "V.K. Arthur Sandor",
                "T.H. Weng",
                "W. Liang",
                "J. Su"
            ],
            "title": "A novel blockchain-based privacy-preserving framework for online social networks. Connect",
            "year": 2020
        },
        {
            "authors": [
                "T.K. Mackey",
                "K. Miyachi",
                "D. Fung",
                "S. Qian",
                "J. Short"
            ],
            "title": "Combating health care fraud and abuse: Conceptualization and prototyping study of a blockchain antifraud framework",
            "venue": "J. Med. Internet Res",
            "year": 2020
        },
        {
            "authors": [
                "B.M. Nguyen",
                "T.C. Dao",
                "B.L. Do"
            ],
            "title": "Towards a blockchain-based certificate authentication system in Vietnam",
            "venue": "PeerJ Comput. Sci. 2020,",
            "year": 2020
        },
        {
            "authors": [
                "X. Li",
                "J. Xu",
                "X. Fan",
                "Y. Wang",
                "Z. Zhang"
            ],
            "title": "Puncturable Signatures and Applications in Proof-of-Stake Blockchain Protocols",
            "venue": "IEEE Trans. Inf. Forensics Secur",
            "year": 2020
        },
        {
            "authors": [
                "L. Ante"
            ],
            "title": "Smart Contracts on the Blockchain\u2013A Bibliometric Analysis and Review",
            "venue": "Telemat. Inform",
            "year": 2020
        },
        {
            "authors": [
                "D. Prashar",
                "N. Jha",
                "S. Jha",
                "G.P. Joshi",
                "C. Seo"
            ],
            "title": "Integrating IOT and blockchain for ensuring road safety: An unconventional approach",
            "venue": "Sensors",
            "year": 2020
        },
        {
            "authors": [
                "F. Amato",
                "G. Cozzolino",
                "F. Moscato",
                "V. Moscato",
                "F. Xhafa"
            ],
            "title": "A Model for Verification and Validation of Law Compliance of Smart-Contracts in IoT Environment",
            "venue": "IEEE Trans. Ind. Inform",
            "year": 2021
        },
        {
            "authors": [
                "W. Wan",
                "J. Bentahar",
                "A.B. Hamza"
            ],
            "title": "Model checking epistemic\u2013probabilistic logic using probabilistic interpreted systems",
            "venue": "Knowl.Based Syst",
            "year": 2013
        },
        {
            "authors": [
                "F. Corradini",
                "A. Marcelletti",
                "A. Morichetta",
                "A. Polini",
                "B. Re",
                "E. Scala",
                "F. Tiezzi"
            ],
            "title": "Model-driven engineering for multi-party business processes on multiple blockchains",
            "venue": "Blockchain Res. Appl. 2021,",
            "year": 2022
        },
        {
            "authors": [
                "C. Liang",
                "L. Feng",
                "X. Zhengyi",
                "D. Hao"
            ],
            "title": "Blockchain: Research on the Application Progress of the Internet of Things",
            "venue": "Internet Things Technol. 2018,",
            "year": 2018
        },
        {
            "authors": [
                "J. Aslam",
                "A. Saleem",
                "N.T. Khan",
                "B.Y. Kim"
            ],
            "title": "Factors influencing blockchain adoption in supply chain management practices: A study based on the oil industry",
            "venue": "J. Innov. Knowl. 2021,",
            "year": 2021
        },
        {
            "authors": [
                "O. L\u00f3pez-Pintado",
                "L. Garc\u00eda-Ba\u00f1uelos",
                "M. Dumas",
                "I. Weber",
                "A. Ponomarev"
            ],
            "title": "Caterpillar: A business process execution engine on the Ethereum blockchain",
            "venue": "Softw. Pract. Exp",
            "year": 2019
        }
    ],
    "sections": [
        {
            "text": "Citation: Liu, Y.; Zhou, Z.; Yang, Y.;\nMa, Y. Verifying the Smart Contracts\nof the Port Supply Chain System\nBased on Probabilistic Model\nChecking. Systems 2022, 10, 19.\nhttps://doi.org/10.3390/\nsystems10010019\nAcademic Editor: Ed Pohl\nReceived: 9 December 2021\nAccepted: 10 February 2022\nPublished: 16 February 2022\nPublisher\u2019s Note: MDPI stays neutral\nwith regard to jurisdictional claims in\npublished maps and institutional affil-\niations.\nCopyright: \u00a9 2022 by the authors.\nLicensee MDPI, Basel, Switzerland.\nThis article is an open access article\ndistributed under the terms and\nconditions of the Creative Commons\nAttribution (CC BY) license (https://\ncreativecommons.org/licenses/by/\n4.0/).\nKeywords: port supply chain; blockchain; smart contract; probabilistic model checking"
        },
        {
            "heading": "1. Introduction",
            "text": "With the development of economic globalization, the world economy has increasingly become a closely integrated whole system. Port supply chains play a very important role in this process, as they undertake about 80% of the total international trade [1]. A port supply chain refers to when a city center uses its own port to develop the comprehensive service systems that cover all of the of functions of supply chains, which exploit advanced ICT (Information and Communication Technologies) to optimize the port\u2019s resources and strengthen its radiation ability [2,3]. It takes a port as the nexus that supports interaction between global supply chains and regional production and consumption markets. Port supply chains have become a new engine of national economic development, an important part of national economy, and one of the important symbols to measure the level of modernization and comprehensive national strength of a country [2]. At present, emerging technologies such as the Internet of Things, Cloud Computing and Big Data are promoting the continuous expansion of port supply chains, and are driving a new round of port supply chain industry innovation [3]. However, the participants in port supply chains do not cooperate efficiently and effectively, which is the key to reducing costs and improving efficiency. The direct cause of this situation is a failure to share data and other resources effectively among all participants, and the root cause is the lack of trust of the mechanism among all participants in port supply chains. Various parties in port supply chains cannot achieve trust consistency, and some core suppliers or distributors cannot provide reliable trust endorsements for upstream and downstream.\nSystems 2022, 10, 19. https://doi.org/10.3390/systems10010019 https://www.mdpi.com/journal/systems\nSystems 2022, 10, 19 2 of 20\nBlockchain is a peer-to-peer, distributed ledger that is cryptographically-secure, appendonly, immutable (extremely hard to change), and updateable only via consensus or agreement among peers [4]. As it is decentralized, tamper-proof, auditable (provenance), transparent and so on, blockchain has great potential to solve the problem of trust among all participants in port supply chains. In practice, blockchain has just begun to be used in the port supply chain, thus, it is still in the internal experimental stage. The customs of Mexico, Peru, and Costa Rica, with the support of the Inter-American Development Bank, initiated the construction of an operator sharing platform based on blockchain technology in March 2018. Therefore, the Tianjin Port blockchain verification pilot project was launched with the aim of protecting data privacy and maximizing the operation efficiency of the port supply chain. The U.S. Congressional Research Institute discussed the application of blockchain technology in the field of customs supervision in June 2019. We argue that smart contracts are the bridge for application of blockchain technology to port supply chains. A smart contract is a coded contract written by computer language and automatically verified and executed by a computer. It is a digital form of a paper contract. With the help of smart contracts, any party in the entire transaction process can access the exact same data, which is essential to improve process efficiency. Smart contracts can automatically trigger and ensure the smooth flow of files among participants, so specific access rules can be effectively implemented, and new information can be instantly and securely shared with all related parties. Leena and Sultan [5] summarized the latest research and showed how smart contracts can change the method of fund flow tracking, improve liquidity in the real estate field, reduce risks, and have a positive impact on the safe operation of the national economy. Stefania [6] closely follows the current hot sharing economy, integrates smart contracts to systematically improve smart cities and public sectors, manages services such as house leasing, greatly reduces third-party commissions, reduces the risk of fraud, and prevents potential high-end processes. This has a very similar application in the order process of the port supply chain. Whether the smart contracts are correct determines the success of blockchain empowered port supply chains. The current research on the smart contracts of port supply chains has hardly taken into account the probabilistic aspects of port supply chains. The probabilistic aspects are essential for, among others: (1) port supply chains themselves contain the randomized behaviors, e.g., nondeterminism, consensus mechanism; (2) unreliable and unpredictable behaviors incurred by execution environment, e.g., message loss, processor failure; (3) performance evaluation by random variables assigned artificially, e.g., reliability, availability [3]. In this article, we propose a verification framework for the smart contracts of port supply chains with probabilistic behaviors. The smart contracts are modeled as DTMCs (Discrete-Time Markov Chains), which are automatically transformed through the BPMN (Business Process Model and Notation) description of smart contracts. The BPMN is the most widely used and simplest tool to describe the business process of port supply chains. It can clearly display the business relationship between each link and department, and visualize the information flow. It can serve as a communication medium between users of port supply chains and developers of smart contracts. DTMC is the formal model for analyzing the user requirement properties that the smart contracts should satisfy; it can be automatically generated from the BPMN. The requirements, such as safety, reliability and reachability, are specified by PCTL (Probabilistic Computation Tree Logic). We use this framework to model the smart contract for the cargo clearance process of the Shanghai Yangshan Port, to abstract the probabilities involved in each contract during the process based on questionnaires from port practitioners, and we use PCTL to specify user requirement properties. The remainder of this article is structured as follows. Section 2 describes related works about blockchain-powered port supply chain optimization and smart contract verification, and points out their weaknesses. Section 3 presents the scenario of blockchain smart contract reconstructing of the port supply chain, and proposes the verification framework for the probabilistic model checking of smart contracts for port supply chains. Section 4\nSystems 2022, 10, 19 3 of 20\ntakes the port customs clearance process as a case study to demonstrate the effectiveness of this framework. Section 5 provides a conclusion."
        },
        {
            "heading": "2. Related Works",
            "text": "Smart contracts using blockchain technology have been mentioned by a large number of risk analysis agencies in the field of port supply chains. The credit rating agency MOODY\u2019S summarized the three major steps to automate the international trade process using smart contracts: Firstly, design smart contracts based on paper letters of credit; Secondly, store the form; Finally, use the blockchain to record the ownership of each link [4]. In order to overcome difficulties such as overcapacity, increasingly strict environmental regulations, and security threats faced by the shipping industry, the Danish block shipping company is committed to building a global shared container platform (GSCP) based on blockchain technology to improve shipping efficiency and business. The digital transformation of processes and infrastructure ensures the long-term profitability of the industry. The project\u2019s white paper stated that the platform will save the shipping industry at least 5.7 billion USD in the future and will reduce carbon dioxide emissions by 4.6 million tons per year [7]. In the current supply chain mechanism, people use the traction system to track data, however, this method cannot avoid business friction, let alone update data in real time without manual query. Shuchih Ernest Chang et al. [8] proposed a blockchain-based BPR (Business Process Re-engineering) framework, which can help companies re-engineer crossborder business processes and track some key links in the supply chain process. Blockchain smart contract technology has been proven to have a very positive effect on supplier inventory management, the dynamic realization of the digital supply chain, and efficient transportation [9\u201312]. With the continuous and widespread application of blockchain smart contracts, coupled with the immutability of blockchain technologies, stability and security have increasingly become the focus of attention among researchers. Antonio proposed ESAF (Ethereum Security Analysis Framework), which can be used as a security monitoring tool for the persistence of a set of target contracts [13]. Haya Hasan et al. [12] used IoT-SC to jointly collect data on the chain, taking the vaccine supply chain as an example to test the relationship between smart contracts and entities, interactions between participants, information flow and so on. They proved that this technology can ensure real-time freight tracking performance which can be applied to multi-level and multi-party settings. It has practical applications in the transportation and information traceability of pharmaceutical products and agricultural products [14\u201320]. Pietro De Giovanni et al. [21] proved through a game theory model that blockchain technology can reduce business risks and transaction costs, which is more suitable for transactions with large-scale fund transfers such as crossborder bulk trade. Arnab Banerjee et al. [22] comprehensively analyzed the advantages of a blockchain-driven supply chain from the perspectives of ERP (Enterprise Resource Planning) transactions, master data management, order-purchasing, demand and supply management, manufacturing, and logistics management. The traditional concept suggests that smart contracts are designed to achieve traceable and irreversible transactions through the use of distributed databases. However, Gunnar Prause and his team [23] believed that their greater potential is reflected in the promotion of entrepreneurial collaborations across organizational business processes held up by smart supply chains. Due to the immutability of the blockchain, the smart contract must be strictly verified before being put on the chain. Li et al. [24] proposed a formal method of BPMN (Business Process Modeling Notation) based on the extended Petri net model. They used modeldriven development technology to design BPMN model elements to the extended Petri net model elements. Transformation rules and performing the mapping through the ATL model transformation language achieves formalized automatic execution. Tala Najam and Alexander Perucci [25] converted the BPMN2 choreography diagram into a color choreography network mapping for the lack of formal semantics of the BPMN2 specification, but they did not solve the problem that the Petri net model cannot reflect the content of time and does not support the construction of large-scale models. Due to the immutability\nSystems 2022, 10, 19 4 of 20\nof the blockchain, any error will become a permanent error once it occurs. In this regard, researchers have designed a large number of methods and tools to verify the correctness of smart contracts, the most representative of which is formal verification. Researchers have designed many formal verification frameworks and analyzed mainstream platforms [26\u201330]. Mouhamad Almakhour and his team [31] classified the existing smart contract verification tools and introduced a series of analysis tools such as Oyente and MAIAN, and deeply analyzed the cutting-edge technology of smart contract verification from the perspectives of static verification and runtime verification. Devrim Unal et al. [32] put forward the FPMRBAC model from the perspective of policy regulation. He analyzed smart contracts from the three perspectives of identity management, access control, and compliance checking, and fully considered transaction risks and security requirements in 5G networks. Zhang and Mackey [33,34] proposed several methods for the verification of smart contracts for the online social network and antifraud framework. Nguyen and Li [35,36] used a certificate authentication system and puncturable signatures to detected smart contracts and improve overall fault tolerance. Lennart Ante [37] proposed six mainstream smart contract analysis streams, including smart contract standardization, verification and security, and blockchain and smart contracts for the disruption of existing processes and industries. Prashar et al. [38] used OMNeT++ to verify contract stability. Amritraj Singh et al. [28] proposed DSL (Domain specific languages) to formalize smart contracts on the basis of formal testing and automated verification. Flora has done significant research in the field of BPMN modeling smart contracts. Flora Amato et al. [39] believe that smart contracts must be based on laws to restrict the behavior of participants, thus, they proposed a formal model for verifying the compliance of smart contracts in the IoT environment. Compared with the BPMN, this model pays more attention to the interaction between participants. At the same time, they use the TCTL (timed computational tree logics) formula to describe the attributes. At the same time, Wei Wan [40] considered the relationship between PCTL and DTMC and made a relatively complete theoretical summary and expansion. Flavio Corradini [41] introduced the relationship between the blockchain and the BPMN and designed a simple model-driven automatic blockchain code generator. In short, there have been attempts to apply smart contracts to the port supply chain. Their successful application will achieve a decentralized, traceable, efficient, and trusted global supply chain system. However, correctness research on the smart contracts of port supply chains has not been involved. Some work has been accumulated on the verification of smart contracts themselves, but this has not considered the random factor in the business process execution of smart contracts. Based on this, we propose a verification framework for the smart contracts of port supply chains with probabilistic behaviors."
        },
        {
            "heading": "3. Verification Framework",
            "text": ""
        },
        {
            "heading": "3.1. Blockchain Enpowered Port Supply Chain",
            "text": "The emergence of blockchain technology has brought new possibilities for solving the complicated trust problems of the port supply chain. As shown in Table 1, there are three types of blockchains: public blockchains, private blockchains and consortium blockchains [42]. The public blockchain is completely decentralized and suitable for multiuser scenarios, the private blockchain is completely centralized and suitable for independent organizations, and the consortium blockchain is partially decentralized and suitable for the common scenarios of multiple organizations. The three types of blockchain have different features in supply chain management. The public blockchain mainly reflects network security, while the private blockchain and the consortium blockchain have the advantage of real-time information transmission. The existing port supply chain involves a large number of departments. There is no unified information verification standard throughout the entire process, and a large number of manual audits are required, while the blockchain smart contract technology has an independent and general consensus mechanism. Users who agree to a certain encryption algorithm will use the smart contract by default. At the same\nSystems 2022, 10, 19 5 of 20\ntime, the encrypted information verification is extremely fast, which can save a lot of time in the intermediate process.\nThe port supply chain has the following three main characteristics and requirements: (1) medium transaction speed and medium number of transactions, (2) multiple participants, and (3) high transaction information privacy and time-sensitiveness of transportation information. The public chain cannot solve the problem of transaction speed and cannot guarantee the confidentiality of transaction information, while the strong centralization mechanism of the private chain makes it impossible to have multiple participants, which is contrary to the demands of port supply chains. At present, almost all supply chain blockchain platforms use private chains to ensure that information is not leaked; these are currently in the internal test stage. In this article, we chose the consortium blockchain Hyperledger Fabric to recontruct the port supply chain, as shown in Figure 1. This will be beneficial for large-scale port supply chains. The participants of the port supply chains are authorized to join and participate in data maintenance together. At the same time, the processing speed of 10,000 transactions per second is sufficient to meet the transaction volume requirements of port supply chains. It can be seen intuitively, from the above figure, that smart contracts are used to implement the business process of port supply chains. Based on the consensus mechanism, once the supply chain information is uploaded to the blockchain, it cannot be changed. Any authorized user can check the chain information at any time. Port administrators can easily check the authenticity of the information by hash verification. We designed the on-chain and off-chain information transfer process of port supply chains as showin in Figure 2. The supplier uploads the purchasing information and transportation information to the supplier chain (SC), and the Hyperledger Fabric automatically integrates it with the port chain (PC) and manufacturer chain (MC), which can also automatically generate a distributor chain (DC) at any time for purchasers to track the progress of the transportation. Due to the characteristics of the Hyperledger Fabric, all authorized participants can read and upload the information on the chain, so multiple sub-chains can be deployed at the same time."
        },
        {
            "heading": "3.2. Verification Framework for the Smart Contracts of Port Supply Chains",
            "text": "The overall verification framework of this paper is shown in Figure 3. In the formalizing branch, the requirements of PSC (port supply chain) smart contracts are specified by the PCTL (Probabilistic Computation Tree Logic) formula. In the modeling branch, the PSC smart contracts described in BPMN (Business Process Model and Notation) are modeled as DTMC (Discrete-Time Markov Chains) through a conversion algorithm. The verification process is implemented by the probabilistic model checker PRISM.\nSystems 2022, 10, 19 6 of 20Systems\u00a0202 ,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 6\u00a0of\u00a021\u00a0 \u00a0\n\u00a0\n\u00a0 Figure\u00a02.\u00a0On\u2010chain\u00a0and\u00a0off\u2010chain\u00a0information\u00a0transfer\u00a0process.\u00a0\nSystems\u00a02022,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 6\u00a0of\u00a021\u00a0 \u00a0\n\u00a0"
        },
        {
            "heading": "3.3. Modeling PSC Smart Contracts",
            "text": "Smart contracts are the programming codes run on blockchain platforms, which are very difficult to understand for the non-professional participants of port supply chains. As a quasi-natural language, BPMN can act as the intermediate language for all users in port supply chains, including business analysts, software developers, and business managers and supervisors. It provides a graphical model for creating a business process that can be used to construct a visual business process diagram of the port supply chain. There are dedicated tools for translating the BPMN into smart contract programming code, such as Caterpillar [44]. We model PSC smart contracts from the BPMN description of smart contracts. Moreover, we model the probabilistic aspects of smart contracts, which are an\nSystems 2022, 10, 19 7 of 20\ninherent characteristic of port supply chains. The reasons for this are as follows: (1) port supply chains themselves demonstrate randomized behaviors, e.g., non-determinism, consensus mechanism, (2) unreliable and unpredictable behaviors incurred by execution environment, e.g., message loss, processor failure, and (3) performance evaluation by random variables assigned artificially, e.g., reliability, availability [3]. We use the DMTC modes to model PSC smart contracts.\nSystems\u00a02022,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 7\u00a0of\u00a021\u00a0 \u00a0\n\u00a0\n3.2.\u00a0Verification\u00a0Framework\u00a0for\u00a0the\u00a0Smart\u00a0Contracts\u00a0of\u00a0Port\u00a0Supply\u00a0Chains\u00a0 The\u00a0overall\u00a0verification\u00a0framework\u00a0of\u00a0this\u00a0paper\u00a0is\u00a0shown\u00a0in\u00a0Figure\u00a03.\u00a0In\u00a0the\u00a0formal\u2010 izing\u00a0branch,\u00a0the\u00a0requirement \u00a0of\u00a0PSC\u00a0(port\u00a0supply\u00a0chain)\u00a0smart\u00a0contracts\u00a0are\u00a0specified\u00a0 by\u00a0 the\u00a0PCTL\u00a0 (Probabi istic\u00a0Comput ion\u00a0Tree\u00a0Logic)\u00a0 formula.\u00a0 In\u00a0 the\u00a0modeling\u00a0branch,\u00a0 the\u00a0PSC\u00a0smart\u00a0co tracts\u00a0described\u00a0in\u00a0BPMN\u00a0(Business\u00a0Process\u00a0Model\u00a0and\u00a0Notation)\u00a0are\u00a0 modeled\u00a0as\u00a0DTMC\u00a0(Discrete\u2010Time\u00a0Markov\u00a0Chains)\u00a0through\u00a0a\u00a0conversion\u00a0algorithm.\u00a0The\u00a0 verification\u00a0process\u00a0is\u00a0implemented\u00a0by\u00a0the\u00a0probabilistic\u00a0model\u00a0checker\u00a0PRISM.\u00a0\nFigure\u00a03.\u00a0Verification\u00a0framework\u00a0diagram.\u00a0\n3.3.\u00a0Modeling\u00a0PSC\u00a0Smart\u00a0Contracts\u00a0 Smart\u00a0contracts\u00a0are\u00a0the\u00a0programming\u00a0codes\u00a0run\u00a0on\u00a0blockchain\u00a0platforms,\u00a0which\u00a0are\u00a0 very\u00a0difficult\u00a0to\u00a0understand\u00a0for\u00a0the\u00a0non\u2010professional\u00a0participants\u00a0of\u00a0port\u00a0supply\u00a0chains.\u00a0 As\u00a0a\u00a0quasi\u2010natural\u00a0language,\u00a0BPMN\u00a0can\u00a0act\u00a0as\u00a0the\u00a0intermediate\u00a0language\u00a0for\u00a0all\u00a0users\u00a0in\u00a0 port\u00a0 supply\u00a0 chains,\u00a0 including\u00a0 business\u00a0 analysts,\u00a0 software\u00a0 developers,\u00a0 and\u00a0 business\u00a0 managers\u00a0and\u00a0supervisors.\u00a0It\u00a0provides\u00a0a\u00a0graphical\u00a0model\u00a0for\u00a0creating\u00a0a\u00a0business\u00a0process\u00a0 that\u00a0can\u00a0be\u00a0used\u00a0to\u00a0construct\u00a0a\u00a0visual\u00a0business\u00a0process\u00a0diagram\u00a0of\u00a0the\u00a0port\u00a0supply\u00a0chain.\u00a0 There\u00a0 are\u00a0dedicated\u00a0 tools\u00a0 for\u00a0 translating\u00a0 the\u00a0BPMN\u00a0 into\u00a0 smart\u00a0 contract\u00a0programming\u00a0 code,\u00a0such\u00a0as\u00a0Caterpillar\u00a0[44].\u00a0We\u00a0model\u00a0PSC\u00a0smart\u00a0contracts\u00a0from\u00a0the\u00a0BPMN\u00a0descrip\u2010 tion\u00a0of\u00a0smart\u00a0contracts.\u00a0Moreover,\u00a0we\u00a0model\u00a0the\u00a0probabilistic\u00a0aspects\u00a0of\u00a0smart\u00a0contracts,\u00a0 which\u00a0are\u00a0an\u00a0inherent\u00a0characteristic\u00a0of\u00a0port\u00a0supply\u00a0chains.\u00a0The\u00a0reasons\u00a0for\u00a0this\u00a0are\u00a0as\u00a0fol\u2010 lows:\u00a0 (1)\u00a0port\u00a0supply\u00a0chains\u00a0 themselves\u00a0demonstrate\u00a0 randomized\u00a0behaviors,\u00a0e.g.,\u00a0non\u2010 determinism,\u00a0 consensus\u00a0 mechanism,\u00a0 (2)\u00a0 unreliable\u00a0 and\u00a0 unpredictable\u00a0 behaviors\u00a0 in\u2010 curred\u00a0by\u00a0execution\u00a0environment,\u00a0e.g.,\u00a0message\u00a0 loss,\u00a0processor\u00a0 failure,\u00a0and\u00a0 (3)\u00a0perfor\u2010 mance\u00a0evaluation\u00a0by\u00a0random\u00a0variables\u00a0assigned\u00a0artificially,\u00a0e.g.,\u00a0reliability,\u00a0availability\u00a0 [3].\u00a0We\u00a0use\u00a0the\u00a0DMTC\u00a0modes\u00a0to\u00a0model\u00a0PSC\u00a0smart\u00a0contracts.\u00a0 The\u00a0 DTMC\u00a0 model\u00a0 of\u00a0 a\u00a0 PSC\u00a0 smart\u00a0 contract\u00a0 is\u00a0 defined\u00a0 as\u00a0 a\u00a0 six\u2010tuple,\u00a0 SC\u00a0 =\u00a0 (\ud835\udc46 , \ud835\udc46 , \ud835\udc60 , \ud835\udc43, \ud835\udc34\ud835\udc43, \ud835\udc3f).\u00a0\ud835\udc46 :\u00a0A\u00a0set\u00a0of\u00a0limited\u00a0non\u2010empty\u00a0states,\u00a0which\u00a0means\u00a0 that\u00a0the\u00a0PSC\u00a0smart\u00a0contract\u00a0is\u00a0in\u00a0a\u00a0normal\u00a0state\u00a0space.\u00a0This\u00a0set\u00a0contains\u00a0the\u00a0normal\u00a0sta\u2010 tus,\u00a0for\u00a0example,\u00a0the\u00a0supplier\u00a0sub\u2010contract\u00a0is\u00a0normal\u00a0or\u00a0the\u00a0transfer\u00a0sub\u2010contract\u00a0is\u00a0nor\u2010 mal.\u00a0In\u00a0addition,\u00a0it\u00a0includes\u00a0the\u00a0initial\u00a0status\u00a0and\u00a0the\u00a0end\u00a0status\u00a0of\u00a0the\u00a0port\u00a0supply\u00a0chain;\u00a0 \ud835\udc46 :\u00a0A\u00a0set\u00a0of\u00a0limited\u00a0non\u2010empty\u00a0states,\u00a0which\u00a0indicates\u00a0that\u00a0the\u00a0PSC\u00a0smart\u00a0contract\u00a0 is\u00a0 in\u00a0an\u00a0abnormal\u00a0state\u00a0space.\u00a0This\u00a0set\u00a0contains\u00a0all\u00a0abnormal\u00a0states,\u00a0such\u00a0as\u00a0the\u00a0quality\u00a0\nThe DTMC model of a PSC smart contract is defined as a six-tuple, SC = (Snormal , Sabnormal , sinit, P, AP, L). Snormal : A set of limited non-empty states, which means that the PSC s art co tr t is in a normal state spa e. This set contains the normal status, for example, the supplier ub-cont act is normal or the transfer sub-contract is normal. In addition, t includes the initial status and the end status of th port supply chain; Sabnormal : A set of limited non-empty states, which indicates that the PSC smart contract is in a abnormal state space. This set contains all abnormal states, such as the quality inspection contract failed or the goods were lost; sinit \u2208 Snormal represents the initial state; L:S\u21922AP is a label function used to describe the set of propositions on the state, and identify the sub-smart contracts being executed or abnormal situations corresponding to each state. AP is the set of atomic propositions. S = Snormal \u2228 Sabnormal is a collection of all state spaces; P: S \u00d7 S\u2192 [0,1] is the state transition matrix, indicating whether it will transition from one state to another and the probability of transition. Each state of the DTMC model corresponds to an event in the BPMN diagram. The transitions between states correspond to the migration of events. The sequence flows and message flows in the BPMN description represent the completion of the port supply chain sub-process of the previous department and the procedures of the next department. The corresponding mapping rules are shown in Table 2. The left side of the table is the sub-process of the BPMN c mponents, and the right side i th corresponding sub- rocess of the DTMC model. We automate this proce s by Algorithm 1.\nSystems 2022, 10, 19 8 of 20\nTable 2. Mapping PSC smart contracts in BPMN to DTMC.\nSequential event conversion\nSystems\u00a02022,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 8\u00a0of\u00a021\u00a0 \u00a0\n\u00a0\ninspection\u00a0 contract\u00a0 failed\u00a0 or\u00a0 the\u00a0 goods\u00a0were\u00a0 lost;\u00a0\ud835\udc60 \u2208 \ud835\udc46 \u00a0represents\u00a0 the\u00a0 initial\u00a0 state;\u00a0L:S\u2192 2 \u00a0is\u00a0a\u00a0 label\u00a0 function\u00a0used\u00a0 to\u00a0describe\u00a0 the\u00a0set\u00a0of\u00a0propositions\u00a0on\u00a0 the\u00a0state,\u00a0 and\u00a0identify\u00a0the\u00a0sub\u2010smart\u00a0contracts\u00a0being\u00a0executed\u00a0or\u00a0abnormal\u00a0situations\u00a0correspond\u2010 ing\u00a0to\u00a0each\u00a0state.\u00a0AP\u00a0is\u00a0the\u00a0set\u00a0of\u00a0atomic\u00a0propositions.\u00a0S\u00a0=\u00a0\ud835\udc46 \u2228 \ud835\udc46 \u00a0is\u00a0a\u00a0collec\u2010 tion\u00a0of\u00a0all\u00a0state\u00a0spaces;\u00a0P:\u00a0S\u00a0 \u00a0S\u00a0\u2192\u00a0[0,\u00a01]\u00a0is\u00a0the\u00a0state\u00a0transition\u00a0matrix,\u00a0indicating\u00a0whether\u00a0 it\u00a0will\u00a0transition\u00a0from\u00a0one\u00a0state\u00a0to\u00a0another\u00a0and\u00a0the\u00a0probability\u00a0of\u00a0transition.\u00a0\nEach\u00a0state\u00a0of\u00a0the\u00a0DTMC\u00a0model\u00a0corresponds\u00a0to\u00a0an\u00a0event\u00a0in\u00a0the\u00a0BPMN\u00a0diagram.\u00a0The\u00a0 transitions\u00a0 between\u00a0 states\u00a0 correspond\u00a0 to\u00a0 the\u00a0migration\u00a0 of\u00a0 events.\u00a0The\u00a0 sequence\u00a0 flows\u00a0 and\u00a0message\u00a0flows\u00a0in\u00a0the\u00a0BPMN\u00a0description\u00a0represent\u00a0the\u00a0completion\u00a0of\u00a0the\u00a0port\u00a0supply\u00a0 chain\u00a0 sub\u2010process\u00a0of\u00a0 the\u00a0previous\u00a0department\u00a0 and\u00a0 the\u00a0procedures\u00a0of\u00a0 the\u00a0next\u00a0depart\u2010 ment.\u00a0The\u00a0corresponding\u00a0mapping\u00a0rules\u00a0are\u00a0shown\u00a0in\u00a0Table\u00a02.\u00a0The\u00a0left\u00a0side\u00a0of\u00a0the\u00a0table\u00a0 is\u00a0the\u00a0sub\u2010process\u00a0of\u00a0the\u00a0BPMN\u00a0components,\u00a0and\u00a0the\u00a0right\u00a0side\u00a0is\u00a0the\u00a0corresponding\u00a0sub\u2010 process\u00a0of\u00a0the\u00a0DTMC\u00a0model.\u00a0We\u00a0automate\u00a0this\u00a0process\u00a0by\u00a0Algorithm\u00a01.\u00a0\nTable\u00a02.\u00a0Mapping\u00a0PSC\u00a0smart\u00a0contracts\u00a0in\u00a0BPMN\u00a0to\u00a0DTMC.\u00a0\nSequential\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0 Conditional\u00a0branch\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0 Cyclic\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0\nAlgorithm\u00a01\u00a0presents\u00a0a\u00a0conversion\u00a0algorithm\u00a0which\u00a0can\u00a0convert\u00a0the\u00a0PSC\u00a0smart\u00a0con\u2010 tracts\u00a0 in\u00a0BPMN\u00a0description\u00a0 into\u00a0a\u00a0DTMC\u00a0model.\u00a0The\u00a0premise\u00a0of\u00a0 the\u00a0 conversion\u00a0algo\u2010 rithm\u00a0is\u00a0to\u00a0accurately\u00a0divide\u00a0the\u00a0complete\u00a0BPMN\u00a0description\u00a0into\u00a0sub\u2010models\u00a0and\u00a0then\u00a0 map\u00a0them.\u00a0It\u00a0is\u00a0more\u00a0of\u00a0a\u00a0flowchart\u00a0level\u00a0mapping\u00a0than\u00a0a\u00a0semantic\u00a0mapping.\u00a0\n\u00a0\nSystems\u00a020 2,\u00a010,\u00a0x\u00a0FOR\u00a0P ER\u00a0REVIEW\u00a0 8\u00a0of\u00a021\u00a0 \u00a0\n\u00a0\ninspection\u00a0 contract\u00a0 failed\u00a0 or\u00a0 the\u00a0 g ods\u00a0were\u00a0 lost;\u00a0\ud835\udc60 \u2208 \ud835\udc46 \u00a0represents\u00a0 the\u00a0 initial\u00a0 state;\u00a0L:S\u2192 2 \u00a0is\u00a0a\u00a0 label\u00a0 function\u00a0used\u00a0 to\u00a0describe\u00a0 the\u00a0set\u00a0of\u00a0propositions\u00a0on\u00a0 the\u00a0state,\u00a0 and\u00a0identify\u00a0the\u00a0sub\u2010smart\u00a0contracts\u00a0being\u00a0executed\u00a0or\u00a0abnormal\u00a0situations\u00a0co respond\u2010 ing\u00a0to\u00a0each\u00a0state.\u00a0AP\u00a0is\u00a0the\u00a0set\u00a0of\u00a0atomic\u00a0propositions.\u00a0S\u00a0=\u00a0\ud835\udc46 \u2228 \ud835\udc46 \u00a0is\u00a0a\u00a0collec\u2010 tion\u00a0of\u00a0all\u00a0state\u00a0spaces;\u00a0P:\u00a0S\u00a0 \u00a0S\u00a0\u2192\u00a0[0,\u00a01]\u00a0is\u00a0the\u00a0state\u00a0transition\u00a0matrix,\u00a0indicating\u00a0whether\u00a0 it\u00a0will\u00a0transition\u00a0from\u00a0one\u00a0state\u00a0to\u00a0another\u00a0and\u00a0the\u00a0probab lity\u00a0of\u00a0transition.\u00a0\nEach\u00a0state\u00a0of\u00a0the\u00a0DTMC\u00a0model\u00a0co responds\u00a0to\u00a0an\u00a0event\u00a0in\u00a0the\u00a0BPMN\u00a0diagram.\u00a0The\u00a0 transitions\u00a0 betw en\u00a0 states\u00a0 co respond\u00a0 to\u00a0 the\u00a0migration\u00a0 of\u00a0 events.\u00a0The\u00a0 sequence\u00a0 flows\u00a0 and\u00a0me sage\u00a0flows\u00a0in\u00a0the\u00a0BPMN\u00a0description\u00a0represen \u00a0the\u00a0completion\u00a0of\u00a0the\u00a0port\u00a0su ply\u00a0 chain\u00a0 sub\u2010proce s\u00a0of\u00a0 the\u00a0previous\u00a0department\u00a0 and\u00a0 the\u00a0procedures\u00a0of\u00a0 the\u00a0next\u00a0depart\u2010 ment.\u00a0The\u00a0co responding\u00a0ma ping\u00a0rules\u00a0are\u00a0shown\u00a0in\u00a0Table\u00a02.\u00a0The\u00a0left\u00a0side\u00a0of\u00a0the\u00a0table\u00a0 is\u00a0the\u00a0sub\u2010proce s\u00a0of\u00a0the\u00a0BPMN\u00a0components,\u00a0and\u00a0the\u00a0right\u00a0side\u00a0is\u00a0the\u00a0co responding\u00a0sub\u2010 proce s\u00a0of\u00a0the\u00a0DTMC\u00a0model.\u00a0We\u00a0automate\u00a0this\u00a0proce s\u00a0by\u00a0Algorithm\u00a01.\u00a0\nTable\u00a02.\u00a0Ma ping\u00a0PSC\u00a0smart\u00a0contracts\u00a0in\u00a0BPMN\u00a0to\u00a0DTMC.\u00a0\nSequential\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0 Conditional\u00a0branch\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0 Cyclic\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0\nAlgorithm\u00a01\u00a0presents\u00a0a\u00a0conversion\u00a0algorithm\u00a0which\u00a0can\u00a0conver \u00a0the\u00a0PSC\u00a0smart\u00a0con\u2010 tracts\u00a0 in\u00a0BPMN\u00a0description\u00a0 into\u00a0a\u00a0DTMC\u00a0model.\u00a0The\u00a0premise\u00a0of\u00a0 the\u00a0 conversion\u00a0algo\u2010 rithm\u00a0is\u00a0to\u00a0a curately\u00a0divide\u00a0the\u00a0complete\u00a0BPMN\u00a0description\u00a0into\u00a0sub\u2010models\u00a0and\u00a0then\u00a0 map\u00a0them.\u00a0It\u00a0is\u00a0more\u00a0of\u00a0a\u00a0flowchart\u00a0level\u00a0ma ping\u00a0than\u00a0a\u00a0semantic\u00a0ma ping.\u00a0\n\u00a0\nConditional branch event conversion\nSystems\u00a02022,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 8\u00a0of\u00a021\u00a0 \u00a0\n\u00a0\ninspection\u00a0 contract\u00a0 failed\u00a0 or\u00a0 the\u00a0 goods\u00a0were\u00a0 lost;\u00a0\ud835\udc60 \u2208 \ud835\udc46 \u00a0represents\u00a0 the\u00a0 initial\u00a0 state;\u00a0L:S\u2192 2 \u00a0is\u00a0a\u00a0 label\u00a0 function\u00a0used\u00a0 to\u00a0describe\u00a0 the\u00a0set\u00a0of\u00a0propositions\u00a0on\u00a0 the\u00a0state,\u00a0 and\u00a0identify\u00a0the\u00a0sub\u2010smart\u00a0contracts\u00a0being\u00a0executed\u00a0or\u00a0abnormal\u00a0situations\u00a0correspond\u2010 ing\u00a0to\u00a0each\u00a0state.\u00a0AP\u00a0is\u00a0the\u00a0set\u00a0of\u00a0atomic\u00a0propositions.\u00a0S\u00a0=\u00a0\ud835\udc46 \u2228 \ud835\udc46 \u00a0is\u00a0a\u00a0collec\u2010 tion\u00a0of\u00a0all\u00a0state\u00a0spaces;\u00a0P:\u00a0S\u00a0 \u00a0S\u00a0\u2192\u00a0[0,\u00a01]\u00a0is\u00a0the\u00a0state\u00a0transition\u00a0matrix,\u00a0indicating\u00a0whether\u00a0 it\u00a0will\u00a0transition\u00a0from\u00a0one\u00a0state\u00a0to\u00a0another\u00a0and\u00a0the\u00a0probability\u00a0of\u00a0transition.\u00a0\nEach\u00a0state\u00a0of\u00a0the\u00a0DTMC\u00a0model\u00a0corresponds\u00a0to\u00a0an\u00a0event\u00a0in\u00a0the\u00a0BPMN\u00a0diagram.\u00a0The\u00a0 transitions\u00a0 between\u00a0 states\u00a0 correspond\u00a0 to\u00a0 the\u00a0migration\u00a0 of\u00a0 events.\u00a0The\u00a0 sequence\u00a0 flows\u00a0 and\u00a0message\u00a0flo s\u00a0in\u00a0the\u00a0BPMN\u00a0description\u00a0represent\u00a0the\u00a0completion\u00a0of\u00a0the\u00a0port\u00a0supply\u00a0 chain\u00a0 sub\u2010process\u00a0of\u00a0 the\u00a0previous\u00a0department\u00a0 and\u00a0 the\u00a0procedures\u00a0of\u00a0 the\u00a0next\u00a0depart\u2010 ment.\u00a0The\u00a0corresponding\u00a0mapping\u00a0rules\u00a0are\u00a0shown\u00a0in\u00a0Table\u00a02.\u00a0The\u00a0left\u00a0side\u00a0of\u00a0the\u00a0table\u00a0 is\u00a0the\u00a0sub\u2010process\u00a0of\u00a0the\u00a0BPMN\u00a0components,\u00a0and\u00a0the\u00a0right\u00a0side\u00a0is\u00a0the\u00a0corresponding\u00a0sub\u2010 process\u00a0of\u00a0the\u00a0DTMC\u00a0model.\u00a0We\u00a0automate\u00a0this\u00a0process\u00a0by\u00a0Algorithm\u00a01.\u00a0\nTable\u00a02.\u00a0Mapping\u00a0PSC\u00a0smart\u00a0contracts\u00a0in\u00a0BPMN\u00a0to\u00a0DTMC.\u00a0\nSequential\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0 Conditional\u00a0branch\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0 Cyclic\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0\nAlgorithm\u00a01\u00a0presents\u00a0a\u00a0conversion\u00a0algorithm\u00a0which\u00a0can\u00a0convert\u00a0the\u00a0PSC\u00a0smart\u00a0con\u2010 tracts\u00a0 in\u00a0BPMN\u00a0description\u00a0 into\u00a0a\u00a0DTMC\u00a0model.\u00a0The\u00a0premise\u00a0of\u00a0 the\u00a0 conversion\u00a0algo\u2010 rithm\u00a0is\u00a0to\u00a0accurately\u00a0divide\u00a0the\u00a0complete\u00a0BPMN\u00a0description\u00a0into\u00a0sub\u2010models\u00a0and\u00a0then\u00a0 map\u00a0them.\u00a0It\u00a0is\u00a0more\u00a0of\u00a0a\u00a0flowchart\u00a0level\u00a0mapping\u00a0than\u00a0a\u00a0semantic\u00a0mapping.\u00a0\n\u00a0\nste s\u00a0 ,\u00a0 ,\u00a0 \u00a0 \u00a0 \u00a0 I \u00a0 \u00a0 f\u00a0 \u00a0 \u00a0\n\u00a0\ni ti \u00a0 t t\u00a0 f il \u00a0 \u00a0 t \u00a0 \u00a0 \u00a0 l t;\u00a0\ud835\udc60 \ud835\udc46 \u00a0 t \u00a0 t \u00a0 i iti l\u00a0 t t ;\u00a0 : \u00a0i \u00a0 \u00a0 l l\u00a0 f ti \u00a0 \u00a0 t \u00a0 i \u00a0 t \u00a0 t\u00a0 f\u00a0 iti \u00a0 \u00a0 t \u00a0 t t ,\u00a0 \u00a0i tif \u00a0t \u00a0 \u2010 t\u00a0 t t \u00a0 i \u00a0 t \u00a0 \u00a0 l\u00a0 it ti \u00a0 \u2010 i \u00a0t \u00a0 \u00a0 t t .\u00a0 \u00a0i \u00a0t \u00a0 t\u00a0 f\u00a0 t i \u00a0 iti .\u00a0 \u00a0 \u00a0\ud835\udc46 \ud835\udc46 \u00a0i \u00a0 \u00a0 ll \u2010 ti \u00a0 f\u00a0 ll\u00a0 t t \u00a0 ;\u00a0 :\u00a0 \u00a0 \u00a0 \u00a0 \u00a0[ ,\u00a0 ]\u00a0i \u00a0t \u00a0 t t \u00a0t iti \u00a0 t i ,\u00a0i i ti \u00a0 t \u00a0 it\u00a0 ill\u00a0t iti \u00a0f \u00a0 \u00a0 t t \u00a0t \u00a0 t \u00a0 \u00a0t \u00a0 ilit \u00a0 f\u00a0t iti .\u00a0 \u00a0 t t \u00a0 f\u00a0t \u00a0 \u00a0 l\u00a0 \u00a0t \u00a0 \u00a0 t\u00a0i \u00a0t \u00a0 \u00a0 i .\u00a0 \u00a0 t iti \u00a0 t \u00a0 t t \u00a0 \u00a0 t \u00a0 t \u00a0 i ti \u00a0 f\u00a0 t .\u00a0 \u00a0 \u00a0 fl \u00a0\n\u00a0 \u00a0fl w \u00a0i \u00a0t \u00a0 \u00a0 i ti \u00a0 t\u00a0t \u00a0 l ti \u00a0 f\u00a0t \u00a0 t\u00a0 l \u00a0 i \u00a0 \u2010 \u00a0 f\u00a0 t \u00a0 i \u00a0 t t\u00a0 \u00a0 t \u00a0 \u00a0 f\u00a0 t \u00a0 t\u00a0 t\u2010 t.\u00a0 \u00a0 i \u00a0 i \u00a0 l \u00a0 \u00a0 \u00a0i \u00a0 l \u00a0 .\u00a0 \u00a0l ft\u00a0 i \u00a0 f\u00a0t \u00a0t l \u00a0\ni \u00a0t \u00a0 \u2010 \u00a0 f\u00a0t \u00a0 \u00a0 t ,\u00a0 \u00a0t \u00a0 i t\u00a0 i \u00a0i \u00a0t \u00a0 i \u00a0 \u2010 \u00a0 f\u00a0t \u00a0 \u00a0 l.\u00a0 \u00a0 t t \u00a0t i \u00a0 \u00a0 \u00a0 l it \u00a0 .\u00a0\nl \u00a0 .\u00a0 i \u00a0 \u00a0s rt\u00a0 tr ts\u00a0i \u00a0 \u00a0t \u00a0 .\u00a0\nti l\u00a0 t\u00a0 r i \u00a0\n\u00a0 \u00a0 iti l\u00a0 r \u00a0 t\u00a0 r i \u00a0\n\u00a0 \u00a0 li \u00a0 t\u00a0 r i \u00a0\n\u00a0 \u00a0\nl it \u00a0 \u00a0 t \u00a0 \u00a0 i \u00a0 l it \u00a0 i \u00a0 \u00a0 t\u00a0t \u00a0 \u00a0 t\u00a0 \u2010 t t \u00a0 i \u00a0 \u00a0 i ti \u00a0 i t \u00a0 \u00a0 \u00a0 l.\u00a0 \u00a0 i \u00a0 f\u00a0 t \u00a0 i \u00a0 l \u2010 it \u00a0i \u00a0t \u00a0 t l \u00a0 i i \u00a0t \u00a0 l t \u00a0 \u00a0 i ti \u00a0i t \u00a0 \u2010 l \u00a0 \u00a0t \u00a0\n\u00a0t .\u00a0It\u00a0i \u00a0 \u00a0 f\u00a0 \u00a0fl t\u00a0l l\u00a0 i \u00a0t \u00a0 \u00a0 ti \u00a0 i .\u00a0 \u00a0\nCyclic event conversion\nSystems\u00a02022,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 8\u00a0of\u00a021\u00a0 \u00a0\n\u00a0\ninspection\u00a0 contract\u00a0 failed\u00a0 or\u00a0 the\u00a0 goods\u00a0were\u00a0 lost;\u00a0\ud835\udc60 \u2208 \ud835\udc46 \u00a0represents\u00a0 the\u00a0 initial\u00a0 state;\u00a0L:S\u2192 2 \u00a0is\u00a0a\u00a0 label\u00a0 function\u00a0used\u00a0 to\u00a0describe\u00a0 the\u00a0set\u00a0of\u00a0propositions\u00a0on\u00a0 the\u00a0state,\u00a0 and\u00a0identify\u00a0the\u00a0sub\u2010smart\u00a0contracts\u00a0being\u00a0executed\u00a0or\u00a0abnormal\u00a0situations\u00a0correspond\u2010 ing\u00a0to\u00a0each\u00a0state.\u00a0AP\u00a0is\u00a0the\u00a0set\u00a0of\u00a0atomic\u00a0propositions.\u00a0S\u00a0=\u00a0\ud835\udc46 \u2228 \ud835\udc46 \u00a0is\u00a0a\u00a0collec\u2010 tion\u00a0of\u00a0all\u00a0state\u00a0spaces;\u00a0P:\u00a0S\u00a0 \u00a0S\u00a0\u2192\u00a0[0,\u00a01]\u00a0is\u00a0the\u00a0state\u00a0transition\u00a0matrix,\u00a0indicating\u00a0whether\u00a0 it\u00a0will\u00a0transition\u00a0from\u00a0one\u00a0state\u00a0to\u00a0another\u00a0and\u00a0the\u00a0probability\u00a0of\u00a0transition.\u00a0\nEach\u00a0state\u00a0of\u00a0the\u00a0DTMC\u00a0model\u00a0corresponds\u00a0to\u00a0an\u00a0event\u00a0in\u00a0the\u00a0BPMN\u00a0diagram.\u00a0The\u00a0 transitions\u00a0 between\u00a0 states\u00a0 correspond\u00a0 to\u00a0 the\u00a0migration\u00a0 of\u00a0 events.\u00a0The\u00a0 sequence\u00a0 flows\u00a0 and\u00a0message\u00a0flows\u00a0in\u00a0the\u00a0BPMN\u00a0description\u00a0represent\u00a0the\u00a0completion\u00a0of\u00a0the\u00a0port\u00a0supply\u00a0 chain\u00a0 sub\u2010process\u00a0of\u00a0 the\u00a0previous\u00a0department\u00a0 and\u00a0 the\u00a0procedures\u00a0of\u00a0 the\u00a0next\u00a0depart\u2010 ment.\u00a0The\u00a0corresponding\u00a0mapping\u00a0rules\u00a0are\u00a0shown\u00a0in\u00a0Table\u00a02.\u00a0The\u00a0left\u00a0side\u00a0of\u00a0the\u00a0table\u00a0 is\u00a0the\u00a0sub\u2010process\u00a0of\u00a0the\u00a0BPMN\u00a0components,\u00a0and\u00a0the\u00a0right\u00a0side\u00a0is\u00a0the\u00a0corresponding\u00a0sub\u2010 process\u00a0of\u00a0the\u00a0DTMC\u00a0model.\u00a0We\u00a0automate\u00a0this\u00a0process\u00a0by\u00a0Algorithm\u00a01.\u00a0\nTable\u00a02.\u00a0Mapping\u00a0PSC\u00a0smart\u00a0contracts\u00a0in\u00a0BPMN\u00a0to\u00a0DTMC.\u00a0\nSeque tial\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0 Conditional\u00a0branch\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0 Cyclic\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0\nAlgorithm\u00a01\u00a0presents\u00a0a\u00a0conversion\u00a0algorithm\u00a0which\u00a0can\u00a0convert\u00a0the\u00a0PSC\u00a0smart\u00a0con\u2010 tracts\u00a0 in\u00a0BPMN\u00a0description\u00a0 into\u00a0a\u00a0DTMC\u00a0model.\u00a0The\u00a0premise\u00a0of\u00a0 the\u00a0 conversion\u00a0algo\u2010 rithm\u00a0is\u00a0to\u00a0accurately\u00a0divide\u00a0the\u00a0complete\u00a0BPMN\u00a0description\u00a0into\u00a0sub\u2010models\u00a0and\u00a0then\u00a0 map\u00a0them.\u00a0It\u00a0is\u00a0more\u00a0of\u00a0a\u00a0flowchart\u00a0level\u00a0mapping\u00a0than\u00a0a\u00a0semantic\u00a0mapping.\u00a0\n\u00a0\nSystems\u00a02022,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 8\u00a0of\u00a021\u00a0 \u00a0\n\u00a0\ninspection\u00a0 contract\u00a0 failed\u00a0 or\u00a0 the\u00a0 goods\u00a0were\u00a0 lost;\u00a0\ud835\udc60 \u2208 \ud835\udc46 \u00a0represents\u00a0 the\u00a0 initial\u00a0 state;\u00a0L:S\u2192 2 \u00a0is\u00a0a\u00a0 label\u00a0 function\u00a0used\u00a0 to\u00a0describe\u00a0 the\u00a0set\u00a0of\u00a0propositions\u00a0on\u00a0 the\u00a0state,\u00a0 and\u00a0identify\u00a0the\u00a0sub\u2010smart\u00a0contracts\u00a0being\u00a0executed\u00a0or\u00a0abnormal\u00a0situations\u00a0correspond\u2010 ing\u00a0to\u00a0each\u00a0state.\u00a0AP\u00a0is\u00a0the\u00a0set\u00a0of\u00a0atomic\u00a0propositions.\u00a0S\u00a0=\u00a0\ud835\udc46 \u2228 \ud835\udc46 \u00a0is\u00a0a\u00a0collec\u2010 tion\u00a0of\u00a0all\u00a0state\u00a0spaces;\u00a0P:\u00a0S\u00a0 \u00a0S\u00a0\u2192\u00a0[0,\u00a01]\u00a0is\u00a0the\u00a0state\u00a0transition\u00a0 atrix,\u00a0indicating\u00a0whether\u00a0 it\u00a0will\u00a0transition\u00a0from\u00a0one\u00a0state\u00a0to\u00a0another\u00a0and\u00a0the\u00a0probability\u00a0of\u00a0transition.\u00a0\nEach\u00a0state\u00a0of\u00a0the\u00a0DTMC\u00a0model\u00a0corresponds\u00a0to\u00a0an\u00a0event\u00a0in\u00a0the\u00a0BPMN\u00a0diagram.\u00a0The\u00a0 transitions\u00a0 between\u00a0 states\u00a0 correspond\u00a0 to\u00a0 the\u00a0migration\u00a0 of\u00a0 events.\u00a0The\u00a0 sequence\u00a0 flows\u00a0 and\u00a0message\u00a0flows\u00a0in\u00a0the\u00a0BPMN\u00a0 escription\u00a0represent\u00a0the\u00a0completion\u00a0of\u00a0the\u00a0port\u00a0supply\u00a0 chain\u00a0 sub\u2010process\u00a0of\u00a0 the\u00a0previous\u00a0department\u00a0 and\u00a0 the\u00a0procedures\u00a0of\u00a0 the\u00a0next\u00a0depart\u2010 ment.\u00a0The\u00a0corresponding\u00a0mapping\u00a0rules\u00a0are\u00a0shown\u00a0in\u00a0Table\u00a02.\u00a0The\u00a0left\u00a0side\u00a0of\u00a0the\u00a0table\u00a0 is\u00a0the\u00a0sub\u2010process\u00a0of\u00a0the\u00a0BPMN\u00a0components,\u00a0and\u00a0the\u00a0right\u00a0side\u00a0is\u00a0the\u00a0corresponding\u00a0sub\u2010 process\u00a0of\u00a0the\u00a0DTMC\u00a0model.\u00a0We\u00a0automate\u00a0this\u00a0process\u00a0by\u00a0Algorithm\u00a01.\u00a0\nTable\u00a02.\u00a0Mapping\u00a0PSC\u00a0smart\u00a0contracts\u00a0in\u00a0BPMN\u00a0to\u00a0DTMC.\u00a0\nSequential\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0 Conditional\u00a0branch\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0 Cyclic\u00a0event\u00a0conversion\u00a0\n\u00a0 \u00a0\nAlgorithm\u00a01\u00a0presents\u00a0a\u00a0conversion\u00a0algorithm\u00a0which\u00a0can\u00a0convert\u00a0the\u00a0PSC\u00a0smart\u00a0con\u2010 tracts\u00a0 in\u00a0BPMN\u00a0description\u00a0 into\u00a0a\u00a0DTMC\u00a0model.\u00a0The\u00a0premise\u00a0of\u00a0 the\u00a0 conversion\u00a0algo\u2010 rithm\u00a0is\u00a0to\u00a0accurately\u00a0divide\u00a0the\u00a0complete\u00a0BPMN\u00a0description\u00a0into\u00a0sub\u2010models\u00a0and\u00a0then\u00a0 map\u00a0them.\u00a0It\u00a0is\u00a0more\u00a0of\u00a0a\u00a0flowchart\u00a0level\u00a0mapping\u00a0than\u00a0a\u00a0se antic\u00a0mapping.\u00a0\n\u00a0\nlgorith 1 presents a conversion algorith hich can convert the PS s art contracts in BPMN description into a DTMC model. The premise f the conversion algorithm is to accurately divide the complete BPMN description into sub-m dels and th n ap them. I is more of a flowchart lev l mapping than a semantic mapping. The algorithm takes the events, activities a d gateways of the BPMN as an input, and performs the foll wing operations: first, the cou ter s that records the number of nesting times is set to zero, the initial event E0 is pushed into the stack STATES, and then the following loop is started. The purpose is to add each node of the BPMN to Array[]. Pop the event m from the stack to Array, and make the following judgment: if m belongs to {S (Original Event), AM (Manual Activity), AS (Script Activity), AB (Business Activity)}, push all the subsequent nodes n \u2208 LATER(m) that meet the conditions into Array[], and emit them into the DTMC state variable. If the node n does not belong to events, activities, and two restricted gateways (decision gateway and Parallel gateway), the node will pop out. However, for Decision Gateway GD and Parallel Gateway GP, it needs to be converted in the order of GP first and GD later, which is placed in SUBPROCESS here.\nSystems 2022, 10, 19 9 of 20\nAlgorithm 1: DTMC Model Mapping\nInput: BPMN = (E, AM, AS, AB, GD, GP) Output: DTMC[s] 1 s\u21900 2 STATES.PUSH(E0) 3 while STATES 6= \u2205 do 4 m\u2190STATES.POP() 5 Array[]\u2190m 6 if (m \u2208 S \u222a AM \u222a AS \u222a AB) then 7 for all the n \u2208 LATER(m) do 8 Array[]\u2190 Array[] \u222a (m,n) 9 Emit Array[] 10 DTMC[s]\u2190Array[] 11 Prob[]\u2190p 12 s\u2190 s + 1 13 if (n /\u2208 BPMN[]) then 14 Array[].PUSH(n) 15 SUBPROCESS\u2190 \u2205 16 if (x \u2208 GD) then 17 STATES.PUSH(GD) 18 Search for GP 19 STATES.PUSH(GP) 20 x\u2190STATES.POP() 21 y\u2190STATES.POP() 22 Array[]\u2190(x,y) 23 Emit Array[] 24 DTMC[s]\u2190Array[] 25 x\u2190 x + 1 26 y\u2190 y + 1 27 s\u2190 s + 1 28 END SUBPROCESS\nTheorem 1. For a BPMN process, if it can be transformed into a DTMC, the process must be physically reachable.\nProof. Let the highest layer of the DTMC be k, the next higher layers are k \u2212 1, k \u2212 2, . . . , and the lowest layer is 0. There is only a sequential structure at the k layer. For a BPMN with only a sequential structure, all states are physically reachable, so the subnet is physically reachable. At the k \u2212 1 layer, all k layer subnets are represented by nodes such as events and gateways, and the k \u2212 1 layer has only a sequential structure. Therefore, the k \u2212 1 layer including the k layer is also physically reachable. By analogy, all states of layer 0 are physically reachable, so that the DTMC model is physically reachable.\nAlgorithm 1 has an upper complexity bound of O ( n2 ) , where n is the number of nodes\nin the BPMN process. The upper limit corresponds to the cumbersome degree of the supply chain process. In the most common case, only the decision gateway appears in the BPMN process, and there are no different types of gateway nesting."
        },
        {
            "heading": "3.4. Properties Specification",
            "text": "We use PCTL to specify a set of user requirements. PCTL is defined by the following syntax:\n\u03a6 ::= true|a|\u03a6 \u2227\u03a6|\u00ac\u03a6|P./p(\u03a8) (1) \u03a8 ::= X\u03a6 \u2223\u2223\u2223\u03a6U\u2264t\u03a6 (2)\nwhere p \u2208 [0, 1], ./\u2208 [< ,\u2264, >,\u2265], t \u2208 R\u22650, a is the atomic proposition. The tense operators X and U are called Next and Until, which is the same as the temporal logic. The formulas\nSystems 2022, 10, 19 10 of 20\nproduced by \u03a6 are called state formulas, and their true value can be judged by the true value of each state included. The formulas generated by \u03a8 are called path formulas, and their true value needs to be evaluated by calculating each execution path. In most cases, \u03a6 only describes the atomic proposition corresponding to the absorption state. When it describes the failure state, the probability constraint is expressed as \u2264x, where x is the upper bound of the failure probability; when it describes the success state, the probability constraint is expressed as \u2265 x, where x is the lower bound of the probability of success. As shown in Table 3, we set up the following DTMC states to model the status of PSC smart contracts, respectively, to make the property specification more universal. CurrentSup represents the extent of the supplier link among them. Since there is more than one supplier, goods circulation and fund exchange are between suppliers, and they also bring out the document information, thus, it is necessary to split this link in order to present the smart contract of each exchange process. There is a multimodal transportation situation in the transportation part. CurrentTrans is used to present the sub-contracts generated by different transportation means or different transportation stages of the same transportation means, and it is used to track the steps of the transportation link. There will be multiple buyers or distributors in the procurement process, and CurrentPur is used to track the progress of the goods flowing among the buyers. EndSup, EndTrans, EndPur are Boolean variables used to monitor whether the supplier link, transportation link, and purchase link are actually completed or not. The completion is 1, and the error is 0. Finally, we use CurrentPSC and EndPSC to monitor the progress of the entire port supply chain (m, n, u \u2264 v).\nOn the basis of the above states\u2019 definition, we specify requirement and regulation properties for the PSC smart contracts. Property 1: What is the probability that a certain batch of goods will complete the entire port supply chain smart contract?\nP =?[ F(CurrentPSC = v)&(EndPSC = 1)] (3)\nSince it is impossible to guarantee the smooth completion of each branch chain in the actual process, the probability is usually less than 1. Under the premise that all links are not required to be perfectly realized, we can make the probability interval in [0.95,1] fuzzy to 1, so that people can compare the actual value with the expected value.\nFor the three links, there can be more detailed specifications as follows: Property 2: What is the probability that the supplier link smart contracts are completed\nbut the entire process of the port supply chain is not completed?\nP =? [ F ( EndSup = 1 ) &(EndPSC = 0) ] (4)\nProperty 3: What is the probability that the transportation link smart contracts are completed but the entire process is not completed?\nP =?[F(EndTrans = 1)&(EndPSC = 0)] (5)\nSystems 2022, 10, 19 11 of 20\nProperty 4: What is the probability that the procurement process of the smart contracts are completed but the entire process is not completed?\nP =?[F(EndPur = 1)&(EndPSC = 0)] (6)\nThe above three properties allow the port supply chain supervision agency to track the completion of a certain batch of goods in a timely manner, but it is impossible to know where the problem lies when the probability drops. Therefore, we propose the following three more detailed specifications: Property 5: What is the probability that the supplier link progresses to the step x(x < m) but the total status of the supplier link smart contracts are completed and the whole process status is also completed?\nP =? [ F ( CurrentSup = x ) & ( EndSup = 1 ) &(EndPSC = 0) ] (7)\nProperty 6: What is the probability that the transportation link progresses to the step y(y < n) but the total status of the transportation link smart contracts are completed and the whole process status is also completed?\nP =? [ F ( EndSup = 1 ) &(CurrentTrans = y)&(EndTrans = 1)&(EndPSC = 0) ] (8)\nProperty 7: What is the probability that the procurement process progresses to the step z(z < u) but the overall status of the procurement process smart contracts are completed and the whole process status is also completed?\nP =?[F(EndTrans = 1)&(CurrentPur = z)&(EndPur = 1)&(EndPSC = 0)] (9)\n3.4.1. Accuracy\nThe accuracy of the migration rate must be ensured before model checking. Due to the different levels of manual participation in each link of the port supply chain, we define the manual participation time between all levels of the suppliers as \u03bb1~\u03bbM, and the manual participation time between all levels of the purchasers as \u00b51~\u00b5N , where necessary participation time is defined as \u03bbm and \u00b5n, respectively, and the accuracy is analyzed through the rewards structure in PRISM.\nRandomly generate 1\u03bb and 1 \u00b5 under different node numbers, and the accuracy of the\nentire model is shown in Table 4. Obviously, when the number of sub-contracts is too large, it will greatly affect the completion of the entire process and reduce the operating efficiency of the main contract.\nThe essence of reachability analysis is to check whether each smart contract is effectively invoked. Each sub-contract of the port supply chain running on the blockchain\nSystems 2022, 10, 19 12 of 20\nplatform must be accurately invoked and effectively executed to ensure the smooth progress of the entire process. However, in reality, it is difficult to ensure that the hash values of each sub-contract are consistent. We created a module for each contract model. If the contract verification fails, it will be marked as affected, otherwise it will be marked as correct. We designed an algorithm to verify reachability which is shown in Algorithm 2. We can initially obtain whether the status of each sub-process is reachable and whether the status result is true. If the total process is true, then further calculations can be made.\nAlgorithm 2: Reachability algorithm\nInput: the property formula to be verified F Output: True, False 1. Preprocess F, if the formula is false, return False 2. Select the next state variable that has no value 3. Deduction 4. The derived formula = = true, return True 5. Conflict, then 6. Analyze the conflict and go back 7. Cannot go back, return False 8. No conflict is deduced, return to Step 2\nTaking three supply terminal processes as an example, the PRISM module code is as follows in Algorithm 3:\nAlgorithm 3: PRISM module code of three supply terminal processes\nmodule Sup_1 Sup1_affected: bool init false; [Sup1_affected] = false & M> = m\u2192 (Sup1_affected\u2019 = true); [Sup2_correct] Sup2_correct_SupplierSC = true & Sup1_affected = true\u2192 1:true; [Sup3_correct] Sup3_correct_SupplierSC = true & Sup1_affected = true\u2192 1:true; endmodule"
        },
        {
            "heading": "4. Case Study",
            "text": "We have selected the port customs clearance process of port supply chains as a case study. Import and export customs procedures refer to the activities of going through customs procedures for inbound and outbound goods that are subject to different customs systems in accordance with the law. The way that customs clearance has changed from the traditional \u2018territorial declarationport inspection and release\u2018 to the current \u2018integrated customs clearance\u2019 is that various obstacles between departments and regions have basically been cleared. However, there are still many cumbersome processes that have not been eliminated. Figure 4a shows that according to the 2020 Shanghai Water Transport Port Container Freight Cross-border Trade Expenses and Compliance Cost Assessment Report, the shipping company\u2019s document fee reached JPY 1071, which is an amazing proportion. Figure 4b shows that in the questionnaires for import and export companies (55 import responses and 52 export responses), the replies with subjective experience higher than the average mainly focused on customs declaration fees, order replacement fees, and terminal THC (Terminal Handling Charge) fees. It can be seen that there is still a lot of room for optimization in the port supply chain customs clearance process. For the convenience of research, we model the macroscopic customs clearance process smart contracts. The macro-level customs clearance process includes multiple suppliers, purchasers and transportation links. In order to promote the linkage between ports and shipping enterprises, speed up the application and information sharing of digital platforms, and promote the electronic release of imported containers based on blockchain, we have tentatively conducted pilot projects in the Shanghai Yangshan port of China. We cooperated with the Shanghai Yangshan Port to upload and model\nSystems 2022, 10, 19 13 of 20\nits customs clearance process, reducing the average processing time of major imported e-commerce cargo documents from 2 days to less than 4 h.\nSystems\u00a02022,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 13\u00a0of\u00a021\u00a0 \u00a0\n\u00a0\n4.\u00a0Case\u00a0Study\u00a0 We\u00a0have\u00a0selected\u00a0the\u00a0port\u00a0customs\u00a0clearance\u00a0process\u00a0of\u00a0port\u00a0supply\u00a0chains\u00a0as\u00a0a\u00a0case\u00a0 study.\u00a0 Import\u00a0 and\u00a0 export\u00a0 customs\u00a0procedures\u00a0 refer\u00a0 to\u00a0 the\u00a0 activities\u00a0of\u00a0going\u00a0 through\u00a0 customs\u00a0procedures\u00a0for\u00a0 inbound\u00a0and\u00a0outbound\u00a0goods\u00a0 that\u00a0are\u00a0subject\u00a0 to\u00a0different\u00a0cus\u2010 toms\u00a0systems\u00a0in\u00a0accordance\u00a0with\u00a0the\u00a0law.\u00a0\nThe\u00a0way\u00a0that\u00a0customs\u00a0clearance\u00a0has\u00a0changed\u00a0from\u00a0the\u00a0traditional\u00a0\u2018territorial\u00a0decla\u2010 ration\u2010port\u00a0 inspection\u00a0and\u00a0release\u2018\u00a0 to\u00a0 the\u00a0current\u00a0 \u2018integrated\u00a0customs\u00a0clearance\u2019\u00a0 is\u00a0 that\u00a0 various\u00a0obstacles\u00a0between\u00a0departments\u00a0and\u00a0regions\u00a0have\u00a0basically\u00a0been\u00a0cleared.\u00a0How\u2010 ever,\u00a0there\u00a0are\u00a0still\u00a0many\u00a0cumbersome\u00a0processes\u00a0that\u00a0have\u00a0not\u00a0been\u00a0eliminated.\u00a0Figure\u00a0 4a\u00a0shows\u00a0 that\u00a0according\u00a0 to\u00a0 the\u00a02020\u00a0Shanghai\u00a0Water\u00a0Transport\u00a0Port\u00a0Container\u00a0Freight\u00a0 Cross\u2010border\u00a0 Trade\u00a0 Expenses\u00a0 and\u00a0Compliance\u00a0Cost\u00a0Assessment\u00a0Report,\u00a0 the\u00a0 shipping\u00a0 company\u2019s\u00a0document\u00a0fee\u00a0reached\u00a0JPY\u00a01071,\u00a0which\u00a0is\u00a0an\u00a0amazing\u00a0proportion.\u00a0Figure\u00a04b\u00a0 shows\u00a0that\u00a0in\u00a0the\u00a0questionnaires\u00a0for\u00a0import\u00a0and\u00a0export\u00a0companies\u00a0(55\u00a0import\u00a0responses\u00a0 and\u00a052\u00a0export\u00a0responses),\u00a0the\u00a0replies\u00a0with\u00a0subjective\u00a0experience\u00a0higher\u00a0than\u00a0the\u00a0average\u00a0 mainly\u00a0focused\u00a0on\u00a0customs\u00a0declaration\u00a0fees,\u00a0order\u00a0replacement\u00a0fees,\u00a0and\u00a0terminal\u00a0THC\u00a0 (Terminal\u00a0Handling\u00a0Charge)\u00a0fees.\u00a0It\u00a0can\u00a0be\u00a0seen\u00a0that\u00a0there\u00a0is\u00a0still\u00a0a\u00a0lot\u00a0of\u00a0room\u00a0for\u00a0opti\u2010 mization\u00a0in\u00a0the\u00a0port\u00a0supply\u00a0chain\u00a0customs\u00a0clearance\u00a0process.\u00a0For\u00a0the\u00a0convenience\u00a0of\u00a0re\u2010 search,\u00a0we\u00a0model\u00a0the\u00a0macroscopic\u00a0customs\u00a0clearance\u00a0process\u00a0smart\u00a0contracts.\u00a0The\u00a0mac\u2010 ro\u2010level\u00a0customs\u00a0clearance\u00a0process\u00a0includes\u00a0multiple\u00a0suppliers,\u00a0purchasers\u00a0and\u00a0transpor\u2010 tation\u00a0 links.\u00a0 In\u00a0order\u00a0 to\u00a0promote\u00a0 the\u00a0 linkage\u00a0between\u00a0ports\u00a0 and\u00a0 shipping\u00a0 enterprises,\u00a0 speed\u00a0up\u00a0the\u00a0application\u00a0and\u00a0information\u00a0sharing\u00a0of\u00a0digital\u00a0platforms,\u00a0and\u00a0promote\u00a0the\u00a0 electronic\u00a0release\u00a0of\u00a0imported\u00a0containers\u00a0based\u00a0on\u00a0blockchain,\u00a0we\u00a0have\u00a0tentatively\u00a0con\u2010 ducted\u00a0pilot\u00a0projects\u00a0 in\u00a0the\u00a0Shanghai\u00a0Yangshan\u00a0port\u00a0of\u00a0China.\u00a0We\u00a0cooperated\u00a0with\u00a0the\u00a0 Shanghai\u00a0Yangshan\u00a0Port\u00a0 to\u00a0upload\u00a0and\u00a0model\u00a0 its\u00a0customs\u00a0clearance\u00a0process,\u00a0 reducing\u00a0 the\u00a0 average\u00a0 processing\u00a0 time\u00a0 of\u00a0major\u00a0 imported\u00a0 e\u2010comm rce\u00a0 cargo\u00a0 documents\u00a0 fr m\u00a0 2\u00a0 days\u00a0to\u00a0less\u00a0than\u00a04\u00a0h.\u00a0\nFigure\u00a04.\u00a0Disadvantages\u00a0in\u00a0the\u00a0customs\u00a0clearance\u00a0process\u00a0(a)\u00a0The\u00a0proportion\u00a0of\u00a0various\u00a0expenses\u00a0 in\u00a0customs\u00a0clearance\u00a0expenses;\u00a0 (b)\u00a0Customs\u00a0clearance\u00a0 fees\u00a0and\u00a0exchange\u00a0 fees\u00a0account\u00a0 for\u00a0a\u00a0high\u00a0 proportion.\u00a0\nAppendix\u00a0A\u00a0is\u00a0a\u00a0simplified\u00a0version\u00a0of\u00a0the\u00a0on\u2010site\u00a0customs\u00a0declaration\u00a0manual\u00a0for\u00a0a\u00a0 certain\u00a0customs\u2019\u00a0rapid\u00a0customs\u00a0clearance.\u00a0We\u00a0can\u00a0see\u00a0that\u00a0for\u00a0import\u00a0and\u00a0export\u00a0compa\u2010 nies,\u00a0they\u00a0have\u00a0to\u00a0fill\u00a0in\u00a0a\u00a0large\u00a0number\u00a0of\u00a0forms\u00a0and\u00a0provide\u00a0a\u00a0large\u00a0number\u00a0of\u00a0letters\u00a0 each\u00a0time\u00a0they\u00a0import\u00a0customs\u00a0clearance\u00a0and\u00a0export\u00a0customs\u00a0clearance,\u00a0which\u00a0is\u00a0the\u00a0root\u00a0 cause\u00a0affecting\u00a0the\u00a0efficiency\u00a0of\u00a0customs\u00a0clearance.\u00a0\n4.1.\u00a0Modeling\u00a0Smart\u00a0Contracts\u00a0of\u00a0the\u00a0Port\u00a0Customs\u00a0Clearance\u00a0Process\u00a0 Suppliers\u00a0need\u00a0 to\u00a0 fill\u00a0 in\u00a0a\u00a0 large\u00a0amount\u00a0of\u00a0contract\u00a0 information\u00a0during\u00a0 the\u00a0export\u00a0 stage\u00a0of\u00a0goods,\u00a0such\u00a0as\u00a0manifest\u00a0contracts,\u00a0inspection\u00a0and\u00a0quarantine\u00a0contracts,\u00a0and\u00a0tax\u00a0 payment\u00a0contracts\u00a0mentioned\u00a0 in\u00a0Appendix\u00a0A.\u00a0The\u00a0customs\u00a0clearance\u00a0process\u00a0 is\u00a0an\u00a0 im\u2010\nAppendix A is a simplified version of the on-site customs declaration manual for a certain customs\u2019 rapid customs clearance. We can see that for import and export companies, they have to fill in a large number of forms and provide a large number of letters each time they import customs clearance and export customs clearance, which is the root cause affecting the efficiency of customs clearance.\nneed to fill in a large amount of c ntrac information during the export stage of oods, such a manifest contracts, inspection and quarantine contracts, a d tax p yment contracts mentioned in Append x . The customs cl arance proc ss is an important section of the port supply chain, in which all the import and export goods must go through various procedures of entry inspection when they arrive in another country. It plays a critical role in order to ensure the safety of the goods and enable the owner to pick them up smoothly. However, each port department has different requirements for verification of contract internal information. For example, the customs department needs to check the goods required to pay customs duties and tax deductions according to law, while reviewing the value and exchange rate of the goods, the customs declaration department needs to proofread the delivery, loading and transportation information in the manifest, and the quarantine department needs to check whether the quarantine information of the cargo is effective. All departments must upload the results to the smart contract after completing the information verification. The validation of each document is time-consuming. The whole process takes 2\u20133 days, however, it only takes a few hours to validate with a smart contract, instead of manual validation. There are many reasons for difficulties and these can be divided into two categories: external and internal. External reasons may include delays caused by weather conditions, lower-than-expected quality of raw materials, delays caused by the dispatch of containers in and out of the port, and supplier or purchaser\u2019s breach of contract. Internal reasons may be caused by improper filling of contract information. In the smart contracts of various links in the port supply chain, there is information, such as Port Loading, Port Discharging, Cargo Description, Consignee\u2019s name and address, which is greatly affected by the filling specifications, and there is a considerable probability that the hash verification will not pass. This article only discusses external reasons. Since a certain container or a certain ship of goods corresponds to a large number of suppliers, the failure of any supplier\u2019s sub-contract will have an impact on the entire\nSystems 2022, 10, 19 14 of 20\nsupplier contract, so the relationship between each supplier\u2019s sub-contract is \u2018And\u2019. There is a calling relationship between contracts. When different types of suppliers upload information and call contracts, there is a certain probability that they will default. For each supplier, when completing the various processes in Appendix A, such as filling in the manifest smart contract, completing the export customs declaration smart contract, or applying for the customs clearance inspection and quarantine smart contract, there will be a certain probability that they will not pass. At the same time, purchasers also face the same problems when applying for an import customs clearance smart contract and completing tariff contracts. In this article, we consider such a situation: for a supplier\u2019s cross-border transportation smart contract, three different departments are required to review at the export terminal which are independent of each other. During the cargo transportation stage, only the mode of transportation within the port is considered. When goods arrive at the port for the import process, three different departments are also required. Every department needs an auditor to proofread the information. The BPMN description of smart contracts from the customs clearance process is shown in Figure 5. Systems\u00a02022,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 15\u00a0of\u00a021\u00a0 \u00a0\n\u00a0\n\u00a0\nFigure\u00a05.\u00a0The\u00a0BPMN\u00a0description\u00a0of\u00a0smart\u00a0contracts\u00a0from\u00a0the\u00a0port\u00a0customs\u00a0clearance\u00a0process.\u00a0\nSmart\u00a0contracts\u00a0in\u00a0BPMN\u00a0description\u00a0can\u00a0be\u00a0converted\u00a0into\u00a0a\u00a0DTMC\u00a0model\u00a0through\u00a0 Algorithm\u00a01\u00a0and\u00a0shown\u00a0in\u00a0Figure\u00a06.\u00a0Three\u00a0auditors\u00a0correspond\u00a0to\u00a0the\u00a0customs\u00a0declara\u2010 tion\u00a0department,\u00a0 the\u00a0 taxation\u00a0department,\u00a0 and\u00a0 the\u00a0 inspection\u00a0 and\u00a0 quarantine\u00a0depart\u2010 ment,\u00a0respectively.\u00a0Some\u00a0goods,\u00a0such\u00a0as\u00a0bulk\u00a0goods,\u00a0do\u00a0not\u00a0need\u00a0to\u00a0be\u00a0inspected\u00a0by\u00a0the\u00a0 quarantine\u00a0department,\u00a0while\u00a0duty\u2010free\u00a0goods\u00a0do\u00a0not\u00a0need\u00a0 to\u00a0be\u00a0 reviewed\u00a0by\u00a0 the\u00a0 tax\u00a0 department.\u00a0 The\u00a0 symbol\u00a0\ud835\udc5d\u00a0represents\u00a0 the\u00a0 transition\u00a0 probability\u00a0 between\u00a0 two\u00a0 depart\u2010 ments.\u00a0\n\u00a0 Figure\u00a06.\u00a0DTMC\u00a0model\u00a0of\u00a0smart\u00a0contracts\u00a0form\u00a0the\u00a0customs\u00a0clearance\u00a0process.\u00a0\n4.2.\u00a0Verification\u00a0Results\u00a0and\u00a0Analysis\u00a0 Let\u00a0m\u00a0=\u00a0n\u00a0=\u00a0u\u00a0=\u00a03,\u00a0v\u00a0=\u00a08,\u00a0we\u00a0can\u00a0redefine\u00a0the\u00a0property\u00a0specification\u00a0in\u00a0Section\u00a03.4\u00a0as\u00a0\nfollows:\u00a0 \ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfcf:\u00a0What\u00a0is\u00a0the\u00a0probability\u00a0that\u00a0all\u00a0contracts\u00a0are\u00a0failed?\u00a0\n\ud835\udc43 ? \ud835\udc39 \ud835\udc36\ud835\udc62\ud835\udc5f\ud835\udc5f\ud835\udc52\ud835\udc5b\ud835\udc61 8 & \ud835\udc38\ud835\udc5b\ud835\udc51 0 \u00a0 (10) \ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd0\u2013\ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd2:\u00a0use\u00a0a\u00a0similar\u00a0description.\u00a0 \ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd3:\u00a0What\u00a0is\u00a0the\u00a0probability\u00a0that\u00a0the\u00a0export\u00a0contract\u00a02\u00a0is\u00a0successfully\u00a0passed\u00a0and\u00a0 the\u00a0entire\u00a0customs\u00a0clearance\u00a0process\u00a0contract\u00a0is\u00a0failed?\u00a0\n\ud835\udc43 ? \ud835\udc39 \ud835\udc36\ud835\udc62\ud835\udc5f\ud835\udc5f\ud835\udc52\ud835\udc5b\ud835\udc61 2 & \ud835\udc38\ud835\udc5b\ud835\udc51 1 & \ud835\udc38\ud835\udc5b\ud835\udc51 0 \u00a0 (11)\nFigure 5. The BPMN description of smart contracts from the port customs clearance process.\nSmart contracts in BPMN description can be converted into a DTMC model through Algorithm 1 and shown in Figure 6. Three auditors correspond to the customs declaration department, the taxation department, and the inspection and quarantine department, respectively. Some goods, such as bulk goods, do not need to be inspected by the quarantine department, while duty-free goods do not need to be reviewed by the tax department. The symbol p represents the transition probability between two departments.\nSystems\u00a02022,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 15\u00a0of\u00a021\u00a0 \u00a0\n\u00a0\n\u00a0 Figure\u00a05.\u00a0The\u00a0BPMN\u00a0description\u00a0of\u00a0smart\u00a0contracts\u00a0from\u00a0the\u00a0port\u00a0customs\u00a0clearance\u00a0process.\u00a0\nSmart\u00a0contracts\u00a0in\u00a0BPMN\u00a0description\u00a0can\u00a0be\u00a0converted\u00a0into\u00a0a\u00a0DTMC\u00a0model\u00a0through\u00a0\nAlgorithm\u00a01\u00a0and\u00a0shown\u00a0in\u00a0Figure\u00a06.\u00a0Three\u00a0auditors\u00a0correspond\u00a0to\u00a0the\u00a0customs\u00a0declara\u2010 tion\u00a0department,\u00a0 the\u00a0 taxation\u00a0department,\u00a0 and\u00a0 the\u00a0 inspection\u00a0 and\u00a0 quarantine\u00a0depart\u2010 ment,\u00a0respectively.\u00a0Some\u00a0goods,\u00a0such\u00a0as\u00a0bulk\u00a0goods,\u00a0do\u00a0not\u00a0need\u00a0to\u00a0be\u00a0inspected\u00a0by\u00a0the\u00a0 quarantine\u00a0department,\u00a0while\u00a0duty\u2010free\u00a0goods\u00a0do\u00a0not\u00a0need\u00a0 to\u00a0be\u00a0 reviewed\u00a0by\u00a0 the\u00a0 tax\u00a0 department.\u00a0 The\u00a0 symbol\u00a0\ud835\udc5d\u00a0represents\u00a0 the\u00a0 transition\u00a0 probability\u00a0 between\u00a0 two\u00a0 depart\u2010 ments.\u00a0\n\u00a0\nFigure\u00a06.\u00a0DTMC\u00a0model\u00a0of\u00a0smart\u00a0contracts\u00a0form\u00a0the\u00a0customs\u00a0clearance\u00a0process.\u00a0\n4.2.\u00a0Verification\u00a0Results\u00a0and\u00a0Analysis\u00a0 Let\u00a0m\u00a0=\u00a0n\u00a0=\u00a0u\u00a0=\u00a03,\u00a0v\u00a0=\u00a08,\u00a0we\u00a0can\u00a0redefine\u00a0the\u00a0property\u00a0specification\u00a0in\u00a0Section\u00a03.4\u00a0as\u00a0\nfollows:\u00a0 \ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfcf:\u00a0What\u00a0is\u00a0the\u00a0probability\u00a0that\u00a0all\u00a0contracts\u00a0are\u00a0failed?\u00a0\n\ud835\udc43 ? \ud835\udc39 \ud835\udc36\ud835\udc62\ud835\udc5f\ud835\udc5f\ud835\udc52\ud835\udc5b\ud835\udc61 8 & \ud835\udc38\ud835\udc5b\ud835\udc51 0 \u00a0 (10) \ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd0\u2013\ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd2:\u00a0use\u00a0a\u00a0similar\u00a0description.\u00a0 \ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd3:\u00a0What\u00a0is\u00a0the\u00a0probability\u00a0that\u00a0the\u00a0export\u00a0contract\u00a02\u00a0is\u00a0successfully\u00a0passed\u00a0and\u00a0 the\u00a0entire\u00a0customs\u00a0clearance\u00a0process\u00a0contract\u00a0is\u00a0failed?\u00a0\n\ud835\udc43 ? \ud835\udc39 \ud835\udc36\ud835\udc62\ud835\udc5f\ud835\udc5f\ud835\udc52\ud835\udc5b\ud835\udc61 2 & \ud835\udc38\ud835\udc5b\ud835\udc51 1 & \ud835\udc38\ud835\udc5b\ud835\udc51 0 \u00a0 (11)\nSystems 2022, 10, 19 15 of 20"
        },
        {
            "heading": "4.2. Verification Results and Analysis",
            "text": "Let m = n = u = 3, v = 8, we can redefine the property specification in Section 3.4 as follows: Property 1: What is the probability that all contracts are failed?\nP =?[ F(CurrentPSC = 8)& (EndPSC = 0)] (10)\nProperty 2\u2013Property 4: use a similar description. Property 5: What is the probability that the export contract 2 is successfully passed and the entire customs clearance process contract is failed?\nP =?[F(Currentex = 2)&(Endex = 1)&(EndPSC = 0)] (11)\nProperty 6: What is the probability that the transition contract 2 is successfully passed and the entire customs clearance process contract is failed?\nP =?[F(Endex = 1)&(CurrentTrans = 2)&(EndTrans = 1)&(EndPSC = 0)] (12)\nProperty 7: What is the probability that the import contract 2 is successfully passed and the entire customs clearance process contract is failed?\nP =?[F(EndTrans = 1)&(Currentex = 2)&(Endex = 1)&(EndPSC = 0)] (13)\nIn order to make the code more universal, we present part of the PRISM code in a modularized style in Figure 7. The user can freely define the number of states and the probability of state transitions according to the actual situation. We count them by N and Max. The characteristic x12 represents the migration from state one to state two, p1 represents the migration probability, and meanwhile the success or failure is represented by a Boolean variable.\nSystems\u00a02022,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 16\u00a0of\u00a021\u00a0 \u00a0\n\u00a0\n\ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd4:\u00a0What\u00a0is\u00a0the\u00a0probability\u00a0 a \u00a0the\u00a0tra sition\u00a0 ontract\u00a02\u00a0is\u00a0successfully\u00a0passed\u00a0 and\u00a0the\u00a0entire\u00a0customs\u00a0clearance\u00a0process\u00a0contract\u00a0is\u00a0failed?\u00a0\n\ud835\udc43 ? \ud835\udc39 \ud835\udc38\ud835\udc5b\ud835\udc51 1 & \ud835\udc36\ud835\udc62\ud835\udc5f\ud835\udc5f\ud835\udc52\ud835\udc5b\ud835\udc61 2 & \ud835\udc38\ud835\udc5b\ud835\udc51 1 & \ud835\udc38\ud835\udc5b\ud835\udc51 0 \u00a0 (12) \ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd5:\u00a0What\u00a0is\u00a0the\u00a0probability\u00a0that\u00a0the\u00a0imp rt\u00a0contract\u00a02\u00a0is\u00a0 uccessfully\u00a0p ssed\u00a0and\u00a0 t \u00a0 ire\u00a0customs\u00a0clearance\u00a0process\u00a0contract\u00a0is\u00a0failed?\u00a0\n\ud835\udc43 ? \ud835\udc39 \ud835\udc38\ud835\udc5b\ud835\udc51 1 & \ud835\udc36\ud835\udc62\ud835\udc5f\ud835\udc5f\ud835\udc52\ud835\udc5b\ud835\udc61 2 & \ud835\udc38\ud835\udc5b\ud835\udc51 1 & \ud835\udc38\ud835\udc5b\ud835\udc51 0 \u00a0 (13) In\u00a0order\u00a0to\u00a0make\u00a0the\u00a0code\u00a0more\u00a0universal,\u00a0we\u00a0present\u00a0part\u00a0of\u00a0the\u00a0PRISM\u00a0code\u00a0in\u00a0a\u00a0\nodularized\u00a0style\u00a0 in\u00a0Figure\u00a07.\u00a0The\u00a0user\u00a0can\u00a0 freely\u00a0define\u00a0 the\u00a0number\u00a0of\u00a0states\u00a0and\u00a0 the\u00a0 robability\u00a0of\u00a0 state\u00a0 transitions\u00a0according\u00a0 to\u00a0 the\u00a0 ctual\u00a0 situation.\u00a0We\u00a0 count\u00a0 them\u00a0by\u00a0N\u00a0 nd\u00a0Max.\u00a0The\u00a0characteristic\u00a0x12\u00a0represents\u00a0the\u00a0migrati n\u00a0from\u00a0state\u00a0one\u00a0to\u00a0state\u00a0two,\u00a0p1\u00a0 represents\u00a0the\u00a0migration\u00a0pro ability,\u00a0and\u00a0meanwhile\u00a0the\u00a0success\u00a0or\u00a0failure\u00a0i \u00a0represented\u00a0 by\u00a0a\u00a0Boolean\u00a0variable.\u00a0\n\u00a0\nFigure\u00a07.\u00a0PRISM\u00a0Code\u00a0of\u00a0the\u00a0DTMC\u00a0model\u00a0of\u00a0the\u00a0customs\u00a0clearance\u00a0process.\u00a0\nAccording\u00a0to\u00a0the\u00a0questionnaire\u00a0survey\u00a0of\u00a0port\u00a0practitioners\u00a0 in\u00a0the\u00a0Shanghai\u00a0Yang\u2010 shan\u00a0Port,\u00a0we\u00a0selected\u00a0the\u00a0actual\u00a0passing\u00a0probability\u00a0of\u00a0three\u00a0main\u00a0links\u00a0and\u00a0preset\u00a0the\u00a0 success\u00a0probability\u00a0of\u00a0the\u00a0smart\u00a0contract\u00a0for\u00a0the\u00a0export\u00a0part\u00a0and\u00a0the\u00a0import\u00a0part\u00a0as\u00a080%,\u00a0 90%\u00a0and\u00a095%.\u00a0By\u00a0default,\u00a0there\u00a0are\u00a0no\u00a0accidents\u00a0 in\u00a0 the\u00a0smart\u00a0contract\u00a0 for\u00a0 internal\u00a0port\u00a0 transportation.\u00a0We\u00a0took\u00a0property\u00a0one\u00a0in\u00a0the\u00a0first\u00a0set\u00a0of\u00a0preset\u00a0values\u00a0as\u00a0an\u00a0example\u00a0for\u00a0 verification,\u00a0and\u00a0set\u00a0the\u00a0probability\u00a0index\u00a0in\u00a0reverse\u00a0to\u00a0get\u00a0the\u00a0calculation\u00a0result\u00a0shown\u00a0 in\u00a0Figure\u00a08.\u00a0The\u00a0rest\u00a0of\u00a0the\u00a0verification\u00a0results\u00a0of\u00a0the\u00a0three\u00a0sets\u00a0of\u00a0preset\u00a0values\u00a0are\u00a0shown\u00a0 in\u00a0Table\u00a05.\u00a0\nFigure 7. PRISM Code of the DTMC model of the customs clearance process.\nAccording to the questionnaire survey of port practitioners in the Shanghai Yangshan Port, we selected the actual passing probability of three main links and preset the success probability of the smart contract for the export part and the import part as 80%, 90% and 95%. By default, there are no accidents in the smart contract for internal port transportation. We took property one in the first set of preset values as an example for verification, and set the probability index in reverse to get the calculation result shown in Figure 8. The rest of the verification results of the three sets of preset values are shown in Table 5.\nSystems 2022, 10, 19 16 of 20Systems\u00a02022,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 17\u00a0of\u00a021\u00a0 \u00a0\n\u00a0\n\u00a0 Figure\u00a08.\u00a0PRISM\u00a0calculation\u00a0result\u00a0of\u00a0Property\u00a01\u00a0in\u00a0Set\u00a01.\u00a0\nTable\u00a05.\u00a0PRISM\u00a0calculation\u00a0results\u00a0of\u00a0each\u00a0property.\u00a0\nThe\u00a0status\u00a0of\u00a0smart\u00a0contracts\u00a0 in\u00a0the\u00a0entire\u00a0port\u00a0supply\u00a0chain\u00a0can\u00a0be\u00a0analyzed\u00a0with\u00a0 different\u00a0probabilities,\u00a0and\u00a0fault\u00a0contracts\u00a0can\u00a0be\u00a0located\u00a0under\u00a0different\u00a0preset\u00a0values\u00a0to\u00a0 achieve\u00a0the\u00a0purpose\u00a0of\u00a0supervision.\u00a0Through\u00a0the\u00a0longitudinal\u00a0analysis\u00a0of\u00a0different\u00a0preset\u00a0 value\u00a0groups,\u00a0the\u00a0influence\u00a0of\u00a0different\u00a0parts\u00a0in\u00a0the\u00a0port\u00a0supply\u00a0chain\u00a0on\u00a0the\u00a0success\u00a0rate\u00a0 can\u00a0be\u00a0 judged\u00a0 separately\u00a0 in\u00a0Figure\u00a0 9.\u00a0 International\u00a0 logistics\u00a0 and\u00a0port\u00a0practitioners\u00a0 in\u2010 formed\u00a0that\u00a0the\u00a0pass\u00a0rate\u00a0of\u00a0each\u00a0link\u00a0must\u00a0reach\u00a090\u201395%\u00a0to\u00a0ensure\u00a0the\u00a0continuous\u00a0and\u00a0 efficient\u00a0operation\u00a0of\u00a0 the\u00a0 entire\u00a0port\u00a0 customs\u00a0 clearance\u00a0business.\u00a0Thus,\u00a0we\u00a0 set\u00a0 the\u00a0 ex\u2010 pected\u00a0probability\u00a0to\u00a090%.\u00a0\n\u00a0\nFigure 8. PRISM calculation result of Property 1 in Set 1.\nThe status of smart contracts in the entire port supply chain can be analyzed with different probabilities, and fault contracts can be located under different preset values to achieve the purpose of supervision. Through the longitudinal analysis of different preset value groups, the influence of different parts in the port supply chain on the success rate can be judged separately in Figure 9. International logistics and port practitioners informed that the pass rate of each link must reach 90\u201395% to ensure the continuous and efficient operation of the entire port customs clearance business. Thus, we set the expected probability to 90%. Since we assume that the transportation contract is not damaged, the results of Property 2 and Property 3 are the same. There is no obvious difference between the impact of export contracts and import contracts on the overall success rate, which shows that what really affects the port supply chain smart contract is the failure probability of the local contract. If the value of Property 5~7 is greater than the complement set of Property 2~4, the damage contract can be located as export-department contract 3 and import-department contract 3. If the probability of damage to the internal transport contract is considered, we can use the same method to compare Property 3 and Property 6. In this case, for the export section, only the probability of the third set of preset values is higher than the expected probability. At the import section, the pass rate of contract 5 in the three sets of preset values is lower than 90%, and only contracts 6 and 7 in the second and third set of preset values are higher than expectated. Therefore, this method can quickly locate unqualified smart contracts.\nSystems 2022, 10, 19 17 of 20Systems\u00a02022,\u00a010,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 18\u00a0of\u00a021\u00a0\u00a0\n\u00a0\n\u00a0 Figure\u00a09.\u00a0Failure\u00a0analysis\u00a0under\u00a0expectation\u00a0probability.\u00a0\nSince\u00a0we\u00a0 assume\u00a0 that\u00a0 the\u00a0 transportation\u00a0 contract\u00a0 is\u00a0 not\u00a0 damaged,\u00a0 the\u00a0 results\u00a0 of\u00a0 \ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd0\u00a0and\u00a0\ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd1\u00a0are\u00a0 the\u00a0same.\u00a0There\u00a0 is\u00a0no\u00a0obvious\u00a0difference\u00a0between\u00a0 the\u00a0 impact\u00a0of\u00a0export\u00a0contracts\u00a0and\u00a0import\u00a0contracts\u00a0on\u00a0the\u00a0overall\u00a0success\u00a0rate,\u00a0which\u00a0shows\u00a0 that\u00a0what\u00a0really\u00a0affects\u00a0the\u00a0port\u00a0supply\u00a0chain\u00a0smart\u00a0contract\u00a0is\u00a0the\u00a0failure\u00a0probability\u00a0of\u00a0 the\u00a0 local\u00a0 contract.\u00a0 If\u00a0 the\u00a0value\u00a0of\u00a0\ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd3~\ud835\udfd5\u00a0is\u00a0greater\u00a0 than\u00a0 the\u00a0 complement\u00a0 set\u00a0of\u00a0 \ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd0~\ud835\udfd2,\u00a0the\u00a0damage\u00a0contract\u00a0can\u00a0be\u00a0located\u00a0as\u00a0export\u2010department\u00a0contract\u00a03\u00a0and\u00a0 import\u2010department\u00a0contract\u00a03.\u00a0If\u00a0the\u00a0probability\u00a0of\u00a0damage\u00a0to\u00a0the\u00a0internal\u00a0transport\u00a0con\u2010 tract\u00a0 is\u00a0 considered,\u00a0 we\u00a0 can\u00a0 use\u00a0 the\u00a0 same\u00a0 method\u00a0 to\u00a0 compare\u00a0 \ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd1 \u00a0and\u00a0 \ud835\udc77\ud835\udc93\ud835\udc90\ud835\udc91\ud835\udc86\ud835\udc93\ud835\udc95\ud835\udc9a \ud835\udfd4.\u00a0 In\u00a0 this\u00a0case,\u00a0 for\u00a0 the\u00a0export\u00a0section,\u00a0only\u00a0 the\u00a0probability\u00a0of\u00a0 the\u00a0 third\u00a0set\u00a0of\u00a0 preset\u00a0values\u00a0is\u00a0higher\u00a0than\u00a0the\u00a0expected\u00a0probability.\u00a0At\u00a0the\u00a0import\u00a0section,\u00a0the\u00a0pass\u00a0rate\u00a0 of\u00a0contract\u00a05\u00a0in\u00a0the\u00a0three\u00a0sets\u00a0of\u00a0preset\u00a0values\u00a0is\u00a0lower\u00a0than\u00a090%,\u00a0and\u00a0only\u00a0contracts\u00a06\u00a0and\u00a0 7\u00a0in\u00a0the\u00a0second\u00a0and\u00a0third\u00a0set\u00a0of\u00a0preset\u00a0values\u00a0are\u00a0higher\u00a0than\u00a0expectated.\u00a0Therefore,\u00a0this\u00a0 method\u00a0can\u00a0quickly\u00a0locate\u00a0unqualified\u00a0smart\u00a0contracts.\u00a0 Through\u00a0comparing\u00a0the\u00a0values\u00a0of\u00a0the\u00a0same\u00a0property\u00a0under\u00a0different\u00a0preset\u00a0proba\u2010 bilities\u00a0horizontally,\u00a0it\u00a0can\u00a0be\u00a0seen\u00a0that\u00a0the\u00a0smaller\u00a0the\u00a0number\u00a0of\u00a0state\u00a0transitions,\u00a0which\u00a0 means\u00a0the\u00a0smaller\u00a0the\u00a0number\u00a0of\u00a0sub\u2010contracts,\u00a0the\u00a0higher\u00a0the\u00a0success\u00a0rate\u00a0of\u00a0the\u00a0entire\u00a0 port\u00a0supply\u00a0chain\u00a0contract.\u00a0At\u00a0the\u00a0same\u00a0time,\u00a0the\u00a0export\u00a0contracts\u00a0have\u00a0a\u00a0more\u00a0important\u00a0 impact\u00a0 on\u00a0 the\u00a0 overall\u00a0 success\u00a0 rate\u00a0 than\u00a0 the\u00a0 import\u00a0 contracts,\u00a0which\u00a0 requires\u00a0 contract\u00a0 programmers\u00a0and\u00a0 suppliers\u00a0 to\u00a0pay\u00a0more\u00a0attention\u00a0 to\u00a0accuracy\u00a0 in\u00a0 the\u00a0process\u00a0of\u00a0 infor\u2010 mation\u00a0uploading\u00a0and\u00a0contract\u00a0construction.\u00a0\n5.\u00a0Conclusions\u00a0 In\u00a0this\u00a0article,\u00a0we\u00a0present\u00a0an\u00a0architecture\u00a0of\u00a0consortium\u00a0blockchain\u00a0empowered\u00a0port\u00a0 supply\u00a0chains,\u00a0and\u00a0propose\u00a0a\u00a0 framework\u00a0 for\u00a0 the\u00a0smart\u00a0contracts\u00a0of\u00a0port\u00a0supply\u00a0chains\u00a0 with\u00a0probabilistic\u00a0behaviors.\u00a0The\u00a0 consortium\u00a0blockchain\u00a0 is\u00a0a\u00a0 compromise\u00a0between\u00a0de\u2010 centralization\u00a0 and\u00a0 efficiency.\u00a0 The\u00a0 public\u00a0 blockchain\u00a0 takes\u00a0 too\u00a0 long\u00a0 time\u00a0 to\u00a0 validate\u00a0 transactions,\u00a0while\u00a0 the\u00a0private\u00a0blockchain\u00a0has\u00a0a\u00a0high\u00a0degree\u00a0of\u00a0centralization\u00a0which\u00a0 is\u00a0 contrary\u00a0to\u00a0the\u00a0original\u00a0intention\u00a0of\u00a0a\u00a0blockchain.\u00a0The\u00a0consortium\u00a0blockchain\u00a0combines\u00a0 the\u00a0advantages\u00a0of\u00a0both.\u00a0The\u00a0smart\u00a0contracts\u00a0are\u00a0modeled\u00a0as\u00a0DTMCs,\u00a0which\u00a0are\u00a0automat\u2010 ically\u00a0transformed\u00a0through\u00a0the\u00a0BPMN\u00a0description\u00a0of\u00a0smart\u00a0contracts.\u00a0The\u00a0requirements,\u00a0 are\u00a0specified\u00a0by\u00a0PCTL.\u00a0A\u00a0casestudy\u00a0of\u00a0the\u00a0port\u00a0customs\u00a0clearance\u00a0process\u00a0of\u00a0port\u00a0supply\u00a0 chains\u00a0is\u00a0used\u00a0to\u00a0demonstrate\u00a0the\u00a0effectiveness\u00a0of\u00a0this\u00a0framework.\u00a0The\u00a0limitation\u00a0of\u00a0this\u00a0 work\u00a0 is\u00a0 that\u00a0 this\u00a0 framework\u00a0 only\u00a0 considers\u00a0 the\u00a0probability\u00a0 aspect\u00a0 of\u00a0 the\u00a0port\u00a0 supply\u00a0 chain,\u00a0and\u00a0the\u00a0time\u00a0variable,\u00a0reward\u00a0mechanism,\u00a0etc.,s\u00a0are\u00a0not\u00a0included,\u00a0which\u00a0also\u00a0af\u2010 fects\u00a0the\u00a0integrity\u00a0of\u00a0the\u00a0smart\u00a0contract\u00a0for\u00a0port\u00a0supply\u00a0chains.\u00a0In\u00a0the\u00a0future,\u00a0we\u00a0will\u00a0ex\u2010 ploit\u00a0MDP\u00a0(Markov\u00a0decision\u00a0process)\u00a0to\u00a0the\u00a0model\u00a0smart\u00a0contracts\u00a0of\u00a0port\u00a0supply\u00a0chains,\u00a0 which\u00a0can\u00a0include\u00a0non\u2010deterministic\u00a0and\u00a0probabilistic\u00a0behaviors\u00a0simultaneously.\u00a0Alter\u2010\nFigur . l sis under expectation probability.\nThrough comparing the values of the same property under different preset probabilities horizontally, it can be seen that the smaller the number of state transitions, which means the smaller the number of sub-contracts, the higher the success rate of the entire port supply chain contract. At the same time, the export contracts have a more important impact on the overall success rate than the import contracts, which requires contract programmers and suppliers to pay more attention to accuracy in the process of information uploading and contract construction."
        },
        {
            "heading": "5. Conclusions",
            "text": "In this article, we present an architecture of consortium blockchain empowered port supply chains, and propose a framework for the smart contracts of ort supply chains with probabilistic behaviors. The c nsortium blockchain is a compromise between decentralization and efficiency. The public blockch in takes too long time to validate transactions, while the private blockchain has h gh degree f centralization which is contrary to the original intention of a blockchain. The consortiu blockchain combines the advantages of both. The smart contracts are modeled as DTMCs, which are automatically transformed through the BPMN description of smart contracts. The requirements, are specified by PCTL. A casestudy of the port customs clearance process of port supply chains is used to demonstrate the effectiveness of this framework. The limitation of this work is that this framework only considers the probability aspect of the port supply chain, and the time variable, reward mechanism, etc.,s are not included, which also affects the integrity of the smart contract for port supply chains. In the future, we will exploit MDP (Markov decision process) to the model smart contracts of port supply chains, which can include non-deterministic and probabilistic behaviors simultaneously. Alternatively, we will use CTMDP(continuous-time Markov decision process) to model smart contracts which involve continuous-time behaviors, and we will consider the more complex use requirement properties, such as security, privacy and liveness, which c n be specified by PCTL* (super set of PCTL).\nAuthor Contributions: Conceptualization, Y.L. and Z.Z.; methodology, Y.L. and Y.M.; software, Z.Z.; validation, Y.L., Z.Z., and Y.M.; formal analysis, Y.L.; investigation, Y.L.; resources, Z.Z.; data curation, Z.Z.; writing\u2014original draft preparation, Y.L. and Z.Z.; writing\u2014review and editing, Y.L.; visualization, Z.Z.; supervision, Y.Y.; project administration, Y.Y.; funding acquisition, Y.L. All authors have r ad an agreed to the published version of the manuscript.\nFunding: This research was funded by MOE Humanities and Social Sciences Foundation of China under Grant Nos. 20YJCZH102.\nSystems 2022, 10, 19 18 of 20\nInstitutional Review Board Statement: Not applicable.\nInformed Consent Statement: Not applicable.\nData Availability Statement: Not applicable.\nAcknowledgments: Thanks to Marta Kwiatkowska at The University of Oxford, UK, she has inspired us through her books and papers, and particularly through having a direct discussion with her.\nConflicts of Interest: The authors declare no conflict of interest."
        },
        {
            "heading": "Appendix A. Port Customs Clearance Declaration Procedures",
            "text": "Import Export\nManifest transmission and customs declaration\nentry declaration\nTransmission of manifest electronic data to customs through\nthe platform Customs declaration entry and\ndeclaration link\nEntry and declaration\nEntry of customs declaration\nCustoms declaration Customs declaration chargeback Customs declaration chargeback\nCustoms review and on-site presentation\nH2000 manual review\nCustoms review\nH2000 manual review\nEDI, POP query EDI, POP query\nOn-site delivery, release delivery, post-delivery (paperless\ncustoms clearance)\nOn-site delivery, release delivery, post-delivery (paperless\ncustoms clearance)\nPay taxes Pay taxes\nInspection and release\nThe logistics monitoring department handles the second\nconfirmation of the manifest\nInspection and release\nThe terminal supervision department handles inspection and\nrelease procedures\nApplication for clearance procedures at the clearance post of\nthe Customs Clearance Section\nThe enterprise ships the ship with the \u201cExport Goods Shipment List\u201d\nThe terminal supervision department handles inspection and\nrelease procedures\nLogistics Monitoring Section handles ship export customs\nclearance procedures\nCustoms clearance and issuance certificate Customs clearance and issuance certificate"
        }
    ],
    "title": "Verifying the Smart Contracts of the Port Supply Chain System Based on Probabilistic Model Checking",
    "year": 2022
}