{
    "abstractText": "This article presents an energy-efficient BJT-based temperature sensor. The output of sensing front-ends is modulated by employing an incremental \u2206-\u03a3 ADC as a readout interface. The cascoded floating-inverter-based dynamic amplifier (FIA) is used as the integrator instead of the conventional operational transconductance amplifier (OTA) to achieve a low power consumption. To enhance the accuracy, chopping and dynamic element matching (DEM) are applied to eliminate the component mismatch error while \u03b2-compensation resistor and optimized bias current are used to minimize the effect of \u03b2 variation. Fabricated in a standard 180-nm CMOS process, this sensor has an active area of 0.13 mm2. While dissipating only 45.7 \u03bcW in total, the sensor achieves an inaccuracy of \u00b10.8 \u25e6C (3\u03c3) from \u221250 \u25e6C to 150 \u25e6C after one-point calibration.",
    "authors": [
        {
            "affiliations": [],
            "name": "Chuyun Qin"
        },
        {
            "affiliations": [],
            "name": "Zhenyan Huang"
        },
        {
            "affiliations": [],
            "name": "Yuyan Liu"
        },
        {
            "affiliations": [],
            "name": "Jiping Li"
        },
        {
            "affiliations": [],
            "name": "Ling Lin"
        },
        {
            "affiliations": [],
            "name": "Nianxiong Tan"
        },
        {
            "affiliations": [],
            "name": "Xiaopeng Yu"
        }
    ],
    "id": "SP:4828f9b790ab0e80ac56cb64bc247756a401e841",
    "references": [
        {
            "authors": [
                "K. Souri",
                "K.A.A. Makinwa"
            ],
            "title": "uW micropower temperature sensor with an inaccuracy of \u00b10.2 \u25e6C (3\u03c3) from \u221230 \u25e6C to 125 \u25e6C",
            "venue": "IEEE J.-Solid-State Circuits",
            "year": 2011
        },
        {
            "authors": [
                "K. Souri",
                "Y. Chae",
                "K.A.A. Makinwa"
            ],
            "title": "A CMOS Temperature Sensor with a Voltage-Calibrated Inaccuracy of \u00b10.15 \u25e6C (3\u03c3) from \u221255 to 125 \u25e6C",
            "venue": "IEEE J.-Solid-State Circuits",
            "year": 2012
        },
        {
            "authors": [
                "B. Yousefzadeh",
                "S.H. Shalmany",
                "K.A.A. Makinwa"
            ],
            "title": "A BJT-based temperature-to-digital converter with \u00b160 mK (3\u03c3) inaccuracy from \u221255 \u25e6C to +125 \u25e6C in 0.16-um CMOS",
            "venue": "IEEE J.-Solid-State Circuits",
            "year": 2017
        },
        {
            "authors": [
                "G. Wang",
                "A. Heidari",
                "K.A.A. Makinwa",
                "G.C.M. Meijer"
            ],
            "title": "An Accurate BJT-Based CMOS Temperature Sensor with Duty-CycleModulated Output",
            "venue": "IEEE Trans. Ind. Electron",
            "year": 2017
        },
        {
            "authors": [
                "S. Pan",
                "C. G\u00fcrley\u00fck",
                "M.F. Pimenta",
                "K.A.A. Makinwa"
            ],
            "title": "A 0.12 mm2 wien-bridge temperature sensor with 0.1 \u25e6C (3\u03c3) inaccuracy from \u221240 \u25e6C to 180 \u25e6C",
            "venue": "In Proceedings of the 2019 IEEE International Solid- State Circuits Conference-",
            "year": 2019
        },
        {
            "authors": [
                "C.P.L. Van Vroonhoven",
                "K.A.A. Makinwa"
            ],
            "title": "An SOI thermal-diffusivity-based temperature sensor with \u00b10.6 \u25e6C (3\u03a3) untrimmed inaccuracy from \u221270 \u25e6C to 170 \u25e6C",
            "venue": "Sens. Actuators Phys",
            "year": 2011
        },
        {
            "authors": [
                "C. Van Vroonhoven",
                "D. D\u2019Aquino",
                "K. Makinwa"
            ],
            "title": "A \u00b10.4 \u25e6C (3\u03c3) 70 to 200 \u25e6C time-domain temperature sensor based on heat diffusion in Si and SiO2",
            "venue": "In Proceedings of the 2012 IEEE International Solid-State Circuits Conference,",
            "year": 2012
        },
        {
            "authors": [
                "K. Souri",
                "K. Makinwa"
            ],
            "title": "A 40 \u03bcW CMOS temperature sensor with an inaccuracy of \u00b10.4 \u25e6C (3\u03c3) from \u221255 \u25e6C to 200 \u25e6C",
            "venue": "In Proceedings of the 2013 Proceedings of the ESSCIRC (ESSCIRC), Bucharest, Romania,",
            "year": 2013
        },
        {
            "authors": [
                "M.-C. Chuang",
                "C.-L. Tai",
                "Y.-C. Hsu",
                "A. Roth",
                "E. Soenen"
            ],
            "title": "A temperature sensor with a 3 sigma inaccuracy of \u00b12 \u25e6C without trimming from \u221250 \u25e6C to 150 \u25e6C in a 16 nm FinFET process",
            "venue": "In Proceedings of the ESSCIRC Conference 2015\u201441st European Solid-State Circuits Conference (ESSCIRC), Graz, Austria,",
            "year": 2015
        },
        {
            "authors": [
                "B. Yousefzadeh",
                "K.A.A. Makinwa"
            ],
            "title": "A BJT-Based Temperature-to-Digital Converter with a \u00b10.25 \u25e6C (3\u03c3)-Inaccuracy From \u221240 \u25e6C to +180 \u25e6C Using Heater-Assisted Voltage Calibration",
            "venue": "IEEE J.-Solid-State Circuits",
            "year": 2019
        },
        {
            "authors": [
                "M.A.P. Pertijs",
                "J.H. Huijsing"
            ],
            "title": "Precision Temperature Sensors in CMOS Technology; Springer: Dordrecht",
            "venue": "The Netherlands,",
            "year": 2006
        },
        {
            "authors": [
                "M.A.P. Pertijs",
                "K.A.A. Makinwa",
                "J.H. Huijsing"
            ],
            "title": "A CMOS smart temperature sensor with a 3/spl sigma/ inaccuracy of /spl plusmn/0.1/spl deg/C from -55/spl deg/C to 125/spl deg/C",
            "venue": "IEEE J.-Solid-State Circuits",
            "year": 2005
        },
        {
            "authors": [
                "J. Markus",
                "J. Silva",
                "G.C. Temes"
            ],
            "title": "Theory and applications of incremental /spl Delta//spl Sigma/ converters",
            "venue": "IEEE Trans. Circuits Syst. I Regul. Pap",
            "year": 2004
        },
        {
            "authors": [
                "M. Y\u00fcceta\u015f",
                "M. Pulkkine",
                "J. Gronicz",
                "K. Halonen"
            ],
            "title": "A temperature sensor with (3\u03c3) inaccuracy of +0.5/\u22120.75 \u25e6C and energy per conversion of 0.65 \u03bcJ using a 0.18 \u03bcm CMOS technology",
            "venue": "In Proceedings of the 2013 NORCHIP, Vilnius, Lithuania,",
            "year": 2013
        },
        {
            "authors": [
                "Z. Tang",
                "Y. Fang",
                "X.-P. Yu",
                "Z. Shi",
                "N. Tan"
            ],
            "title": "A CMOS Temperature Sensor With Versatile Readout Scheme and High Accuracy for Multi-Sensor Systems",
            "venue": "IEEE Trans. Circuits Syst. I Regul",
            "year": 2018
        },
        {
            "authors": [
                "R.S.A. Kumar",
                "N. Krishnapura",
                "P. Banerjee"
            ],
            "title": "Analysis and Design of a Discrete-Time Delta-Sigma Modulator Using a Cascoded Floating-Inverter-Based Dynamic Amplifier",
            "venue": "IEEE J.-Solid-State Circuits 2022,",
            "year": 2022
        },
        {
            "authors": [
                "X. Tang",
                "B. Kasap",
                "L. Shen",
                "X. Yang",
                "W. Shi",
                "N. Sun"
            ],
            "title": "An Energy-Efficient Comparator with Dynamic Floating Inverter Pre-Amplifier",
            "venue": "In Proceedings of the 2019 Symposium on VLSI Circuits, Kyoto, Japan,",
            "year": 2019
        },
        {
            "authors": [
                "X. Tang",
                "X. Yang",
                "W. Zhao",
                "C.-K. Hsu",
                "J. Liu",
                "L. Shen",
                "A. Mukherjee",
                "W. Shi",
                "S. Li",
                "D.Z Pan"
            ],
            "title": "A 13.5-ENOB, 107-\u03bcW Noise-Shaping SAR ADC with PVT-Robust Closed-Loop Dynamic Amplifier",
            "venue": "IEEE J.-Solid-State Circuits",
            "year": 2020
        },
        {
            "authors": [
                "K. Ishida",
                "K. Kanda",
                "A. Tamtrakarn",
                "H. Kawaguchi",
                "T. Sakurai"
            ],
            "title": "Managing leakage in charge-based analog circuits with low-V/sub TH/ transistors by analog T-switch (AT-Switch) and super cut-off CMOS",
            "venue": "In Proceedings of the 2005 Symposium on VLSI Circuits, Kyoto, Japan,",
            "year": 2005
        },
        {
            "authors": [
                "J. Pathrose",
                "C. Liu",
                "K.T.C. Chai",
                "Y.P. Xu"
            ],
            "title": "A Time-Domain Band-Gap Temperature Sensor in SOI CMOS for High-Temperature Applications",
            "venue": "IEEE Trans. Circuits Syst. II Express Briefs",
            "year": 2015
        }
    ],
    "sections": [
        {
            "text": "Citation: Qin , C.; Huang, Z.; Liu, Y.;\nLi, J.; Lin, L.; Tan, N.; Yu, X. An\nEnergy-Efficient BJT-Based Temperature Sensor with \u00b10.8 \u25e6C (3\u03c3) Inaccuracy from \u221250 to 150 \u25e6C. Sensors 2022, 22, 9381. https://\ndoi.org/10.3390/s22239381\nAcademic Editor: Fabian Khateb\nReceived: 15 November 2022\nAccepted: 29 November 2022\nPublished: 1 December 2022\nPublisher\u2019s Note: MDPI stays neutral\nwith regard to jurisdictional claims in\npublished maps and institutional affil-\niations.\nCopyright: \u00a9 2022 by the authors.\nLicensee MDPI, Basel, Switzerland.\nThis article is an open access article\ndistributed under the terms and\nconditions of the Creative Commons\nAttribution (CC BY) license (https://\ncreativecommons.org/licenses/by/\n4.0/).\nKeywords: CMOS temperature sensor; energy-efficient; leakage; cascoded FIA"
        },
        {
            "heading": "1. Introduction",
            "text": "Unlike consumer electronics, the integrated circuits working in extreme conditions, such as automotive and industrial applications call for high-accuracy temperature sensors operating at much higher temperatures (>125 \u25e6C). As a result, off-chip thermistors and thermocouples are still mostly used because of the difficulty of fully-integrated CMOS implementation. Of course, many designs have been reported to investigate the possibility of on-chip temperature sensors in these kinds of extreme conditions. In CMOS technology, the temperature-sensing elements can be bipolar junction transistors (BJTs), MOSFETs, resistors, thermal diffusivity (TD), etc. [1]. The BJTs are characterized by long-term stability and high accuracy after one-point calibration [2\u20134]. Additionally, the substrate PNPs available in CMOS technology are not particularly sensitive to the mechanical stress caused by low-cost plastic packaging [5]; thus, BJTs are suitable for high-temperature applications. However, the leakage and saturation currents of CMOS components increase exponentially with temperature, which leads to significant temperature-sensing errors at high temperatures. Taking other temperature-sensing elements into account at high temperatures, the increase in the cost caused by two-point calibration makes resistor-based temperature sensors less suitable for automotive applications [6]. CMOS temperature sensors based on the TD of silicon have the advantage of being insensitive to process deviations, as it is only related to the physical properties of the silicon material itself. However, the milliwatt-level power dissipation makes it less attractive [7,8]. There have already been some explorations about BJT-based temperature sensors with a wide temperature sensing range [9\u201311]. In order to achieve high accuracy at high temperatures, biasing current and readout circuit are optimized, and low leakage SOI processes are used in Ref. [9]. Some advanced technologies such as the 16 nm FinFET process is attempted in Ref. [10]. An on-chip low-cost heater-assisted voltage calibration (HA-VCAL) is used in Ref. [11] to further reduce calibration costs at the expense of system complexity. However, power consumption [9,10] and system complexity [11] are the drawbacks.\nSensors 2022, 22, 9381. https://doi.org/10.3390/s22239381 https://www.mdpi.com/journal/sensors\nIn this work, a BJT-based sensor that can achieve a good balance among power consumption, calibration cost and system complexity is presented. It achieves an inaccuracy of \u00b10.8 \u25e6C (3\u03c3) from \u221250 to 150 \u25e6C after one-point calibration while consuming only 45.7 \u00b5W. The voltage signals provided by the sensing front-end are modulated by employing an incremental \u2206-\u03a3 ADC as a readout interface. The cascoded floating-inverter-based dynamic amplifier (FIA) is used as the integrator instead of the conventional operational transconductance amplifier (OTA). Since FIA has no need for static bias current, power consumption decreases, as well as system complexity. To enhance the accuracy, chopping and dynamic element matching (DEM) are applied to eliminate the component mismatch error while the \u03b2-compensation resistor and optimized bias current are used to minimize the effect of \u03b2 variation. The temperature sensor is fabricated in a standard 180-nm CMOS process and has an active area of 0.13 mm2. This paper is organized as follows. In Section 2, the sensor\u2019s operation principle is explained. The realization of the sensing front-end and readout circuits are depicted, respectively, in Sections 3 and 4. An analysis of the measured results and a comparison with previous work are presented in Section 5. The conclusion is presented in Section 6."
        },
        {
            "heading": "2. Operation Principle",
            "text": "Temperature sensors based on BJTs utilize their characteristics. A CMOS smart temperature sensor includes two parts, which are analog front-end and readout interface. The analog front-end uses several bipolar transistors together with precision interface circuitry to extract voltage signals required for temperature measurement. The readout interface with an ADC provides a digital representation of their ratio [12]. Figure 1 illustrates how a PNP-based temperature sensor works [12]. In the core of the temperature sensor, two identical substrate PNPs (Q1, and Q2) are biased at different collector currents, which have a ratio of 1:p. The base\u2013emitter voltage VBE of Q1 (or Q2) is complementary to absolute temperature (CTAT) and can be expressed as follows:\nVBE = \u03b7 kT q\nln (\nIC IS\n) (1)\nwhere \u03b7 \u2248 1 is a non-ideality factor dependent on the process, k is the Boltzmann constant, q is the electron charge, T is the temperature in Kelvin, IC and IS are, respectively, the collector and saturation currents of the PNP. The VBE corresponds to silicon\u2019s bandgap voltage of about 1.2 V when extrapolated to 0 K (\u2212273 \u25e6C). As a result of different collector currents, the difference between the two base\u2013emitter voltages \u2206VBE = VBE2 \u2212 VBE1 is proportional to absolute temperature (PTAT) and can be expressed as follows:\n\u2206VBE = \u03b7 kT q ln(p) (2)\nwhere p is the density ratio of their collector currents. When VBE and \u2206VBE are combined linearly, the resulting voltage is relatively constant. The resulting voltage VREF = VBE + \u03b1 \u00b7 \u2206VBE also corresponds to the silicon bandgap voltage, where \u03b1 is a constant. By using an ADC, a digital temperature readout interface can be created. It measures temperature by digitizing \u03b1 \u00b7 \u2206VBE with respect to VREF. The digital ratio \u00b5 is given by:\n\u00b5 = \u03b1 \u00b7 \u2206VBE\nVREF = \u03b1 \u00b7 \u2206VBE VBE + \u03b1 \u00b7 \u2206VBE\n(3)\nsince VREF is a voltage that is temperature-independent and relatively constant, \u00b5 will be PTAT. The final digital output Dout can be measured by linear scaling in degrees Celsius:\nDout = A \u00b7 \u00b5 + B (4)\nwhere A and B are constant coefficients.\nThere is a discovery that VBE and \u2206VBE include all the necessary temperature information. Consequently, using a relatively constant voltage VREF as the reference voltage is not necessary [3]. As an alternative, the ADC can digitize \u2206VBE with respect to VBE. The result can be X = \u03b3 \u00b7 \u2206VBE/VBE, where \u03b3 is a natural number. At the same time, the variation of \u03b7 can be omitted as it is canceled out. The digital ratio \u00b5 can then be determined after formula deformation:\n\u00b5 = k \u00b7 X\n1 + k \u00b7 X (5)\nwhere k is a calibration parameter and can be calculated easily in a digital back-end; thus, it is a constant unaffected by process spread. It also can be seen as a mapping factor between X and digital ratio \u00b5, which is variable when trimming temperature-sensing errors. This is much more convenient to adjust than analog techniques [3]. This method transfers signal processing from the analog to digital domain; therefore, power consumption, system complexity and area of the analog circuitry are reduced. The block diagram of this design is shown in Figure 2. The sensing front-end consists of a precision bias circuit and a bipolar core. The precision bias circuit provides a biasing current for the substrate PNPs of the bipolar core. The outputs of the bipolar core are VBE1 and VBE2. \u2206VBE and VBE2 are digitized by incremental \u2206-\u03a3 ADC. The bit-stream provided by the incremental \u2206-\u03a3 ADC is sent to the digital back-end and processed by an off-chip digital decimation filter to achieve X = \u03b3 \u00b7 \u2206VBE/VBE. Finally, the calibration parameter k and constant coefficients A, B can be obtained by fitting between X and temperature; thus, Dout is determined."
        },
        {
            "heading": "3. Sensing Front-End",
            "text": "It is typical for PNPs to be biased via their emitters, and there are nonzero base and emitter resistances. Considering an equivalent emitter resistance (rS) and its finite current gain (\u03b2) , VBE (for the larger biasing current) and \u2206VBE can be determined as follows [4]:\nVBE \u2248 kT q \u00b7 ln\n( pE \u00b7 IE\ntS\n) +\nkT q \u00b7 ln\n( \u03b2\n\u03b2 + 1\n) + pE \u00b7 rS \u00b7 IE (6)\n\u2206VBE \u2248 kT q \u00b7 ln(pE) + kT q \u00b7 ( \u2206\u03b2 \u03b2 \u00b7 (\u03b2 + 1) ) + rS \u00b7 (pE \u2212 1) \u00b7 IE (7)\nwhere IE is the emitter current, and pE is the density ratio of the emitter current. \u2206\u03b2 is the difference in \u03b2 when there are two different biasing currents (IE and pE \u00b7 IE). As shown in (6), VBE is dominated by the first term and has a slightly nonlinear characteristic. The nonlinearity or curvature of VBE is influenced by the temperature dependence of biasing current IE, resulting in the sensor\u2019s systematic error. The PTAT/R biasing circuit (Figure 3) used in this work provides a PTAT current rather than a constant current and, hence, decreases the error. Furthermore, the supply-independent current provided improves the accuracy of VBE [4]. The bias circuit consists of two PNPs, biased at a 1:5 current ratio. An amplifier forces its corresponding \u2206VBE,b in a bias circuit across a biasing resistor (R1) to generate the biasing current (I = \u2206VBE,b/R1). The current mirror copies the biasing current to the bipolar core."
        },
        {
            "heading": "3.1. Effect of Current Gain \u03b2",
            "text": "Since a small biasing current (IE) decreases the effect of rS, the last terms in (6) and (7) can almost be ignored. The spread (up to 50%) and temperature dependence of \u03b2 influence the accuracy of VBE [13]. As is the case in the 180 nm CMOS process (\u03b2 \u223c 2.7), this effect is significant. This problem can be solved by adding a \u03b2-compensation resistor (R\u03b2 = R1/5) in series with the base of Q2 [14]. The generated biasing current can be rewritten as:\nI = (\u2206VBE/R1) \u00b7 (\u03b2 + 1)/\u03b2 (8)\nwhere \u03b2 is the current gain of the Q2. Assuming the two PNPs in the bipolar core have the same current gain, their collector current is equivalent to \u2206VBE/R1. However, current mirror and PNPs\u2019 mismatch will limit this approach. Adding a \u03b2-compensation resistor corrects the error on VBE caused by \u03b2, but it does not correct the error on \u2206VBE caused by \u03b2. The current ratio of five results in \u2206VBE having an appropriate temperature sensitivity in addition to a decrease in the current dependence on \u03b2. As shown in Figure 4, \u03b2 varies with current density and the area of PNPs. Choosing suitable current density and area of PNPs to minimize the current dependence in \u03b2 is important. When the area of PNPs is 5 \u00d7 10 \u00b5m , the curve of error is smoother than others and converges to zero at higher currents. In order to make the final temperature error caused by the effect of \u03b2 on \u2206VBE as little as possible and have smaller variation with the bias current, the value of I is optimized to be 140 nA at 27 \u25e6C, and the area of PNPs is chosen to be 5 \u00d7 10 \u00b5m in the 180 nm CMOS process. At the same time, the power consumption of the analog front-end has been significantly reduced."
        },
        {
            "heading": "3.2. Opamp Topology",
            "text": "As shown in Figure 5, an adaptive self-biasing opamp [2] consisting of a PMOS input pair with diode-connected NMOS loads is used in this work. When operating in a close-loop configuration, the amplifier works in a negative feedback loop and stabilizes the circuit. Meanwhile, the output of opamp is connected to the gate of MP10. The diode-connected load makes the gate of MP10 a low-impedance node. Therefore, the opamp\u2019s bias current can be reduced to meet the easily satisfied load requirements. The close-loop gain of the opamp is over 74 dB as the temperature and corner vary while the open-loop gain is over 90 dB at 27 \u25e6C. At 27 \u25e6C, the opamp draws only 980 nA."
        },
        {
            "heading": "3.3. Precision Issues",
            "text": "One of the significant sources of inaccuracy is the offset of opamp. The inaccuracy required cannot be easily achieved by just changing sizes of transistors and careful layout. To further improve accuracy, the opamp is chopped [2]. As Figure 5 shows, the input of the opamp is chopped, and the switch at the output of the input stage is used to maintain the correct feedback polarity. Another source of inaccuracy is the mismatch in current sources and bipolar devices. In this case, DEM is used in the current mirrors of the bias circuit and bipolar core, respectively, to improve the accuracy of \u2206VBE. Finally, the required accurate 1:5 current ratio is generated."
        },
        {
            "heading": "4. Readout Circuit",
            "text": "Incremental \u2206-\u03a3 ADC consists of an easy-to-realize one-bit second-order \u2206-\u03a3 modulator and an off-chip digital decimation filter. It can achieve high resolution easily at the cost of conversion rate. There are subtle differences between an incremental \u2206-\u03a3 ADC and a conventional one [15]. Firstly, the integration capacitors are reset before each conversion, and the initial states of the integrator are determined. In this case, the ADC does not operate continuously and the decimating filter off-chip can be realized more easily. A one-bit second-order incremental \u2206-\u03a3 ADC is used in this paper because it can achieve a certain accuracy in a lower sample rate compared with a first-order ADC [16]. The greatly reduced number of samples decreases the conversion time and power consumption of the sensor."
        },
        {
            "heading": "4.1. Incremental \u2206-\u03a3 ADC with Charge-Balancing Scheme",
            "text": "A different charge-balancing scheme is required in this incremental \u2206-\u03a3 ADC while using only two sampling capacitors. Similar to Ref. [11], the ADC digitizes the ratio X = 3 \u00b7 \u2206VBE/VBE, which varies from 0.12 to 0.48 as the temperature varies from \u221250 to +150 \u25e6C. \u03b3 is chosen to be three in order to achieve a relatively large dynamic range with fewer clock cycles, thus speeding up the conversion rate and reducing energy consumption. In addition, it simplifies the control logic. In each cycle of the ADC, the charge integrated changes corresponding to the bit-stream (BS). It is proportional to 3\u00b7\u2206VBE \u2212 VBE2 when BS = 1 while proportional to 3\u00b7\u2206VBE when BS = 0. This charge-balancing scheme is equivalent to connecting the ADC\u2019s input to 3 \u00b7VBE2 and then straddling it with two different references 3 \u00b7VBE1 + VBE2 and 3 \u00b7VBE1 [11]."
        },
        {
            "heading": "4.2. Sampling Scheme in the Incremental \u2206-\u03a3 ADC",
            "text": "In order to realize the gain factor \u03b3 = 3, the differential input voltage of the ADC applies the following sequence of voltages: +\u2206VBE, \u2212\u2206VBE, +\u2206VBE, VBE2 when BS = 1 and +\u2206VBE, \u2212\u2206VBE, +\u2206VBE, 0 when BS = 0. As shown in Figure 6, a cascade-of-integrators feedforward form (CIFF) structure was used because the feedforward structure reduces the output swing in each stage, so it is easy to meet integrators\u2019 linearity and slewing requirements [17]. The input of the second-order incremental \u2206-\u03a3 ADC changes corresponding to the bit-stream. In each cycle of the ADC, the input is 3\u00b7\u2206VBE when BS = 0 and 3 \u00b7 \u2206VBE\u2212 VBE2 when BS = 1.\nThe detailed design of ADC is shown in Figure 7, cascoded FIAs are used in both integrators to achieve higher energy efficiency. The overall circuit is designed symmetrically to reduce gain errors due to mismatched capacitors. Chopping is applied only to the first integrator to reduce 1/f noise and offset. The effect caused by first integrator will impose on the input, while the rest will be suppressed by the loop. Since the same capacitors sample \u2206VBE or VBE2, there is no need for DEM or the associated logic.\nAs shown in Figure 8, the first-stage integrator uses two cycles of non-overlapping clock phases \u03a61 and \u03a62 to sample and integrate. During the last phase of the two cycles (\u03a6\u2032\u20321), the second-stage integrator samples the output voltage of the first-stage integrator and then integrates during the next phase (\u03a6\u2032\u20322). Then the output voltages of the two stages are summed by an SC-adder and evaluated by the comparator to generate the output bit-stream [16]. The comparator is triggered by \u03a6eval at the interval of the non-overlapping clock phases. The sampling capacitor Cs1 is 600 fF, which is determined by the constraints of kT/C noise. The sampling frequency is set to 100 kHz, so each clock phase takes 5 \u00b5s, the cycle required for generating one-bit output is 20 \u00b5s. For the proposed incremental \u2206-\u03a3 ADC, 512 cycles are enough to obtain a 15-bit resolution, and a complete conversion takes 10.24 ms."
        },
        {
            "heading": "4.3. Cascoded FIA",
            "text": "For the \u2206-\u03a3 ADC, the core module is the integrator. The traditional \u2206-\u03a3 ADC often uses static current-biased OTAs as its integrators, and a bias current generation circuit is also needed to ensure the static operating point of the OTA. The OTAs are typically the most power-hungry blocks due to their high static current [18]. Unlike traditional OTA, FIAs do not need any static bias current. In addition, FIA only works in half of the cycle and draws a dynamic current from VDD during the reset phase. However, a conventional single-stage FIA can only achieve a very modest DC gain (less than 20\u201330 dB). The two-stage FIA realized in [19,20] increases the DC gain at the cost of incurring an increased input-referred noise. In this paper, a cascoded FIA is used as the integrator in \u2206-\u03a3 ADC to improve the DC gain while not affecting the noise. The operating point of the FIA is time-varying, and the average transconductance Gm,avg of the FIA determines the settling speed. Gm,avg is strongly related to the value of the reservoir capacitor, which is used as a power source. However, it is weakly dependent on the device dimensions and absolute temperature [18]. As shown in Figure 9, FIA consists of a pair of cascoded inverters powered by the reservoir capacitor. It adapts a common source and common gate structure, and the gate of the cascode MOSFETs (MP3,4 and MN3,4) is connected to VCM = VDD/2 to reduce additional bias voltage. The body and source of the cascode MOSFETs are connected to form low threshold voltage. As a result, the equivalent transconductance of the MOSFETs increases, so the DC gain increases. The cascode MOSFETs operate in weak inversion regions to prevent the main MOSFETs (MP1,2 and MN1,2) from entering the triode region. Once the reset phase (sample phase \u03a61) starts, the reservoir capacitor CRES is pre-charged to VDD and GND. In order not to impact the sample process, the inputs and outputs of the FIA are connected to the common-mode voltage (VCM). During the amplification phase (integrate phase \u03a62), the cascoded inverters are powered by CRES and amplify the input signal. The charge stored in CRES becomes depleted as current flows through the circuit, and hence, finally, the inverters shut off [20]. The integrator using only one stage dynamic amplifier circuit does not need a common mode feedback circuit, nor does it have the problem of stability. However, the signal swings are reduced for a given linearity because of the cascode. Owing to the input feedforward path and dynamic range scaling of the integrator outputs, this does not severely limit the incremental \u2206-\u03a3 ADC [18]. The reservoir capacitance value of the first stage integrator is scaled to be 5.6 pF to ensure DC gain over 80 dB in a full temperature range. The one in the second-stage integrator is scaled to be 2 pF to ensure DC gain over 60 dB. Chopping at fs/2 is applied only to the first integrator to suppress the effect of 1/f noise and offset. The two integrators of the \u2206-\u03a3 ADC draws 4.5 uA from 3.3 V supply in simulation."
        },
        {
            "heading": "4.4. Switch Leakage",
            "text": "Leakage current rises with temperature and has a significant effect at high temperatures. As shown in Figure 7, the outputs of the bipolar core(VBE1 and VBE2) are directly connected to the sampling network of incremental\u2206-\u03a3 ADC. In this case, switch leakage will have an influence on PNP\u2019s bias current; thus, errors will be brought to the sampled voltage. The number of switches is proportionally related to the total amount of leakage. In previous work [11], on-chip calibration is used, and two additional sampling switches are required. This work is calibrated on the digital back-end and only needs six sampling switches. To further reduce switch leakage, T-switches (Figure 10) are used as sampling switches [21]. It consists of two series-connected NMOSFETs and an intermediate voltagecontrolling PMOSFET. The PMOSFET biases the central node to Vbias (VDD/2 in this case) when the switch is OFF, as one of the two NMOSFETs is always in the deep cut-off region, and T-switches enable a higher accuracy at high temperatures with less switch leakage."
        },
        {
            "heading": "5. Exprimental Results",
            "text": "The proposed temperature sensor is realized in a 180 nm CMOS process and occupies 0.13 mm2 (see Figure 11). The sensor includes sensing front-end, incremental \u2206-\u03a3 ADC and control logic. At room temperature, the sensing front-end draws a current of 4.5 \u00b5A, the comparator draws a current of 2 \u00b5A under 3.3 V analog supply, the two-stage integrators draw a current of 7 \u00b5A under 3.3 V digital supply, and the control logic draws a current\nof 630 nA under 1.8 V digital supply; a distribution of power consumption is shown in Figure 12. The supply sensitivity from 2 to 3.8 V is 0.06 \u25e6C/V. The calibration logic and decimation filter are realized off-chip for flexibility.\nFor the temperature sensing characterization, 15 samples packaged in ceramic DIP packages from one batch are measured over the temperature range from \u221250 to 150 \u25e6C using a thermal chamber. The test setup is shown in Figure 13. The dimension of the thermal chamber is about 50 \u00d7 51 \u00d7 62 cm and divided into three layers, the upper layer, the middle layer and the lower layer. The PCB with test chips is placed in a metal box on the middle layer to decrease the fluctuation of temperature around the test chips. When the indicator of the thermal chamber reaches the required temperature, keep it for more than one hour to stabilize the ambient temperature, and then the measurements are conducted. A reference temperature sensor (Pt-100 resistor) with less than 30 mK inaccuracy is placed in the center of test chips during the measurement. In order to ensure performance at high temperatures, the PCBs with setup signals are placed outside the thermal chamber, including power supplies (LDOs) and onboard MCUs (STM32L011K4), which work as the bridge of communication, etc. High temperature-resistant signal wires connect the PCBs inside and outside of the temperature chamber. The logic analyzer samples the output bit-stream. The 100 kHz system clock is generated by signal generators. In order to verify the main functions of the temperature sensor more accurately, we do not design the system clock generator internally.\nAccording to (4) and (5), X = 3\u00b7\u2206VBE1/VBE is digitized from \u221250 to 150 \u25e6C and is fitted with temperature as follows:\nT = A \u00b7 (\nk \u00b7 X k \u00b7 X + 1\n) + B (9)\nwhere A = 634.7, k = 5.052, B = \u2212289.5. All the test chips apply the same coefficients, and then the inaccuracy is calculated. As shown in Figure 14, the measured untrimmed inaccuracy is less than \u00b11.4 \u25e6C (3\u03c3). This improves to \u00b10.8 \u25e6C (3\u03c3) (see Figure 15) after onepoint calibration at 40 \u25e6C, which is a point in the middle of the temperature measurement range. Calibration at this point can keep a balance between the inaccuracies at the minimum of the temperature measurement range and maximum of the temperature measurement range. In this case, the best inaccuracy is achieved after one-point calibration at 40 \u25e6C. Table 1 summarizes the temperature sensor\u2019s main characteristics and compares it with the state-of-the-art. Refs. [9,10,22] are temperature sensors working at high temperature and [17] have similar supply voltages. Although the temperature sensor works at 3.3 V supply, it consumes significantly less power than most other designs. It also has a better inaccuracy than [10,22]."
        },
        {
            "heading": "6. Conclusions",
            "text": "An energy-efficient BJT-based temperature sensor employing a \u2206-\u03a3 ADC as a readout interface is designed and fabricated in a 180-nm standard CMOS process. The cascoded FIA is used as the integrator instead of the conventional OTA to achieve a low power consumption. To enhance the accuracy, chopping, DEM, \u03b2-compensation resistor and optimized bias current are applied in the front-end while the charge-balancing scheme and T-switch are used in \u2206-\u03a3 ADC. The accuracy of the proposed sensor is \u00b10.8 \u25e6C (3\u03c3) from \u221250 \u25e6C to 150 \u25e6C after one point calibration at 40 \u25e6C. The total power consumption is 45.7 \u00b5W.\nAuthor Contributions: Conceptualization, Z.H.; methodology, C.Q., Z.H. and Y.L.; software, X.Y.; validation, C.Q.; investigation, C.Q.; resources, C.Q.; data curation, C.Q.; writing\u2014original draft preparation, C.Q.; writing\u2014review and editing, C.Q., Z.H., Y.L. and X.Y.; supervision, J.L., L.L., N.T. and X.Y.; project administration, J.L.; funding acquisition, J.L., L.L. and N.T. All authors have read and agreed to the published version of the manuscript.\nFunding: This work is supported by the Joint R&D Fund of Beijing Smartchip Microelectronics Technology Co., Ltd. (Beijing, China) and 2021 1st Key Science and Technology Program of Ningbo City under Grant No.2021Z087.\nInstitutional Review Board Statement: Not applicable.\nInformed Consent Statement: Not applicable.\nData Availability Statement: Not applicable.\nConflicts of Interest: The authors declare no conflict of interest.\nAbbreviations The following abbreviations are used in this manuscript:\nFIA Floating-inverter-based dynamic amplifier OTA Operational transconductance amplifier DEM Dynamic element matching BJT Bipolar junction transistor TD Thermal diffusivity HA-VCAL Heater-assisted voltage calibration ADC Analog-to-digital converter CTAT Complementary to absolute temperature PTAT Proportional to absolute temperature VCM Common-mode voltage\nReferences 1. Temperature Sensor Performance Survey. Available online: http://ei.ewi.tudelft.nl/docs/TSensor$_$survey.xls (accessed on 1 April 2022). 2. Souri, K.; Makinwa, K.A.A. A 0.12 mm2 7.4 uW micropower temperature sensor with an inaccuracy of \u00b10.2 \u25e6C (3\u03c3) from \u221230 \u25e6C to 125 \u25e6C. IEEE J.-Solid-State Circuits 2011, 46, 1693\u20131700. [CrossRef] 3. Souri, K.; Chae, Y.; Makinwa, K.A.A. A CMOS Temperature Sensor with a Voltage-Calibrated Inaccuracy of \u00b10.15 \u25e6C (3\u03c3) from \u221255 to 125 \u25e6C. IEEE J.-Solid-State Circuits 2012, 48, 292\u2013301. [CrossRef] 4. Yousefzadeh, B.; Shalmany, S.H.; Makinwa, K.A.A. A BJT-based temperature-to-digital converter with \u00b160 mK (3\u03c3) inaccuracy from \u221255 \u25e6C to +125 \u25e6C in 0.16-um CMOS. IEEE J.-Solid-State Circuits 2017, 52, 1044\u20131052. [CrossRef] 5. Wang, G.; Heidari, A.; Makinwa, K.A.A.; Meijer, G.C.M. An Accurate BJT-Based CMOS Temperature Sensor with Duty-CycleModulated Output. IEEE Trans. Ind. Electron. 2017, 64, 1572\u20131580. [CrossRef] 6. Pan, S.; G\u00fcrley\u00fck, C.; Pimenta, M.F.; Makinwa, K.A.A. A 0.12 mm2 wien-bridge temperature sensor with 0.1 \u25e6C (3\u03c3) inaccuracy\nfrom \u221240 \u25e6C to 180 \u25e6C. In Proceedings of the 2019 IEEE International Solid- State Circuits Conference- (ISSCC), San Francisco, CA, USA, 17\u201321 February 2019; pp. 184\u2013186.\n7. Van Vroonhoven, C.P.L.; Makinwa, K.A.A. An SOI thermal-diffusivity-based temperature sensor with \u00b10.6 \u25e6C (3\u03a3) untrimmed inaccuracy from \u221270 \u25e6C to 170 \u25e6C. Sens. Actuators Phys. 2011, 188, 2887\u20132890. 8. Van Vroonhoven, C.; D\u2019Aquino, D.; Makinwa, K. A \u00b10.4 \u25e6C (3\u03c3) 70 to 200 \u25e6C time-domain temperature sensor based on heat diffusion in Si and SiO2. In Proceedings of the 2012 IEEE International Solid-State Circuits Conference, San Francisco, CA, USA, 19\u201323 February 2012; pp. 204\u2013206. 9. Souri, K.; Souri, K.; Makinwa, K. A 40 \u00b5W CMOS temperature sensor with an inaccuracy of \u00b10.4 \u25e6C (3\u03c3) from \u221255 \u25e6C to 200 \u25e6C. In Proceedings of the 2013 Proceedings of the ESSCIRC (ESSCIRC), Bucharest, Romania, 16\u201320 September 2013; pp. 221\u2013224. 10. Chuang, M.-C.; Tai, C.-L.; Hsu, Y.-C.; Roth, A.; Soenen, E. A temperature sensor with a 3 sigma inaccuracy of \u00b12 \u25e6C without trimming from \u221250 \u25e6C to 150 \u25e6C in a 16 nm FinFET process. In Proceedings of the ESSCIRC Conference 2015\u201441st European Solid-State Circuits Conference (ESSCIRC), Graz, Austria, 14\u201318 September 2015; pp. 271\u2013274. 11. Yousefzadeh, B.; Makinwa, K.A.A. A BJT-Based Temperature-to-Digital Converter with a \u00b10.25 \u25e6C (3\u03c3)-Inaccuracy From \u221240 \u25e6C to +180 \u25e6C Using Heater-Assisted Voltage Calibration. IEEE J.-Solid-State Circuits 2019, 55, 369\u2013377. [CrossRef] 12. Pertijs, M.A.P.; Huijsing, J.H. Precision Temperature Sensors in CMOS Technology; Springer: Dordrecht, The Netherlands, 2006; pp. 51\u201358. 13. Pertijs, M.A.P.; Makinwa, K.A.A.; Huijsing, J.H. A CMOS smart temperature sensor with a 3/spl sigma/ inaccuracy of /spl plusmn/0.1/spl deg/C from -55/spl deg/C to 125/spl deg/C. IEEE J.-Solid-State Circuits 2005, 40, 2805\u20132815. [CrossRef] 14. Pertijs, M.; Huijsing, J. Bias Circuits. U.S. Patent 7 446 598 B2, 4 November 2008. 15. Markus, J.; Silva, J.; Temes, G.C. Theory and applications of incremental /spl Delta//spl Sigma/ converters. IEEE Trans. Circuits Syst. I Regul. Pap. 2004, 51, 678\u2013690. [CrossRef] 16. Y\u00fccetas\u0327, M.; Pulkkine, M.; Gronicz, J.; Halonen, K. A temperature sensor with (3\u03c3) inaccuracy of +0.5/\u22120.75 \u25e6C and energy\nper conversion of 0.65 \u00b5J using a 0.18 \u00b5m CMOS technology. In Proceedings of the 2013 NORCHIP, Vilnius, Lithuania, 11\u201312 November 2013; pp. 1\u20134.\n17. Tang, Z.; Fang, Y.; Yu, X.-P.; Shi, Z.; Tan, N. A CMOS Temperature Sensor With Versatile Readout Scheme and High Accuracy for Multi-Sensor Systems. IEEE Trans. Circuits Syst. I Regul. Pap. 2018, 65, 3821\u20133829. [CrossRef] 18. Kumar, R.S.A.; Krishnapura, N.; Banerjee, P. Analysis and Design of a Discrete-Time Delta-Sigma Modulator Using a Cascoded Floating-Inverter-Based Dynamic Amplifier. IEEE J.-Solid-State Circuits 2022, 57, 3384\u20133395. [CrossRef]\n19. Tang, X.; Kasap, B.; Shen, L.; Yang, X.; Shi, W.; Sun, N. An Energy-Efficient Comparator with Dynamic Floating Inverter Pre-Amplifier. In Proceedings of the 2019 Symposium on VLSI Circuits, Kyoto, Japan, 9\u201314 June 2019; pp. C140\u2013C141. 20. Tang, X.; Yang, X.; Zhao, W.; Hsu, C.-K.; Liu, J.; Shen, L.; Mukherjee, A.; Shi, W.; Li, S.; Pan, D.Z.; et al. A 13.5-ENOB, 107-\u00b5W Noise-Shaping SAR ADC with PVT-Robust Closed-Loop Dynamic Amplifier. IEEE J.-Solid-State Circuits 2020, 55, 3248\u20133259. [CrossRef] 21. Ishida, K.; Kanda, K.; Tamtrakarn, A.; Kawaguchi, H.; Sakurai, T. Managing leakage in charge-based analog circuits with low-V/sub TH/ transistors by analog T-switch (AT-Switch) and super cut-off CMOS. In Proceedings of the 2005 Symposium on VLSI Circuits, Kyoto, Japan, 16\u201318 June 2005; pp. 122\u2013125. 22. Pathrose, J.; Liu, C.; Chai, K.T.C.; Xu, Y.P. A Time-Domain Band-Gap Temperature Sensor in SOI CMOS for High-Temperature Applications. IEEE Trans. Circuits Syst. II Express Briefs 2015, 62, 436\u2013440. [CrossRef]"
        }
    ],
    "year": 2022
}