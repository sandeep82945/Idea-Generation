{
    "abstractText": "In this work, a two-dimensional (2D) position-detection device using a single axis magnetic sensor combined with orthogonal gradient coils was designed and fabricated. The sensors used were an induction coil and a GMR spin-valve sensor GF807 from Sensitec Inc. The field profiles generated by the two orthogonal gradient coils were analyzed numerically to achieve the maximum linear range, which corresponded to the detection area of the tracking system. The two coils were driven by 1-kHz sine wave currents with a 90\u25e6 phase difference to generate the fields with uniform gradients along the xand y-axis in the plane of the tracking stage. The gradient fields were detected by a single-axis sensor incorporated with a digital dual-phase lock-in detector to retrieve the position information. A linearity correction algorithm was used to improve the location accuracy and to extend the linear range for position sensing. The mean positioning error was found to be 0.417 mm, corresponding to the relative error of 0.21% in the working range of 200 mm \u00d7 200 mm, indicating that the proposed tracking system is promising for applications requiring accurate control of the two-dimensional position.",
    "authors": [
        {
            "affiliations": [],
            "name": "Han-Pang Huang"
        },
        {
            "affiliations": [],
            "name": "Xuan Thang Trinh"
        },
        {
            "affiliations": [],
            "name": "Van Su Luong"
        },
        {
            "affiliations": [],
            "name": "Chih-Cheng Lu"
        }
    ],
    "id": "SP:906e02e4b7bf399e4711ad87cb2c7f31ececb486",
    "references": [
        {
            "authors": [
                "R. Zhu",
                "Z. Zhou"
            ],
            "title": "A real-time articulated human motion tracking using tri-axis inertial/magnetic sensors package",
            "venue": "IEEE Trans. Neural Syst. Rehabil. Eng. 2004,",
            "year": 2004
        },
        {
            "authors": [
                "M.J. Caruso",
                "L.S. Withanawasam"
            ],
            "title": "Vehicle detection and compass applications using AMR magnetic sensors",
            "venue": "Sens. Expo Proc",
            "year": 1999
        },
        {
            "authors": [
                "D.M. Pham",
                "S.M. Aziz"
            ],
            "title": "A real-time localization system for an endoscopic capsule using magnetic sensors",
            "venue": "Sensors 2014,",
            "year": 2092
        },
        {
            "authors": [
                "X. Wang",
                "M.Q.-H. Meng",
                "C. Hu"
            ],
            "title": "A localization method using 3-axis magnetoresistive sensors for tracking of capsule endoscope",
            "venue": "In Proceedings of the 2006 International Conference of the IEEE Engineering in Medicine and Biology Society, New York, NY, USA,",
            "year": 2006
        },
        {
            "authors": [
                "J.R. Childress",
                "M.J. Carey",
                "S. Maat",
                "N. Smith",
                "R.E. Fontana",
                "D. Druist",
                "K. Carey",
                "J.A. Katine",
                "N. Robertson",
                "T.D Boone"
            ],
            "title": "All-Metal Current-Perpendicular-to-Plane Giant Magnetoresistance Sensors for Narrow-Track Magnetic Recording",
            "venue": "IEEE Trans. Magn",
            "year": 2008
        },
        {
            "authors": [
                "C. Christides",
                "I. Panagiotopoulos",
                "D. Niarchos",
                "G. Jones"
            ],
            "title": "Fast magnetic field mapping of permanent magnets with GMR bridge and Hall-probe",
            "venue": "sensors. Sens. Actuators A Phys",
            "year": 2003
        },
        {
            "authors": [
                "C. Hu",
                "M. Li",
                "S. Song",
                "R. Zhang",
                "M.Q.-H. Meng"
            ],
            "title": "A cubic 3-axis magnetic sensor array for wirelessly tracking magnet position and orientation",
            "venue": "IEEE Sens. J",
            "year": 2010
        },
        {
            "authors": [
                "C. Hu",
                "M.-H. Meng",
                "M. Mandal",
                "X. Wang"
            ],
            "title": "3-axis magnetic sensor array system for tracking magnet\u2019s position and orientation",
            "venue": "In Proceedings of the 2006 6th World Congress on Intelligent Control and Automation, Dalian, China,",
            "year": 2006
        },
        {
            "authors": [
                "V. Schlageter",
                "P.-A. Besse",
                "R. Popovic",
                "P. Kucera"
            ],
            "title": "Tracking system with five degrees of freedom using a 2D-array of Hall sensors and a permanent magnet",
            "venue": "Sens. Actuators A Phys",
            "year": 2001
        },
        {
            "authors": [
                "W. Hou",
                "X. Zheng",
                "C. Peng"
            ],
            "title": "Experimental study of magnetic-based localization model for miniature medical device placed indwelling human body",
            "venue": "In Proceedings of the 2005 IEEE Engineering in Medicine and Biology 27th Annual Conference, Shanghai,",
            "year": 2006
        },
        {
            "authors": [
                "S. Yabukami",
                "H. Kikuchi",
                "M. Yamaguchi",
                "K.I. Arai",
                "K. Takahashi",
                "A. Itagaki",
                "N. Wako"
            ],
            "title": "Motion capture system of magnetic markers using three-axial magnetic field sensor",
            "venue": "IEEE Trans. Magn",
            "year": 2000
        },
        {
            "authors": [
                "N.M. Prakash",
                "F.A. Spelman"
            ],
            "title": "Localization of a magnetic marker for GI motility studies: An in vitro feasibility study",
            "venue": "In Proceedings of the 19th Annual International Conference of the IEEE Engineering in Medicine and Biology Society, Chicago, IL, USA,",
            "year": 1997
        },
        {
            "authors": [
                "E. Paperno",
                "I. Sasada",
                "E. Leonovich"
            ],
            "title": "A new method for magnetic position and orientation tracking",
            "venue": "IEEE Trans. Magn",
            "year": 2001
        },
        {
            "authors": [
                "B.Y. Yeo",
                "R.A. McLaughlin",
                "R.W. Kirk",
                "D.D. Sampson"
            ],
            "title": "Enabling freehand lateral scanning of optical coherence tomography needle probes with a magnetic tracking system",
            "venue": "Biomed. Opt. Express 2012,",
            "year": 2012
        },
        {
            "authors": [
                "E. Paperno",
                "P. Keisar"
            ],
            "title": "Three-dimensional magnetic tracking of biaxial sensors",
            "venue": "IEEE Trans. Magn. 2004,",
            "year": 2004
        },
        {
            "authors": [
                "A. Plotkin",
                "E. Paperno"
            ],
            "title": "3-D magnetic tracking of a single subminiature coil with a large 2-D array of uniaxial transmitters",
            "venue": "IEEE Trans. Magn",
            "year": 2003
        },
        {
            "authors": [
                "D. Roetenberg",
                "P.J. Slycke",
                "P.H. Veltink"
            ],
            "title": "Ambulatory position and orientation tracking fusing magnetic and inertial sensing",
            "venue": "IEEE Trans. Biomed. Eng",
            "year": 2007
        },
        {
            "authors": [
                "G. Zachmann"
            ],
            "title": "Distortion correction of magnetic fields for position tracking",
            "venue": "In Proceedings of the Computer Graphics International, Hasselt and Diepenbeek, Belgium,",
            "year": 1997
        },
        {
            "authors": [
                "V.V. Kindratenko"
            ],
            "title": "A survey of electromagnetic position tracker calibration techniques",
            "venue": "Virtual Real",
            "year": 2000
        },
        {
            "authors": [
                "J. Wikswo"
            ],
            "title": "The magnetic inverse problem for NDE. In SQUID Sensors: Fundamentals, Fabrication and Applications",
            "year": 1996
        },
        {
            "authors": [
                "A. Mandelis"
            ],
            "title": "Signal-to-noise ratio in lock-in amplifier synchronous detection: A generalized communications systems approach with applications to frequency, time, and hybrid (rate window) photothermal measurements",
            "venue": "Rev. Sci. Instrum",
            "year": 1994
        },
        {
            "authors": [
                "V.S. Luong",
                "C.-C. Lu",
                "J.-W. Yang",
                "J.-T. Jeng"
            ],
            "title": "A novel CMOS transducer for giant magnetoresistance",
            "venue": "sensors. Rev. Sci. Instrum",
            "year": 2017
        },
        {
            "authors": [
                "X. He",
                "Z. Zheng",
                "C. Hu"
            ],
            "title": "Magnetic localization and orientation of the capsule endoscope based on a random complex algorithm. Med. Devices (Auckl",
            "venue": "NZ) 2015,",
            "year": 2015
        },
        {
            "authors": [
                "W.S. You",
                "B.J. Choi",
                "H.R. Choi",
                "J.C. Koo",
                "H. Moon"
            ],
            "title": "Localization using magnetic patterns for autonomous mobile robot",
            "venue": "Int. J. Adv. Robot. Syst",
            "year": 2014
        },
        {
            "authors": [
                "M.-C. Kim",
                "E.-S. Kim",
                "J.-O. Park",
                "E. Choi",
                "C.-S. Kim"
            ],
            "title": "Robotic Localization Based on Planar Cable Robot and Hall Sensor Array Applied to Magnetic Capsule Endoscope",
            "venue": "Sensors",
            "year": 2020
        },
        {
            "authors": [
                "G.-W. Huang",
                "J.-T. Jeng"
            ],
            "title": "Implementation of 16-channel AMR sensor array for quantitative mapping of two-dimension current distribution",
            "venue": "IEEE Trans. Magn. 2018,",
            "year": 2018
        }
    ],
    "sections": [
        {
            "text": "Citation: Trinh, X.T.; Jeng, J.-T.;\nNguyen, H.-T.; Luong, V.S.; Lu, C.-C.\nTwo-Dimensional Position Tracking\nUsing Gradient Magnetic Fields.\nSensors 2022, 22, 5459. https://\ndoi.org/10.3390/s22145459\nAcademic Editors: Han-Pang Huang\nand Chun-Yeon Lin\nReceived: 8 June 2022\nAccepted: 19 July 2022\nPublished: 21 July 2022\nPublisher\u2019s Note: MDPI stays neutral\nwith regard to jurisdictional claims in\npublished maps and institutional affil-\niations.\nCopyright: \u00a9 2022 by the authors.\nLicensee MDPI, Basel, Switzerland.\nThis article is an open access article\ndistributed under the terms and\nconditions of the Creative Commons\nAttribution (CC BY) license (https://\ncreativecommons.org/licenses/by/\n4.0/).\nKeywords: position tracking; induction coil; gradient magnetic fields; magnetic tracking"
        },
        {
            "heading": "1. Introduction",
            "text": "Nowadays, magnetic sensors are the key devices in multiple applications; e.g., material characterization, position detections, rotation measurements, and motion tracking. Among them, motion-tracking techniques based on the detection of AC or pulsed DC fields are widely applied in human-body motion tracking [1], vehicle tracking [2], medical marking [3,4], etc. Several types of magnetic sensors have been successfully applied in tracking systems, such as the giant magnetoresistance (GMR) [5,6], anisotropic magnetoresistance (AMR) [7,8], Hall sensor [9,10], and fluxgate types [11,12]. The typical magnetic tracking techniques rely on the detection of the vector components of magnetic fields emitted by three-axis dipole transmitters [13,14]. Since the distribution of the dipole field is non-linear in space, a high-speed computational system is required to perform real-time digital signal processing to retrieve the position of the target sensor. An alternative method of magnetic tracking is to use a biaxial sensor in combination with a triad three-axial transmitter [15]. The distance resolution of this method is better than that of the conventional triad threeaxial tracking method. Moreover, by using a large 2D array of uniaxial transmitters, the signal-to-noise ratio (SNR) and distance resolution, which are two important parameters in a position-tracking system, have been significantly improved [16]. Additionally, the\nSensors 2022, 22, 5459. https://doi.org/10.3390/s22145459 https://www.mdpi.com/journal/sensors\noptimization of the transmitting coil\u2019s geometry also improves the dipole field approximation. It is promising that the combination of magnetic and inertial sensors for arbitrary position and orientation can compensate for the cumulative orientation error caused in dynamic motion. For example, the real-time six degrees of freedom (DOF) tracking of human motion was demonstrated [1,17]. However, in retrieving the position, the accuracy is limited by the distortion of magnetic fields caused by interference in the environment. Hence, to enhance the accuracy of magnetic tracking, the error-correction algorithm must be included to prevent the negative influence of magnetic field distortion [18,19]. To simplify the error correction algorithm, a feasible way is to design a magnetic field following a simple distribution function, e.g., the constant gradient magnetic field. For magnetic field mapping applications [6], the determination of the actual field point taken by the sensor is crucial to increasing the accuracy of the magnetic inverse problem [20]. Using the magnetic sensor to track its position itself would be a novel solution to solve this problem. In this paper, we proposed a two-dimensional magnetic tracking method using a single-axis magnetic sensor as a target in a gradient field. Two kinds of magnetic sensors, including induction coil and GMR spin-valve sensor, are used to demonstrate a twodimensional position-tracking system using gradient field in real-time. The gradient coil was designed, fabricated, and analyzed to achieve a field range with a stable constant gradient, allowing the direct conversion of the magnetic field into position with a single axis magnetic sensor. The results of two-dimensional magnetic tracking were evaluated, and the algorithm for further linearity correction was discussed."
        },
        {
            "heading": "2. Experimental Designs",
            "text": ""
        },
        {
            "heading": "2.1. Design of Two-Dimensional Magnetic Tracking System",
            "text": "The two-dimensional magnetic tracking system consists of a single-axis magnetic sensor and two sets of magnetic field gradient coils, as shown in Figure 1. A single-axis magnetic sensor, which is an induction coil or a GMR spin-valve sensor, is used as the target in a two-axis gradient field. The excitation waveform for synchronous detection is provided by a function generator, model AFG-2225 from GW-Instek. The in-phase and quadrature excitation signals are amplified by a two-channel power amplifier to drive the gradient coils. The output signal of the sensor is analyzed by a lock-in amplifier, Model 7270 DSP from the Signal Recovery, to resolve the in-phase and quadrature components. The analog outputs of the lock-in amplifier are connected to a data acquisition (DAQ) device, model USB-6216 from the National Instruments. The graphical user interface (GUI) software for signal recording and real-time processing is coded in LabVIEW. To investigate the spatial response of the system, the gradient coils are mounted on an X-Y translation stage while the sensor is fixed above the center of the detection plane with a fixed gap, as shown in Figure 1a. Two step-motors controlled by a PLC driver are used for driving the translation stage to move the gradient coil relative to the sensor. The gradient magnetic field for position tracking is generated by the x- and y-gradient coils, as shown in Figure 2. The two gradient coils have the same size and coil turns. Each gradient coil consists of four elements, including two main coils and two shim coils. The element coils are formed by wrapping 200 turns of enameled copper wires around rectangular frames made of non-magnetic acrylic plastic material. The shim coils are 300 mm\u00d7 50 mm\u00d7 3 mm in dimension, and the main coils are 300 mm \u00d7 115 mm \u00d7 3 mm in dimension. The four-element coils are mounted on an acrylic substrate plate. The shim coils for the x-gradient field are fixed on the top of the plate, while the main coils are at the bottom. Moreover, the shim coils and main coils of the y-gradient coil are reversely arranged to the x-gradient coil. The four-element coils for each axis are connected in series, and the winding directions are arranged to generate the constant gradient field at the center of the tracking stage. The two gradient coils are mounted 20 mm apart and aligned orthogonally to each other.\nThe in-phase and quadrature-phase sinusoidal excitation currents Ii and Iq are injected into the x- and y-gradient coils, respectively. They are at the same frequency with the phases differed by 90\u25e6. The magnitude and polarity of gradient fields Bi and Bq are controlled by setting the amplitude and phase of the excitation current. The excitation signals from the function generator are amplified by an in-house-built power amplifier circuit to drive the coils with 1-kHz sine wave currents. When the sensor moves on the detection plane above the gradient coils, its sensing direction is perpendicular to the plane. For the x-gradient coil, the distances from the detection plane to the shim and main coils are 66 mm and 71.5 mm, respectively.\nFor the y-gradient coil, the distances are 50.5 mm and 45 mm for the shim and main coils, respectively. The optimal distances between the element coils are determined by numerical simulation to maximize the linear range of field distribution. Bi and Bq, the z-axis field components for the x- and y-gradient coils, are calculated by calculating the contributions of the element coils, as follows:\nBi = Bz,s(+x) + Bz,m(+x) + Bz,s(\u2212x) + Bz,m(\u2212x), (1)\nBq = Bz,s(+y) + Bz,m(+y) + Bz,s(\u2212y) + Bz,m(\u2212y). (2)\nwhere the subscript \u201cs\u201d represents the shim coil and \u201cm\u201d indicates the main coil. The z-axis field component induced by each element coil is calculated by calculating the contribution of four current segments. For example, the field component for the +x shim coil is:\nBz,s(+x) = Bz,s(x1) + Bz,s(x2) + Bz,s(y1) + Bz,s(y2), (3)\nwhere Bz,s(x1), Bz,s(x2), Bz,s(y1), and Bz,s(y2) are the contributions of AB, CD, BC and DA current segments, respectively, as shown in Figure 3. For each segment, the z-axis field component was calculated by the equation derived from the Biot\u2013Savart law:\nBz,s(x1) = \u00b50 I 4\u03c0R (sin \u03b12 \u2212 sin \u03b11) cos \u03b8 (4)\nin which R = \u221a (x1 \u2212 x0)2 + z20 (5)\nsin \u03b11 = (y2 \u2212 y0)\u221a\n(x1 \u2212 x0)2 + (y2 \u2212 y0)2 + z20 (6)\nsin \u03b12 = (y1 \u2212 y0)\u221a\n(x1 \u2212 x0)2 + (y1 \u2212 y0)2 + z20 (7)\nand\ncos \u03b8 = (x1 \u2212 x0)\u221a\n(x1 \u2212 x0)2 + z20 (8)\nThe contribution of the other element coils, i.e., Bz,s(x2), Bz,s(y1), and Bz,s(y2), were calculated in the similar way. The obtained field distributions for the x- and y-gradient coils on the detection plane are shown in Figure 4. It was found that Bi and Bq increase monotonically along the axis of the gradient. The field Bi of x-coil is almost linear in the range of x = \u00b10.1 m, while the field Bq of y-coil exhibits more nonlinearity. The shorter distance from the detection plane to the y-coil causes deterioration in the uniformity of the gradient of Bq but enhances the mean-field gradient. When a linearity-correction algorithm is applied, the usable dynamic range of position tracking for the y-coil becomes larger than that for the x-coil.\nThe field profiles generated by the two orthogonal gradient coils were analyzed numerically to achieve the maximum linear range, which corresponded to the detection area of the tracking system. The simulation of field distributions was performed using the ANSYS software with the excitation current of 4.28 mA. The simulated field distributions shown in Figure 5. Figure 5a,b illustrate the vector field distribution of x- and y-coil, respectively. From Figures 4 and 5c,d, it can be observed that the calculated and simulated field distributions of Bi and Bq are similar in terms of the curve shape and amplitude.\nTo verify the simulation results, the field distribution generated by the combined gradient coils driven by a 1-kHz current was measured by an induction coil, as shown in Figure 6. The working range on the x\u2013y plane is 200 mm \u00d7 200 mm in dimension and the sampling points are spaced by 20 mm for both the x- and y-directions. The field distribution on the detection plane was obtained by recording the in-phase and quadrature-phase outputs from the sensor output, i.e., Vi and Vq, respectively, using a dual-phase lock-in amplifier. It was found that the field distribution of x-coil was more linear than that of the y-coil, in agreement with the simulation results. The simulation results showed that, in the working range, the maximum amplitude was about 4.2 \u00b5T for the Bq (x-gradient) field and more than 6.3 \u00b5T for the Bq (y-gradient) field with the excitation current of 4.28 mA. The measured field distribution is shown in Figure 6, where the maximum field amplitude in the working range is about 4.18 \u00b5T for Bi and 6.8 \u00b5T for Bq. The minor discrepancy in Bq values between the simulated and experimental results may be attributed to the gain errors in the amplifying circuits for generating the driving currents in the x- and y-coils. The field distribution was also verified with the coils driven by a direct current using a commercial fluxgate sensor. Since the variation in the size, shape, and alignment of the coil may also induce the error in field magnitude, the comprehensive method for making the correction is experimental calibration."
        },
        {
            "heading": "2.2. Working Principle",
            "text": "The position of the target is obtained by detecting the gradient fields Bi and Bq generated by the two gradient magnetic coils, of which the coordinates are correlated to the field distribution. The sensor output, which contains the mixed signals from the x- and y-gradient coils, is analyzed by a digital dual-phase lock-in amplifier with a total gain of 50. The use of the phase-sensitive detection technique avoids interference from environmental disturbance, and hence optimizes the signal-to-noise ratios (SNR) [21,22]. The process for retrieving the position signals with dual-phase synchronous detection is illustrated in Figure 7. The waveform of sensor output is multiplied by the in-phase and quadraturephase reference signals synchronized to the excitation current with a phase difference \u03d5. When \u03d5 is tuned to the correct value, the dual-phase outputs Vi and Vq correspond to the x- and y-coordinates of the target magnetic sensor, respectively. The response time of the system is determined by the low-pass filter with a time constant of 10 ms. The dual-phase outputs of the lock-in amplifier, Vi and Vq, are recorded by a 16-bit DAQ controlled by a GUI software. The linearity correction algorithm is performed in real time to retrieve the position of the sensor on the detection plane.\nLet Bi and Bq be the in-phase and quadrature-phase amplitudes of the z-axis component generated by the planar gradient coils, as shown in Figure 2. In the linear range, they have constant gradients along the x- and y- axes, respectively. In the ideal case, their intensities are linear functions of the spatial coordinates x and y. When the origin of an x-y plane is set to be at the center of the gradient coils, Bi and Bq are proportional to x and y coordinates, respectively:\nBi = gxx (9)\nBq = gyy (10)\nwhere gx = dBi/dx and gy = dBq/dy are the constant gradients of Bi and Bq. In our system, the waveforms of Bi and Bq are sinusoidal at the same frequency (1 kHz), but the phases differ by 90\u25e6. When a magnetic field sensor detects the z-axis component Bz at a field point on the same x-y plane, it can be represented by Bi and Bq, as follows:\nBz(\u03c9t) = Bi cos(\u03c9t) + Bq sin(\u03c9t) = B0 cos(\u03c9t\u2212 \u03c6) (11)\nwhere B0 = (Bi2 + Bq2)1/2 is the amplitude and \u03c6 = atan(Bq/Bi) is the phase of the z-axis component. In terms of B0 and \u03c6, Bi = B0 cos\u03c6 and Bq = B0 sin\u03c6. The spatial coordinates x and y can be resolved from the sensor outputs using a dual-phase synchronous detection with a phase reference to the excitation currents in the coils. Given the field-to-voltage transfer coefficient k for the field sensor, the orthogonal output voltages, Vx and Vy, correspond to the fields as follows:\nVx = kBi = kgxx (12)\nVy = kBq = kgyy (13)\nIn general, the output of the detection circuit has a reference phase difference \u03d5 for Bz. With a non-zero \u03d5, the corresponding in-phase and quadrature-phase outputs Vi and Vq are both functions of \u03d5:\nVz(\u03d5) = k 2 T T\u222b 0 Bz(\u03c9t) cos(\u03c9t + \u03d5)dt = kB0 cos(\u03c6 + \u03d5) (14)\nwhere \u03c6 = arctan(Vy/Vx). With the phase differences \u03d5 and \u03d5\u221290\u25e6, the in-phase and quadrature-phase outputs are associated with Vx and Vy, as follows:\nVi = Vz(\u03d5) = Vx cos \u03d5\u2212Vy sin \u03d5 (15)\nVq = Vz(\u03d5\u2212 90\u25e6) = Vx sin \u03d5\u2212Vy cos \u03d5 (16)\nThis can be expressed in matrix representation:[ Vi Vq ] = [ cos \u03d5 \u2212 sin \u03d5 sin \u03d5 cos \u03d5 ][ Vx Vy ] (17)\nTherefore, the coordinates Vx and Vy on the voltage plane are:[ Vx Vy ] = [ cos \u03d5 sin \u03d5 \u2212 sin \u03d5 cos \u03d5 ][ Vi Vq ] (18)\nAccording to (18), the change in reference phase \u03d5 corresponds to a rotation on the Vx-Vy voltage plane, which results in a rotation in the spatial coordinates x and y about the z-axis. By adjusting the phase angle \u03d5, one may redefine the orientation of the coordinate\naxes, providing that the gradients are perfectly constant. Using Equations (12) and (13) and (18), the spatial coordinates x and y can be calculated from the output voltage as follows:[\nx y\n] =\n1 kgxgy [ gy cos \u03d5 gy sin \u03d5 \u2212gx sin \u03d5 gx cos \u03d5 ][ Vi Vq ] (19)\nFor the gradients |gx| = |gy|, the aspect ratio between the x- and y- axes is 1, which means that the coordinates are not distorted under a rotation induced by changing the reference phase angle \u03d5. When the excitation currents were applied to the gradient coils, no crosstalk between the coils was observed since the currents were delivered by independent power amplifiers. As the phases of applied currents in the gradient coils were orthogonal to each other, the distortion in position tracking was dominated by the non-uniform field gradient, which can be corrected by the proposed algorithm."
        },
        {
            "heading": "2.3. The Linearity Correction Method",
            "text": "To correct the remaining non-uniformity of gradient field distribution, the linearity correction algorithm was applied to suppress the influence of distorted magnetic fields to improve the accuracy of position tracking. As an initial guess of the sensor\u2019s position, the measured magnetic field was directly converted into the position based on the sensor outputs of in-phase Vi and quadrature-phase Vq using Equation (19). The linearity correction algorithm was performed by applying the cubic spline interpolation method to obtain smooth contour curves of the implicit function Bz(x,y) = constant for both in-phase and quadrature-phase components. To implement the linearity correction algorithm, the databases of Vi and Vq were collected by stepping the sensor on the tracking stage with 121 sampling points. The sampling points were spaced by 20 mm for both the x- and ydirections. The x- and y- databases were expanded by using a cubic spline interpolation for the two-dimensional field distribution. Hence, the size of the interpolated databases was extended to 441 data points for x- and y- gradient magnetic fields. The interpolated field distributions of x- and y- coils consist of twenty-one natural cubic spline functions for yand x- directions, respectively, as shown in Figure 6. The interpolated curves of x- and ygradient field distribution have a smoother profile, similar to the theoretically predicted distributions. Therefore, the gradient field distribution can be precisely mapped with the limited number of sampled field points. The cubic spline functions for the x- and y-gradient field distributions are Bi(x, ym) and Bq(xm, y), respectively. The in-phase interpolating function Bi(x, ym) consists of the different cubic functions Bin(x) in twenty equally spaced intervals from x1 to x21:\nBi(x, ym) =  Bi1(x) x1 \u2264 x \u2264 x2 Bi2(x) x2 \u2264 x \u2264 x3 ... ...\nBi20(x) x20 \u2264 x \u2264 x21\n(20)\nwhere Bin(x)= ain + binx + cinx2 + dinx3 (din 6= 0) is a natural cubic function with n = 1, 2, 3,..., 21. The function Bi(x, ym) passes through Bi(xn) = Bin, where n = 1, 3, 5, . . . , 21 are the measured data points and n = 2, 4, 6, . . . , 20 are the interpolated data points. The coordinate ym corresponds to the m\u2019th grid line, m = 1, 2,..., 21, of the x-gradient field distribution. Similarly, the quadrature-phase cubic spline interpolating function Bq(xm, y) along y-direction is:\nBq(xm, y) =  Bq1(y) y1 \u2264 y \u2264 y2 Bq2(y) y2 \u2264 y \u2264 y3 ... ...\nBq20(y) y20 \u2264 y \u2264 y21\n(21)\nwhere Bqn(y) = aqn + bqny + cqny2 + dqny3 is a natural cubic function with n = 1, 2, 3,..., 21. The function Bq(xm, y) passes through Bq(xn) = Bqn, where n = 1, 3, 5, . . . , 21 are the measured data points and n = 2, 4, 6, . . . , 20 are the interpolated data points. The coordinate xm corresponds to the m\u2019th grid line, m = 1, 2,..., 21, of the y-gradient field distribution. Suppose that the field components detected by the magnetic sensor at (x0, y0) are (Bi0, Bq0), and the in-phase and quadrature-phase components of sensor output are Vi0 and Vq0. The sensor position (x0, y0) can be retrieved by performing linear interpolations to calculate the intersection of two contour lines, Bi(x,y) = Bi0 and Bq(x,y) = Bq0 using the extended databases, as shown in Figure 8.\nAt the sensor position (x0, y0), the corresponding field components are (Bi0, Bq0). To implement the linearity correction algorithm, the two-dimensional cubic spline interpolation was applied by using the inverse interpolating function x(Bi, ym) and y(Bq, xm). Since Bi and Bq increase monotonically along the axis of the gradient, the field components are compared to the values of the Bi and Bq interpolated databases, respectively, to find the two contour lines Bi(x,y) = Bi0 and Bq(x,y) = Bq0. For instance, to find the contour line Bi(x,y) = Bi0, comparison of Bi0 value to the Bi\u2212 interpolated database is performed. For each ym value (m = 1, 2, 3,..., 21), an interval (Bin\u22121, Bin) is found, satisfying a condition Bin\u22121 \u2264 Bi0 \u2264 Bin. The (Bin\u22121, Bin) intervals corresponding to the (xn\u22121, xn) interval satisfying a condition xn\u22121 \u2264 x0 \u2264 xn (n = 2, 3,...,21) are the landmarks in the database. Therefore, a natural cubic spline function in (xn\u22121, xn) interval is determined using Equation (20). The coordinates (x0m, ym) corresponding to Bi0 value is given by implementing the cubic spline interpolation with inverse function x(Bi, ym). The points (x0m, ym) forming a contour line of x\u2212 interpolated database are Bi(x,y) = Bi0. Similarly, the obtained points (xm, y0m) forming a contour line of y-interpolated database are Bq(x,y) = Bq0. The position of the sensor is determined by finding an intersection of two contour lines. To find out the intersection point of two contour lines, the four nearest points around the intersection are determined by comparing the distance between the fixed interval points on x- and y- contour lines. The two y-contour points closest to the x-contour line are identified by obtaining two minimum distances, and the two nearest points on the x- and ycontour lines are identified in the same way. The four obtained points form two intersecting segments, of which the intersection point (x0, y0) gives the sensor position."
        },
        {
            "heading": "3. Results and Discussion",
            "text": "As the proposed system converts the magnetic field directly into position based on the dual-phase synchronous detection technique, the signal processing is straightforward and fast. The sensor\u2019s output signals are almost a linear function of x- and y-coordinates. The working range, which is 200 mm \u00d7 200 mm in dimension, is slightly less than the coil area. When moving the induction coil sensor on the detection plane, the coordinates of the sensor are displayed in real-time on the GUI software by performing the linearity correction algorithm. To evaluate the feasibility and accuracy of the linearity correction algorithm, the sensor was scanned on the detection plane by moving the gradient coils with the X\u2013Y translation stage. The coordinates of the sensor were recorded with an interval of 10 mm along the x- and y-directions in the working range of 200 mm \u00d7 200 mm. The retrieved coordinates of 441 data points are shown in Figures 9 and 10a. Figure 9 shows that the coordinates along x- and y-axis are linear and uniform in gradient. In the comparison to the data without the linearity correction algorithm in Figure 6, the result in Figure 9 shows that the non-linearity component is well-suppressed by the linearity correction algorithm based on the cubic spline interpolation method.\nFigure 10a shows the position deviation between the set and retrieved coordinates for the 441 sensor positions retrieved in real time with a grid size of 1 cm \u00d7 1 cm. The distance between the set position and the retrieved position was calculated to estimate the positioning error of each retrieved position on the working range. The positioning error along x- and y- axes at each data point was calculated using the following formula:\nEn = \u221a E2xn + E2yn (22)\nwhere En is positioning error at the data point n, and Exn and Eyn are the positioning error at the data point n along the x- and y-axes, respectively. The average positioning error is obtained by taking the average value of 441 positioning errors.\nThe positioning errors of the position-tracking system are shown in Figure 10b. It was found that the data points around the center of the working range had lower positioning errors while the positioning errors of the marginal points were higher. The average positioning error was found to be 0.417 mm, corresponding to the relative error of 0.21% in the working range of 200 mm \u00d7 200 mm. In Figure 10a, for the central region within |x| \u2264 5 and |y| \u2264 5, the average positioning error is as small as 0.309 mm (the red area), corresponding to the positioning error of 0.15% in the working range. For the locations near the margins at |x| > 8 and |y| > 8 (the blue area), the average positioning error is 0.458 mm (0.27%). The maximum error of 1.612 mm (0.81%) occurs at the coordinate of (9,9). The displacement error induced by the root-mean-square noise of the induction coil sensor are 0.34 and 0.21 mm for displacement along the x- and y-axis, respectively. The results show that the linearity correction algorithm can overcome the distortion caused by the non-uniform field gradient and determine the sensor\u2019s two-dimensional position with high precision and accuracy in real-time. The positioning accuracy achieved in our work is generally better than the existing magnetic-field-based methods reported for three- or two-dimensional position tracking [23\u201325]. For instance, the magnetic positioning of the capsule endoscope using an array of 16 three-axis Hall sensors and a magnetic tube is reported in [23], in which the random complex algorithm (RCA) gave better results than the Levenberg\u2013Marquardt algorithm (LMA). The positioning error achieved was less than 8.34 mm in the working range of 240 mm \u00d7 240 mm, corresponding to an error of 3.5%. This system was applied in a gastrointestinal tract capsule endoscope of the human body. In [25], a Hall effect sensor array, which consists of 25 Hall effect sensors, was used to estimate the position of the permanent magnet in capsule endoscope. The experimental results show that the root mean square error (RMSE) for the estimated position value of the permanent magnet was less than 1.13 mm in the X, Y, and Z directions. Another example is the position-tracking system using magnetic landmarks for autonomous mobile robots with the estimation method using NVM (Neutral Magnetic Valley) [24]. For this method, the positioning errors are generally less than 3 mm in the 130 mm range of a single cell. The proposed sequential landmark search technique allows the mobile robot to move with respect to the magnetic\nlandmark\u2019s geometric center from an unknown initial position. However, the relative error of 2.3% is still high. In comparison with the existing techniques, our method can achieve an average positioning error of 0.21% (corresponding to 0.417 mm), which is more promising for high accuracy applications of position tracking. The existence of additional non-magnetic and non-conductive objects in the sensing range does not affect the positioning accuracy. However, the placement of magnetic and/or conductive objects in the sensing area does induce positioning error. Specifically, the interference to the amplitude and phase of the gradient field induces a DC offset in the output of the lock-in amplifier. When the additional object is fixed in its shape, orientation, and position, the DC offset voltage can be eliminated by the linearity correction algorithm. To better define the target position, the system was also tested with a spin-valve GMR sensor, model GF708 from Sensitec GmbH, to replace the induction coil. Figure 11 shows the result of real-time 2D position tracking using the GMR sensor. The positioning errors near the center and margin of the working region were found to be 0.21% and 0.44%, respectively, and the average positioning error was found to be 0.35%. The observed errors were higher than those with the induction coil sensor, the indicating that the induction coil sensor is more accurate than the GMR spin-valve sensor in position tracking. Nevertheless, as the feature size of the GMR sensor is only 1.4 mm, which is much smaller than the 10 mm radius of the coil, it is more suitable for tracking a miniature moving object on a 2D plane. The limitation imposed by the finite sensor size can be relaxed by scaling up the gradient coil. In this way, the system can be made suitable for large-scale 2D positioning application. Further work to add more sensors to determine the height and orientation of the target will make the proposed technique useful for three-dimensional position tracking."
        },
        {
            "heading": "4. Conclusions",
            "text": "The design and performance of a two-dimensional position-tracking system using an induction coil to sense the orthogonal gradient magnetic fields were implemented and verified. With the orthogonal gradient fields being 90\u25e6 out of phase, the synchronously detected phase angle corresponds to the rotation in the two-dimensional spatial coordinate. The influence of non-uniformity in the gradient field is suppressed by employing the linearity correction algorithm based on the cubic spline interpolation method. The accuracy in positioning is enhanced by applying the linearity correction algorithm. The achieved average positioning error is 0.21% in the 200 mm \u00d7 200 m working range and 0.15% in the 100 mm \u00d7 100 mm central region. The results show that the interpolation-based linearity\ncorrection algorithm is feasible in improving the precision and accuracy of real-time twodimensional magnetic tracking. The proposed tracking device is promising for medical and industrial applications requiring accurate position control of the magnetic sensor, such as two-dimensional m\u2013agnetic field mapping and magnetic source imaging [26].\nAuthor Contributions: Conceptualization, J.-T.J. and C.-C.L.; Data curation, X.T.T.; Formal analysis, V.S.L.; Investigation, H.-T.N.; Supervision, J.-T.J.; Writing\u2014review & editing, X.T.T. All authors have read and agreed to the published version of the manuscript.\nFunding: This research was funded by the Ministry of Science and Technology of Taiwan grant numbers MOST108-2221-E992-083MY2, MOST-110-2221-E992-061-MY2, and 108-2221-E-027-098.\nInstitutional Review Board Statement: Not applicable.\nInformed Consent Statement: Not applicable.\nData Availability Statement: Not applicable.\nAcknowledgments: We thank to National Center for High-performance Computing (NCHC) of National Applied Research Laboratories (NARLabs) in Taiwan for providing computational resources. Xuan Thang Trinh would like to thank Hung Yen University of Technology and Education (UTEHY) for the financial support under Grant No. UTEHY.L.2020.12.\nConflicts of Interest: The authors declare no conflict of interest.\nReferences 1. Zhu, R.; Zhou, Z. A real-time articulated human motion tracking using tri-axis inertial/magnetic sensors package. IEEE Trans. Neural Syst. Rehabil. Eng. 2004, 12, 295\u2013302. [PubMed] 2. Caruso, M.J.; Withanawasam, L.S. Vehicle detection and compass applications using AMR magnetic sensors. Sens. Expo Proc. 1999, 477, 39. 3. Pham, D.M.; Aziz, S.M. A real-time localization system for an endoscopic capsule using magnetic sensors. Sensors 2014, 14, 20910\u201320929. [CrossRef] [PubMed] 4. Wang, X.; Meng, M.Q.-H.; Hu, C. A localization method using 3-axis magnetoresistive sensors for tracking of capsule endoscope.\nIn Proceedings of the 2006 International Conference of the IEEE Engineering in Medicine and Biology Society, New York, NY, USA, 30 August\u20133 September 2006; IEEE: Piscataway, NJ, USA; pp. 2522\u20132525.\n5. Childress, J.R.; Carey, M.J.; Maat, S.; Smith, N.; Fontana, R.E.; Druist, D.; Carey, K.; Katine, J.A.; Robertson, N.; Boone, T.D.; et al. All-Metal Current-Perpendicular-to-Plane Giant Magnetoresistance Sensors for Narrow-Track Magnetic Recording. IEEE Trans. Magn. 2008, 44, 90\u201394. [CrossRef] 6. Christides, C.; Panagiotopoulos, I.; Niarchos, D.; Jones, G. Fast magnetic field mapping of permanent magnets with GMR bridge and Hall-probe sensors. Sens. Actuators A Phys. 2003, 106, 243\u2013245. [CrossRef] 7. Hu, C.; Li, M.; Song, S.; Zhang, R.; Meng, M.Q.-H. A cubic 3-axis magnetic sensor array for wirelessly tracking magnet position and orientation. IEEE Sens. J. 2010, 10, 903\u2013913. [CrossRef] 8. Hu, C.; Meng, M.-H.; Mandal, M.; Wang, X. 3-axis magnetic sensor array system for tracking magnet\u2019s position and orientation. In Proceedings of the 2006 6th World Congress on Intelligent Control and Automation, Dalian, China, 21\u201323 June 2006; IEEE: Piscataway, NJ, USA, 2006; Volume 2, pp. 5304\u20135308. 9. Schlageter, V.; Besse, P.-A.; Popovic, R.; Kucera, P. Tracking system with five degrees of freedom using a 2D-array of Hall sensors and a permanent magnet. Sens. Actuators A Phys. 2001, 92, 37\u201342. [CrossRef] 10. Hou, W.; Zheng, X.; Peng, C. Experimental study of magnetic-based localization model for miniature medical device placed indwelling human body. In Proceedings of the 2005 IEEE Engineering in Medicine and Biology 27th Annual Conference, Shanghai, China, 17\u201318 January 2006; IEEE: Piscataway, NJ, USA, 2006; pp. 1309\u20131312. 11. Yabukami, S.; Kikuchi, H.; Yamaguchi, M.; Arai, K.I.; Takahashi, K.; Itagaki, A.; Wako, N. Motion capture system of magnetic markers using three-axial magnetic field sensor. IEEE Trans. Magn. 2000, 36, 3646\u20133648. [CrossRef] 12. Prakash, N.M.; Spelman, F.A. Localization of a magnetic marker for GI motility studies: An in vitro feasibility study. In Proceedings of the 19th Annual International Conference of the IEEE Engineering in Medicine and Biology Society, Chicago, IL, USA, 30 October\u20132 November 1997; IEEE: Piscataway, NJ, USA, 1997; Volume 6, pp. 2394\u20132397. 13. Paperno, E.; Sasada, I.; Leonovich, E. A new method for magnetic position and orientation tracking. IEEE Trans. Magn. 2001, 37, 1938\u20131940. [CrossRef] 14. Yeo, B.Y.; McLaughlin, R.A.; Kirk, R.W.; Sampson, D.D. Enabling freehand lateral scanning of optical coherence tomography needle probes with a magnetic tracking system. Biomed. Opt. Express 2012, 3, 1565\u20131578. [CrossRef] [PubMed] 15. Paperno, E.; Keisar, P. Three-dimensional magnetic tracking of biaxial sensors. IEEE Trans. Magn. 2004, 40, 1530\u20131536. [CrossRef]\n16. Plotkin, A.; Paperno, E. 3-D magnetic tracking of a single subminiature coil with a large 2-D array of uniaxial transmitters. IEEE Trans. Magn. 2003, 39, 3295\u20133297. [CrossRef] 17. Roetenberg, D.; Slycke, P.J.; Veltink, P.H. Ambulatory position and orientation tracking fusing magnetic and inertial sensing. IEEE Trans. Biomed. Eng. 2007, 54, 883\u2013890. [CrossRef] [PubMed] 18. Zachmann, G. Distortion correction of magnetic fields for position tracking. In Proceedings of the Computer Graphics International, Hasselt and Diepenbeek, Belgium, 23\u201327 June 1997; IEEE: Piscataway, NJ, USA, 1997; pp. 213\u2013220. 19. Kindratenko, V.V. A survey of electromagnetic position tracker calibration techniques. Virtual Real. 2000, 5, 169\u2013182. [CrossRef] 20. Wikswo, J. The magnetic inverse problem for NDE. In SQUID Sensors: Fundamentals, Fabrication and Applications; Springer: Berlin/Heidelberg, Germany, 1996; pp. 629\u2013695. 21. Mandelis, A. Signal-to-noise ratio in lock-in amplifier synchronous detection: A generalized communications systems ap-\nproach with applications to frequency, time, and hybrid (rate window) photothermal measurements. Rev. Sci. Instrum. 1994, 65, 3309\u20133323. [CrossRef]\n22. Luong, V.S.; Lu, C.-C.; Yang, J.-W.; Jeng, J.-T. A novel CMOS transducer for giant magnetoresistance sensors. Rev. Sci. Instrum. 2017, 88, 025004. [CrossRef] [PubMed] 23. He, X.; Zheng, Z.; Hu, C. Magnetic localization and orientation of the capsule endoscope based on a random complex algorithm. Med. Devices (Auckl. NZ) 2015, 8, 175. 24. You, W.S.; Choi, B.J.; Choi, H.R.; Koo, J.C.; Moon, H. Localization using magnetic patterns for autonomous mobile robot. Int. J. Adv. Robot. Syst. 2014, 11, 50. [CrossRef] 25. Kim, M.-C.; Kim, E.-S.; Park, J.-O.; Choi, E.; Kim, C.-S. Robotic Localization Based on Planar Cable Robot and Hall Sensor Array Applied to Magnetic Capsule Endoscope. Sensors 2020, 20, 5728. [CrossRef] [PubMed] 26. Huang, G.-W.; Jeng, J.-T. Implementation of 16-channel AMR sensor array for quantitative mapping of two-dimension current distribution. IEEE Trans. Magn. 2018, 11, 6500605. [CrossRef]"
        }
    ],
    "title": "Two-Dimensional Position Tracking Using Gradient Magnetic Fields",
    "year": 2022
}