{
    "abstractText": "The limitations of the tractor virtual test system are evident in various aspects, including model reuse, system expansion, offsite interconnection, and virtual reality verification. To address these challenges, a distributed virtual test system for tractors based on the highlevel architecture (HLA) is proposed. Involve analyzing the hardware structure and the tractor virtual test system, constructing the system federation and its members, and designing the federated object model (FOM) and simulation object model (SOM) tables. The system integrates multi-domain commercial software and enables real-time virtual testing through TCP/IP interconnection of multiple machines. To evaluate the system\u2019s performance, a virtual test of the tractor\u2019s reversing clutch engagement performance is conducted. The system\u2019s simulation performance and data transmission delay are thoroughly tested and analyzed. The results indicate that when the system\u2019s data volume reaches 5000KB, the data delay is 9.7ms, which satisfies the requirement of not exceeding 10ms for tractor virtual testing delay. The virtual test of the reversing clutch power reversal process demonstrates that it lasts 0.7s, with the vehicle speed changing from -3.5km/h to 3.5km/h, the forward gear piston oil pressure increasing from 0MPa to 5MPa, and the peak impact degree reaching 17m/s. The slip work during the reversing process is measured to be 21kJ. Furthermore, the gray correlation method is employed to compare the virtual test results with the bench test results, confirming their consistency. The power reversal process exhibits relatively smooth speed changes overall. Therefore, the tractor power shift transmission (PST) reversing clutch virtual test model operates effectively within the HLA-based tractor virtual test system.",
    "authors": [
        {
            "affiliations": [],
            "name": "Xianghai Yan"
        },
        {
            "affiliations": [],
            "name": "Chengyan ShangID"
        },
        {
            "affiliations": [],
            "name": "Junjiang Zhang"
        },
        {
            "affiliations": [],
            "name": "Liyou XuID"
        }
    ],
    "id": "SP:23b073414e02510c79a0c99609d24a355ab64a6f",
    "references": [
        {
            "authors": [
                "Y Wu",
                "X Yan",
                "Z. Zhou"
            ],
            "title": "Architecture modeling and test of tractor power shift transmission",
            "venue": "IEEE Access",
            "year": 2021
        },
        {
            "authors": [
                "Y Chen",
                "Y Qian",
                "Z Lu"
            ],
            "title": "Dynamic characteristic analysis and clutch engagement test of HMCVT in the high-power tractor",
            "year": 2021
        },
        {
            "authors": [
                "C Wen",
                "B Xie",
                "Z Song"
            ],
            "title": "Methodology for designing tractor accelerated structure tests for an indoor drum-type test bench",
            "venue": "Biosystems Engineering",
            "year": 2021
        },
        {
            "authors": [
                "DO Gonzalez",
                "B Martin-Gorriz",
                "II Berrocal"
            ],
            "title": "Development and assessment of a tractor driving simulator with immersive virtual reality for training to avoid occupational hazards",
            "venue": "Computers and Electronics in Agriculture",
            "year": 2017
        },
        {
            "authors": [
                "X Zhang",
                "D Wang",
                "D Kong"
            ],
            "title": "The anti-fatigue lightweight design of heavy tractor frame based on a modified decision method",
            "venue": "Structural and Multidisciplinary Optimization",
            "year": 2022
        },
        {
            "authors": [
                "R Bao",
                "Y Li",
                "Kong Li J. Hong"
            ],
            "title": "The navigation positioning system design of agricultural vehicles based on virtual instruments",
            "venue": "International Conference on Computers,",
            "year": 2011
        },
        {
            "authors": [
                "X Tang",
                "D Zhang",
                "T Liu"
            ],
            "title": "Research on the energy control of a dual-motor hybrid vehicle during engine start-stop process",
            "year": 2019
        },
        {
            "authors": [
                "A Falcone",
                "A Garro",
                "SJE Taylor"
            ],
            "title": "Experiences in simplifying distributed simulation: The HLA development kit framework",
            "venue": "Journal of Simulation",
            "year": 2017
        },
        {
            "authors": [
                "T Hu",
                "X Jin",
                "L Shen"
            ],
            "title": "Plug-in technology connecting Simulink model with run-time infrastructure",
            "venue": "Computer Integrated Manufacturing Systems",
            "year": 2021
        },
        {
            "authors": [
                "H Yuan",
                "J Zhang",
                "W Li"
            ],
            "title": "The perception technology in ar confrontation system for virtual and real force",
            "venue": "Computer Simulation",
            "year": 2020
        },
        {
            "authors": [
                "Y Wu",
                "L Fu",
                "F Ma"
            ],
            "title": "Cyber-physical co-simulation of vessel integrated power system based on HLA",
            "venue": "Power System Technology",
            "year": 2019
        },
        {
            "authors": [
                "X Shi",
                "B. Luan"
            ],
            "title": "Research and implementation of HLA-based flight mission simulation platform for manned spacecraft",
            "venue": "Spacecraft Environment Engineering",
            "year": 2016
        },
        {
            "authors": [
                "Y Gu",
                "Y Zuo",
                "D. Peng"
            ],
            "title": "Multi-radar netting information fusion simulation system based on HLA",
            "venue": "Fire Control & Command Control",
            "year": 2015
        },
        {
            "authors": [
                "P Wang",
                "M Lv",
                "Y Li"
            ],
            "title": "Design of airborne Laser weapon simulation system based on HLA",
            "venue": "Journal of Northwestern Polytechnical University",
            "year": 2011
        },
        {
            "authors": [
                "H Sun",
                "W Fan",
                "W Shen"
            ],
            "title": "Ontology fusion in high-level-architecture-Based collaborative engineering environments",
            "venue": "IEEE Transactions on Systems Man Cybernetics-systems",
            "year": 2013
        },
        {
            "authors": [
                "M Marzolla",
                "G. D\u2019angelo"
            ],
            "title": "Parallel data distribution management on shared-memory multiprocessors",
            "venue": "Acm Transactions on Modeling and Computer Simulation",
            "year": 2020
        },
        {
            "authors": [
                "Y Yue",
                "W Fan",
                "T Xiao"
            ],
            "title": "Novel models and algorithms of load balancing for variable-structured collaborative simulation under HLA/RTI",
            "venue": "Chinese Journal of Mechanical Engineering",
            "year": 2013
        },
        {
            "authors": [
                "Grogan PT",
                "de Weck OL"
            ],
            "title": "Infrastructure system simulation interoperability using the high-level architecture",
            "venue": "IEEE Systems Journal",
            "year": 2018
        },
        {
            "authors": [
                "O Uygun",
                "E Oztemel",
                "C. Kubat"
            ],
            "title": "Scenario based distributed manufacturing simulation using HLA Technologies",
            "venue": "Information Sciences",
            "year": 2009
        },
        {
            "authors": [
                "L Yu",
                "S Kang",
                "Chengdu Xin L"
            ],
            "title": "General architecture design of flight simulator based on HLA",
            "venue": "IEEE 3rd Information Technology, Net-working, Electronic and Automation Control",
            "year": 2019
        },
        {
            "authors": [
                "Imre K",
                "Sevim N. Cardiff"
            ],
            "title": "The High Level Architecture (HLA) on Photonic Torus: Hardware and Software Co-design",
            "venue": "8th EUROSIM Congress on Modelling and Simulation;",
            "year": 2013
        },
        {
            "authors": [
                "J Wang",
                "T. Zheng"
            ],
            "title": "A hybrid multicast-unicast assignment approach for data distribution management in HLA",
            "venue": "Simulation Modelling Practice and Theory",
            "year": 2014
        },
        {
            "authors": [
                "D Wu",
                "X Zhen",
                "X Fan",
                "HM. et al. Zhu"
            ],
            "title": "A virtual environment for complex products collaborative assembly operation simulation",
            "venue": "Journal of Intelligent Manufacturing",
            "year": 2012
        },
        {
            "authors": [
                "M Riecken",
                "K Lessmann",
                "Baltimore Schillero D"
            ],
            "title": "Internet of Things, a possible change in the distributed modeling and simulation architecture paradigm. Conference on Modeling and Simulation for Defense Systems and Applications XI; 2016",
            "year": 2016
        },
        {
            "authors": [
                "Elhemly MA",
                "Fayed MAG"
            ],
            "title": "Simulation of tractor semitrailer manoeuvre at highspeed using MATLAB/ SIMULINK",
            "venue": "International Journal of Heavy Vehicle Systems",
            "year": 2011
        },
        {
            "authors": [
                "S Ahn",
                "J Choi",
                "S Kim"
            ],
            "title": "Development of an integrated engine-hydro-mechanical transmission control algorithm for a tractor",
            "venue": "Advances in Mechanical Engineering",
            "year": 2015
        },
        {
            "authors": [
                "B Li",
                "D Sun",
                "M Hu"
            ],
            "title": "Coordinated control of gear shifting process with multiple clutches for powershift transmission",
            "venue": "Mechanism and Machine Theory",
            "year": 2019
        },
        {
            "authors": [
                "B Feng",
                "X Gao",
                "L. Gong"
            ],
            "title": "A heterogeneous network selection algorithm based on gray relation hierarchy analysis in power wireless communication system",
            "venue": "Electronic Design Engineering",
            "year": 2018
        }
    ],
    "sections": [
        {
            "text": "The limitations of the tractor virtual test system are evident in various aspects, including\nmodel reuse, system expansion, offsite interconnection, and virtual reality verification. To\naddress these challenges, a distributed virtual test system for tractors based on the high-\nlevel architecture (HLA) is proposed. Involve analyzing the hardware structure and the trac-\ntor virtual test system, constructing the system federation and its members, and designing\nthe federated object model (FOM) and simulation object model (SOM) tables. The system\nintegrates multi-domain commercial software and enables real-time virtual testing through\nTCP/IP interconnection of multiple machines. To evaluate the system\u2019s performance, a vir-\ntual test of the tractor\u2019s reversing clutch engagement performance is conducted. The sys-\ntem\u2019s simulation performance and data transmission delay are thoroughly tested and\nanalyzed. The results indicate that when the system\u2019s data volume reaches 5000KB, the\ndata delay is 9.7ms, which satisfies the requirement of not exceeding 10ms for tractor virtual\ntesting delay. The virtual test of the reversing clutch power reversal process demonstrates\nthat it lasts 0.7s, with the vehicle speed changing from -3.5km/h to 3.5km/h, the forward\ngear piston oil pressure increasing from 0MPa to 5MPa, and the peak impact degree reaching 17m/s3. The slip work during the reversing process is measured to be 21kJ. Further-\nmore, the gray correlation method is employed to compare the virtual test results with the\nbench test results, confirming their consistency. The power reversal process exhibits rela-\ntively smooth speed changes overall. Therefore, the tractor power shift transmission (PST)\nreversing clutch virtual test model operates effectively within the HLA-based tractor virtual\ntest system."
        },
        {
            "heading": "Introduction",
            "text": "Test verification technology plays a crucial role in the entire lifecycle of tractor product development. It is essential in the development of tractor products as it allows for the assessment of their performance and guides the optimization of tractor design [1]. However, traditional tractor test technology poses challenges such as high costs, energy consumption, and demanding test equipment requirements, resulting in low efficiency in tractor product development [2, 3]. To address these issues, the application of computer technology and virtual test technology in\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 1 / 20\na1111111111 a1111111111 a1111111111 a1111111111\nOPEN ACCESS\nCitation: Yan X, Shang C, Zhang J, Xu L (2023) Design of tractor virtual test system based on highlevel architecture technology. PLoS ONE 18(10): e0293229. https://doi.org/10.1371/journal. pone.0293229\nEditor: John Adebisi, University of Namibia, NAMIBIA\nReceived: April 8, 2023\nAccepted: September 30, 2023\nPublished: October 23, 2023\nCopyright: \u00a9 2023 Yan et al. This is an open access article distributed under the terms of the Creative Commons Attribution License, which permits unrestricted use, distribution, and reproduction in any medium, provided the original author and source are credited.\nData Availability Statement: All relevant data are within the paper and its Supporting Information files.\nFunding: This research was funded in part by the State Key Laboratory Open Subject, grant number SKT2022001, in part by the State Key Research and Development Special Project, grant number NK202216010103, in part by Henan Province Key Scientific Research Project of Colleges and Universities, grant number 22B416001, and in part by the Henan Province Science and Technology Research Project, grant number 222102240088.\nnew tractor product development has emerged as an advanced approach. Technologies like virtual reality (VR), virtual prototyping (VP), and virtual instrument (VI) are currently applied in the tractor virtual test process [4\u20136]. Nevertheless, the tractor virtual test involves multiple fields. Due to varying modeling principles and data transfer protocols used among commercial software in each field, different systems\u2019 commercial software can only communicate through the application program interface (API) by exchanging files for joint simulation. This limits the real-time communication with the test equipment during the tractor virtual test [7]. Consequently, the tractor virtual test faces restrictions in model reuse, system expansion, remote interconnection, and combining virtual reality verification, ultimately impeding its efficiency. To overcome these limitations, it is imperative to establish integrated tractor test equipment and existing models within a comprehensive tractor virtual test system. Such an approach would significantly enhance the efficiency of tractor virtual testing and reduce the new product development cycle for tractors, carrying practical significance.\nHigh-level architecture (HLA) is a widely recognized technology for modeling and simula-\ntion in the defense field, initially proposed by the Defense Modeling and Simulation Office of the U.S. Department of Defense in October 1995 [8]. HLA serves as a simulation framework that encompasses diverse simulation systems across various domains, allowing for enhanced interoperability, as well as the reusability of models between different simulation systems. Additionally, HLA can adapt to emerging technologies to address the simulation requirements of complex systems. Since its inception, HLA has garnered significant attention from both domestic and international researchers. Hu et al. extended the operational support environment by incorporating the Simulink model as a federate, resulting in the development of a distributed simulation system for rockets based on HLA [9]. Yuan et al. proposed a distributed perception technology grounded in HLA for an augmented reality (AR) soldier training system and carried out practical verification [10]. Wu et al. presented a design methodology for a hybrid simulation platform that integrates information physics and the power system, with a specific focus on the tightly coupled relationship between the power system and information network in a ship\u2019s integrated power system. They successfully achieved information physics hybrid simulation using HLA as the foundation [11]. Shi et al. proposed a mission simulation platform for manned spacecraft based on HLA. The platform encompasses essential functionalities such as operation management and flight command, along with multidisciplinary simulation models covering orbit dynamics and other aspects [12]. Gu et al. established a multiradar network information fusion simulation system using HLA, conducting system testing that analyzed the application of HLA and multi-radar network detection for stealth targets [13]. Furthermore, Wang et al. researched airborne laser weapons. Leveraging the characteristics of such weapons and the principles of HLA, they designed a simulation system that comprises ballistic missiles, carrier aircraft, and airborne Laser weapons [14]. Overall, these studies exemplify the extensive utilization of HLA in various simulation contexts, demonstrating its effectiveness and versatility as a technology for modeling and simulation in the defense field [15].\nBy the requirements of tractor testing, the generic tractor virtual test system must encom-\npass various functions such as distributed modeling, a test operation support framework, data management, test process management, and test result evaluation. Additionally, it should possess attributes of real-time capability, reusability, interoperability, and expandability [16]. By employing HLA technology, the tractor virtual test system standardizes the interaction process among distinct commercial software simulation models. This enables different domain simulation models to exchange information based on a unified standard, thereby enhancing the reusability and interoperability of the tractor virtual test system.\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 2 / 20\nCompeting interests: The authors have declared that no competing interests exist.\nThis paper focuses on the architecture analysis of the tractor virtual test system and empha-\nsizes the federation design approach. The aim is to address the limitation of traditional virtual test technology in conducting real-time electromechanical-hydraulic joint simulations. To accomplish this, an HLA-based tractor virtual test system is established. The system\u2019s performance is evaluated using the tractor PST reversing clutch test as a case study.\nAnalysis of tractor virtual test system based on HLA\nMain functions and features of the system based on HLA\nThe HLA-based tractor virtual test system incorporates the mechanical, hydraulic, and control modules of the tractor systems as fundamental virtual test units. Each virtual test unit, in conjunction with the virtual test system auxiliary module, constitutes a comprehensive function within the tractor virtual test system. These virtual test units operate within distinct virtual test environments to carry out diverse tests related to tractor performance. The system employs a test results evaluation function to assess the effectiveness of the virtual tests conducted. Additionally, it serves as a simulation test platform for the development of new tractor products and components. Utilizing multi-domain real-time simulation enables the evaluation of performance for new tractor products. This system also guides engineers and technicians in optimizing the design of new tractor products and supports the overall development process.\nThe HLA-based tractor virtual test system achieves the standardization of data format, technical framework, and model standards, resulting in enhanced interoperability and model reusability [17]. The system establishes a virtual test environment that accurately reflects real-life tractor operations. It enables virtual testing of various tractor tasks such as plowing, harrowing, and seeding. This system provides an effective solution to the challenges of extended testing cycles for new tractor products, pollution issues, and seasonal limitations, and it can yield positive economic outcomes.\nThe architecture of the tractor virtual test system based on HLA\nThe architecture of the tractor virtual test system facilitates the communication between each functional subsystem of the tractor. It outlines the structural relationship between the virtual test system and the operational mechanism of the actual tractor system. Fig 1 visually represents the structure of the HLA-based tractor virtual test system.\nTractor critical parts federate build\nFederate play a crucial role within the federation, encompassing all the components involved in its execution. These members are responsible for integrating the subsystems of the simulation system into the federation as a whole, enabling their participation in the simulation. The tractor virtual test system is an integrated simulation system that combines multiple subsystems, virtual environment simulation, and virtual test monitoring and management. This comprehensive system involves numerous simulation objects, intricate models, and real-time data transmission. Consequently, it becomes imperative to address various challenges simultaneously, such as simulation time synchronization, human-machine interaction, model coordination, simulation monitoring and management, real-time analysis, and visualization of the simulation process, across all federate. A unified structure is required to effectively manage and coordinate interactions among the simulation systems [18]. Furthermore, each subsystem should possess a standardized architecture internally. Leveraging the reusability and interoperability advantages of the HLA can meet the specific demands of the tractor virtual test system while providing support for future system upgrades.\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 3 / 20\nAccording to the HLA system design rules, the tractor virtual test system is a federation. It\ncomprises various members, including the tractor control virtual test system, tractor hydraulic virtual test system, tractor mechanical virtual test system, tractor virtual test environment simulation system, tractor virtual test monitoring, and management system, tractor virtual test evaluation system, and other members within the federation. These members primarily participate in the virtual testing of key components related to tractor control, hydraulic systems, and mechanical aspects. These components encompass the tractor engine system, tractor transmission system, tractor driving system, tractor steering system, tractor brake system, and tractor power output system. Each member of the federation fulfills specific functions as outlined below.\n1. Federate of tractor control virtual test system. Including the sum of the tractor\u2019s key compo-\nnents control system, sending control instructions to the corresponding controlled objects through run-time infrastructure (RTI), and receiving real-time feedback information from the controlled objects. Realize closed-loop control.\n2. Federate of tractor hydraulic virtual test system. Including the sum of tractor key compo-\nnents hydraulic system, through RTI to receive signals from the control system or mechanical system. Realize the tractor hydraulic system to control the mechanical system.\n3. Federate of tractor mechanical virtual test system. Including the sum of tractor key parts\nmechanical system, through RTI to receive signals from the control system or hydraulic system and feedback signals to the control system or hydraulic system. Realize the specific implementation of the tractor mechanical system.\n4. Federate of tractor virtual test environment simulation system. Including a working condi-\ntion simulation module and 3D viewing window module, it provides working condition simulation for the tractor virtual test process. Realize the tractor rotary tillage, plowing, harrowing, and other working conditions of the live view and data simulation.\n5. Federate of tractor virtual test monitoring management system. Realize the real-time moni-\ntoring and management of the tractor virtual test process.\nhttps://doi.org/10.1371/journal.pone.0293229.g001\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 4 / 20\n6. Federate of tractor virtual test evaluation system. Realize the evaluation of the tractor virtual\ntest process and results, analyze the reliability of the tractor virtual test results, and label the simulation non-normal data.\nSimulation system FOM/SOM table design and federation development\nThe object model template (OMT) serves as a standardized structural framework for the HLA object model, facilitating the understanding and depiction of data collaboration and interaction among federate [19]. The OMT plays a crucial role in expressing the potential capabilities of federate, aiding the design and application of general object model development tools. Within HLA OMT, two primary types of object models are defined. The first is the federation object model (FOM), which describes multiple interoperable federate. The second is the simulation object model (SOM), which describes the characteristics specific to individual federate. The FOM encompasses the characteristics, object classes, and object class attributes of interaction classes, along with the parameters necessary for information exchange among all participating federate in the simulation. It serves the purpose of establishing a standardized format for data exchange within the simulation. On the other hand, the SOM outlines the characteristics of interactive classes, interaction class attributes, object classes, and object class attributes that can be published or subscribed to by a federate [20]. The SOM reflects the participation capabilities of the federate during the simulation runtime. The process of developing the FOM/SOM involves abstracting and modeling the federation\u2019s interaction data. Federate publishes the interaction classes and object classes required by other participants. They then determine the order of the needed interaction and object classes, facilitating information interaction and interoperability between federate. The following is an example of each federate in the tractor virtual test system to introduce the FOM/SOM and federate interface design.\nMember object class and its attribute table\nThe member object instances involved in the federation interactions are called member object classes, and their composition contains the full functionality of the federate interactions. Through the analysis of the tractor virtual test system, Table 1 shows some objects involved in each federate. According to the specific attributes among the various types of federate, extract the common attribute to design general base classes, control classes, mechanical classes, hydraulic classes, etc., to facilitate the inheritance of other classes.\nThe next level object class both inherits the properties of the previous level object and has its object properties. Table 2 shows the property table of the main object mechanical class of the FOM table.\nMember interaction class and its parameter list\nMember interaction classes denote the instances that actively engage in federation interactions. Within the HLA-based tractor virtual test system, interaction classes play a crucial role in governing interoperability among federate. They constitute a significant component of the overall interaction process in the HLA system [21]. Interaction classes and object classes collaborate to facilitate the implementation of the interaction process within the system. The repertoire of interaction classes encompasses control, mechanical, and hydraulic interaction classes, with specific details provided in Table 3.\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 5 / 20"
        },
        {
            "heading": "Interface specification",
            "text": "The HLA RTI provides a series of services for simulation interconnection. It is the basis for the HLA simulation system to achieve distributed simulation scalability and hierarchical management control and is also the core of the realization of the HLA simulation system. RTI provides effective support for the integration and management of simulation system operating status information. Through the interface specification, the HLA-based tractor virtual test architecture can better realize the simulation management and simulation operation. The six types of services provided according to the HLA architecture interface specification make the interoperability between the members of the federations easier to achieve and more reasonable [22]. The HLA-based tractor virtual test system contains six services.\n1. Federate management services.\nTable 1. FOM object class structure simple table.\nLevel 1 Level 2 Level 3 Level 4 Control class Transmission system control part Powershift transmission control part Reversing clutch control part\nShift clutch control part\n. . . . . .\nPower output system control part Power output shaft control part Power output shaft speed control\nPower output shaft torque control\n. . . . . .\n. . . . . . . . .\nMachinery class Transmission system mechanical part Power shift transmission mechanical part Reversing clutch mechanical part\nShift clutch mechanical part\n. . . . . .\nPower output system mechanical part Power output shaft mechanical part Power output shaft speed size\nPower output shaft torque size\n. . . . . .\n. . . . . . . . .\nHydraumatic class Transmission system hydraulic part Powershift transmission hydraulic part Hydraulic part of reversing clutch\nHydraulic part of shift clutch\n. . . . . .\nPower output system hydraulic part Power output shaft hydraulic part Power output shaft drive pressure size\n. . .\n. . . . . .\n. . . . . . . . .\nhttps://doi.org/10.1371/journal.pone.0293229.t001\n2. Ownership management service.\n3. Declaration management service.\n4. Object management service.\n5. Data distribution service.\n6. Time management services."
        },
        {
            "heading": "Federate program development",
            "text": "The selection of simulation software for the tractor virtual test environment, based on the HLA, proceeded as follows. The HLA\u2019s RTI chosen for this endeavor is BH RTI, which stands for Beihang Run-Time Infrastructure. BH RTI represents an RTI software autonomously developed by the State Key Laboratory of Virtual Reality Technology and Systems at Beijing University of Aeronautics and Astronautics. In terms of federate, the control class opted for Simulink software, while the mechanical class embraced Adams software. For the hydraulics class federate, the choice fell upon AMEsim software. The software employed for program development is Visual Studio, with C++ serving as the program development language. A visual representation of the program development process for the federate can be observed in Fig 2.\nThe development of federation programs in BH RTI necessitates attention to including\nappropriate header files. Additionally, it is essential to place the federation execution data file (fed file) and the lrc dynamic link library file in the same directory as the federation application [23]. The development process for federation applications commences with defining the RTI agent class and member agent class objects, followed by the development of federation management. Federation management encompasses activities such as creating, revoking, joining, and exiting the federation. Claim management development primarily involves establishing the declaration information of the federate. Initialization objects, properties, interactions, and parameter handles are developed to provide technical support to the system. Publishing interaction and object development serves the purpose of configuring and publicly disseminating the interaction information of simulation systems. A time management strategy is implemented by defining each simulation subsystem to run the simulation based on a specific temporal logic. The development of registered object instances aims to enable various simulation subsystems to register objects through programming functions. The simulation loop process is developed to initiate the simulation loop within the simulation system. Finally, the function for deleting federated execution is implemented as part of the program development. Below is an illustrative code snippet for the federation program."
        },
        {
            "heading": "Interaction Class Property Describe",
            "text": "https://doi.org/10.1371/journal.pone.0293229.t003\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 7 / 20\n. . .. . . Virtual void creatFederationExecution // Create federation execution (std::wstring const & Tractor virtual test system, // Federation executive name: Tractor vir-\ntual test system\nstd:: wstring const & Tractor virtual test systemFED) // Link to tractor virtual test system\nfed file)\n. . .. . . virtual FederateHandle joinFederationExecution // Join federation executive (std::wstring const & federateType, std::wstring const & Tractor virtual test system, Federate Ambassador & federate Ambassador, LogicalTimeFactory & logicalTimeFactory, LogicalTimeIntervalFactory & logicalTimelntervalFactory) . . .. . . virtual void resignFederationExecution // Withdrawal from federation execution . . .. . ."
        },
        {
            "heading": "Interoperability among federate",
            "text": "The federation of the tractor virtual test system engages in information exchange facilitated by TCP/IP-based communication. Fig 3 illustrates the transfer of simulation data across the federation. The simulation process is initiated by executing the Simulink control model, responsible for distributing hydraulic system control signals to the BH RTI using the RTI interface. The AMEsim hydraulic model subscribes to these control signals via the RTI interface and subsequently publishes the corresponding hydraulic signals back to the BH RTI. In parallel, the\nhttps://doi.org/10.1371/journal.pone.0293229.g002\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 8 / 20\nAdams mechanical model subscribes to the hydraulic signals transmitted through the RTI interface from the BH RTI, facilitating the execution of the dynamic simulation. Following the simulation, the results are accessible and can be examined through the dedicated simulation software.\nFig 4 shows the schematic diagram of the mechanical module federate of the tractor virtual test system during the federation execution. The control module and hydraulic module federate are performing distributed simulations similar to the mechanical module federate, except that they also need to invoke Simulink and AMEsim interface commands and use their respective solvers to perform the solution. The operation of the simulation module by the federate mainly involves invoking the solver and receiving, storing, and sending simulation data. The federate of the mechanical module of the virtual test system starts Adams and solves the mechanical dynamics model by subscribing to the hydraulic signals from AMEsim via the BH RTI (written to the shared memory of the Federate via the RTI interface function). The solved data is written to the Adams mechanical model workspace and then to the federate\u2019 shared memory space to complete the distribution and subscription of information [24].\nhttps://doi.org/10.1371/journal.pone.0293229.g003\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 9 / 20\nThe structure of the virtual test system based on HLA, established the hardware platform of\nthe tractor virtual test system, as shown in Fig 5.\nIn Fig 5, the computer performance parameters are 64-bit Windows 10 operating system,\nrunning memory 8G, 2.5GHz CPU frequency. Five computers are connected via Ethernet.\nPC1 running HLA RTI software BH RTI, tractor control module model. PC2 running HLA\nRTI software BH RTI, tractor hydraulic module model. PC3 running HLA RTI software BH RTI, tractor mechanical module model.\nhttps://doi.org/10.1371/journal.pone.0293229.g004\nhttps://doi.org/10.1371/journal.pone.0293229.g005\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 10 / 20\nPC4 running HLA RTI software BH RTI, tractor virtual test environment simulation mod-\nule federate, tractor virtual test monitoring and management module federate, tractor virtual test evaluation module federate, data storage between components using shared memory.\nThe PC5 runs the HLA RTI software BH RTI and the BH RTI central server\nCentralServerMonitor.\nTractor virtual test system operation process\nThe operation of the tractor virtual test simulation system is managed and controlled by the simulation master member. When the simulation starts, the BH RTI central server CentralServerMonitor is started first, and then the BH RTI core program of each federate computer is started. After that, the tractor virtual test simulation federation is created through the federation management application, and each federate joins the federation, and then the simulation cycle starts. At the end of the simulation cycle, each federate exits the federation and then destroys the federate, and the tractor virtual test simulation ends.\nTractor virtual test system performance test\nIn Fig 6, the configuration and running programs of the five distributed computers PC1, PC2, PC3, PC4, and PC5 remain the same as in Fig 7. PC1 runs the BH RTI software and the model of the reversing clutch control system, PC2 runs the BH RTI software and the model of the hydraulic module of the reversing clutch, and PC3 runs the BH RTI software and the model of the mechanical module of the reversing clutch [25]. PC4 runs BH RTI software, tractor virtual\nhttps://doi.org/10.1371/journal.pone.0293229.g006\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 11 / 20\ntest environment simulation module federate, tractor virtual test monitoring and management module federate, and tractor virtual test evaluation module federate. PC5 runs BH RTI software and BH RTI central server CentralServerMonitor. The data acquisition controller\nhttps://doi.org/10.1371/journal.pone.0293229.g007\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 12 / 20\nsupervisor software Links-RT runs as a federate in PC4. The data acquisition controller host computer software Links-RT runs in PC4 as a federate.\nVirtual test of tractor PST reversing clutch\nTractor power shuttle refers to the uninterrupted power transmission during the forward and reverse gear switching process of the tractor. It is a necessary technology for the tractor to achieve high-quality and efficient frequent round-trip work and typical working conditions. As shown in Fig 8, the tractor power shuttle is achieved by separating and combining the forward-driven gear F and reverse-driven gear R of the reversing clutch with the clutch-driven plate. When the tractor is moving forward, the piston on the F side of the forward-driven gear is filled with oil. Combine the friction plate connected to the forward-driven gear F with the driven plate connected to the clutch hub. The power is transmitted to the forward-driven gear F through the transmission shaft, clutch hub, driven plate, and friction plate through the long mesh driving gear. When the tractor driver switches from a forward gear to a reverse gear, the TCU sends a power shuttle control signal to change the position of the solenoid valve. At this point, the piston on the F side of the forward-driven gear begins to return oil, and under the action of the return spring, the driven plate and friction plate on the F side of the forwarddriven gear separate. At the same time, the piston on the R side of the reverse-driven gear\nhttps://doi.org/10.1371/journal.pone.0293229.g008\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 13 / 20\nbegins to charge oil. The piston compresses the return spring, sliding and grinding the friction plate connected to the reverse gear driven gear R, and the driven plate connected to the clutch hub until fully engaged. The power is switched from the forward-driven gear F to the reversedriven gear R, and the power shuttle is now complete.\nThe PST transmission system adopts the TX4A transmission system of the DongFangHong\nLF2204 tractor, and the reversing clutch model is ZCH95. The virtual test of the tractor PST reversing clutch is carried out through the HLA-based tractor virtual test system. The PST reversing clutch used for verification has undergone actual tests, and the test results meet the design standards of the PST reversing clutch. The interface of the reversing clutch virtual test system is shown in Fig 9, and each computer running program is configured according to Fig 6. The clutch condition selects the 1st gear heavy-load full throttle reverse gear shift as the forward gear, and the simulation results are shown in Fig 10.\nThe simulation and data transfer processes are outlined as follows. Once the tractor control\nunit (TCU) receives the signal to shift from forward gear to reverse gear, the Simulink-based module for controlling the tractor reversing clutch triggers the simulation process. Subsequently, the hydraulic signal is transmitted through BH RTI (Bus and Hub Real-Time Interface) to the hydraulic simulation module built-in AMEsim, initiating the hydraulic simulation of the reversing clutch [26]. Through BH RTI, AMEsim transfers the pressure signal to the reversing clutch dynamics simulation module developed in Adams, enabling the execution of the dynamic simulation. This comprehensive virtual testing procedure of the tractor\u2019s PST reversing clutch yields the primary simulation data pertinent to its performance.\nThe simulation results are depicted in Fig 10, where the engine output torque undergoes a\ntransition between the two clutches. The combined clutch associated with the reverse gear disengages from the commutation shaft, while the clutch engaged with the forward gear connects with the commutation shaft, affecting the ultimate power transfer [27]. This power reversal process spans 0.7 seconds, during which the speed shifts from -3.5 km/h to 3.5 km/h. The oil pressure in the forward gear piston increases from 0 MPa to 5 MPa, resulting in a peak impact acceleration of 17 m/s^3, with a total slippage work of 21 kJ incurred throughout the reversal process. It\u2019s worth noting that the entire power reversal process exhibits a relatively smooth performance. To analyze the time series data generated from the HLA-based tractor virtual test and the physical test, statistical characterization was conducted using the grey-scale correlation method. This analysis yielded various statistical parameters, including the maximum value, minimum value, mean value, standard deviation, and root mean square value, for the two data sets. These parameters were utilized to construct two series, denoted Xi and Yi, expressed as follows.\nXi \u00bc \u00bdx1; x2; x3; x4; x5\ufffd \u00f01\u00de\nYi \u00bc \u00bdy1; y2; y3; y4; y5\ufffd \u00f02\u00de\nXi and Yi correlation degree is calculated as.\nzi \u00bc minjxi yij \u00fe xmaxjxi yij jxi yij \u00fe xmaxjxi yij\n\u00f03\u00de\nIn the formula, zi is the correlation coefficient of each feature parameter. \u03be is the resolution coefficient and takes the value of 0.5 [28].\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 14 / 20\nhttps://doi.org/10.1371/journal.pone.0293229.g009\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 15 / 20\nhttps://doi.org/10.1371/journal.pone.0293229.g010\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 16 / 20\nThe correlation coefficient z of the virtual and physical test data is the average of the corre-\nlation coefficients of all characteristic parameters and is calculated as.\nz \u00bc 1\nn\nXn\ni\u00bc1\nzi \u00f04\u00de\nFor z 2 (0.9, 1], the virtual and physical test data are highly correlated. z 2 (0.7, 0.9], the vir-\ntual and physical test data are more correlated. z 2 (0.5, 0.7], the virtual and physical test data are highly correlated. z 2 (0.3, 0.5], the virtual and physical test data are less correlated. z 2 [0, 0.3], the virtual and physical test data are less correlated. z 2 [0, 0.3], the virtual and physical test data are less correlated. z 2 [0, 0.3], the correlation between the virtual test data and the physical test data is small.\nAfter calculation, the average correlation coefficient z = 0.92. The virtual test data and the\nphysical test data correlate well. The virtual test results are consistent with the bench test results. Through the virtual test and bench test comparison results analysis, the tractor PST reversing clutch virtual test model on the HLA-based tractor virtual test system works well.\nPerformance test of data transmission delay of tractor virtual test system\nThe data transmission delay parameter reflects the system\u2019s ability in real-time and data transmission capacity and is an important index parameter of the tractor virtual test system. According to the virtual test advance step and hardware device response time, the system time delay should not exceed 10ms.\nTo assess the influence of varying numbers of object attributes on system data latency per-\nformance, we established a 60-node tractor virtual test system. Each node represents a data size of 100KB, effectively emulating 60 attributes within the simulation system. The methodology employed for conducting these tests is outlined as follows.\n1. Start the tractor virtual test system and complete the system initialization.\n2. Simulink, AMEsim, and Adams each run data transfer, from Simulink software output 1\ncontrol signal to AMEsim software, and then by AMEsim software to Adams software, Adams software to Links-RT, start timer recorded as time T1 moment.\n3. Links-RT receives the signal and feeds back the signal to the federate Simulink.\n4. Repeat steps (2) and (3) 100 times, stop the timer, and count as time T2.\n5. Test to obtain the time delay under the data size corresponding to the 1st control signal as\n((T2-T1)/200)s.\n6. Repeat steps (2) ~ (5), and increase the transmission line in turn to obtain the time delay\nunder the data size corresponding to the 2-way and 3-way. . .. . .60 signals.\nFig 11 presents the results obtained from the test regarding data transmission delays. In Fig 11, when the system transmission data volume reaches 5000KB, the time delay is 9.7ms.\nIt meets the real-time performance requirement that the maximum delay of the tractor virtual test system does not exceed 10ms, and the data transmission delay performance is acceptable [29]."
        },
        {
            "heading": "Conclusion",
            "text": "This paper presents a detailed study and design of a distributed virtual test system for tractors based on HLA. The problems of low tractor test efficiency and long new product development cycle are solved, and the main results are as follows.\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 17 / 20\n1. Analyzing logic and hardware structure of the tractor virtual test system. Design federation\nFOM and SOM table of the tractor virtual test system. Study interoperability among the federate and the system operation flow in detail.\n2. The performance of the HLA-based tractor virtual test system is stable. When the system\ndata volume reaches 5000KB, the data delay is 9.7ms, which meets the required tractor virtual test delay of no more than 10ms.\n3. The HLA-based tractor virtual test system makes efficient use of the existing tractor model\nand has certain advantages in model reuse, interoperability, and system expansion."
        },
        {
            "heading": "Author Contributions",
            "text": "Conceptualization: Xianghai Yan, Liyou Xu.\nData curation: Xianghai Yan.\nFunding acquisition: Liyou Xu.\nInvestigation: Junjiang Zhang.\nMethodology: Chengyan Shang.\nResources: Liyou Xu.\nSoftware: Chengyan Shang.\nhttps://doi.org/10.1371/journal.pone.0293229.g011\nPLOS ONE | https://doi.org/10.1371/journal.pone.0293229 October 23, 2023 18 / 20\nSupervision: Liyou Xu.\nValidation: Xianghai Yan, Junjiang Zhang.\nVisualization: Chengyan Shang.\nWriting \u2013 original draft: Xianghai Yan.\nWriting \u2013 review & editing: Junjiang Zhang."
        }
    ],
    "title": "Design of tractor virtual test system based on high-level architecture technology",
    "year": 2023
}