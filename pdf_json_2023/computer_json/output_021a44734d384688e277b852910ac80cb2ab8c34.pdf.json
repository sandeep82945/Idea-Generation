{
    "abstractText": "In this paper, we outline a framework for modeling utility-based blockchain-enabled economic systems using Agent Based Modeling (ABM). Our approach is to model the supply dynamics based on metrics of the cryptoeconomy. We then build autonomous agents that make decisions based on those metrics. Those decisions, in turn, impact the metrics in the next time-step, creating a closed loop that models the evolution of cryptoeconomies over time. We apply this framework as a case-study to Filecoin, a decentralized blockchain-based storage network. We perform several experiments that explore the effect of different strategies, capitalization, and external factors to agent rewards, that highlight the efficacy of our approach to modeling blockchain based cryptoeconomies.",
    "authors": [
        {
            "affiliations": [],
            "name": "Kiran Karra"
        },
        {
            "affiliations": [],
            "name": "Tom Mellan"
        },
        {
            "affiliations": [],
            "name": "Maria Silva"
        },
        {
            "affiliations": [],
            "name": "Juan P. Madrigal-Cianci"
        },
        {
            "affiliations": [],
            "name": "Axel Cubero Cortes"
        },
        {
            "affiliations": [],
            "name": "Zixuan Zhang"
        }
    ],
    "id": "SP:016ad1e38aabd527429c98f1fcc5c5dccc79167b",
    "references": [
        {
            "authors": [
                "C.M. Macal",
                "M.J. North"
            ],
            "title": "Agent-based modeling and simulation.",
            "venue": "In Proceedings of the 2009 winter simulation conference (WSC) IEEE",
            "year": 2009
        },
        {
            "authors": [
                "T. Terano"
            ],
            "title": "A Perspective on Agent-Based Modeling in Social System Analysis.",
            "venue": "Handbook of Systems Sciences Singapore: Springer",
            "year": 2020
        },
        {
            "authors": [
                "Chen",
                "S.-H",
                "Chang",
                "C.-L",
                "Du",
                "Y.-R"
            ],
            "title": "Agent-based economic models and econometrics.",
            "venue": "The Knowledge Engineering Review 27.2",
            "year": 2012
        },
        {
            "authors": [
                "G. Fagiolo",
                "M. Guerini",
                "F. Lamperti",
                "A. Moneta",
                "A. Roventini"
            ],
            "title": "Validation of Agent-Based Models in Economics and Finance.",
            "venue": "Methods and Applications",
            "year": 2019
        },
        {
            "authors": [
                "S Eubank"
            ],
            "title": "Modelling disease outbreaks in realistic urban social networks.",
            "venue": "Nature 429.6988",
            "year": 2004
        },
        {
            "authors": [
                "I. Struchkov",
                "A. Lukashin",
                "B. Kuznetsov",
                "I. Mikhalev",
                "Z. Mandrusova"
            ],
            "title": "Agent-Based Modeling of Blockchain Decentralized Financial Protocols.",
            "venue": "29th Conference of Open Innovations Association (FRUCT)",
            "year": 2021
        },
        {
            "authors": [
                "L. Cocco",
                "R. Tonelli",
                "M. Marchesi"
            ],
            "title": "An Agent Based Model to Analyze the Bitcoin Mining Activity and a Comparison with the Gold Mining Industry.",
            "venue": "Future Internet 11.1",
            "year": 2019
        },
        {
            "authors": [
                "P. H\u00fclsemann",
                "A. Tumasjan"
            ],
            "title": "Walk this Way! Incentive Structures of Different Token Designs for Blockchain-Based Applications.",
            "venue": "ICIS",
            "year": 2019
        },
        {
            "authors": [
                "J.D. Fernandez",
                "T. Barbereau",
                "O. Papageorgiou"
            ],
            "title": "Agent-based Model of Initial Token Allocations: Evaluating Wealth Concentration in Fair Launches.",
            "year": 2022
        },
        {
            "authors": [
                "H. Benedetti",
                "L. Abarz\u00faa",
                "C. Caceres Fuentes"
            ],
            "title": "Utility Tokens.",
            "venue": "URL https://papers.ssrn.com/abstract=4088568",
            "year": 2021
        },
        {
            "authors": [
                "O. Akcin",
                "R.P. Streit",
                "B. Oommen",
                "S. Vishwanath",
                "S. Chinchali"
            ],
            "title": "https://eprint.iacr.org/2022/ 1492 \u201cA Control Theoretic Approach to Infrastructure-Centric Blockchain Tokenomics.",
            "venue": "Cryptology ePrint Archive,",
            "year": 2022
        },
        {
            "authors": [
                "Z. Zhang",
                "M. Zargham",
                "V.M. Preciado"
            ],
            "title": "On modeling blockchain-enabled economic networks as stochastic dynamical systems.",
            "venue": "Applied Network Science",
            "year": 2020
        },
        {
            "authors": [
                "Neal",
                "R. M"
            ],
            "title": "MCMC using Hamiltonian dynamics.\u201d Handbook of markov chain monte carlo",
            "year": 2011
        },
        {
            "authors": [
                "M.D. Hoffman",
                "A Gelman"
            ],
            "title": "The No-U-Turn sampler: adaptively setting path lengths in Hamiltonian Monte Carlo.",
            "venue": "J. Mach. Learn. Res",
            "year": 2014
        },
        {
            "authors": [
                "M.B. Giles"
            ],
            "title": "Multilevel monte carlo methods.",
            "venue": "Acta numerica",
            "year": 2015
        },
        {
            "authors": [
                "J.P. Madrigal-Cianci",
                "J. Kristensen"
            ],
            "title": "Time-efficient Decentralized Exchange of Everlasting Options with Exotic Payoff Functions.",
            "venue": "IEEE International Conference on Blockchain (Blockchain)",
            "year": 2022
        },
        {
            "authors": [
                "J.P. Madrigal-Cianci",
                "F. Nobile",
                "R. Tempone"
            ],
            "title": "Analysis of a class of multilevel Markov chain Monte Carlo algorithms based on independent Metropolis\u2013Hastings.",
            "venue": "SIAM/ASA Journal on Uncertainty Quantification",
            "year": 2023
        },
        {
            "authors": [
                "E. Qian",
                "B. Peherstorfer",
                "D. O\u2019Malley",
                "V.V. Vesselinov",
                "K. Willcox"
            ],
            "title": "Multifidelity Monte Carlo estimation of variance and sensitivity indices.",
            "venue": "SIAM/ASA Journal on Uncertainty Quantification",
            "year": 2018
        }
    ],
    "sections": [
        {
            "heading": "KEY WORDS",
            "text": "1. Agent-Based Modeling. 2. Cryptoeconomics. 3. Digital Twin."
        },
        {
            "heading": "1. Introduction",
            "text": "Cryptoeconomics is an interdisciplinary science that combines fields such as economics, cryptography, and computer science with the goal of designing and analyzing economic incentive structures for resource allocation in decentralized systems.1 Accordingly, cryptoeconomic systems are often used to create new forms of digital currency, utilities, and markets. Because each system has its own goals and contexts in which it is applicable, cryptoeconomic incentive structures usually need to be customized for each individual application. In addition, these systems typically show features associated with Complex Systems.1 This means that the long-term evolution of these systems cannot be easily inferred from local changes caused by individuals, which makes the task of customizing cryptoeconomic systems to support a concrete application more difficult.\nEven though cryptoeconomics is a relatively young field,2 some work has been done to address the complexities of designing and tuning decentralised economies. An exciting new approach is to use Agent-based modeling (ABM).3 ABM is a computational modeling technique that has been used to study a wide variety of complex systems, including social systems,4 economic systems,5, 6 and biological systems.7 In ABM, the system is modeled as a collection of agents, each of which has its own set of rules and behaviors. The agents interact with each\n\u2217 Kiran Karra and Tom Mellan contributed equally to this work. All authors are research scientists at CryptoEconLab (https://cryptoeconlab.io)\nother and with the environment, and the system\u2019s behavior emerges from the interactions of the individual agents.3\nWithin the cryptoeconomics space, ABM has the potential to support practitioners in three main areas:\n(1) Study the cryptoeconomics and robustness of the blockchain to agent behavior. As an example, Struchkov et al.8 used ABM to test how Decentralised Exchanges would respond to stress market conditions and front-running, while Cocco et al.9 used ABM to analyse the mining incentives in the Bitcoin network; (2) Explore the design space of blockchain networks. For instance, ABM has been applied to compare different token designs and their impact on prediction markets;10 (3) Test new features and protocols. Following the fair launch allocation from Yearn Finance, a group of researchers11 used ABMs to examine the concentration of voting rights tokens after the launch, under different trading modalities.\nThis paper explores how ABM can be adapted to a particular type of decentralised system, namely utility-based decentralised networks. These networks employ their own currency to provide consumptive rights on the services or the product being offered by the network.12 Thus, these systems mediate a marketplace of providers of a specific good and users that want to consume the good. Since the entire system depends on the good being traded, any tool attempting to model such system needs to consider how changes in utility impact the system and its agents.\nTherefore, we propose a framework for applying ABMs to utility-based cryptoeconomies. Our approach is complimentary to other methods in the literature13 and builds on the work of Zhang, et. al14 to enable multi-scale coupling between individual microeconomic preferences and protocol specific supply dynamics. Rational users of cryptoeconomic systems will base their decisions on some aspects of the network they are involved in, which in turn affects the network. This natural feedback loop is well represented in our framework.\nWe apply the framework to Filecoin, a decentralised data storage network,15 and conduct two experiments that uncover interesting aspects of the network. The first explores the agents\u2019 reward trajectories under different lending rates, while the other examines how the current cryptoeconomic mechanisms of Filecoin impact wealth distribution.\nThe rest of this paper is organized as follows. We begin in Section 2 by presenting the general framework for applying ABM to utility-based systems. This framework is then applied to the Filecoin network, by first developing a mathematical model of Filecoin\u2019s supply dynamics in Section 3. In Section 4, we describe the ABM that leverages this model to simulate a closed loop interaction of programmable agents within the Filecoin economy. Section 5 follows with the two experiments that showcase the utility of our ABM framework to understand the Filecoin system. We conclude in Section 6 by framing the results in the context of utility based token economies and discussing future research paths."
        },
        {
            "heading": "2. ABM Framework for Utility Cryptoeconomies",
            "text": "Agent-based models (ABMs) are a tool for modeling complex systems3 with a high degree of granularity. They consist of two primary components which interact with each other: a) the environment, which models the system under study, and b) agents, which take actions that affect the environment.\n2 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX"
        },
        {
            "heading": "Formal Definition",
            "text": "We define the general framework of our deterministic, discrete-time ABM as follows. Let E denote the set of all possible environmental variables. For a given time d \u2208 N, let Ed \u2208 E denote the environment at time d, and define the set E \u220b Ed := E0 \u00d7\u00b7\u00b7 \u00b7\u00d7Ed . In our specific setting, Ed,Ed+1, . . . corresponds to the environments at day d, at day d +1, etc. In addition, let A be the abstract set of agents and let H denote the abstract set of actions. To each agent a \u2208 A , there corresponds a given set of actions ha \u2208 H . Furthermore, we define the update rules f Hd+1 : A \u00d7Ed 7\u2192 H , f Ed+1 : H \u00d7E 7\u2192 E , and f Ad+1 : Ed 7\u2192 A , as some abstract functions that update the actions of each agent, the environment and agents respectively. Given a set of agents A0 \u2282 A , at time d = 0, where each agent a0 \u2208 A0 is equipped with a set of actions ha0 \u2208 H and an initial environment E0, the ABM proceeds by iterating as follows:\nha,d+1 = f Sd (ad,Ed) \u2200ad \u2208 Ad, (1)\nEd+1 = f Ed \u0105 ad\u2208Ad ha,d+1,Ed  (2) Ad+1 = f Ad (Ed). (3)"
        },
        {
            "heading": "Environment",
            "text": "The supply dynamics, defined as factors which affect the supply of tokens in the cryptoeconomy, are modeled by the environment, E. Factors include the total supply of tokens, the rate at which new tokens are mined, and the rate at which tokens are taken out of circulation through means such as burning. This information is often used by investors and traders who want to understand the potential value of a cryptoeconomy to then make decisions about potential investments into that economy.\nThree aspects of the environment must be defined: (1) Network Performance Metrics - what are the key set of metrics that are to be modeled\nand used as performance indicators when evaluating the results of the ABM simulation? (2) Inputs - when actors take part in the cryptoeconomy, what is the subset of actions that\nthey can take that would affect the network metrics? (3) Outputs - what are the outputs that flow back to miners, which in turn affect miners\ndecisions about their actions in the next time step? For example, in a typical blockchain, rewards are issued to miners and because the rate and trajectory of rewards affects agent\u2019s behavior, this is a key output. Additional outputs, such as a subset of the overall network metrics that miners can use to make rational decisions can also be included."
        },
        {
            "heading": "Agents",
            "text": "Miners in blockchains are mapped to agents, Ai. Miners take actions that correspond to the inputs of the environment and make those decisions based on the outputs of the environment they are interacting with. The actions they take affect the network\u2019s performance metrics, which then affects the outputs that the agents are fed. Through this feedback loop, the dynamical nature of the cryptoeconomy is modeled.\n3 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX\nFig. 1 shows a diagram of this proposed framework for mapping cryptoeconomies to an ABM."
        },
        {
            "heading": "Examples",
            "text": "Three examples of cryptoeconomic projects where this framework can provide value include Helium,16 Ethereum,17 and Filecoin.15\nHelium is a decentralized wireless network where miners provide wireless coverage in exchange for HNT tokens. An ABM utilizing the described framework can be used to understand, for example, how the rate of token distribution and population density may affect expected network coverage. This requires a mathematical model of how tokens are minted (the supply dynamics), given agent inputs (i.e. the wireless coverage they provide to the network). This can then be used to design new incentive structures to ensure a more even coverage distribution.\nEthereum is another example where the described ABM framework can be applied. A specific use case could be analyzing how user behavior (agents) could stress and effect the total circulating supply of ETH tokens after the \u201cShapella\u201d upgrade, which enabled easier unlocking of staked ETH. In this setting, one could model, e.g., the propensity of a participant to unlock, against more staking inflows due to the ability to unlock. Here, the agents actions (whether to stake or unstake) have a direct effect on the supply dynamics and the outlined framework would enable one quantify various scenarios that may play out.\nWe now discuss the application of the ABM framework to Filecoin in more detail."
        },
        {
            "heading": "3. Modeling Filecoin Supply Dynamics",
            "text": "Filecoin is a distributed storage network based on the blockchain, where miners, referred to as storage providers (SPs), provide storage capacity for the network and earn units of the Filecoin cryptocurrency (FIL) by periodically producing cryptographic proofs that certify they are providing the promised storage capacity. In contrast to using Nakamoto-style proof of work to maintain consensus on the chain, Filecoin uses proof of storage: a miner\u2019s voting power \u2014 the probability that the network elects a miner to create a new block \u2014 is proportional to their current quality-adjusted storage in use in relation to the rest of the network. The cryptoeconomics of Filecoin are designed to incentivize storage providers to participate and grow the collective utility of the data storage network.\nThe following subsections describe various aspects of the Filecoin supply dynamics.\n4 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX"
        },
        {
            "heading": "Circulating Supply",
            "text": "Filecoin\u2019s circulating supply Sd is modeled at a daily (d) level of aggregation and has four parts:\nSd+1 = Md +Vd\ufe38 \ufe37\ufe37 \ufe38 inflow \u2212Ld \u2212Bd\ufe38 \ufe37\ufe37 \ufe38 outflow . (4)\nThese correspond to minted block rewards Md , vested tokens Vd , locked tokens Ld , and burnt tokens Bd ."
        },
        {
            "heading": "Power Onboarding and Renewals",
            "text": "The dynamics of Md , Ld , and Bd depend on the amount of storage power onboarded and renewed in the network.\nIn Filecoin, storage providers (SPs) participate by onboarding power onto the network by adding a sector for a committed duration. Power is measured in units of sectors, which can be either 32 GiB or 64 GiB in size. Each sector consists of a fraction of committed capacity (CC) and verified deal data (FIL+).18 An SPs can choose to renew CC sectors when they expire.\nWe model power in aggregate terms rather than at the sector level. This means that we model the network\u2019s storage power to be split into two categories: 1) CC and 2) FIL+. This approximation is valid for the granularity that we are seeking to achieve with our modeling.\nFilecoin has two methods to measure the power of the network, the network\u2019s raw byte power (RBP) and the network\u2019s quality adjusted power (QAP). Network RBP is a measure of the raw storage capacity (in bytes) of the network \u2014 it does not distinguish between the kind of data that is stored on the network. For example, empty or random data stored on the network is counted the same as a widely used dataset when computing network RBP. A second measure of network power is quality adjusted power (QAP). QAP is a derived measurement that captures the amount of useful data being stored on the network. Considering the aggregated approximation discussed above, we compute the quality adjusted power, PQAd of the network on day d as\nPQAd = (1\u2212 \u03b3) \u00b7P RB d +10 \u00b7 \u03b3 \u00b7PRBd , (5)\nwhere \u03b3 \u2208 [0,1] is the overall FIL+ rate of the network, and PRBd is the raw byte power of the network on day d. Eq. 5 reveals that FIL+ power is given a 10x multiplier when computing the QA power of the network.18\nAn initial pledge collateral of FIL tokens is required in order to onboard or renew power, and the specific amounts and time-windows are discussed below. In exchange for onboarding and renewing power onto the network, and continually submitting storage proofs to the chain, SPs can receive block rewards in the form of FIL tokens."
        },
        {
            "heading": "Rewards from minting",
            "text": "Filecoin uses a hybrid minting model that has two components \u2014 simple minting and baseline minting. The total number of tokens minted by day d is the sum of these two minting mechanisms:\nMd = MSd +M B d (6)\n5 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX\nSimple minting is defined by an exponential decay model\nMSd = M S \u221e \u00b7 (1\u2212 e\u2212\u03bb d), (7)\nwhich decays at a rate of \u03bb = ln(2)6yrs , corresponding to a 6-year half-life. M S \u221e takes a value of 30% of the maximum possible minting supply of 1.1B tokens. Tokens emitted via simple minting are independent of network power. This is similar to minting schemes present in other blockchains.19\nThe second component of minting in Filecoin is baseline minting, MBd . Baseline minting depends on network power and aims to align incentives with the growth of the network\u2019s utility. The minting function still follows an exponential decay, however, it now decays based on the effective network time, \u03b8d . The equations describing this are:\nMBd = M B \u221e \u00b7 (1\u2212 e\u2212\u03bb\u03b8d )\n\u03b8d = 1 g ln ( gR\u2211d b0 +1 ) R\u2211d = \u2211\nd\u2208D min{bd,PRBd }\n(8)\nFrom these definitions, we can compute the cumulative baseline minting by day d from the cumulative capped RBP of the network:\nMBd = M B \u221e \u00b7\n( 1\u2212 e \u2212\u03bb g ln( gR\u2211d b0 +1) ) =\n= MB\u221e \u00b7 1\u2212(gR\u2211d b0 +1 )\u2212\u03bb g  (9)\nIn this expression MB\u221e takes a value of 70% of the maximum possible supply of 1.1B tokens. R \u2211 is the cumulative capped network RBP; it is the sum of the point-wise minimum of network\u2019s RBP and the baseline storage function for each day:\nbd = b0 egd (10)\nThe baseline storage function serves as a target for the network to hit to maximize the baseline minting rate. In this expression g = log(2)365 , the baseline storage growth rate which corresponds to 2 year doubling, and b0 = 2.88888888EiB is the initial baseline storage."
        },
        {
            "heading": "Vesting",
            "text": "Vesting supply, which can contribute 0.9B tokens, is modelled daily, summing across the set of recipients R as\nVd = \u2211 r\u2208R Vr,d . (11)\nDifferent recipients have different linear vesting schedules."
        },
        {
            "heading": "Locked tokens",
            "text": "Locked tokens in the network Ld are made up of storage collaterals LSd and vesting block rewards LRd as\n6 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX\nLd = LSd +L R d (12)\nThe locked balance for vesting blocked rewards is modeled as\nLRd = 0.75 \u2211 \u03c4\u2264d \u2206Md\u2212\u03c4 \u00b7 rRd . (13)\nwhere \u2206Md is daily minted rewards and rRd is a vector specifying the release linear release over 180days.\nThe locked storage collateral is modeled as having the following dynamics\nLSd = \u2211 \u03c4\u2264d \u2206LSd\u2212\u03c4 \u00b7 rSd . (14)\nwhere \u2206LSd is newly locked storage collateral tokens, and r S d is a vector specifying a release schedule. Newly locked collateral tokens are given by\n\u2206LSd = \u2206L SP d +\u2206L CP d . (15)\nwhere the \u2019storage pledge\u2019 locked tokens are\n\u2206LSPd = max(20 \u00b7\u2206Md, 0) , (16)\nand \u2019consensus pledge\u2019 locked tokens are\n\u2206LCPd = max  0.3 \u00b7Sd \u00b7\u2206PQAd max ( PQAd , bd ) ,0  (17)\nwhere \u2206PQAd denotes new quality-adjusted power onboarded on day d."
        },
        {
            "heading": "Burnt tokens",
            "text": "Burnt tokens are modeled as consisting of termination fees BTd and base fees from gas usage B G d as:\nBd = BTd +B G d (18)\nwhere terminations are accounted for by aggregating agent decisions and gas fees as linearly increasing as BGd = \u03b2 d at average rate \u03b2 ."
        },
        {
            "heading": "4. ABM of Filecoin",
            "text": "Utilizing the framework developed in Section 2, we create an ABM of Filecoin. Storage providers (SPs) are mapped to agents, and the environment consists of the supply dynamics described in Section 3. We divide the environment into three logical modules: a) Network State, b) Forecasting, and c) the external environment. These components interact with each other in the following manner.\n7 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX\nAgents determine the amount of power they will onboard and renew onto the network for day d. All agents decisions are aggregated and passed into the network state module. Using the developed model of the supply dynamics, the network state is updated. By utilizing both historical network metrics and network forecasting information, agents can make rational decisions. Finally, an external environment simulates constraints that SPs are subject to in the real world, such as borrowing costs of pledge collateral. These components interact to create a closed-loop simulation of the Filecoin economy.\nFig. 2 summarizes the components and dataflow of the Filecoin ABM."
        },
        {
            "heading": "Agents",
            "text": "Agents directly influence the outcomes of the simulation, since their actions are aggregated and used as inputs to update the network state. We have developed three types of agents which use the network and forecasting information in different ways to make decisions regarding onboarding and renewing power:\n(1) DCAAgent - This is the dollar cost averaging agent, and does not use any forecasting information or historical network information to make decisions. The agent is configured to onboard a constant amount of power per day, the percentage of that power which corresponds to verified deals, and the percentage of expiring power which should be renewed. This is a dollar-cost averaging strategy and can be useful in understanding relative performance to more complex strategies. (2) FoFRAgent - This agent utilizes the rewards/sector forecast provided by the network to internally forecast the FIL-on-FIL returns (FoFR) of onboarding sectors for various sector durations, where FoFR = rewardspledge . This metric can additionally be generalized to introduce arbitrary cost structures. Because pledge (Eq. 17) is dependent upon the Network QAP and agents must make decisions for a given timestep before the overall Network QAP is aggregated for a day, it is approximated by using the previous day\u2019s pledge. If the estimated FoFR for any of the tested sector durations exceeds a configurable threshold (which indirectly represents the risk profile of the agent), then the agent will onboard a configured amount of power. It will also renew a configured amount of power\n8 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX\nunder the same condition. (3) NPVAgent - This agent utilizes the rewards/sector forecast provided by the network\nto compute the net present value (NPV) of onboarding power for various sector durations. NPV is the present value of the expected rewards/sector less costs/sector. Present value is computed using the continuous discounting formula. The agent discount rate, configured upon instantiation, is a proxy for the risk profile of the agent, with a higher discount rate representing a higher risk aversion. The agent will onboard and renew power at a sector duration which maximizes NPV, but will take no action for day d if NPV < 0 for all durations tested."
        },
        {
            "heading": "Network State",
            "text": "Network state consists of: a) network power, and b) the status of tokens. The total network power is summed across all of the agents individual contributions for each day, and the type of power onboarded (CC or FIL+) is also tracked. This enables the network state to track both PRBd and P QA d .\nToken status consists of three parts: a) the amount mined, b) the amount locked due to pledge, and c) the remaining that has been released into the circulating supply through vesting. The mined tokens are distributed to agents as rewards. The fraction of total rewards mined in a day are distributed proportional to the fraction of total network QAP. Tokens are locked when agents onboard power to provide a consensus pledge. This information is aggregated to compute the overall network state of the number of tokens locked. Using Eq. 4, the circulating supply of the network is computed."
        },
        {
            "heading": "Forecasting",
            "text": "To enable agents to make rational decisions, relevant forecasts are computed and provided to agents, who can choose to utilize them. As previously mentioned, agents use rewards/sector to make rational decisions. This quantifies the amount of rewards an agent can expect to receive for onboarding a given sector. The metric is forecast by first utilizing the historical network RBP and QAP to train a time-series forecasting model, M . M is used to forecast RBP and QAP trajectories until the end of the simulation, denoted by P\u0302RBd and P\u0302 QA d , respectively. P\u0302 RB d is then used to compute the expected minting rate, m\u0302d , using Eqs. 6, 7, and 9. Finally, because rewards are distributed proportional to the network\u2019s QA power, \u02c6rewardssector [d] = m\u0302d/P\u0302 QA d .\nThere are currently two models implemented for RB and QA forecasting, linear extrapolation and a variant of Markov-Chain Monte Carlo.20, 21 Agents may also elect to perform custom forecasting using network metrics, and this represents a competitive advantage that a certain agent may have."
        },
        {
            "heading": "External Environment",
            "text": "Agents must borrow tokens in order to satisfy the consensus pledge (Eq. 17) needed to onboard power. The borrowing rate is modeled as an external environment process that specifies the discount rate, Rd , at which agents can borrow tokens. Agents use this information to make rational decisions regarding onboarding and renewing power. The purpose of this is to model\n9 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX\nrealities that SPs have to face, when determining their strategy for being involved in the Filecoin network. Additional real-world complexities can also be modeled here.\nModel Validation\nWe begin by validating the model of Filecoin\u2019s supply dynamics that was developed and described in Section 3, using backtesting. Our approach is to instantiate one DCAAgent which onboards and renews the historical power that was onboarded onto the network for that day. This is in contrast to the typical use-case of an agent, which is making daily decisions about whether and how much power to onboard and renew. Then, the relevant statistics for circulating supply are calculated from the start of simulation to the present date. This is then compared against actual statistics from the Filecoin network retrieved from Spacescope.22 Fig.3 shows the results of this experiment: a) shows the minted tokens, and b) shows the circulating supply. For each of these network statistics, the implemented model tracks the historical data with good accuracy. Slight differences are observed, and these can be attributed to not modeling certain intricacies of the Filecoin network, such as variable sector durations."
        },
        {
            "heading": "5. Experiments and Results",
            "text": "In this section, we describe some experiments that showcase the utility of ABM in modeling blockchain networks, using the Filecoin network as a case study."
        },
        {
            "heading": "Sensitivity of Rewards to External Discount Rates",
            "text": "In this experiment, we explore how the cryptoeconomics of Filecoin and external factors such as borrowing rates affect agent rewards. We instantiate two subpopulations of NPVAgents, one subpopulation is configured to only onboard verified deals (which corresponds to FIL+ power), while the second is configured to only onboard storage capacity (CC power). Both subpopulations of agents are configured to have identical risk profiles by instantiating the agents with the same discount rates. Fig. 4 shows agent rewards trajectory, with different colors indicating different external discount rates.\nFig. 4(a) shows that irrespective of external discount rates, FIL+ agents are more profitable than CC agents. This is a direct consequence of the cryptoeconomic mechanism in place in\n10 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX\nFilecoin to incentivize FIL+ data, through the 10x quality adjusted (QA) multiplier. Secondly, we see the effect of external borrowing rates on agent profitability. As expected, higher rewards are correlated with lower borrowing rates. However, the rewards trajectory does not change linearly with the borrowing rate and starts to oscillate as borrowing rates increase. This is an example of an interesting dynamic that emerges as a result of the agent based simulation.\nWe extend this experiment by altering one aspect of the previous experimental setup - that is, we increase the risk aversion of the CC agent to be two-times the risk aversion of the FIL+ agent. We then examine the agent rewards trajectory, shown in Fig. 4(b). Because the FIL+ agents have the same risk as before, their rewards trajectories are identical. However, we notice that when the external discount rate is 30%, the risk-averse CC agent manages a more positive rewards trajectory than the non risk-averse CC agent. The effect of this disappears as the external borrowing rates decrease, however."
        },
        {
            "heading": "Wealth Concentration",
            "text": "In this experiment, we explore how the distribution of starting capital in the cryptoeconomic network affects the ability to get rewards from the network. Our experimental setup consists of five DCAAgents which are configured to represent different levels of capitalization. This is represented with a vector [a1,a2,a3,a4,a5], where the relative capitalization of ai is defined as ci = ai/\u22115i=1 ai.\nIn Filecoin, onboarding power requires, in addition to pledge collateral, sealing of sectors via cryptographic proofs that require large computational resources. It is reasonable to assume that agents with larger capitalization will have more hardware resources to perform this than agents with smaller capitalization, thereby having a larger sealing throughput. To model this, we scale how much power an agent is able to onboard and renew, per day, by its relative capitalization. The mapping from capitalization to sealing throughput captures the idea of wealth concentration. To compare and interpret the results, the overall power onboarded is kept constant across the three experiments.\nWe test three distributions of initial capital: (1) All agents have equal starting capital (20%) - this is considered the baseline and corre-\n11 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX\nsponds to the the vector [1,1,1,1,1]. (2) One agent has 50% of the starting capital, and the remainder have 50/4 = 12.5% starting\ncapital each and corresponds to the vector [4,1,1,1,1]. (3) The agent capitalization follows the distribution: [33%,27%,20%,13%,7%] and corre-\nsponds to the configuration vector [5,4,3,2,1]. Fig. 5 shows the reward trajectories of each agent, relative to the baseline case where each agent has 20% of the starting capital. We observe that relative to the max-capitalized agent, the rewards trajectories of other agents are on a decreasing trend. This is a consequence of the fact that both onboarding and renewals are a function of the agent capitalization."
        },
        {
            "heading": "6. Conclusion",
            "text": "In this paper, we have outlined a framework for applying ABM to modeling utility based blockchain economies, and validated our framework with Filecoin as a case study. Our experiments shed light on some interesting aspects of Filecoin, including agent reward trajectories when taking into account external lending rates, and how the cryptoeconomic structure of Filecoin distributes wealth.\nThe sensitivity experiments indicate that creating new, competitive lending markets with smart contracts leveraging programmable platforms such as FVM23 can enable network growth and increase miner returns. The wealth concentration experiments indicate that starting capitalization has a significant effect on total rewards in the future. By explicitly modeling this effect with the supply dynamics, one can then design new incentive structures to either accentuate, maintain, or perhaps reverse the trend based on the goals of the project. Insights such as these, enabled by the ABM framework, can help designers and creators of cryptoeconomies to more efficiently achieve their goals. This indicates that ABM can be a valuable tool for researchers to better understand and design blockchain economies.\nIn the future, we plan to explore additional aspects of blockchain economies that are well mapped to ABMs, such as the effect of information quality, availability, and lag on agent reward trajectories, and related network science questions. Another potential research direction is to include uncertainty by considering a probabilistic ABM, while balancing the computational constraints using methods such as Multi-level and Multi-Index Monte Carlo methods.24\u201327\n12 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX"
        },
        {
            "heading": "Author Contributions",
            "text": "KK developed the ABM codebase and helped devise experiments that were conducted with the framework. TM developed the mathematical models of the Filecoin economy and steered the project. They both contributed equally to manuscript preparation. TM and MS implemented the initial mathematical models, which were then ported to the ABM framework. JC provided formalism and consulting on ABM related topics. AC and ZZ helped putting the project in larger context and helped with manuscript preparation."
        },
        {
            "heading": "Notes and References",
            "text": "1 Voshmgir, S., Zargham, M., et al. \u201cFoundations of cryptoeconomic systems.\u201d Research Institute for Cryptoeconomics, Vienna, Working Paper Series/Institute for Cryptoeconomics/Interdisciplinary Research 1. 2 Davidson, S., De Filippi, P., Potts, J. \u201cEconomics of Blockchain.\u201d (2016) doi:10.2139/ssrn.2744751 URL https://papers.ssrn.com/abstract=2744751.\n3 Macal, C. M., North, M. J. \u201cAgent-based modeling and simulation.\u201d In Proceedings of the 2009 winter simulation conference (WSC) IEEE 86\u201398 (2009) .\n4 Terano, T. \u201cA Perspective on Agent-Based Modeling in Social System Analysis.\u201d In G. S. Metcalf, K. Kijima, H. Deguchi (Eds.), Handbook of Systems Sciences Singapore: Springer 1\u201313 (2020)doi: 10.1007/978-981-13-0370-8 5-1 URL https://doi.org/10.1007/978-981-13-0370-8_5-1.\n5 Chen, S.-H., Chang, C.-L., Du, Y.-R. \u201cAgent-based economic models and econometrics.\u201d The Knowledge Engineering Review 27.2 187\u2013219 (2012) doi:10.1017/ S0269888912000136 publisher: Cambridge University Press URL https://www. cambridge.org/core/journals/knowledge-engineering-review/article/abs/ agentbased-economic-models-and-econometrics/DF3E4987809567A9B277F83ED6E22E00.\n6 Fagiolo, G., Guerini, M., Lamperti, F., Moneta, A., Roventini, A. \u201cValidation of Agent-Based Models in Economics and Finance.\u201d In C. Beisbart, N. J. Saam (Eds.), Computer Simulation Validation: Fundamental Concepts, Methodological Frameworks, and Philosophical Perspectives Cham: Springer International Publishing Simulation Foundations, Methods and Applications 763\u2013787 (2019)doi:10.1007/978-3-319-70766-2 31 URL https://doi.org/10.1007/978-3-319-70766-2_31.\n7 Eubank, S., et al. \u201cModelling disease outbreaks in realistic urban social networks.\u201d Nature 429.6988 180\u2013184 (2004).\n8 Struchkov, I., Lukashin, A., Kuznetsov, B., Mikhalev, I., Mandrusova, Z. \u201cAgent-Based Modeling of Blockchain Decentralized Financial Protocols.\u201d In 2021 29th Conference of Open Innovations Association (FRUCT) 337\u2013343 (2021) doi:10.23919/FRUCT52173.2021.9435601 iSSN: 2305-7254.\n9 Cocco, L., Tonelli, R., Marchesi, M. \u201cAn Agent Based Model to Analyze the Bitcoin Mining Activity and a Comparison with the Gold Mining Industry.\u201d Future Internet 11.1 8 (2019) doi:10.3390/fi11010008 number: 1 Publisher: Multidisciplinary Digital Publishing Institute URL https://www.mdpi.com/1999-5903/11/1/ 8.\n10 Hu\u0308lsemann, P., Tumasjan, A. \u201cWalk this Way! Incentive Structures of Different Token Designs for Blockchain-Based Applications.\u201d ICIS 2019 Proceedings URL https://aisel.aisnet.org/icis2019/ blockchain_fintech/blockchain_fintech/7.\n11 Fernandez, J. D., Barbereau, T., Papageorgiou, O. \u201cAgent-based Model of Initial Token Allocations: Evaluating Wealth Concentration in Fair Launches.\u201d (2022) 2208.10271.\n12 Benedetti, H., Abarzu\u0301a, L., Caceres Fuentes, C. \u201cUtility Tokens.\u201d (2021) doi:10.2139/ssrn.4088568 URL https://papers.ssrn.com/abstract=4088568.\n13 Akcin, O., Streit, R. P., Oommen, B., Vishwanath, S., Chinchali, S. https://eprint.iacr.org/2022/ 1492 \u201cA Control Theoretic Approach to Infrastructure-Centric Blockchain Tokenomics.\u201d (2022) Cryptology ePrint Archive, Paper 2022/1492 URL https://eprint.iacr.org/2022/1492.\n13 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX\n14 Zhang, Z., Zargham, M., Preciado, V. M. \u201cOn modeling blockchain-enabled economic networks as stochastic dynamical systems.\u201d Applied Network Science 5.1 1\u201324 (2020). 15 Benet, J., Greco, N. \u201cFilecoin: A decentralized storage network.\u201d Protoc. Labs 1\u201336.\n16 Haleem, A., Allen, A., Thompson, A., Nijdam, M., Garg, R. \u201cA decentralized wireless network.\u201d Helium Netw 3\u20137.\n17 Buterin, V., et al. \u201cA next-generation smart contract and decentralized application platform.\u201d white paper 3.37 2\u20131 (2014). 18 Labs, P. apr 28, 2023 \u201cFilecoin Spec.\u201d (2018) URL https://spec.filecoin.io.\n19 Nakamoto, S. \u201cBitcoin: A peer-to-peer electronic cash system.\u201d Decentralized business review 21260.\n20 Neal, R. M., et al. \u201cMCMC using Hamiltonian dynamics.\u201d Handbook of markov chain monte carlo 2.11 2 (2011).\n21 Hoffman, M. D., Gelman, A., et al. \u201cThe No-U-Turn sampler: adaptively setting path lengths in Hamiltonian Monte Carlo.\u201d J. Mach. Learn. Res. 15.1 1593\u20131623 (2014). 22 Labs, S. apr 28, 2023 \u201cSpacescope.\u201d (2018) URL https://spacescope.io.\n23 Accessed: 2022-06-09 \u201cIntroducing the Filecoin Virtual Machine.\u201d https://filecoin.io/blog/posts/ introducing-the-filecoin-virtual-machine/.\n24 Giles, M. B. \u201cMultilevel monte carlo methods.\u201d Acta numerica 24 259\u2013328 (2015). 25 Madrigal-Cianci, J. P., Kristensen, J. \u201cTime-efficient Decentralized Exchange of Everlasting Options with Exotic Payoff Functions.\u201d In 2022 IEEE International Conference on Blockchain (Blockchain) 427\u2013434 (2022) doi:10.1109/Blockchain55522.2022.00066.\n26 Madrigal-Cianci, J. P., Nobile, F., Tempone, R. \u201cAnalysis of a class of multilevel Markov chain Monte Carlo algorithms based on independent Metropolis\u2013Hastings.\u201d SIAM/ASA Journal on Uncertainty Quantification 11.1 91\u2013138 (2023).\n27 Qian, E., Peherstorfer, B., O\u2019Malley, D., Vesselinov, V. V., Willcox, K. \u201cMultifidelity Monte Carlo estimation of variance and sensitivity indices.\u201d SIAM/ASA Journal on Uncertainty Quantification 6.2 683\u2013706 (2018).\n14 ISSN 2379-5980 (online) DOI 10.5195/LEDGER.20XX.XXX"
        }
    ],
    "title": "An Agent-Based Model Framework for Utility-Based Cryptoeconomies",
    "year": 2023
}