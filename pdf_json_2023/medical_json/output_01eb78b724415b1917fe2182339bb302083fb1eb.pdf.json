{
    "abstractText": "COVID-19 is an infectious disease that causes acute respiratory distress syndrome due to the SARS-CoV-2 virus. Rapid and accurate screening and early diagnosis of patients play an essential role in controlling outbreaks and reducing the spread of this disease. This disease can be diagnosed by manually reading CXR images, but it is time-consuming and prone to errors. For this reason, this research proposes an automatic medical image segmentation system using a combination of U-Net architecture with Batch Normalization to obtain more accurate and fast results. The method used in this study consists of pre-processing using the CLAHE method and morphology opening, CXR image segmentation using a combination of U-Net-4 Convolution Block architecture with Batch Normalization, then evaluated using performance measures such as accuracy, sensitivity, specificity, F1-score, and IoU. The results showed that the U-Net architecture modified with Batch Normalization had successfully segmented CXR images, as seen from all performance measurement values above 94%.",
    "authors": [
        {
            "affiliations": [],
            "name": "Rudiansyah Rudiansyah"
        },
        {
            "affiliations": [],
            "name": "Lucky Indra Kesuma"
        },
        {
            "affiliations": [],
            "name": "M Ikhsan Anggara"
        },
        {
            "affiliations": [],
            "name": "Indra Kesuma"
        }
    ],
    "id": "SP:b39ecf9945e1d9805495ce9cc6d580afb2d93bdc",
    "references": [
        {
            "authors": [
                "P. Gibson",
                "L. Qin",
                "S. Puah"
            ],
            "title": "COVID-19 ARDS: Clinical Features and Differences to \u2018Usual\u2019 Ore-COVID ARDS",
            "venue": "Med J Aust, vol. 213, pp. 54\u201356, 2020.",
            "year": 2020
        },
        {
            "authors": [
                "Y.G. Kim"
            ],
            "title": "Deep Learning-Based Four-Region Lung Segmentation in Chest Radiography for COVID-19 Diagnosis",
            "venue": "Diagnostics, vol. 12, no. 101, pp. 1\u201311, 2022, doi: 10.3390/diagnostics12010101.",
            "year": 2022
        },
        {
            "authors": [
                "L.A. Callender",
                "M. Curran",
                "S.M. Bates",
                "M. Mairesse",
                "J. Weigandt",
                "C.J. Betts"
            ],
            "title": "The Impact of Pre-existing Comorbidities and Therapeutic Interventions on COVID-19",
            "venue": "Front. Immunol., vol. 11, p. 1991, 2020, doi: 10.3389/fimmu.2020.01991.",
            "year": 1991
        },
        {
            "authors": [
                "D. \u0160tifani\u0107"
            ],
            "title": "Semantic segmentation of chest X-ray images based on the severity of COVID-19 infected patients",
            "venue": "EAI Endorsed Trans. Bioeng. Bioinforma., vol. 1, no. 3, p. 170287, 2021, doi: 10.4108/eai.7-7-2021.170287.",
            "year": 2021
        },
        {
            "authors": [
                "J. An",
                "Q. Cai",
                "Z. Qu",
                "Z. Gao"
            ],
            "title": "COVID-19 Screening in Chest X-Ray Images Using Lung Region Priors",
            "venue": "IEEE J. Biomed. Heal. Informatics, vol. 25, no. 11, pp. 4119\u20134127, 2021, doi: 10.1109/JBHI.2021.3104629.",
            "year": 2021
        },
        {
            "authors": [
                "O. Ronneberger",
                "P. Fischer",
                "T. Brox"
            ],
            "title": "U-Net: convolutional networks for biomedical image segmentation",
            "venue": "Springer Int. Publ., 2015, doi: 10.1007/978- 3-319-24574-4.",
            "year": 2015
        },
        {
            "authors": [
                "A. Abedalla",
                "M. Abdullah",
                "M. Al-Ayyoub",
                "E. Benkhelifa"
            ],
            "title": "Chest X-ray pneumothorax segmentation using U-Net with EfficientNet and ResNet architectures",
            "venue": "PeerJ Comput. Sci., vol. 7, pp. 1\u201336, 2021, doi: 10.7717/peerjcs.607.",
            "year": 2021
        },
        {
            "authors": [
                "S. Gite",
                "A. Mishra",
                "K. Kotecha"
            ],
            "title": "Enhanced Lung Image Segmentation using Deep Learning",
            "venue": "Neural Comput. Appl., vol. 8, 2022, doi: 10.1007/s00521-021-06719-8.",
            "year": 2022
        },
        {
            "authors": [
                "S.-H. Wang"
            ],
            "title": "Multiple Sclerosis Identification by 14-Layer Rudiansyah, Lucky Indra Kesuma, M Ikhsan Anggara Implementation of Image Quality Improvement Methods and Lung Segmentation on Chest X-Ray Images Using U-Net Architectural Modifications 78 ISSN: 2252-4274 (Print) ISSN: 2252-5459 (Online) Convolutional Neural Network With Batch Normalization, Dropout, and Stochastic Pooling",
            "venue": "Front. Neurosci., vol. 12, 2018, doi: 10.3389/fnins.2018.00818.",
            "year": 2018
        },
        {
            "authors": [
                "X.Y. Zhou",
                "G.Z. Yang"
            ],
            "title": "Normalization in Training U-Net for 2-D Biomedical Semantic Segmentation",
            "venue": "IEEE Robot. Autom. Lett., vol. 4, no. 2, pp. 1792\u20131799, 2019, doi: 10.1109/LRA.2019.2896518.",
            "year": 2019
        },
        {
            "authors": [
                "S. Loffe",
                "C. Szegedy"
            ],
            "title": "Batch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shift",
            "venue": "Proceedings of the 32nd International Conference on Machine Learning, 2015, vol. 37, pp. 448\u2013456, doi: 10.1080/17512786.2015.1058180.",
            "year": 2015
        },
        {
            "authors": [
                "S. Ioffe",
                "C. Szegedy"
            ],
            "title": "Batch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shift",
            "venue": "Proceedings of the 32 nd International Conference on Machine Learning, 2015, vol. 37.",
            "year": 2015
        },
        {
            "authors": [
                "S. Candemir"
            ],
            "title": "Lung Segmentation in Chest Radiographs using Anatomical Atlases with Nonrigid Registration",
            "venue": "IEEE Trans. Med. Imaging, vol. 33, no. 2, pp. 577\u2013590, 2014, doi: 10.1109/TMI.2013.2290491.",
            "year": 2014
        },
        {
            "authors": [
                "J.C. Souza",
                "J.O. Bandeira Diniz",
                "J.L. Ferreira",
                "G.L. Fran\u00e7a da Silva",
                "A. Corr\u00eaa Silva",
                "A.C. de Paiva"
            ],
            "title": "An Automatic Method for Lung Segmentation and Reconstruction in Chest X-Ray Using Deep Neural Networks",
            "venue": "Comput. Methods Programs Biomed., vol. 177, pp. 285\u2013296, 2019, doi: 10.1016/j.cmpb.2019.06.005.",
            "year": 2019
        },
        {
            "authors": [
                "H.T. Huynh",
                "V.N.N. Anh"
            ],
            "title": "A Deep Learning Method for Lung Segmentation on Large Size Chest X-Ray image",
            "venue": "RIVF 2019 - Proceedings: 2019 IEEE-RIVF International Conference on Computing and Communication Technologies, 2019, pp. 1\u20135, doi: 10.1109/RIVF.2019.8713648.",
            "year": 2019
        },
        {
            "authors": [
                "D. \u0160tifani\u0107"
            ],
            "title": "Semantic Segmentation of Chest X-Ray Images based on The Severity of COVID-19 Infected Patients",
            "venue": "EAI Endorsed Trans. Bioeng. Bioinforma., vol. 1, no. 3, p. 170287, 2021, doi: 10.4108/eai.7-7-2021.170287.",
            "year": 2021
        },
        {
            "authors": [
                "H. Munusamy",
                "J.M. Karthikeyan",
                "G. Shriram",
                "S. Thanga Revathi",
                "S. Aravindkumar"
            ],
            "title": "FractalCovNet architecture for COVID-19 Chest X-ray image Classification and CT-scan image Segmentation",
            "venue": "Biocybern. Biomed. Eng., vol. 41, no. 3, pp. 1025\u20131038, 2021, doi: 10.1016/j.bbe.2021.06.011.",
            "year": 2021
        },
        {
            "authors": [
                "K.A.S.H. Kumarasinghe",
                "S.L. Kolonne",
                "K.C.M. Fernando",
                "D. Meedeniya"
            ],
            "title": "U-Net Based Chest X-ray Segmentation with Ensemble Classification for Covid-19 and Pneumonia",
            "venue": "Int. J. online Biomed. Eng., vol. 18, no. 7, pp. 161\u2013175, 2022, doi: 10.3991/ijoe.v18i07.30807.",
            "year": 2022
        }
    ],
    "sections": [
        {
            "text": "ISSN: 2252-4274 (Print) 71 ISSN: 2252-5459 (Online)\ndue to the SARS-CoV-2 virus. Rapid and accurate screening and early diagnosis of patients play an essential role in controlling outbreaks and reducing the spread of this disease. This disease can be diagnosed by manually reading CXR images, but it is time-consuming and prone to errors. For this reason, this research proposes an automatic medical image segmentation system using a combination of U-Net architecture with Batch Normalization to obtain more accurate and fast results. The method used in this study consists of pre-processing using the CLAHE method and morphology opening, CXR image segmentation using a combination of U-Net-4 Convolution Block architecture with Batch Normalization, then evaluated using performance measures such as accuracy, sensitivity, specificity, F1-score, and IoU. The results showed that the U-Net architecture modified with Batch Normalization had successfully segmented CXR images, as seen from all performance measurement values above 94%.\nKeywords: Covid-19, CXR Image, Segmentation, U-Net, Batch Normalization"
        },
        {
            "heading": "1. INTRODUCTION",
            "text": "COVID-19 is an infectious disease caused by SARS-CoV-2, which can cause acute respiratory distress syndrome[1], [2]. People with congenital diseases, especially lung disease, are at high risk of experiencing COVID-19, because it can reduce lung capacity and decrease saturation.[3], [4]. Rapid and accurate screening and early diagnosis of patients play an important role in controlling outbreaks and reducing the spread of this disease[5].\nMost international and national organizations recommend the RT-PCR test to confirm COVID-19 infection[2]. However, for screening COVID-19 patients with acute respiratory distress syndrome, Computed Tomography (CT) Scan and Chest XRay (CXR) are usually used.[2], [5]. Compared to CT Scan, CXR can be cheaper and faster to obtain[5][2]. Manual reading of CXR images is highly skilled, timeconsuming and error-prone[5]. Therefore we need a medical image segmentation system that can read and understand CXR quickly and precisely.\nIn recent years, the use of the Convolutional Neural Network (CNN) method for image segmentation has grown rapidly[6], [7]. The CNN architecture designed for biomedical image segmentation is U-Net[6]. U-Net is very effectively used for pixelbased image segmentation using limited data[6]\u2013[8]. The weakness of this architecture during the training process is that input changes for each layer often\nRudiansyah, Lucky Indra Kesuma, M Ikhsan Anggara Implementation of Image Quality Improvement Methods and Lung Segmentation on\nChest X-Ray Images Using U-Net Architectural Modifications\n72 ISSN: 2252-4274 (Print)\nISSN: 2252-5459 (Online)\noccur[9]. The inputs of each layer depend on the number of parameters in the previous layer, thus changing the distribution of the input features[10]. This causes a decrease in training speed and performance[9], [10]. To overcome the problem of changing the distribution of the input feature, the Batch Normalization (BN) method can be used.[9]\u2013[11]. BN is a normalization method that is widely used for biomedical segmentation[10]. BN will normalize the feature map across all architectural layers by re-scaling and retranslating the normalized feature map[12]. Combining U-Net and BN architectures in the CXR image segmentation process can be an alternative to detect COVID-19 with acute respiratory distress syndrome."
        },
        {
            "heading": "2. MATERIAL AND METHODS",
            "text": "The data used in this study is the Chest X-Ray (CXR) dataset which was obtained free of charge through the website https://www.kaggle.com/nikhilpandey360/chestxray-masks-and-labels. This dataset is a collection of three datasets, namely the Japanese Society of Radiological Technology (JSRT), Montgomery, and India. The JSRT dataset consists of 247 CXR images, the Montgomery dataset consists of 138 CXR images obtained from the Tuberculosis Control program in Montgomery County, while the Indian dataset consists of 397 CXR images.[13]. This dataset is also equipped with ground truth for comparison with the segmentation results. The stages for system design in this study can be seen in Figure 1.\nThe preprocessing stage is the initial stage that aims to improve image quality by increasing the contrast of dark images or eliminating noise so as to facilitate the segmentation process. First of all, input images from the CXR dataset are then applied to the CLAHE method to increase the contrast of dark images. After the contrast in the CXR image is increased, the next step is to apply the Opening Morphology method to remove noise in the image.\nComputer Engineering and Applications Vol. 12, No. 2, June 2023\nISSN: 2252-4274 (Print) 73 ISSN: 2252-5459 (Online)\nThe next stage is to form a new architecture using the basic U-Net architecture. Each convolution layer followed by the ReLU activation function in the encode and decode paths of the U-Net architecture will be added with a Batch Normalization layer. The preprocessed image will be segmented into two parts, namely the lungs (foreground) as white pixels and the non-lungs (background) as black pixels. This stage consists of two processes, namely training and testing. Before the two processes are carried out, the preprocessed image is divided into two parts, namely 70% training data and 30% test data."
        },
        {
            "heading": "3. RESULT AND DISCUSSION",
            "text": "The initial stages carried out in this study were CT-scan images of the lungs measuring 150 \u00d7 150 pixels. Image quality improvement was performed using CLAHE and opening morphology to facilitate the lung segmentation process. Some examples of the results of the pre-processing stages carried out in this study can be seen in Figure 2.\n(a) Original image (b) CLAHE (c) Morphology opening\nIn Figure 2 it can be seen that there are 3 examples of image input, image quality improvements were made using CLAHE so that the shape of the lungs is seen more clearly. The CLAHE results in Figure 1.c show that there is still noise, so an opening morphology is performed by eliminating these small objects. Next, a lung segmentation model was formed on the CXR image by modifying the basic U-Net architecture. The architecture will be added with a batch normalization layer at each\nRudiansyah, Lucky Indra Kesuma, M Ikhsan Anggara Implementation of Image Quality Improvement Methods and Lung Segmentation on\nChest X-Ray Images Using U-Net Architectural Modifications\n74 ISSN: 2252-4274 (Print)\nISSN: 2252-5459 (Online)\nlast convolution layer in the U-Net convolution block. The results of the modification of the U-Net architecture can be seen in Figure 3.\nIn Figure 3, it can be seen that the architecture consists of three parts, namely the encode line (left part), the bridge line (connector), and the decode line (right part). The encode and decode paths use four convolution blocks, while the bridge path consists of one convolution block. The pre-processed image is used as an input image with a size of 256 \u00d7 256 pixels. In the first block, the convolutional layer is processed twice using a 3 \u00d7 3 stride 1 kernel and a total of 16 filters, then each is followed by the ReLU activation function. The process results are normalized using batch normalization. Next, the process of reducing the size of feature maps is carried out using maxpooling 2 \u00d7 2. In the second, third, and fourth convolution blocks, the same process is carried out as in the first convolution block with a total of 32, 64, and 128 kernels. The birdge path is built from one convolution block. The results of the encode path are carried out by a convolution process followed by the ReLU activation function twice using a 3 \u00d7 3 kernel, padding same, stride 1, and a total of 256 filters. After that the convolution feature maps are normalized using batch normalization.\nThe decode path consists of 4 upsampling blocks. The results of the bridge path enter the 2 \u00d7 2 upsampling process to increase the size of the feature maps. These results are concatenate with the feature maps resulting from the fourth block on the encode path. The concatenate results were carried out with a convolution operation twice using a 3 \u00d7 3 stride 1 kernel and a total of 128 filters, then each followed by the ReLU activation function. Finally, it is normalized using batch normalization. For the second, third, and fourth upsampling blocks, the same process is carried out as for the first upsampling block with a total of 64, 32, and 16 kernels respectively. The last step, the results of the fourth upsampling block are carried out by convolution using 1 \u00d7 1 kernels, padding same, and strides. Then, it is substituted into the sigmoid activation function to get the final feature maps output. After establishing the U-Net Batch Normalization model, it is continued with training and testing using the architecture.\nThe training process used as many as 566 CXR images. The data is further divided into 2, namely 453 images as training data and 113 images as validation data. The graph of accuracy and loss (error) of the results of the training stages with a total of 50 epochs and a batch size of 16 can be seen in Figure 4 as follows:\nBased on Figure 4.a, it can be seen that the accuracy graph generated during the training process on the training data indicated by the red line (accuracy) and for the validation data indicated by the blue line (val_acc) is increasing until the 50th epoch. In the first epoch the accuracy of the training data was obtained at 0.739 and the validation accuracy was 0.711, then in the next epoch the accuracy value increased continuously to 0.994 while in the validation data it was 0.975.\nIn Figure 4.b it can be seen that the loss graph generated during the training process on the training data indicated by the red line (loss) and for the validation data indicated by the blue line (val_loss) is getting closer to 0 for up to the 50th epoch. In the first epoch the accuracy of the training data was obtained at 0.532 and the validation accuracy was 0.676, then in the next epoch the loss value decreased continuously to 0.038 while in the validation data it was 0.109.\nAt this stage, the results of the testing process are obtained in the form of segmentation results using the U-Net Batch Normalization architectural model, which are tested on new data or test data as many as 162 CXR images. The data has been pre-processed first. The results of the lung segmentation on the test data and ground truth from the testing process can be seen in Table 1.\nRudiansyah, Lucky Indra Kesuma, M Ikhsan Anggara Implementation of Image Quality Improvement Methods and Lung Segmentation on\nChest X-Ray Images Using U-Net Architectural Modifications\n76 ISSN: 2252-4274 (Print)\nISSN: 2252-5459 (Online)\nIn Table 1 it can be seen that there are three examples of segmented images obtained from the testing phase of lung segmentation using the proposed architecture. The architectural model made is quite good because the segmentation results already resemble the image from the data source. The results obtained next are the comparison of the performance evaluation of the proposed method with the previous research which is shown in Table 2 below.\nBased on Table 2, it can be seen that the proposed method achieves the highest values of accuracy, sensitivity, and IoU. For the highest accuracy and specificity achieved by research [14]. Based on Table 2, it can be concluded that the accuracy of the proposed architectural model in segmenting the lungs on CXR images, predicting the backgorund is very good, and the harmonization between sensitivity and specificity values is very good as indicated by the accuracy, specificity, and F1-score values above 97. %. In addition, it is very good at predicting the lungs on CXR images as indicated by a sensitivity value above 96%, and the similarity between the predicted segmentation image and ground truth is also very good, as indicated by an IoU value above 94%.\nComputer Engineering and Applications Vol. 12, No. 2, June 2023\nISSN: 2252-4274 (Print) 77 ISSN: 2252-5459 (Online)"
        },
        {
            "heading": "4. CONCLUSION",
            "text": "Based on the results and discussion, lung segmentation on CXR images using a modified U-Net Batch Normalization architecture has obtained excellent results based on the performance of accuracy, sensitivity, specificity, F1-score and IoU. This shows that the accuracy of the proposed architectural model in segmenting the lungs on CXR images, predicting the backgorund is very good, and the harmonization between sensitivity and specificity values is very good as indicated by the accuracy, specificity, and F1-score values above 97%. In addition, it is very good at predicting the lungs on CXR images as indicated by a sensitivity value above 96%, and the similarity between the predicted segmentation image and ground truth is also very good, as indicated by an IoU value above 94%."
        },
        {
            "heading": "ACKNOWLEDGEMENTS",
            "text": "Thank you for Kemdikbudristek research grants and Universitas Sjakhyakirti Palembang that has been assisted this research publication"
        }
    ],
    "title": "Implementation of Image Quality Improvement Methods and Lung Segmentation on Chest X-Ray Images Using U-Net Architectural Modifications",
    "year": 2023
}