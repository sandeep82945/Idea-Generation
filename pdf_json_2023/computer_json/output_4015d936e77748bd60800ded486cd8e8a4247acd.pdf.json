{
    "abstractText": "To realize permanent magnet synchronous motor (PMSM) in the full speed domain without speed sensor operation, a hybrid control method combining I/F startup and extended Kalman filter (EKF) is proposed in this paper. This method employs I/F startup to transition at low speed, effectively resolving the issue that the position estimation method based on the back electromotive force (EMF) model fails at zero speed and low speed, and converts to EKF for speed closed-loop vector control at medium and high speed. Moreover, a new feedback regulation mechanism as a solution to the problem of smooth switching between the two methods is proposed. First, the power angle is determined based on the relationship between the given I/F frequency and the estimated EKF position angle. Using the information of power angle, the damping torque of the system is increased to reduce velocity fluctuations during I/F startup. In addition, the balance point of current and position error angle is adjusted using the closed-loop information of position error angle to reduce the torque abrupt change before and after switching, thereby making the motor switching process to EKF speed closed-loop control more stable. Finally, simulation results are used to verify the effectiveness of the proposed scheme.",
    "authors": [
        {
            "affiliations": [],
            "name": "Songling Huang"
        },
        {
            "affiliations": [],
            "name": "Bowen Ning"
        },
        {
            "affiliations": [],
            "name": "Yiheng Zhao"
        }
    ],
    "id": "SP:d49874410bd248ac7ab6a5e3ceee29dbf46864ca",
    "references": [
        {
            "authors": [
                "S. Iqbal",
                "S. Habib",
                "M. Ali",
                "A. Shafiq",
                "A.U. Rehman",
                "E.M. Ahmed",
                "T. Khurshaid",
                "S. Kamel"
            ],
            "title": "The Impact of V2G Charging/Discharging Strategy on the Microgrid Environment Considering Stochastic Methods",
            "venue": "Sustainability",
            "year": 2022
        },
        {
            "authors": [
                "S. Iqbal",
                "A. Xin",
                "M.U. Jan",
                "M.A. Abdelbaky",
                "H.U. Rehman",
                "S. Salman",
                "M. Aurangzeb",
                "S.A.A. Rizvi",
                "N.A. Shah"
            ],
            "title": "Improvement of Power Converters Performance by an Efficient Use of Dead Time Compensation Technique",
            "venue": "Appl. Sci",
            "year": 2020
        },
        {
            "authors": [
                "K. Urbanski",
                "D. Janiszewski"
            ],
            "title": "Sensorless Control of the Permanent Magnet Synchronous Motor",
            "venue": "Sensors 2019,",
            "year": 2019
        },
        {
            "authors": [
                "Y. Wang",
                "Y. Xu",
                "J. Zou"
            ],
            "title": "Sliding-Mode Sensorless Control of PMSM With Inverter Nonlinearity Compensation",
            "venue": "IEEE Trans. Power Electron",
            "year": 2019
        },
        {
            "authors": [
                "S. Wang",
                "K. Yang",
                "K. Chen"
            ],
            "title": "An Improved Position-Sensorless Control Method at Low Speed for PMSM Based on High-Frequency Signal Injection into a Rotating Reference Frame",
            "venue": "IEEE Access 2019,",
            "year": 2019
        },
        {
            "authors": [
                "W. Cui",
                "F.-X. Zhang"
            ],
            "title": "A Novel Sensorless Rotor Position Estimation Method for PMSM Based on High-Frequency Square-Wave Voltage Injection with Less Iron Loss",
            "venue": "Electr. Power Compon. Syst",
            "year": 2018
        },
        {
            "authors": [
                "X. Sun",
                "F. Cai",
                "Z. Yang",
                "X. Tian"
            ],
            "title": "Finite Position Control of Interior Permanent Magnet Synchronous Motors at Low Speed",
            "venue": "IEEE Trans. Power Electron",
            "year": 2022
        },
        {
            "authors": [
                "L. Tian",
                "Z. Li",
                "Z. Wang",
                "X. Sun",
                "T. Guo",
                "H. Zhang"
            ],
            "title": "Speed-sensorless control of induction motors based on adaptive EKF",
            "venue": "J. Power Electron",
            "year": 2021
        },
        {
            "authors": [
                "J. Shen",
                "Z. Zhu",
                "D. Howe"
            ],
            "title": "Improved speed estimation in sensorless PM brushless AC drives",
            "venue": "IEEE Trans. Ind. Appl",
            "year": 2002
        },
        {
            "authors": [
                "P.C. Perera",
                "F. Blaabjerg",
                "J.K. Pedersen",
                "P. Thogersen"
            ],
            "title": "A sensorless, stable V/f control method for permanent-magnet synchronous motor drives",
            "venue": "IEEE Trans. Ind. Appl",
            "year": 2003
        },
        {
            "authors": [
                "S.-M. Sue",
                "T.-W. Hung",
                "J.-H. Liaw",
                "Y.-F. Li",
                "C.-Y. Sun"
            ],
            "title": "A new MTPA control strategy for sensorless V/f controlled PMSM drives",
            "venue": "In Proceedings of the 6th IEEE Conference on Industrial Electronics and Applications, Beijing, China,",
            "year": 2011
        },
        {
            "authors": [
                "R. Ancuti",
                "I. Boldea",
                "G.-D. Andreescu"
            ],
            "title": "Sensorless V/f control of high-speed surface permanent magnet synchronous motor drives with two novel stabilising loops for fast dynamics and robustness",
            "venue": "IET Electr. Power Appl. 2010,",
            "year": 2023
        },
        {
            "authors": [
                "S.-C. Agarlita",
                "C.-E. Coman",
                "G.-D. Andreescu",
                "I. Boldea"
            ],
            "title": "Stable V/f control system with controlled power factor angle for permanent magnet synchronous motor drives",
            "venue": "IET Electr. Power Appl",
            "year": 2013
        },
        {
            "authors": [
                "J. Xing",
                "Z. Qin",
                "C. Lin",
                "X. Jiang"
            ],
            "title": "Research on Startup Process for Sensorless Control of PMSMs Based on I-F Method Combined With an Adaptive Compensator",
            "venue": "IEEE Access 2020,",
            "year": 2020
        },
        {
            "authors": [
                "C.L. Baratieri",
                "H. Pinheiro"
            ],
            "title": "An I/F starting method for smooth and fast transition to sensorless control of BLDC motors",
            "venue": "In Proceedings of the Brazilian Power Electronics Conference,",
            "year": 2013
        },
        {
            "authors": [
                "H.-J. Shi",
                "X.-C. Nie"
            ],
            "title": "Composite control for disturbed direct-driven surface-mounted permanent magnet synchronous generator with model prediction strategy",
            "venue": "Meas. Control",
            "year": 2021
        },
        {
            "authors": [
                "A. Consoli",
                "G. Scarcella",
                "A. Testa"
            ],
            "title": "Industry application of zero-speed sensorless control techniques for PM synchronous motors",
            "venue": "IEEE Trans. Ind. Appl",
            "year": 2001
        },
        {
            "authors": [
                "Z. Chen",
                "M. Tomita",
                "S. Doki",
                "S. Okuma"
            ],
            "title": "An extended electromotive force model for sensorless control of interior permanentmagnet synchronous motors",
            "venue": "IEEE Trans. Ind. Electron",
            "year": 2003
        },
        {
            "authors": [
                "V. Smidl",
                "Z. Peroutka"
            ],
            "title": "Advantages of Square-Root Extended Kalman Filter for Sensorless Control of AC Drives",
            "venue": "IEEE Trans. Ind. Electron",
            "year": 2011
        }
    ],
    "sections": [
        {
            "text": "Citation: Ning, B.; Zhao, Y.; Cheng, S.\nAn Improved Sensorless Hybrid\nControl Method of Permanent\nMagnet Synchronous Motor Based on\nI/F Startup. Sensors 2023, 23, 635.\nhttps://doi.org/10.3390/s23020635\nAcademic Editor: Songling Huang\nReceived: 22 November 2022\nRevised: 18 December 2022\nAccepted: 26 December 2022\nPublished: 5 January 2023\nCopyright: \u00a9 2023 by the authors.\nLicensee MDPI, Basel, Switzerland.\nThis article is an open access article\ndistributed under the terms and\nconditions of the Creative Commons\nAttribution (CC BY) license (https://\ncreativecommons.org/licenses/by/\n4.0/).\nKeywords: permanent magnet synchronous motor (PMSM); speed-sensorless control system; I/F startup; extended Kalman filter (EKF); hybrid control; power angle estimation"
        },
        {
            "heading": "1. Introduction",
            "text": "Permanent magnet synchronous motors (PMSM) have been widely used in industrial applications and electric vehicles due to their high power density, small size, and low weight [1,2]. In certain application fields, such as fans, pumps, compressors, and home appliances, the dynamic performance requirements of motors are not as stringent as in the automotive and robotics industries. However, industrial costs and production environment usually limit the use of position sensors in these applications. Therefore, it is necessary to study a reliable and stable position sensorless PMSM control system [3]. Current sensorless position control methods are primarily divided into two categories based on the injection of high-frequency signals and the estimation of back electromotive force (EMF) [4]. Methods for injecting high-frequency signals include the rotating highfrequency signal injection method [5], the pulse vibration high-frequency signal injection method [6], high-frequency square wave signal injection method [7], etc. By injecting a specific high-frequency voltage into the stator windings, these techniques, which typically exploit the salient pole characteristic of the motor, could extract the signal carrying position information from the current. The signal injection method with a high frequency yields superior performance characteristics at zero and low speeds [8]. However, due to its reliance on the salient polarity of the motor, this method often fails for surface permanent magnet synchronous motors (SPMSM) with weak salient polarity. The estimation methods based on back EMF primarily consist of a model reference adaptive system [9], sliding mode observer [10], extended Kalman filter observer [11], etc. These methods obtain rotor\nSensors 2023, 23, 635. https://doi.org/10.3390/s23020635 https://www.mdpi.com/journal/sensors\nSensors 2023, 23, 635 2 of 15\nposition data using the back-EMF mathematical model of the motor, which is better suited for providing precise estimates at medium and high speeds [12]. However, due to the smaller back EMF at low speeds, such methods usually fail at zero and low speeds. To realize the starting process of a motor at zero speed and low speed, it is therefore possible to choose an open-loop startup strategy regardless of rotor position. V/F (constant voltage\u2013frequency ratio) control is a common open-loop startup strategy for induction motor control [13]. Although the V/F control method has a simple structure, it is unstable and inefficient [14]. To address these issues, a torque compensation method based on instantaneous power measurement is proposed to enhance the control performance of the V/F method [15,16]. However, the actual control performance depends on the parameters chosen. The I/F control method is another open-loop startup method that is more suitable for sensorless PMSM vector control [17,18]. During the start-up phase of this method, a constant current vector and a ramped speed command are given, and the integrated value of the speed command is used as the rotor\u2019s reference position. I/F startup has the control characteristics of closed-loop current and open-loop speed. Moreover, it has a low reliance on motor parameters. Therefore, the control system\u2019s stability can be enhanced. However, since the given current is determined by the load, excessive current will result in poor I/F control efficiency. Meanwhile, it easily can become out-of-step if the given current is too small. Based on the aforementioned content and analysis, this paper proposes a hybrid control strategy, which utilizes the I/F startup method for low-speed transition, to address the deficiencies of the EMF model at zero and low speed, and the large speed fluctuations and low control efficiency of I/F startup [19]. When the speed reaches a predetermined threshold, it switches to medium-high sensorless vector control based on the position observer of the back electromotive force, which has a better effect and achieves sensorless control in the full-speed domain. Some position observers, such as the sliding mode observer, have better dynamic response due to their switching characteristics, but also bring certain chattering for observation angle. The chattering phenomenon will cause the observation angle to become unsmooth, thus increasing the instability of the whole observation system; therefore, it is necessary to design a filter to process the angle signal additionally. In contrast, the extended Kalman filter has a certain filtering effect on system noise, so its observation angle is smoother. Thus, it is applied to the medium-high speed stage after the I/F startup. The I/F startup procedure is analyzed in depth, and a damping technique compensation method is proposed to stabilize the I/F startup speed. In addition, a feedback regulator is designed to automatically adjust the position angle difference between the rotor reference position given by the I/F startup and the observation position information given by the position observer to improve the stability of the conversion process. The remainder of this paper is organized as follows. Section 2.1 describes the mathematical model of the PMSM based on the back EMF and develops the extended Kalman filter method. In Section 2.2, the I/F startup strategy is discussed, focusing on the characteristics of the acceleration and uniform speed stages. Section 2.3 presents an enhanced method for combining I/F startup with the extended Kalman filter. The angle information estimated by the Kalman filter is used to adjust the given I/F angle, and specific solutions to the problems of I/F speed fluctuation and low control efficiency are provided. Section 3 discusses the performance of the proposed startup strategy, and Section 4 concludes the research presented in this paper."
        },
        {
            "heading": "2. Materials and Methods",
            "text": ""
        },
        {
            "heading": "2.1. PMSM Mathematical Model and EKF",
            "text": "The principle of sensorless motor control varies for different motor models. In general, a mathematical model in a rotating coordinate system is used to obtain first the motor speed and then the motor\u2019s rotor position through integration [20]. The method proposed in this paper has strict requirements for the rotor position, so a mathematical model in a\nSensors 2023, 23, 635 3 of 15\nstatic coordinate system is used to obtain the rotor position. The motor speed is derived by differentiating the rotor position. For mathematical modeling of PMSM, the extended back electromotive force model proposed in the literature [21] is utilized, and its current formula in the static coordinate system is as follows:{ di\u03b1\ndt = 1\nLd\n[ \u2212Ri\u03b1 \u2212\u03c9e ( Ld \u2212 Lq ) i\u03b2 + EX sin \u03b8 + u\u03b1 ] di\u03b2 dt = 1 Ld [ \u2212Ri\u03b2 + \u03c9e ( Ld \u2212 Lq ) i\u03b1 \u2212 EX cos \u03b8 + u\u03b2\n] (1) where i\u03b1, i\u03b2, u\u03b1, and u\u03b2 are the stator current and stator voltage in the static coordinate system. R represents the stator phase resistance; Ld and Lq are the motor d-axis and q-axis inductances, respectively. \u03b8 represents the electrical angular position of the rotor, \u03c9e denotes the rotor electrical angular velocity, \u03c8 f represents the permanent magnet flux linkage, and EX represents the amplitude of the extended back EMF, which is expressed as follows:\nEX = ( Ld \u2212 Lq )(\n\u03c9eid \u2212 diq dt\n) + \u03c9e\u03c8 f (2)\nThe estimated rotor position is:\n\u03b8 = arctan ( \u2212EX sin \u03b8 EX cos \u03b8 ) . (3)\nLet EX sin \u03b8 be E\u03b1, EX cos \u03b8 be E\u03b2. Select state variable, input variable, and output variable as x = [ i\u03b1 i\u03b2 E\u03b1 E\u03b2 ]T , u = [u\u03b1 u\u03b2]T , and y = [i\u03b1 i\u03b2]T . Add system noise and measurement noise, and discretize them:{\nxk+1= f (xk, uk) + wk yk=Hdxk + vk , (4)\nwhere Hd is the output matrix and f represents the nonlinear function after discretization, which is expressed as:\nf =  i\u03b1,k + Ts[\u2212Ri\u03b1,k\u2212\u03c9e,k(Ld\u2212Lq)i\u03b2,k+u\u03b1,k\u2212E\u03b1,k] Ld i\u03b2,k + Ts[\u2212Ri\u03b2,k+\u03c9e,k(Ld\u2212Lq)i\u03b1,k+u\u03b2,k\u2212E\u03b2,k]\nLd E\u03b1,k \u2212 Ts\u03c9e,kE\u03b2,k + W1 E\u03b2,k \u2212 Ts\u03c9e,kE\u03b1,k + W2\n.\nThe research object of this paper is to design a control mode of surface permanent magnet synchronous motor (SPMSM). For SPMSM, Ld = Lq. W1 and W2 are transient high-frequency components, which can be ignored when calculating the extended back EMF. wk and vk represent the system noise and measurement noise, respectively. In practice, these two noises are random and independent of each other, and conform to a normal distribution with an expectation value of zero. Their covariance matrices Q and R are described as follows:\ncov(w) = E [ w,wT ] = Q\ncov(v) = E [ v,vT ] = R . (5)\nEKF, which is an extended application of the Kalman filter algorithm in a nonlinear system, is a type of optimal recursion method. It expands the current working point of the nonlinear function through Taylor series expansion and ignores the higher-order terms; then the system is approximated to a linear system after linearization. Aiming for minimum error covariance, EKF could obtain the optimal estimation result through prediction step and update step in a noisy system. The steps of EKF for the permanent magnet synchronous motor system are as follows [22]:\nSensors 2023, 23, 635 4 of 15\n(1) State prediction. Predict the next moment\u2019s state vector based on the current input and the previous state estimate.\nx\u0303k+1= f (x\u0303k,uk), (6)\nwhere Ts represents the sampling period, and x\u0302k and x\u0302k+1 represent the current state and the estimated value of the state at the next moment, respectively.\n(2) Calculate the output y\u0303k+1 at the next moment:\ny\u0303k+1=Hdx\u0303k+1. (7)\n(3) Calculate the error covariance matrix:\np\u0303k+1=p\u0302k + Ts ( Fkp\u0302k+p\u0302kF T k ) + Q, (8)\nwhere Fk represents the Jacobian matrix. (4) Calculate the gain matrix:\nKk+1=p\u0303k+1H T d ( Hdp\u0303k+1H T d + R )\u22121 . (9)\n(5) State estimation:\nx\u0302k+1=x\u0303k+1 + Kk+1(yk+1 \u2212 y\u0303k+1). (10)\n(6) Update the error covariance matrix:\np\u0302k+1=p\u0303k+1 \u2212Kk+1Hdp\u0303k+1, (11)\nwhere p\u0302k+1 represents the covariance matrix used in the next state estimation."
        },
        {
            "heading": "2.2. Current Closed-Loop Speed Open-Loop I/F Startup Analysis",
            "text": "This paper uses the I/F startup strategy to transition the motor from zero to mediumhigh speed. I/F startup requires a proper q-axis current amplitude and current rotation frequency. Typically, the precise value is determined offline based on the load, and the daxis current is set to zero. Figure 1 depicts the block diagram of the PMSM speed open-loop I/F startup system [17]. Sensors\u00a02023,\u00a022,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 5\u00a0 of\u00a0 16\u00a0 \u00a0\n\u00a0\nThe\u00a0mechanical\u00a0formula\u00a0of\u00a0SPMSM\u00a0can\u00a0be\u00a0expressed\u00a0as:\u00a0\n3 sin 2 r p f r L dJ n i B T dt       ,\u00a0 (12)\nwhere\u00a0 r \u00a0 denotes\u00a0 the\u00a0mechanical\u00a0 angular\u00a0 velocity\u00a0 of\u00a0 the\u00a0motor,\u00a0 pn \u00a0 represents\u00a0 the\u00a0 number\u00a0of\u00a0pole\u00a0pairs\u00a0of\u00a0the\u00a0motor,\u00a0and\u00a0i\u00a0is\u00a0the\u00a0magnitude\u00a0of\u00a0the\u00a0current\u00a0vector.\u00a0  \u00a0 repre\u2010 sents\u00a0the\u00a0angle\u00a0between\u00a0the\u00a0current\u00a0vector\u00a0and\u00a0the\u00a0permanent\u00a0magnet\u00a0excitation\u00a0flux\u00a0link\u2010 age,\u00a0which\u00a0is\u00a0called\u00a0the\u00a0power\u00a0angle\u00a0later.\u00a0 J \u00a0 represents\u00a0the\u00a0moment\u00a0of\u00a0inertia,\u00a0 B \u00a0 de\u2010 notes\u00a0the\u00a0damping\u00a0coefficient,\u00a0and\u00a0 LT \u00a0 is\u00a0the\u00a0load\u00a0torque.\u00a0For\u00a0a\u00a0clearer\u00a0representation\u00a0of\u00a0 the\u00a0relationship\u00a0between\u00a0a\u00a0given\u00a0current\u00a0vector\u00a0and\u00a0rotor\u00a0position,\u00a0 the\u00a0virtual\u00a0rotating\u00a0 coordinate\u00a0systems\u00a0d\u00a0*\u00a0and\u00a0q\u00a0*\u00a0are\u00a0used\u00a0to\u00a0represent\u00a0the\u00a0d\u00a0and\u00a0q\u00a0axes\u00a0of\u00a0the\u00a0given\u00a0current\u00a0 vector.\u00a0The\u00a0electric\u00a0angle\u00a0of\u00a0axis\u00a0d\u00a0in\u00a0the\u00a0virtual\u00a0coordinate\u00a0system\u00a0where\u00a0the\u00a0current\u00a0vec\u2010 tor\u00a0located\u00a0is\u00a0 ie ,\u00a0the\u00a0rotational\u00a0electric\u00a0angular\u00a0velocity\u00a0is\u00a0 ie ,\u00a0and\u00a0the\u00a0rotating\u00a0electric\u00a0 angular\u00a0velocity\u00a0of\u00a0the\u00a0coordinate\u00a0system\u00a0where\u00a0the\u00a0rotor\u00a0is\u00a0located\u00a0is\u00a0 ir ,\u00a0as\u00a0shown\u00a0in\u00a0 Figure\u00a02.\u00a0\nd\nq\nq*\nd*\nN\n\u00a0 Figure\u00a02.\u00a0The\u00a0rotating\u00a0d\u2010q\u00a0axis\u00a0and\u00a0the\u00a0virtual\u00a0d*\u2010q*\u00a0axis.\u00a0\nDenote\u00a0the\u00a0electrical\u00a0angle\u00a0velocity\u00a0of\u00a0the\u00a0given\u00a0current\u00a0vector\u00a0as\u00a0 ie \u00a0 and\u00a0the\u00a0given\u00a0\nmechanical\u00a0 angular\u00a0 velocity\u00a0 as\u00a0 iee pn\n  .\u00a0 Then,\u00a0 the\u00a0 difference\u00a0 between\u00a0 the\u00a0 given\u00a0\nThe mechanical formula of SPMSM can be expressed as:\nJ d\u03c9r dt = 3 2 np\u03c8 f i sin \u03b4\u2212 B\u03c9r \u2212 TL, (12)\nSensors 2023, 23, 635 5 of 15\nwhere \u03c9r denotes the mechanical angular velocity of the motor, np represents the number of pole pairs of the motor, and i is the magnitude of the current vector. \u03b4 represents the angle between the current vector and the permanent magnet excitation flux linkage, which is called the power angle later. J represents the moment of inertia, B denotes the damping coefficient, and TL is the load torque. For a clearer representation of the relationship between a given current vector and rotor position, the virtual rotating coordinate systems d* and q* are used to represent the d and q axes of the given current vector. The electric angle of axis d in the virtual coordinate system where the current vector located is \u03b8ie, the rotational electric angular velocity is \u03c9ie, and the rotating electric angular velocity of the coordinate system where the rotor is located is \u03c9ir, as shown in Figure 2.\nSensors\u00a02023,\u00a022,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 5\u00a0 of\u00a0 16\u00a0 \u00a0\n\u00a0\nInverterIPark SVPWM Park PI \u222b Clarke PI - - PMSM + + \u00a0 Figure\u00a01.\u00a0I/F\u00a0startup\u00a0system\u00a0block\u00a0diagram.\u00a0\nThe\u00a0mechanical\u00a0formula\u00a0of\u00a0SPMSM\u00a0can\u00a0be\u00a0expressed\u00a0as:\u00a0\n3 sin 2 r p f r L dJ n i B T dt       ,\u00a0 (12)\nwhere\u00a0 r \u00a0 denotes\u00a0 the\u00a0mechanical\u00a0 angular\u00a0 velocity\u00a0 of\u00a0 the\u00a0motor,\u00a0 pn \u00a0 represents\u00a0 the\u00a0 number\u00a0of\u00a0pole\u00a0pairs\u00a0of\u00a0the\u00a0motor,\u00a0and\u00a0i\u00a0is\u00a0the\u00a0magnitude\u00a0of\u00a0the\u00a0current\u00a0vector.\u00a0  \u00a0 repre\u2010 sents\u00a0the\u00a0angle\u00a0between\u00a0the\u00a0current\u00a0vector\u00a0and\u00a0the\u00a0permanent\u00a0magnet\u00a0excitation\u00a0flux\u00a0link\u2010 age,\u00a0which\u00a0is\u00a0called\u00a0the\u00a0power\u00a0angle\u00a0later.\u00a0 J \u00a0 represents\u00a0the\u00a0m ment\u00a0of\u00a0inertia,\u00a0 B \u00a0 de\u2010 notes\u00a0the\u00a0damping\u00a0coefficient,\u00a0and\u00a0 LT \u00a0 is\u00a0the\u00a0load\u00a0torque.\u00a0For\u00a0a\u00a0clearer\u00a0representation\u00a0of\u00a0 the\u00a0relationship\u00a0between\u00a0a\u00a0given\u00a0current\u00a0vector\u00a0and\u00a0rotor\u00a0position,\u00a0 the\u00a0virtual\u00a0rotating\u00a0 coordinate\u00a0systems\u00a0d\u00a0*\u00a0and\u00a0q\u00a0*\u00a0are\u00a0used\u00a0to\u00a0represent\u00a0the\u00a0d\u00a0and\u00a0q\u00a0axes\u00a0of\u00a0the\u00a0given\u00a0current\u00a0 vector.\u00a0The\u00a0electric\u00a0angle\u00a0of\u00a0axis\u00a0d\u00a0in\u00a0the\u00a0virtual\u00a0coordinate\u00a0system\u00a0where\u00a0the\u00a0current\u00a0vec\u2010 tor\u00a0located\u00a0is\u00a0 ie ,\u00a0the\u00a0rotational\u00a0electric\u00a0angular\u00a0velocity\u00a0is\u00a0 ie ,\u00a0and\u00a0the\u00a0rotating\u00a0electric\u00a0 angular\u00a0velocity\u00a0of\u00a0the\u00a0coo dinate\u00a0system\u00a0where\u00a0the\u00a0rotor\u00a0is\u00a0located\u00a0is\u00a0 ir ,\u00a0as\u00a0shown\u00a0in\u00a0 Figure\u00a02.\u00a0\nFigure\u00a02.\u00a0The\u00a0rotating\u00a0d\u2010q\u00a0axis\u00a0and\u00a0the\u00a0virtual\u00a0d*\u2010q*\u00a0axis.\u00a0\nDenote\u00a0the\u00a0electrical\u00a0angle\u00a0velocity\u00a0of\u00a0the\u00a0given\u00a0current\u00a0vector\u00a0as\u00a0 ie \u00a0 and\u00a0the\u00a0given\u00a0\nmechanical\u00a0 angular\u00a0 velocity\u00a0 as\u00a0 iee pn\n  .\u00a0 Then,\u00a0 the\u00a0 difference\u00a0 between\u00a0 the\u00a0 given\u00a0\nDenote the electrical angle velocity of the given current vector as \u03c9ie and the given mechanical angular velocity as \u03c9e =\n\u03c9ie np . Then, the difference between the given mechanical\nangular velocity and the mechanical angular velocity of the rotor is denoted by \u2206\u03c9. This leads to the following formula:\n\u03b4\u2032 = np\u2206\u03c9 = np(\u03c9e \u2212\u03c9r). (13)\nSubstitute Formula (13) into (12) to obtain the differential formula:\nJ \u03b4\u2032\u2032\nnp + B\n\u03b4\u2032 np + 3 2 np\u03c8 f i sin \u03b4 = J\u03c9\u2032e + B\u03c9e + TL. (14)\nWhen the above formula reaches a steady-state, \u03c9e changes very slowly. Thus, it can be considered a constant value. As \u03b4\u2032 converges to zero, the steady-state condition is:\nsign [ \u03b4\u2032 ] \u00b7 sign [ (sin \u03b4)\u2032 ] > 0. (15)\nTherefore, the conditions that are satisfied when the PMSM open-loop I/F startup mode is stable in operation are:\n\u2212 \u03c0 2 < \u03b4 < \u03c0 2 . (16)\nDefine the angle between the given current vector angle and the rotor q-axis as the error angle \u03b8e:\n\u03b8e = \u03c0\n2 \u2212 \u03b4. (17)\nSensors 2023, 23, 635 6 of 15\nin the control mode with id = 0 and iq = i. According to Formula (12), the power angle relationship under stable conditions is obtained as:\n3 2 npiq\u03c8 f sin \u03b4 = B\u03c9ie + TL. (18)\nSolve the stable point of the power angle:\n\u03b40 = arcsin ( B\u03c9e + TL 3 2 npiq\u03c8 f ) . (19)\nAccording to Formula (17), the error angle of the stable point is:\n\u03b80 = arccos ( B\u03c9e + TL 3 2 npiq\u03c8 f ) . (20)\nAccording to the above derivation and analysis, during the process of speed open-loop I/F startup, by selecting the appropriate given current vector value and current rotation frequency, the rotor of the motor can rotate with the given current frequency and maintain dynamic balance after the speed is stable, and the power angle \u03b4 converges to \u03b40. As shown in Figure 3, counterclockwise rotation is taken as the positive direction. Considering that the load and friction force are always positive, when the power angle reaches \u03b40, the resultant force with the motor torque is zero. Therefore, \u03b40 is the power angle balance point. When the power angle \u03b4 moves to the B region or the C region, the motor accelerates and moves into the A region. In region D, the motor decelerates to move, and when it enters region E, a torque opposite to the direction of motor rotation is generated.\nSensors\u00a02023,\u00a022,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 7\u00a0 of\u00a0 16\u00a0 \u00a0\n\u00a0\nangle\u00a0balance\u00a0point.\u00a0When\u00a0the\u00a0power\u00a0angle\u00a0  \u00a0moves\u00a0to\u00a0the\u00a0B\u00a0region\u00a0or\u00a0the\u00a0C\u00a0region,\u00a0the\u00a0 motor\u00a0accelerates\u00a0and\u00a0moves\u00a0into\u00a0the\u00a0A\u00a0region.\u00a0In\u00a0region\u00a0D,\u00a0the\u00a0motor\u00a0decelerates\u00a0to\u00a0move,\u00a0 and\u00a0when\u00a0it\u00a0enters\u00a0region\u00a0E,\u00a0a\u00a0torque\u00a0opposite\u00a0to\u00a0the\u00a0direction\u00a0of\u00a0motor\u00a0rotation\u00a0is\u00a0gener\u2010 ated.\u00a0 During\u00a0the\u00a0operation\u00a0of\u00a0the\u00a0motor,\u00a0the\u00a0torque\u00a0generated\u00a0by\u00a0the\u00a0motor\u00a0must\u00a0be\u00a0ini\u2010 tially\u00a0positive,\u00a0that\u00a0is,\u00a0  is\u00a0positive,\u00a0to\u00a0ensure\u00a0that\u00a0the\u00a0motor\u00a0can\u00a0overcome\u00a0the\u00a0load\u00a0torque\u00a0 and\u00a0drive\u00a0the\u00a0motor\u00a0to\u00a0rotate.\u00a0When\u00a0the\u00a0motor\u00a0speed\u00a0is\u00a0stable,\u00a0the\u00a0torque\u00a0generated\u00a0by\u00a0 the\u00a0motor\u00a0and\u00a0the\u00a0load\u00a0torque\u00a0are\u00a0balanced.\u00a0In\u00a0Figure\u00a03,\u00a0the\u00a0torque\u00a0balance\u00a0point\u00a0is\u00a0at\u00a0the\u00a0 intersection\u00a0of\u00a0 the\u00a0AB\u00a0and\u00a0CD\u00a0 regions.\u00a0When\u00a0  \u00a0 is\u00a0 in\u00a0 the\u00a0C\u00a0 region\u00a0and\u00a0 increases,\u00a0 the\u00a0 torque\u00a0will\u00a0decrease,\u00a0which\u00a0will\u00a0cause\u00a0  \u00a0 to\u00a0increase\u00a0further\u00a0and\u00a0eventually\u00a0become\u00a0out\u2010 of\u2010step.\u00a0Thus,\u00a0if\u00a0the\u00a0given\u00a0positive\u00a0direction\u00a0is\u00a0counterclockwise,\u00a0only\u00a0when\u00a0 0 \u00a0 is\u00a0 0 \u00a0 to\u00a0\n2  \u00a0 is\u00a0the\u00a0operating\u00a0range\u00a0of\u00a0the\u00a0motor\u00a0I/F\u00a0startup\u00a0stable,\u00a0that\u00a0is,\u00a0the\u00a0AB\u00a0area\u00a0in\u00a0the\u00a0figure.\u00a0\nOn\u00a0the\u00a0other\u00a0hand,\u00a0the\u00a0actual\u00a0speed\u00a0of\u00a0the\u00a0motor\u00a0constantly\u00a0fluctuates\u00a0around\u00a0the\u00a0 specified\u00a0value,\u00a0and\u00a0there\u00a0are\u00a0acceleration\u00a0and\u00a0deceleration\u00a0processes\u00a0during\u00a0the\u00a0startup\u00a0 process.\u00a0Therefore,\u00a0the\u00a0overall\u00a0process\u00a0of\u00a0the\u00a0motor\u00a0is\u00a0a\u00a0process\u00a0of\u00a0variable\u00a0acceleration\u00a0 movement.\u00a0  also\u00a0moves\u00a0back\u00a0and\u00a0forth\u00a0around\u00a0the\u00a0power\u00a0angle\u00a0balance\u00a0point\u00a0 0 \u00a0 and\u00a0 gradually\u00a0 converges.\u00a0 The\u00a0 convergence\u00a0 rate\u00a0 is\u00a0 dependent\u00a0 on\u00a0 the\u00a0 damping\u00a0 coefficient.\u00a0 When\u00a0the\u00a0load\u00a0damping\u00a0is\u00a0low,\u00a0the\u00a0motor\u00a0speed\u00a0converges\u00a0slowly\u00a0to\u00a0its\u00a0steady\u2010state\u00a0value.\u00a0 The\u00a0fi al\u00a0steady\u2010state\u00a0equilibrium\u00a0point\u00a0 0 \u00a0 as\u00a0a\u00a0non\u2010linear\u00a0positive\u00a0corr latio \u00a0with\u00a0the\u00a0 current\u00a0iq\u00a0in\u00a0the\u00a0stable\u00a0operation\u00a0range\u00a0under\u00a0the\u00a0condition\u00a0that\u00a0the\u00a0rotational\u00a0speed\u00a0torque\u00a0 and\u00a0the\u00a0motor\u00a0constant\u00a0remain\u00a0unchanged.\u00a0\nd\nq\nq*\nA\nBC\nD\nE\n\u00a0 Figure\u00a03.\u00a0The\u00a0virtual\u00a0coordinate\u00a0system\u00a0and\u00a0the\u00a0real\u00a0coordinate\u00a0system\u00a0with\u00a0error\u00a0angle\u00a0regions.\u00a0\nSince\u00a0the\u00a0I/F\u00a0startup\u00a0is\u00a0an\u00a0open\u2010loop\u00a0control\u00a0mode,\u00a0the\u00a0initial\u00a0position\u00a0of\u00a0the\u00a0motor\u00a0 rotor\u00a0is\u00a0unknown,\u00a0and\u00a0the\u00a0starting\u00a0speed\u00a0cannot\u00a0precisely\u00a0match\u00a0the\u00a0specified\u00a0value.\u00a0With\u00a0 the\u00a0I/F\u00a0startup,\u00a0the\u00a0initial\u00a0position\u00a0of\u00a0the\u00a0motor\u00a0must\u00a0be\u00a0known.\u00a0Suppose\u00a0the\u00a0initial\u00a0given\u00a0 position\u00a0is\u00a0too\u00a0different\u00a0from\u00a0the\u00a0actual\u00a0motor\u00a0position.\u00a0In\u00a0that\u00a0case,\u00a0an\u00a0opposite\u00a0torque\u00a0 will\u00a0be\u00a0generated,\u00a0 causing\u00a0 the\u00a0 I/F\u00a0 startup\u00a0 to\u00a0not\u00a0be\u00a0a\u00a0 strict\u00a0uniform\u00a0acceleration\u00a0 start,\u00a0 which\u00a0will\u00a0impact\u00a0the\u00a0motor\u00a0rotor\u00a0speed\u2019s\u00a0follow\u2010up\u00a0effect.\u00a0Currently,\u00a0the\u00a0prepositioning\u00a0 method\u00a0is\u00a0often\u00a0used,\u00a0in\u00a0which\u00a0a\u00a0constant\u00a0current\u00a0vector\u00a0is\u00a0provided,\u00a0and\u00a0the\u00a0generated\u00a0 torque\u00a0drags\u00a0the\u00a0motor\u00a0rotor\u00a0to\u00a0the\u00a0predetermined\u00a0position.\u00a0However,\u00a0there\u00a0is\u00a0a\u00a0situation\u00a0 where\u00a0the\u00a0difference\u00a0between\u00a0the\u00a0given\u00a0current\u00a0vector\u00a0and\u00a0the\u00a0rotor\u00a0position\u00a0is\u00a0at\u00a0a\u00a0  \u00a0 angle.\u00a0The\u00a0lower\u00a0motor\u00a0torque\u00a0is\u00a0zero,\u00a0resulting\u00a0in\u00a0positioning\u00a0failure.\u00a0In\u00a0practice,\u00a0a\u00a0slow\u00a0 rotating\u00a0current\u00a0vector\u00a0is\u00a0frequently\u00a0provided\u00a0to\u00a0guarantee\u00a0the\u00a0efficacy\u00a0of\u00a0the\u00a0preposition\u2010 ing\u00a0method\u00a0\nFigure 3. The virtual coordinate system and the real coordinate system with error angle regions.\nDuring the oper tion of the motor, the torque generated by the motor must be initially positive, that is, \u03b4 is positive, to ensur that the motor can overcom th load torque and drive the motor to rotate. When the motor speed i stable, the torque generated by th m tor a d the load torque are bal nced. In Figure 3, the torque balance point is at the intersection of th AB and CD r gion . When \u03b4 is in the C region and increases, the torque will decrease, which will cause \u03b4 to increase further and eventually become out-of-step. Thus, if the given positive d rection i counte clockwise, only wh n \u03b40 is 0 to \u03c02 is th operating range of the motor I/F startup s able, that is, the AB area in the figure. On the other hand, he actual spe d of the motor co stantly fluctuates around the specified va ue, and there are acceleration and deceleration processes during the st rtup pr cess. The fore, the overall process f the motor is a proc ss of variable acc lerati movement. \u03b4 also moves back and forth around the power angle balance point \u03b40 and gradually converges. The convergence rate is dependent on the damping coefficient. When\nSensors 2023, 23, 635 7 of 15\nthe load damping is low, the motor speed converges slowly to its steady-state value. The final steady-state equilibrium point \u03b40 has a non-linear positive correlation with the current iq in the stable operation range under the condition that the rotational speed torque and the motor constant remain unchanged. Since the I/F startup is an open-loop control mode, the initial position of the motor rotor is unknown, and the starting speed cannot precisely match the specified value. With the I/F startup, the initial position of the motor must be known. Suppose the initial given position is too different from the actual motor position. In that case, an opposite torque will be generated, causing the I/F startup to not be a strict uniform acceleration start, which will impact the motor rotor speed\u2019s follow-up effect. Currently, the prepositioning method is often used, in which a constant current vector is provided, and the generated torque drags the motor rotor to the predetermined position. However, there is a situation where the difference between the given current vector and the rotor position is at a \u03c0 angle. The lower motor torque is zero, resulting in positioning failure. In practice, a slow rotating current vector is frequently provided to guarantee the efficacy of the prepositioning method."
        },
        {
            "heading": "2.3. Smooth Switching between IF Control and EKF",
            "text": "After the I/F startup, when the motor speed reaches a certain value, the position \u03b8\u0302 estimated by the EKF based on the motor back-EMF model is valid. At this time, the I/F startup can be adjusted based on the estimated position of the EKF. The previous analysis demonstrates that the I/F startup strategy has a problem with fluctuating speed. The mismatch between the power angle and current value during stability will result in low current utilization. In this paper, a new method is proposed for adjusting the electrical angle frequency and current given by I/F startup using the effective position information estimated by EKF to decrease the speed fluctuation and increase the current utilization rate. Hence, a smooth transition to EKF speed closed-loop control is possible through the adjustment action. The block diagram of the whole control process of starting and switching is shown in Figure 4.\nSensors\u00a02023,\u00a022,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 8\u00a0 of\u00a0 16\u00a0 \u00a0\n\u00a0\n2.3.\u00a0Smooth\u00a0Switching\u00a0between\u00a0IF\u00a0Control\u00a0and\u00a0EKF\u00a0\nAfter\u00a0the\u00a0I/F\u00a0startup,\u00a0when\u00a0the\u00a0motor\u00a0speed\u00a0reaches\u00a0a\u00a0certain\u00a0value,\u00a0the\u00a0position\u00a0 \u0302 \u00a0 estimated\u00a0by\u00a0the\u00a0EKF\u00a0based\u00a0on\u00a0the\u00a0motor\u00a0back\u2010EMF\u00a0model\u00a0is\u00a0valid.\u00a0At\u00a0this\u00a0time,\u00a0the\u00a0I/F\u00a0 startup\u00a0can\u00a0be\u00a0adjusted\u00a0based\u00a0on\u00a0the\u00a0estimated\u00a0position\u00a0of\u00a0the\u00a0EKF.\u00a0The\u00a0previous\u00a0analysis\u00a0 demonstrates\u00a0that\u00a0the\u00a0I/F\u00a0startup\u00a0strategy\u00a0has\u00a0a\u00a0problem\u00a0with\u00a0fluctuating\u00a0speed.\u00a0The\u00a0mis\u2010 match\u00a0between\u00a0the\u00a0power\u00a0angle\u00a0and\u00a0current\u00a0value\u00a0during\u00a0stability\u00a0will\u00a0result\u00a0in\u00a0low\u00a0cur\u2010 rent\u00a0utilization.\u00a0In\u00a0this\u00a0paper,\u00a0a\u00a0new\u00a0method\u00a0is\u00a0proposed\u00a0for\u00a0adjusting\u00a0the\u00a0electrical\u00a0angle\u00a0 frequency\u00a0and\u00a0current\u00a0given\u00a0by\u00a0I/F\u00a0startup\u00a0using\u00a0the\u00a0effective\u00a0position\u00a0information\u00a0esti\u2010 mated\u00a0by\u00a0EKF\u00a0to\u00a0decrease\u00a0the\u00a0speed\u00a0fluctuation\u00a0and\u00a0increase\u00a0the\u00a0current\u00a0utilization\u00a0rate.\u00a0 Hence,\u00a0a\u00a0smooth\u00a0transition\u00a0to\u00a0EKF\u00a0speed\u00a0closed\u2010loop\u00a0control\u00a0is\u00a0possible\u00a0through\u00a0the\u00a0ad\u2010 justment\u00a0action.\u00a0The\u00a0block\u00a0diagram\u00a0of\u00a0the\u00a0whole\u00a0control\u00a0process\u00a0of\u00a0starting\u00a0and\u00a0switching\u00a0 is\u00a0shown\u00a0in\u00a0Figure\u00a04.\u00a0\nPI iPark SVPWM Inverter\nEKF\nPark\nPI\nClarke\n0\nPI\nError angle adjustment\n+\nd/dt\nLPF\nDamped torque regulator\n1/s\u00a0\nE E\n-\n-\n-\n-\n- +\n+\n+-\n++\nPMSM\n\u00a0\nFigure\u00a04.\u00a0I/F\u00a0startup\u00a0and\u00a0EKF\u00a0sensorless\u00a0hybrid\u00a0control\u00a0scheme\u00a0block\u00a0diagram.\u00a0\nThe\u00a0speed\u00a0fluctuation\u00a0can\u00a0be\u00a0reduced\u00a0by\u00a0adding\u00a0the\u00a0damping\u00a0torque\u00a0component.\u00a0The\u00a0 method\u00a0requires\u00a0 that\u00a0 the\u00a0power\u00a0angle\u00a0 information\u00a0 is\u00a0obtained\u00a0 from\u00a0 the\u00a0position\u00a0 infor\u2010 mation\u00a0estimated\u00a0by\u00a0the\u00a0EKF\u00a0and\u00a0the\u00a0information\u00a0provided\u00a0by\u00a0the\u00a0I/F\u00a0startup.\u00a0The\u00a0final\u00a0 convergence\u00a0 power\u00a0 is\u00a0 determined\u00a0 using\u00a0 the\u00a0 fluctuation\u00a0 information\u00a0 of\u00a0 the\u00a0 estimated\u00a0 power\u00a0angle.\u00a0The\u00a0value\u00a0of\u00a0the\u00a0angle\u00a0 0 \u00a0 is\u00a0compared\u00a0to\u00a0the\u00a0current\u00a0actual\u00a0power\u00a0angle,\u00a0 and\u00a0the\u00a0speed\u00a0fluctuation\u00a0is\u00a0suppressed\u00a0by\u00a0the\u00a0input\u00a0of\u00a0this\u00a0value.\u00a0This\u00a0method\u00a0effectively\u00a0 reduces\u00a0speed\u00a0fluctuations\u00a0throughout\u00a0the\u00a0entire\u00a0starting\u00a0procedure\u00a0and\u00a0accelerates\u00a0the\u00a0 convergence\u00a0speed\u00a0of\u00a0the\u00a0power\u00a0angle.\u00a0 The\u00a0power\u00a0angle\u00a0is\u00a0obtained\u00a0from\u00a0the\u00a0angle\u00a0estimated\u00a0by\u00a0EKF\u00a0and\u00a0the\u00a0angle\u00a0given\u00a0by\u00a0 I/F\u00a0startup\u00a0as\u00a0the\u00a0following:\u00a0\n\u02c6 2 ie      .\u00a0 (21)\nIt\u00a0can\u00a0be\u00a0seen\u00a0 from\u00a0 the\u00a0previous\u00a0analysis\u00a0 that\u00a0 in\u00a0 the\u00a0 I/F\u00a0startup,\u00a0 the\u00a0actual\u00a0power\u00a0 angle\u00a0  \u00a0 reciprocates\u00a0around\u00a0the\u00a0steady\u2010state\u00a0power\u00a0angle\u00a0 0 .\u00a0The\u00a0angle\u00a0between\u00a0them\u00a0 is:\u00a0\n0     .\u00a0 (22)\nWhen\u00a0 0  \u00a0 and\u00a0 0   ,\u00a0record\u00a0the\u00a0value\u00a0of\u00a0the\u00a0power\u00a0angle\u00a0at\u00a0this\u00a0moment\u00a0as\u00a0 max .\u00a0When\u00a0 0  \u00a0 and\u00a0 0   ,\u00a0record\u00a0the\u00a0value\u00a0of\u00a0the\u00a0power\u00a0angle\u00a0at\u00a0this\u00a0moment\u00a0as\u00a0\n.\u00a0From\u00a0Formula\u00a0(19),\u00a0it\u00a0can\u00a0be\u00a0seen\u00a0that\u00a0the\u00a0stable\u00a0power\u00a0angle\u00a0 0 \u00a0 is\u00a0related\u00a0to\u00a0the\u00a0\nFigure 4. I/F startup and EKF sensorless hybrid control scheme block diagram.\nspeed fluctuation can be reduced by adding the damping torque c mponent. The method quires that the power a gle informati n is obtained from the position information estimated by the EKF and the information provided by the I/F startup. The final convergence power is determined using the fluctuation information of the ti r l . l of the angle \u03b40 is compared to the current actual power angle, and the speed fluctuation is suppressed by the input of this value. This method effectively reduces speed fluctuations throughout the entire starting procedure and accelerates the convergence speed of the power angle.\nSensors 2023, 23, 635 8 of 15\nThe power angle is obtained from the angle estimated by EKF and the angle given by I/F startup as the following:\n\u03b4 = \u03c0\n2 + \u03b8ie \u2212 \u03b8\u0302. (21)\nIt can be seen from the previous analysis that in the I/F startup, the actual power angle \u03b4 reciprocates around the steady-state power angle \u03b40. The angle between them is:\n\u2206\u03b4 = \u03b4\u2212 \u03b40. (22)\nWhen \u03b4 > \u03b40 and \u03b4\u2032 = 0, record the value of the power angle at this moment as \u03b4max. When \u03b4 < \u03b40 and \u03b4\u2032 = 0, record the value of the power angle at this moment as \u03b4min. From Formula (19), it can be seen that the stable power angle \u03b40 is related to the speed and the load. When the torque load is constant, only the speed affects the power angle. It can be considered that the stable point \u03b40 of the power angle also changes uniformly with time in the stage of uniform acceleration. When the speed is at a constant speed, the stable point \u03b40 of the power angle remains unchanged. As shown in Figure 5, the steady-state power angle that can be estimated when the speed fluctuation reaches its extreme value is approximately:\n\u03b4\u03020,m+n = \u03b4max,m + \u03b4min,n\n2 , (23)\nwhere \u03b4max,m is the m-th maximum time, \u03b4max,n is the n-th minimum time, and \u03b4\u03020,m+n is the (m + n)-th extreme time, (m, n = 0, 1, 2 . . . ). In each cycle of speed fluctuation when the motor is accelerating uniformly, the power angle at other times of the speed fluctuation extreme value can be calculated by using the information of the power angle at the previous two extreme values as follows:\n\u03b40 = \u03b4\u03020,m+n + \u2206t \u2217 b. (24)\nSensors\u00a02023,\u00a022,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 9\u00a0 of\u00a0 16\u00a0 \u00a0\n\u00a0\nspeed\u00a0and\u00a0the\u00a0load.\u00a0When\u00a0the\u00a0torque\u00a0load\u00a0is\u00a0constant,\u00a0only\u00a0the\u00a0speed\u00a0affects\u00a0the\u00a0power\u00a0 angle.\u00a0It\u00a0can\u00a0be\u00a0considered\u00a0that\u00a0the\u00a0stable\u00a0point\u00a0 0 \u00a0 of\u00a0the\u00a0power\u00a0angle\u00a0also\u00a0changes\u00a0uni\u2010 formly\u00a0with\u00a0 time\u00a0 in\u00a0the\u00a0stage\u00a0of\u00a0uniform\u00a0acceleration.\u00a0When\u00a0the\u00a0speed\u00a0 is\u00a0at\u00a0a\u00a0constant\u00a0 speed,\u00a0the\u00a0stable\u00a0point\u00a0 0 \u00a0 of\u00a0the\u00a0power\u00a0angle\u00a0remains\u00a0unchanged.\u00a0 As\u00a0shown\u00a0i \u00a0Figure\u00a05,\u00a0th \u00a0steady\u2010state\u00a0power\u00a0angle\u00a0that\u00a0can\u00a0be\u00a0estimated\u00a0wh \u00a0the\u00a0 speed\u00a0fl ctua ion\u00a0reaches\u00a0its\u00a0extreme\u00a0value\u00a0is\u00a0approximately:\u00a0\nmax, min, 0, \u02c6 2 m n m n\n      ,\u00a0 (23)\nwhere\u00a0 max,m \u00a0 is\u00a0the\u00a0m\u2010th\u00a0maximum\u00a0time,\u00a0 max,n \u00a0 is\u00a0the\u00a0n\u2010th\u00a0minimum\u00a0time,\u00a0and\u00a0 0,\u02c6 m n  is\u00a0the\u00a0(m\u00a0+\u00a0n)\u2010th\u00a0extreme\u00a0time,\u00a0(m,\u00a0n\u00a0=\u00a00,\u00a01,\u00a02\u2026).\u00a0In\u00a0each\u00a0cycle\u00a0of\u00a0speed\u00a0fluctuation\u00a0when\u00a0 the\u00a0motor\u00a0is\u00a0accelerating\u00a0uniformly,\u00a0the\u00a0power\u00a0angle\u00a0at\u00a0other\u00a0times\u00a0of\u00a0the\u00a0speed\u00a0fluctua\u2010 tion\u00a0extreme\u00a0value\u00a0can\u00a0be\u00a0calculated\u00a0by\u00a0using\u00a0the\u00a0information\u00a0of\u00a0the\u00a0power\u00a0angle\u00a0at\u00a0the\u00a0 previous\u00a0two\u00a0extreme\u00a0values\u00a0as\u00a0follows:\u00a0\n0 0, \u02c6 m n t b      .\u00a0 (24)\nThe\u00a0power\u00a0angle\u00a0at\u00a0the\u00a0last\u00a0extreme\u00a0moment\u00a0is\u00a0denoted\u00a0by\u00a0 0, 1\u02c6 m n   ,\u00a0and\u00a0 t \u00a0 is\u00a0the\u00a0 time\u00a0interval\u00a0between\u00a0the\u00a0 0,\u02c6 m n  \u00a0moment\u00a0and\u00a0the\u00a0 0, 1\u02c6 m n   \u00a0mom nt.\u00a0 b \u00a0 r presents\u00a0the\u00a0 proportional\u00a0coefficient\u00a0and\u00a0its\u00a0expression\u00a0is:\u00a0\n0, 0, 1 \u02c6 \u02c6 m n m nb T      ,\u00a0 (25)\nwhere\u00a0 T \u00a0 represents\u00a0the\u00a0time\u00a0difference\u00a0between\u00a0the\u00a0first\u00a0two\u00a0extreme\u00a0moments.\u00a0When\u00a0 the\u00a0speed\u00a0is\u00a0stable,\u00a0 0b  .\u00a0After\u00a0id ntifying\u00a0the\u00a0current\u00a0power\u00a0angle,\u00a0the\u00a0formula\u00a0for\u00a0add\u2010 ing\u00a0a\u00a0gi en\u00a0damping\u00a0torque\u00a0to\u00a0a\u00a0given\u00a0sp ed\u00a0is\u00a0as\u00a0follows:\u00a0\nh     ,\u00a0 (26)\nwhere\u00a0h\u00a0is\u00a0the\u00a0feedback\u00a0coefficient.\u00a0\n\u00a0 Figure\u00a05.\u00a0I/F\u00a0startup\u00a0actual\u00a0power\u00a0angle\u00a0and\u00a0stable\u00a0power\u00a0angle.\u00a0Figure 5. I/F startup actual power angle and stable power angle.\nSensors 2023, 23, 635 9 of 15\nThe power angle at the last extreme moment is denoted by \u03b4\u03020,m+n\u22121, and \u2206t is the time interval between the \u03b4\u03020,m+n moment and the \u03b4\u03020,m+n\u22121 moment. b represents the proportional coefficient and its expression is:\nb = \u03b4\u03020,m+n \u2212 \u03b4\u03020,m+n\u22121\n\u2206T , (25)\nwhere \u2206T represents the time difference between the first two extreme moments. When the speed is stable, b = 0. After identifying the current power angle, the formula for adding a given damping torque to a given speed is as follows:\n\u2206\u03c9\u03b4 = \u2212h \u2217 \u2206\u03b4, (26)\nwhere h is the feedback coefficient. Adjusting the given current vector amplitude iq can change the steady-state position of the power angle. To achieve a smooth transition between the two control methods, it is necessary to adjust the given current iq after the speed has been stabilized so that the virtual coordinate system in which the given current resides is identical to the one. Through the stable error angle of \u03b80 determined above, the current is feedback adjusted to increase the utilization rate of the current. For the SPMSM, the ideal situation is when the \u03b80 converges to zero. However, when \u03b80 = 0, the stability of the system will be greatly reduced. According to Formula (20), the relationship between the current and the error angle in the steady-state of the speed can be obtained as follows:\niq = K\ncos \u03b80 , (27)\nwhere K = 2(B\u03c9e+TL)3np\u03c8 f . When the speed and load are constant, K is constant too. As a result, the balance point curve of the iq and stable error angle under different loads and speeds can be obtained, as shown in Figure 6.\nSensors\u00a02023,\u00a022,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 10\u00a0 of\u00a0 16\u00a0 \u00a0\n\u00a0\nAdjusting\u00a0the\u00a0given\u00a0current\u00a0vector\u00a0amplitude\u00a0iq\u00a0can\u00a0change\u00a0the\u00a0steady\u2010state\u00a0position\u00a0 of\u00a0the\u00a0power\u00a0angle.\u00a0To\u00a0achieve\u00a0a\u00a0smooth\u00a0transition\u00a0between\u00a0the\u00a0two\u00a0control\u00a0methods,\u00a0it\u00a0is\u00a0 necessary\u00a0to\u00a0adjust\u00a0the\u00a0given\u00a0current\u00a0iq\u00a0after\u00a0the\u00a0speed\u00a0has\u00a0been\u00a0stabilized\u00a0so\u00a0that\u00a0the\u00a0vir\u2010 tual\u00a0coordinate\u00a0system\u00a0in\u00a0which\u00a0the\u00a0given\u00a0current\u00a0resides\u00a0is\u00a0identical\u00a0to\u00a0the\u00a0one.\u00a0Through\u00a0 the\u00a0stable\u00a0error\u00a0angle\u00a0of\u00a0 0 \u00a0 determin d\u00a0above,\u00a0 the\u00a0current\u00a0 is\u00a0 feedback\u00a0adjusted\u00a0 to\u00a0 in\u2010 crease\u00a0the\u00a0utilization\u00a0rate\u00a0of\u00a0the\u00a0current.\u00a0For\u00a0the\u00a0SPMSM,\u00a0the\u00a0ideal\u00a0situation\u00a0is\u00a0when\u00a0the\u00a0 0 \u00a0 converges\u00a0to\u00a0zero.\u00a0However,\u00a0when\u00a0 0 0  ,\u00a0the\u00a0stability\u00a0of\u00a0the\u00a0system\u00a0will\u00a0be\u00a0greatly\u00a0 reduced.\u00a0According\u00a0to\u00a0Formula\u00a0(20),\u00a0the\u00a0relationship\u00a0between\u00a0the\u00a0current\u00a0and\u00a0the\u00a0error\u00a0 angle\u00a0in\u00a0the\u00a0steady\u2010state\u00a0of\u00a0the\u00a0speed\u00a0can\u00a0be\u00a0obtained\u00a0as\u00a0follows:\u00a0\n0cos q\nKi   ,\u00a0 (27)\nwhere\u00a0 2( )\n3 e L\np f\nB TK n     .\u00a0When\u00a0the\u00a0speed\u00a0and\u00a0load\u00a0are\u00a0constant,\u00a0 K \u00a0 is\u00a0constant\u00a0too.\u00a0As\u00a0\na\u00a0result,\u00a0the\u00a0balance\u00a0point\u00a0curve\u00a0of\u00a0the\u00a0iq\u00a0and\u00a0stable\u00a0error\u00a0angle\u00a0under\u00a0different\u00a0loads\u00a0and\u00a0 speeds\u00a0can\u00a0be\u00a0obtained,\u00a0as\u00a0shown\u00a0in\u00a0Figure\u00a06.\u00a0\n\u00a0 Figure\u00a06.\u00a0The\u00a0relationship\u00a0between\u00a0the\u00a0error\u00a0angle\u00a0and\u00a0the\u00a0current\u00a0under\u00a0different\u00a0K\u00a0values\u00a0when\u00a0 the\u00a0speed\u00a0is\u00a0stable.\u00a0\nThe\u00a0figure\u00a0illustrates\u00a0that\u00a0when\u00a0the\u00a0load\u00a0is\u00a0constant,\u00a0and\u00a0the\u00a0rotational\u00a0speed\u00a0is\u00a0stable,\u00a0 the\u00a0sensitivity\u00a0of\u00a0the\u00a0change\u00a0in\u00a0the\u00a0difference\u00a0angle\u00a0to\u00a0the\u00a0current\u00a0is\u00a0greatly\u00a0reduced\u00a0as\u00a0the\u00a0 difference\u00a0angle\u00a0approaches\u00a0zero.\u00a0This\u00a0will\u00a0result\u00a0in\u00a0the\u00a0entire\u00a0system\u00a0becoming\u00a0unstable.\u00a0 This\u00a0paper\u00a0designs\u00a0a\u00a0regulation\u00a0mechanism\u00a0to\u00a0rapidly\u00a0reduce\u00a0the\u00a0feedback\u00a0amount\u00a0to\u00a0the\u00a0 current\u00a0when\u00a0the\u00a0difference\u00a0angle\u00a0is\u00a0less\u00a0than\u00a0a\u00a0certain\u00a0value,\u00a0and\u00a0to\u00a0change\u00a0the\u00a0position\u00a0 of\u00a0the\u00a0switching\u00a0point\u00a0to\u00a0increase\u00a0the\u00a0overall\u00a0system\u2019s\u00a0stability\u00a0during\u00a0the\u00a0current\u00a0regula\u2010 tion\u00a0process.\u00a0This\u00a0ensures\u00a0that\u00a0the\u00a0current\u00a0remains\u00a0constant\u00a0before\u00a0and\u00a0after\u00a0switching\u00a0to\u00a0 EKF\u00a0high\u2010speed\u00a0control.\u00a0Due\u00a0to\u00a0 0e  \u00a0 in\u00a0steady\u00a0state,\u00a0the\u00a0regulation\u00a0mechanism\u00a0is\u00a0ex\u2010 pressed\u00a0as\u00a0follows:\u00a0\n. e relationship betwe n the rror angle and the current under different K values when the speed is stable.\nfi t t\nSensors 2023, 23, 635 10 of 15\ndifference angle approaches zero. This will result in the entire system becoming unstable. This paper designs a regulation mechanism to rapidly reduce the feedback amount to the current when the difference angle is less than a certain value, and to change the position of the switching point to increase the overall system\u2019s stability during the current regulation process. This ensures that the current remains constant before and after switching to EKF high-speed control. Due to \u03b8e = \u03b80 in steady state, the regulation mechanism is expressed as follows:  i \u2212 q = Kp\u03b8e + Ki \u222b e(\u03b8e)d\u03b8e , \u03c3 < \u03b8e < \u03c02 i\u2212q = ( \u03c3\u2212\u03b8e \u03c3 )3( Kp\u03b8e + Ki \u222b e(\u03b8e)d\u03b8e ) , \u03c3 < \u03b8e < \u03c02 , (28)\nwhere Kp and Ki represent PI regulator parameters, i\u2212q denotes the reduction value of the given current iq, and \u03c3 is the switching point of the set interval. When the error angle \u03b8e is reduced to \u03c3, it enters the switching interval. The feedback regulation relation between given current iq and error angle is changed, which can reduce the change of \u03b8e to adjust the current. The control mode under EKF can be regarded as \u03b8e = 0 during closed-loop operation after switching. As can be seen from Figure 6, the current iq can be calculated as 114% of the speed closed-loop when \u03b8e = 0.5. Thus, at \u03b8e less than the set point \u03c3, the current iq at this time and the iq after switching to the speed closed loop can be considered to be consistent. However, the stability is better than when \u03b8e = 0. Adjusting the PI regulator requires the addition of a low-pass filter because the switching current feedback is not smooth, and signal interference will result in a sudden change in torque and unstable rotation speed."
        },
        {
            "heading": "3. Simulation Results and Analysis",
            "text": "To verify the effectiveness of the proposed scheme, a simulation model from I/F startup to EKF speed closed-loop control was developed in a Matlab/Simulink environment. The simulation parameters for SPMSM are shown in Table 1. The DC bus voltage Vdc = 311 V, and the controller the current loop control frequency Ts = 10 KHz.\nSensors 2023, 23, 635 11 of 15 Sensors\u00a02023,\u00a022,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 12\u00a0 of\u00a0 16\u00a0 \u00a0\nFigure\u00a07.\u00a0I/F\u00a0startup\u00a0with\u00a0and\u00a0without\u00a0torque\u00a0damping\u00a0at\u00a0no\u00a0load.\u00a0\nSensors\u00a02023,\u00a022,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 12\u00a0 of\u00a0 16\u00a0 \u00a0\nFigure\u00a09.\u00a0Current\u00a0power\u00a0angle\u00a0and\u00a0estimated\u00a0steady\u2010state\u00a0power\u00a0angle\u00a0response.\nSensors 2023, 23, 635 12 of 15\nFigure 10 depicts the speed curve of the entire process from I/F startup to EKF speed closed-loop operation. In the simulation of a 2 N\u00b7m load on a given motor, the speed was set to accelerate uniformly to 300 r/min in 0.5 s and to maintain that speed after 0.5 s. At 2.5 s, the command to switch to the position observed by EKF was issued, and speed feedback was added. The speed was increased to 1000 r/min at 3 s and decreased to 800 r/min at 4 s, and the value of \u03c3 was 0.5 in the adjustment process. Figure 11 illustrates the angle curves of the estimated position of EKF and the given position of I/F startup during the automatic adjustment of the I/F startup current. When the I/F startup speed reached a constant speed between 0.5 s and 2.5 s, Figure 12 depicts the change in the difference angle during current regulation. The current iq curve throughout the entire process is depicted in Figure 13.\nSensors\u00a02023,\u00a022,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 13\u00a0 of\u00a0 16\u00a0 \u00a0\n\u00a0\n\u00a0 Figure\u00a09.\u00a0Current\u00a0power\u00a0angle\u00a0and\u00a0estimated\u00a0steady\u2010state\u00a0power\u00a0angle\u00a0response.\nFigure\u00a010\u00a0depicts\u00a0the\u00a0speed\u00a0curve\u00a0of\u00a0the\u00a0entire\u00a0process\u00a0from\u00a0I/F\u00a0startup\u00a0to\u00a0EKF\u00a0speed\u00a0\nclosed\u2010loop\u00a0operation.\u00a0In\u00a0the\u00a0simulation\u00a0of\u00a0a\u00a02\u00a0N\u2219m\u00a0load\u00a0on\u00a0a\u00a0given\u00a0motor,\u00a0the\u00a0speed\u00a0was\u00a0\nset\u00a0to\u00a0accelerate\u00a0uniformly\u00a0to\u00a0300\u00a0r/min\u00a0in\u00a00.5\u00a0s\u00a0and\u00a0to\u00a0maintain\u00a0that\u00a0speed\u00a0after\u00a00.5\u00a0s.\u00a0At\u00a0\n2.5\u00a0s,\u00a0the\u00a0command\u00a0to\u00a0switch\u00a0to\u00a0the\u00a0position\u00a0observed\u00a0by\u00a0EKF\u00a0was\u00a0issued,\u00a0and\u00a0speed\u00a0feed\u2010\nback\u00a0was\u00a0added.\u00a0The\u00a0speed\u00a0was\u00a0increased\u00a0to\u00a01000\u00a0r/min\u00a0at\u00a03\u00a0s\u00a0and\u00a0decreased\u00a0to\u00a0800\u00a0r/min\u00a0\nat\u00a04\u00a0s,\u00a0and\u00a0 the\u00a0value\u00a0of\u00a0  \u00a0was\u00a00.5\u00a0 in\u00a0 the\u00a0adjustment\u00a0process.\u00a0Figure\u00a011\u00a0 illustrates\u00a0 the\u00a0\nangle\u00a0curves\u00a0of\u00a0the\u00a0estimated\u00a0position\u00a0of\u00a0EKF\u00a0and\u00a0the\u00a0given\u00a0position\u00a0of\u00a0I/F\u00a0startup\u00a0during\u00a0\nthe\u00a0automatic\u00a0adjustment\u00a0of\u00a0the\u00a0I/F\u00a0startup\u00a0current.\u00a0When\u00a0the\u00a0I/F\u00a0startup\u00a0speed\u00a0reached\u00a0a\u00a0\nconstant\u00a0speed\u00a0between\u00a00.5\u00a0s\u00a0and\u00a02.5\u00a0s,\u00a0Figure\u00a012\u00a0depicts\u00a0the\u00a0change\u00a0in\u00a0the\u00a0difference\u00a0angle\u00a0\nduring\u00a0current\u00a0regulation.\u00a0The\u00a0current\u00a0iq\u00a0curve\u00a0throughout\u00a0the\u00a0entire\u00a0process\u00a0is\u00a0depicted\u00a0\nin\u00a0Figure\u00a013.\u00a0\n\u00a0 Figure\u00a010.\u00a0I/F\u00a0startup\u00a0to\u00a0EKF\u00a0speed\u00a0closed\u2010loop\u00a0speed\u00a0response.\u00a0Figure 10. I/F startup to EKF speed closed-loop speed response. Sensors\u00a02023,\u00a022,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 14\u00a0 of\u00a0 16\u00a0 \u00a0\n\u00a0\nFigure\u00a011.\u00a0EKF\u00a0estimated\u00a0position\u00a0and\u00a0I/F\u00a0startup\u00a0given\u00a0position\u00a0angle\u00a0during\u00a0automatic\u00a0adjustment\u00a0\nof\u00a0I/F\u00a0startup\u00a0current.\u00a0\nSensors 2023, 23, 635 13 of 15\nSensors\u00a02023,\u00a022,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 14\u00a0 of\u00a0 16\u00a0 \u00a0\n\u00a0\n\u00a0 Figure\u00a011.\u00a0EKF\u00a0estimated\u00a0position\u00a0and\u00a0I/F\u00a0startup\u00a0given\u00a0position\u00a0angle\u00a0during\u00a0automatic\u00a0adjustment\u00a0 of\u00a0I/F\u00a0startup\u00a0current.\u00a0\n\u00a0 Figure\u00a012.\u00a0Error\u00a0angle\u00a0response\u00a0from\u00a0I/F\u00a0startup\u00a0to\u00a0EKF\u00a0speed\u00a0closed\u2010loop.\u00a0Figure 12. Error angle response from I/F startup to EKF speed closed-loop. Sensors\u00a02023,\u00a022,\u00a0x\u00a0FOR\u00a0PEER\u00a0REVIEW\u00a0 15\u00a0 of\u00a0 16\u00a0 \u00a0\n\u00a0\n\u00a0 Figure\u00a013.\u00a0The\u00a0q\u2010axis\u00a0current\u00a0response\u00a0from\u00a0I/F\u00a0startup\u00a0to\u00a0EKF\u00a0speed\u00a0closed\u2010loop.\u00a0\nAfter\u00a0combining\u00a0the\u00a0improvement\u00a0methods\u00a0of\u00a0closed\u2010loop\u00a0adjustment,\u00a0as\u00a0shown\u00a0in\u00a0 Figures\u00a011\u00a0and\u00a012,\u00a0the\u00a0current\u00a0and\u00a0differential\u00a0angle\u00a0were\u00a0automatically\u00a0adjusted\u00a0by\u00a0the\u00a0 feedback\u00a0effect\u00a0to\u00a0a\u00a0new\u00a0equilibrium\u00a0state,\u00a0with\u00a0the\u00a0current\u00a0reaching\u00a0the\u00a0switching\u00a0surface\u00a0 and\u00a0the\u00a0degree\u00a0of\u00a0difference\u00a0decreasing\u00a0as\u00a0the\u00a0system\u00a0maintained\u00a0a\u00a0steady\u00a0state\u00a0until\u00a0the\u00a0 switch\u00a0to\u00a0EKF\u00a0speed\u00a0closed\u2010loop\u00a0control.\u00a0As\u00a0can\u00a0be\u00a0seen\u00a0in\u00a0Figures\u00a010\u00a0and\u00a013,\u00a0the\u00a0value\u00a0of\u00a0 the\u00a0current\u00a0 iq\u00a0 in\u00a02.5\u00a0s\u00a0was\u00a0 fundamentally\u00a0consistent,\u00a0before\u00a0and\u00a0after\u00a0 the\u00a0switch\u00a0 to\u00a0 the\u00a0 speed\u00a0closed\u2010loop\u00a0and\u00a0speed\u00a0fluctuations\u00a0were\u00a0small.\u00a0Meanwhile\u00a0after\u00a0the\u00a0switch\u00a0process\u00a0 was\u00a0completed,\u00a0 the\u00a0closed\u2010loop\u00a0sensorless\u00a0control\u00a0based\u00a0on\u00a0EKF\u00a0had\u00a0a\u00a0good\u00a0response.\u00a0 According\u00a0to\u00a0the\u00a0above\u00a0analysis,\u00a0 it\u00a0can\u00a0be\u00a0seen\u00a0that\u00a0the\u00a0proposed\u00a0method\u00a0achieves\u00a0the\u00a0 reliable\u00a0transition\u00a0from\u00a0zero\u00a0speed\u00a0and\u00a0low\u00a0speed\u00a0to\u00a0medium\u2010high\u00a0speed,\u00a0and\u00a0avoids\u00a0the\u00a0 shortage\u00a0of\u00a0low\u00a0speed\u00a0of\u00a0EKF,\u00a0which\u00a0proves\u00a0the\u00a0feasibility\u00a0of\u00a0the\u00a0improved\u00a0method\u00a0in\u00a0this\u00a0 paper.\u00a0\n4.\u00a0Results\u00a0 When\u00a0a\u00a0sensorless\u00a0control\u00a0scheme\u00a0based\u00a0on\u00a0back\u00a0electromotive\u00a0force\u00a0model\u00a0is\u00a0imple\u2010 mented\u00a0for\u00a0SPMSM,\u00a0it\u00a0often\u00a0fails\u00a0at\u00a0zero\u00a0and\u00a0low\u00a0speeds.\u00a0Therefore,\u00a0it\u00a0is\u00a0necessary\u00a0to\u00a0take\u00a0 the\u00a0I/F\u00a0startup\u00a0for\u00a0the\u00a0transition\u00a0from\u00a0zero\u00a0speed\u00a0and\u00a0low\u00a0speed\u00a0to\u00a0high\u2010speed\u00a0switching.\u00a0 In\u00a0this\u00a0paper,\u00a0a\u00a0sensorless\u00a0control\u00a0based\u00a0on\u00a0EKF\u00a0 is\u00a0adopted\u00a0as\u00a0the\u00a0medium\u2010high\u00a0speed\u00a0 control\u00a0scheme,\u00a0and\u00a0an\u00a0improved\u00a0method\u00a0is\u00a0proposed\u00a0to\u00a0reduce\u00a0the\u00a0speed\u00a0fluctuation\u00a0by\u00a0 increasing\u00a0the\u00a0torque\u00a0damping\u00a0in\u00a0I/F\u00a0startup\u00a0and\u00a0to\u00a0solve\u00a0the\u00a0problem\u00a0of\u00a0smooth\u00a0switch\u2010 ing\u00a0between\u00a0the\u00a0two\u00a0methods.\u00a0The\u00a0proposed\u00a0method\u00a0is\u00a0well\u2010suited\u00a0for\u00a0startup\u00a0processes\u00a0 at\u00a0low\u00a0speed\u00a0and\u00a0the\u00a0transition\u00a0to\u00a0high\u00a0speed\u00a0of\u00a0the\u00a0sensorless\u00a0control,\u00a0which\u00a0ensures\u00a0a\u00a0 good\u00a0robustness\u00a0and\u00a0adaptability\u00a0of\u00a0the\u00a0whole\u00a0control\u00a0system.\u00a0\nAuthor\u00a0Contributions:\u00a0Methodology,\u00a0B.N.,\u00a0Y.Z.\u00a0and\u00a0S.C.;\u00a0software,\u00a0Y.Z.;\u00a0validation,\u00a0B.N.,\u00a0Y.Z.\u00a0and\u00a0 S.C.;\u00a0writing\u2014original\u00a0draft\u00a0preparation,\u00a0B.N.\u00a0and\u00a0Y.Z.;\u00a0writing\u2014review\u00a0and\u00a0editing,\u00a0S.C.;\u00a0funding\u00a0 acquisition,\u00a0B.N.\u00a0All\u00a0authors\u00a0have\u00a0read\u00a0and\u00a0agreed\u00a0to\u00a0the\u00a0published\u00a0version\u00a0of\u00a0the\u00a0manuscript.\u00a0\nFunding:\u00a0This\u00a0work\u00a0is\u00a0supported\u00a0by\u00a0National\u00a0Natural\u00a0Science\u00a0Foundation\u00a0of\u00a0China\u00a0(No.\u00a051975433,\u00a0 51975430).\u00a0\nInstitutional\u00a0Review\u00a0Board\u00a0Statement:\u00a0Not\u00a0applicable.\u00a0\nInformed\u00a0Consent\u00a0Statement:\u00a0Not\u00a0applicable.\u00a0\n. - i fr I t t t l -l .\nft i i t e i provement methods of closed-l op adjustment, as show in Figures 11 and 12, the current and differential angle were autom tically adjusted by the feedback effect to a new equilibrium state, with the current reaching the switching surface and the degree of difference decreasing as the system maintained a steady state until the switch to EKF speed closed-loop control. As can be seen in Figures 10 and 13, the value of the current iq in 2.5 s was fundamentally consistent, before and after the switch to the speed closed-loop and speed fluctuations were small. Meanwhile after the switch process was completed, the closed-loop sensorless control based on EKF had a good response. According to the above analysis, it can be seen that the proposed method achieves the reliable transition from zero speed and low speed to medium-high speed, and avoids the shortage of low speed of EKF, which proves the feasibility of the improved method in this paper.\nSensors 2023, 23, 635 14 of 15"
        },
        {
            "heading": "4. Results",
            "text": "When a sensorless control scheme based on back electromotive force model is implemented for SPMSM, it often fails at zero and low speeds. Therefore, it is necessary to take the I/F startup for the transition from zero speed and low speed to high-speed switching. In this paper, a sensorless control based on EKF is adopted as the medium-high speed control scheme, and an improved method is proposed to reduce the speed fluctuation by increasing the torque damping in I/F startup and to solve the problem of smooth switching between the two methods. The proposed method is well-suited for startup processes at low speed and the transition to high speed of the sensorless control, which ensures a good robustness and adaptability of the whole control system.\nAuthor Contributions: Methodology, B.N., Y.Z. and S.C.; software, Y.Z.; validation, B.N., Y.Z. and S.C.; writing\u2014original draft preparation, B.N. and Y.Z.; writing\u2014review and editing, S.C.; funding acquisition, B.N. All authors have read and agreed to the published version of the manuscript.\nFunding: This work is supported by National Natural Science Foundation of China (No. 51975433, 51975430).\nInstitutional Review Board Statement: Not applicable.\nInformed Consent Statement: Not applicable.\nData Availability Statement: The data presented in this study are available on request from the corresponding author. The data are not publicly available due to privacy.\nConflicts of Interest: The authors declare no conflict of interest."
        }
    ],
    "title": "An Improved Sensorless Hybrid Control Method of Permanent Magnet Synchronous Motor Based on I/F Startup",
    "year": 2023
}