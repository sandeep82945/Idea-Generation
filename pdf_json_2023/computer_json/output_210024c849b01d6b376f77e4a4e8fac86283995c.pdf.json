{
    "abstractText": "This paper presents an open source LiDARcamera calibration toolbox that is general to LiDAR and camera projection models, requires only one pairing of LiDAR and camera data without a calibration target, and is fully automatic. For automatic initial guess estimation, we employ the SuperGlue image matching pipeline to find 2D-3D correspondences between LiDAR and camera data and estimate the LiDARcamera transformation via RANSAC. Given the initial guess, we refine the transformation estimate with direct LiDAR-camera registration based on the normalized information distance, a mutual information-based cross-modal distance metric. For a handy calibration process, we also present several assistance capabilities (e.g., dynamic LiDAR data integration and user interface for making 2D-3D correspondence manually). The experimental results show that the proposed toolbox enables calibration of any combination of spinning and non-repetitive scan LiDARs and pinhole and omnidirectional cameras, and shows better calibration accuracy and robustness than those of the state-of-the-art edge-alignment-based calibration method.",
    "authors": [
        {
            "affiliations": [],
            "name": "Kenji Koide"
        },
        {
            "affiliations": [],
            "name": "Shuji Oishi"
        },
        {
            "affiliations": [],
            "name": "Masashi Yokozuka"
        },
        {
            "affiliations": [],
            "name": "Atsuhiko Banno"
        }
    ],
    "id": "SP:9f49a0aa118d6b597df438be42ce4fbb619cbf21",
    "references": [
        {
            "authors": [
                "Y. Xie",
                "L. Deng",
                "T. Sun",
                "Y. Fu",
                "J. Li",
                "X. Cui",
                "H. Yin",
                "S. Deng",
                "J. Xiao",
                "B. Chen"
            ],
            "title": "A4lidartag: Depth-based fiducial marker for extrinsic calibration of solid-state lidar and camera",
            "venue": "IEEE Robotics and Automation Letters, vol. 7, no. 3, pp. 6487\u20136494, July 2022.",
            "year": 2022
        },
        {
            "authors": [
                "D. Tsai",
                "S. Worrall",
                "M. Shan",
                "A. Lohr",
                "E. Nebot"
            ],
            "title": "Optimising the selection of samples for robust lidar camera calibration",
            "venue": "IEEE International Intelligent Transportation Systems Conference. IEEE, Sept. 2021, pp. 2631\u20132638.",
            "year": 2021
        },
        {
            "authors": [
                "C. Yuan",
                "X. Liu",
                "X. Hong",
                "F. Zhang"
            ],
            "title": "Pixel-level extrinsic self calibration of high resolution LiDAR and camera in targetless environments",
            "venue": "IEEE Robotics and Automation Letters, vol. 6, no. 4, pp. 7517\u20137524, Oct. 2021.",
            "year": 2021
        },
        {
            "authors": [
                "P.-E. Sarlin",
                "D. DeTone",
                "T. Malisiewicz",
                "A. Rabinovich"
            ],
            "title": "SuperGlue: Learning feature matching with graph neural networks",
            "venue": "IEEE/CVF Conference on Computer Vision and Pattern Recognition. IEEE, June 2020, pp. 4938\u20134947.",
            "year": 2020
        },
        {
            "authors": [
                "J. Beltran",
                "C. Guindel",
                "A. de Escalera la",
                "F. Garcia"
            ],
            "title": "Automatic extrinsic calibration method for LiDAR and camera sensor setups",
            "venue": "IEEE Transactions on Intelligent Transportation Systems, pp. 1\u201313, Mar. 2022.",
            "year": 2022
        },
        {
            "authors": [
                "C. Fang",
                "S. Ding",
                "Z. Dong",
                "H. Li",
                "S. Zhu",
                "P. Tan"
            ],
            "title": "Singleshot is enough: Panoramic infrastructure based calibration of multiple cameras and 3d LiDARs",
            "venue": "IEEE/RSJ International Conference on Intelligent Robots and Systems. IEEE, Sept. 2021, pp. 8890\u20138897.",
            "year": 2021
        },
        {
            "authors": [
                "Q. Zhang",
                "R. Pless"
            ],
            "title": "Extrinsic calibration of a camera and laser range finder (improves camera calibration)",
            "venue": "IEEE/RSJ International Conference on Intelligent Robots and Systems. IEEE, Sept. 2004, pp. 2301\u20132306.",
            "year": 2004
        },
        {
            "authors": [
                "L. Zhou",
                "Z. Li",
                "M. Kaess"
            ],
            "title": "Automatic extrinsic calibration of a camera and a 3d LiDAR using line and plane correspondences",
            "venue": "IEEE/RSJ International Conference on Intelligent Robots and Systems. IEEE, Oct. 2018, pp. 5562\u20135569.",
            "year": 2018
        },
        {
            "authors": [
                "R. Tsai",
                "R. Lenz"
            ],
            "title": "A new technique for fully autonomous and efficient 3d robotics hand/eye calibration",
            "venue": "IEEE Transactions on Robotics and Automation, vol. 5, no. 3, pp. 345\u2013358, June 1989.",
            "year": 1989
        },
        {
            "authors": [
                "R. Ishikawa",
                "T. Oishi",
                "K. Ikeuchi"
            ],
            "title": "LiDAR and camera calibration using motions estimated by sensor fusion odometry",
            "venue": "IEEE/RSJ International Conference on Intelligent Robots and Systems. IEEE, Oct. 2018, pp. 7342\u20137349.",
            "year": 2018
        },
        {
            "authors": [
                "X. Zhang",
                "S. Zhu",
                "S. Guo",
                "J. Li",
                "H. Liu"
            ],
            "title": "Line-based automatic extrinsic calibration of LiDAR and camera",
            "venue": "IEEE International Conference on Robotics and Automation. IEEE, May 2021, pp. 9347\u2013 9353.",
            "year": 2021
        },
        {
            "authors": [
                "X. Liu",
                "C. Yuan",
                "F. Zhang"
            ],
            "title": "Targetless extrinsic calibration of multiple small FoV LiDARs and cameras using adaptive voxelization",
            "venue": "IEEE Transactions on Instrumentation and Measurement, vol. 71, pp. 1\u201312, May 2022.",
            "year": 2022
        },
        {
            "authors": [
                "G. Pandey",
                "J. McBride",
                "S. Savarese",
                "R. Eustice"
            ],
            "title": "Automatic targetless extrinsic calibration of a 3d lidar and camera by maximizing mutual information",
            "venue": "AAAI Conference on Artificial Intelligence, vol. 26, no. 1, pp. 2053\u20132059, Sept. 2021.",
            "year": 2021
        },
        {
            "authors": [
                "G. Pandey",
                "J.R. McBride",
                "S. Savarese",
                "R.M. Eustice"
            ],
            "title": "Automatic extrinsic calibration of vision and lidar by maximizing mutual information",
            "venue": "Journal of Field Robotics, vol. 32, no. 5, pp. 696\u2013722, Sept. 2014.",
            "year": 2014
        },
        {
            "authors": [
                "A. Stewart"
            ],
            "title": "Localisation using the appearance of prior structure",
            "venue": "Ph.D. dissertation, Oxford University, UK, 2016.",
            "year": 2016
        },
        {
            "authors": [
                "J. Jeong",
                "Y. Cho",
                "A. Kim"
            ],
            "title": "The road is enough! extrinsic calibration of non-overlapping stereo camera and LiDAR using road information",
            "venue": "IEEE Robotics and Automation Letters, vol. 4, no. 3, pp. 2831\u20132838, July 2019.",
            "year": 2019
        },
        {
            "authors": [
                "P. Dellenbach",
                "J.-E. Deschaud",
                "B. Jacquet",
                "F. Goulette"
            ],
            "title": "CT-ICP: Real-time elastic LiDAR odometry with loop closure",
            "venue": "International Conference on Robotics and Automation. IEEE, May 2022, pp. 5580\u2013 5586.",
            "year": 2022
        },
        {
            "authors": [
                "A. Torii",
                "M. Havlena",
                "T. Pajdla"
            ],
            "title": "From google street view to 3d city models",
            "venue": "IEEE International Conference on Computer Vision Workshops. IEEE, Sept. 2009, pp. 2188\u20132195.",
            "year": 2009
        },
        {
            "authors": [
                "F. Devernay",
                "O. Faugeras"
            ],
            "title": "Straight lines have to be straight",
            "venue": "Machine Vision and Applications, vol. 13, no. 1, pp. 14\u201324, Aug. 2001.",
            "year": 2001
        },
        {
            "authors": [
                "J. Kannala",
                "S. Brandt"
            ],
            "title": "A generic camera model and calibration method for conventional, wide-angle, and fish-eye lenses",
            "venue": "IEEE Transactions on Pattern Analysis and Machine Intelligence, vol. 28, no. 8, pp. 1335\u20131340, Aug. 2006.",
            "year": 2006
        },
        {
            "authors": [
                "D. Scaramuzza",
                "A. Martinelli",
                "R. Siegwart"
            ],
            "title": "A toolbox for easily calibrating omnidirectional cameras",
            "venue": "IEEE/RSJ International Conference on Intelligent Robots and Systems. IEEE, Oct. 2006, pp. 5695\u20135701.",
            "year": 2006
        },
        {
            "authors": [
                "C. Bai",
                "T. Xiao",
                "Y. Chen",
                "H. Wang",
                "F. Zhang",
                "X. Gao"
            ],
            "title": "Faster- LIO: Lightweight tightly coupled lidar-inertial odometry using parallel sparse incremental voxels",
            "venue": "IEEE Robotics and Automation Letters, vol. 7, no. 2, pp. 4861\u20134868, Apr. 2022.",
            "year": 2022
        },
        {
            "authors": [
                "C.B. Barber",
                "D.P. Dobkin",
                "H. Huhdanpaa"
            ],
            "title": "The quickhull algorithm for convex hulls",
            "venue": "ACM Transactions on Mathematical Software, vol. 22, no. 4, pp. 469\u2013483, Dec. 1996.",
            "year": 1996
        },
        {
            "authors": [
                "D. DeTone",
                "T. Malisiewicz",
                "A. Rabinovich"
            ],
            "title": "SuperPoint: Selfsupervised interest point detection and description",
            "venue": "IEEE/CVF Conference on Computer Vision and Pattern Recognition Workshops. IEEE, June 2018, pp. 224\u2013236.",
            "year": 2018
        },
        {
            "authors": [
                "S. Umeyama"
            ],
            "title": "Least-squares estimation of transformation parameters between two point patterns",
            "venue": "IEEE Transactions on Pattern Analysis and Machine Intelligence, vol. 13, no. 4, pp. 376\u2013380, Apr. 1991.",
            "year": 1991
        }
    ],
    "sections": [
        {
            "text": "I. INTRODUCTION\nLiDAR-camera extrinsic calibration is the task of estimating the transformation between the coordinate frames of a LiDAR and a camera. It is necessary for LiDAR-camera sensor fusion and is required for many applications, including autonomous vehicle localization, environmental mapping, and surrounding-object recognition.\nAlthough LiDAR-camera calibration has been actively studied over the last decade, the robotics community still lacks a handy and complete LiDAR-camera calibration toolbox. The existing LiDAR-camera calibration frameworks require preparing a calibration target that is sometimes difficult to create [1], taking many shots of LiDAR-camera data that results in a large amount of effort [2], or choosing a geometry-rich environment carefully [3]. Furthermore, they rarely support various LiDAR and camera projection models, such as spinning and non-repetitive scan LiDARs and ultrawide FoV and omnidirectional cameras. We believe that the lack of an easy-to-use LiDAR-camera calibration method has been a long-standing barrier to the development of LiDARcamera sensor fusion systems.\nAs a benefit to the robotics community, herein we present a new complete LiDAR-camera calibration toolbox that has the following features: \u2022 Generalizable: The proposed toolbox is sensor-model-\nindependent and can handle various LiDAR and cam-\n*This work was supported in part by a project commissioned by the New Energy and Industrial Technology Development Organization (NEDO).\n1All the authors are with the Department of Information Technology and Human Factors, the National Institute of Advanced Industrial Science and Technology, Tsukuba, Ibaraki, Japan, k.koide@aist.go.jp\nSpinning LiDAR Non-repetitive scan LiDAR Depth camera\nStandard FoV camera Ultra-wide FoV camera Omnidirectional camera\nera projection models, including spinning and nonrepetitive scan LiDARs, and pinhole, fisheye, and omnidirectional projection cameras, as shown in Fig. 1 (a). \u2022 Target-less: The proposed calibration algorithm does not require a calibration target but uses the environment structure and texture for calibration. \u2022 Single-shot: At a minimum, only one pairing of a LiDAR point cloud and a camera image is required for calibration. Optionally, multiple LiDAR-camera data pairs can be used to further improve the calibration accuracy. \u2022 Automatic: To make the calibration process fully automatic, the system includes an initial guess estimation algorithm with cross-modal 2D-3D correspondence matching based on SuperGlue [4]. \u2022 Accurate and robust: A pixel-level direct LiDARcamera registration algorithm is employed to robustly and accurately perform LiDAR-camera calibration in environments without rich geometrical features, where existing edge alignment-based algorithms [3] would fail, ar X iv :2\n30 2.\n05 09\n4v 1\n[ cs\n.R O\n] 1\n0 Fe\nb 20\n23\nas long as there exists mutual information between LiDAR and camera data.\nTo our knowledge, there is no open implementation that has all the above features, and we believe the release of this toolbox will be beneficial to the robotics community.\nThe main contributions of this paper are as follows: \u2022 We present a robust initial guess estimation algorithm\nbased 2D-3D correspondence estimation. To take advantage of the recent graph neural network-based image matching [4], we generate a LiDAR intensity image with a virtual camera and find correspondences between the LiDAR intensity image and the camera image. An estimate of the LiDAR-camera transformation is then given by RANSAC and reprojection error minimization. \u2022 For robust and accurate calibration, we combined a direct LiDAR-camera fine registration algorithm based on the normalized information distance (NID), a mutualinformation (MI)-based cross-modal distance metric, with a view-based hidden points removal algorithm that filters out points that are occluded and should not be visible from the viewpoint of the camera. \u2022 The entire system was carefully designed to be general to LiDAR and camera projection models so that it can be applied to various sensor models. \u2022 We released the code of the developed method as open source to benefit the community 1."
        },
        {
            "heading": "II. RELATED WORK",
            "text": "LiDAR-camera extrinsic calibration methods are categorized into three approaches: 1) target-based, 2) motion-based, and 3) scene-based."
        },
        {
            "heading": "A. Target-based calibration",
            "text": "As in the well-known camera intrinsic calibration process, the target-based approach is the most natural way for LiDAR-camera extrinsic calibration. Once we obtain the 3D coordinates of points on a calibration target and their corresponding 2D coordinates projected in the image, we can easily estimate the LiDAR-camera transformation by solving the perspective-n-point problem. The challenge here is that it is often difficult to design and create a calibration target that can robustly and accurately be detected by both the LiDAR and the camera. Several studies used a 3D structured calibration target that is not as easy to create as the wellknown chessboard pattern [5], [6]. Although several other works used a planar pattern that is easy to create, they required manual annotation of LiDAR data [7] and multiple data acquisitions, resulting in a large amount of effort [8]."
        },
        {
            "heading": "B. Motion-based calibration",
            "text": "As in the hand-eye calibration problem, we can estimate the transformation between two frames on a rigid body based on their motions [9]. This approach can easily handle heterogeneous sensors and does not need an overlap between\n1The code is available at https://github.com/koide3/ direct_visual_lidar_calibration\nsensors [10]. However, it requires careful time synchronization, which is not always possible when, for example, we use an affordable web camera. Furthermore, we need to estimate the per-sensor motion as accurately as possible for better calibration results."
        },
        {
            "heading": "C. Scene-based calibration",
            "text": "Scene-based methods estimate the LiDAR-camera transformation by considering the consistency between pairs of LiDAR point clouds and camera images. LiDAR points are projected in the image space, and then their consistency is measured with pixel values based on some metrics.\nSimilar to the visual odometry estimation problem, there are two major approaches for LiDAR-camera data consistency evaluation: indirect and direct.\nThe indirect approach first extracts feature points (e.g., edge points) from both the camera and LiDAR data, and computes the reprojection error between 2D-3D corresponding points [3], [11], [12]. While it exhibits good convergence due to the discriminative features and robust correspondence creation, it requires the environment to be geometry-rich to extract sufficient feature points. Because a majority of texture information for surfaces in the environment is discarded in this approach, it is less accurate compared with the direct approach.\nThe latter approach compares the pixel and point intensities directly. Because LiDAR and cameras usually exhibit very different intensity distributions, simply taking the difference between them does not work in practice. To overcome the difference in modalities, MI-based metrics have been used for LiDAR-camera data comparison [13], [14]. Because they do not use the difference between LiDAR and image intensities but instead consider their co-occurrence, they can robustly measure the consistency between LiDAR and camera intensity values. Following [15], [16], we used the NID metric derived from MI such that it satisfies the metric space axioms and becomes more robust than MI [15]."
        },
        {
            "heading": "III. METHODOLOGY",
            "text": ""
        },
        {
            "heading": "A. Overview",
            "text": "Fig. 2 shows an overview of the proposed LiDAR-camera calibration toolbox.\nTo handle various LiDAR models with a unified processing pipeline, we first create a dense point cloud by merging multiple LiDAR frames. For non-repetitive scan LiDARs (e.g., Livox Avia), we simply accumulate points to densify the point cloud. For spinning LiDARs (e.g., Velodyne and Ouster LiDARs), we use a dynamic LiDAR point integration technique based on continuous-time ICP [17].\nFrom a paired densified point cloud and camera image, we then obtain a rough estimate of the LiDAR-camera transformation based on 2D-3D correspondences estimated with SuperGlue [4]. We also provide an intuitive user interface for creating manual correspondence for fail-safe. Given the 2D-3D correspondences, we perform RANSAC and reprojection error minimization to obtain an initial estimate of the LiDAR-camera transformation.\nGiven the initial estimate of the LiDAR-camera transformation, we apply view-based hidden points removal to remove LiDAR points that should not be visible from the viewpoint of the camera. We then refine the LiDAR-camera transformation estimate via fine LiDAR-camera registration based on NID minimization."
        },
        {
            "heading": "B. Notation",
            "text": "Our goal is to estimate the transformation between LiDAR and camera coordinate frames CTL from pairings of LiDAR point clouds Pi = [Lp1, \u00b7 \u00b7 \u00b7 , LpN ] with point intensities Li = [l1, \u00b7 \u00b7 \u00b7 , lN ] and camera images Ii(xj) = yj , where xj \u2208 R2 are the pixel coordinates and yj is the pixel intensity. A point in the LiDAR frame Lpj is transformed into the camera coordinate frame as Cpj = CTLLpj and projected into the image space using a projection function \u03c0; xj = \u03c0 ( Cpj ) . In this paper, we mainly use the conventional pinhole camera model with plumb-bob lens distortion and the omnidirectional equirectangular camera model [18] as the projection function. Note that other major camera models, including ATAN [19], fisheye [20], and unified omnidirectional camera models [21], have been implemented and are supported in the developed toolbox."
        },
        {
            "heading": "C. Preprocessing",
            "text": "Spinning LiDARs (e.g., Ouster OS1-64) exhibit a sparse and repetitive scan pattern, and it is difficult to extract meaningful geometrical and texture information from only a single scan (see Fig. 3 (a)). For such a LiDAR, we move the LiDAR in the up-down direction for a few seconds and accumulate points while compensating for the viewpoint change and point cloud distortion. To estimate the LiDAR motion, we use the CT-ICP algorithm, which jointly optimizes the LiDAR poses at the scan beginning and end by minimizing the distance between the current LiDAR scan and a model point cloud with the interpolated LiDAR pose. To efficiently create the target point cloud from past observations, we use the linear iVox [22] structure, which simply keeps points in a linear container for each voxel. Based on the estimated LiDAR scan beginning and end poses, we correct the motion distortion on the input point cloud and create a dense point cloud by accumulating all points in the coordinate frame of the first scan. Fig. 3 (b) shows a densified point cloud after application of this dynamic LiDAR point integration process. We can see that the densified point cloud exhibits rich geometrical and texture information that was difficult to see in the single-scan point cloud.\nFor LiDARs with a non-repetitive scan mechanism (e.g., Livox Avia), we simply accumulate all scans into one frame, resulting in a dense point cloud, as shown in Fig. 1 (b).\nFor the densified point cloud and the camera image, we apply histogram equalization because the NID metric used in the fine registration step works best with uniform intensity distributions.\nD. Initial Guess Estimation To obtain a rough estimate of the LiDAR-camera transformation, we first obtain 2D-3D correspondences between the input images and point clouds and then estimate the LiDARcamera transformation via RANSAC and reprojection error minimization.\nTo take advantage of the graph neural network-based image matching pipeline [4], we generate LiDAR intensity images from dense point clouds with a virtual camera model. To select the best projection model for rendering the entire point cloud, we first estimate the FoV of the LiDAR. We extract the convex hull of the input point cloud using the quickhull algorithm [23] and then find the point pair with the maximum angle distance in the convex hull using a brute-force search. If the estimated FoV of the LiDAR is smaller than 150\u00b0, we create a virtual camera with the pinhole projection model. Otherwise, we create a virtual camera with the equirectangular projection model. With the virtual camera, we render the point cloud with intensity values to obtain LiDAR intensity images, as shown in Fig. 4. Along with the intensity images, we also generate point index maps to efficiently look up pixel-wise 3D coordinates in the subsequent pose estimation step. Note that while we simply render each point without interpolation and gap filling, rendering results exhibit good appearance quality thanks to the densely accumulated point clouds.\nTo find correspondences between the LiDAR and camera intensity images, we use the SuperGlue pipeline [4]. It first detects keypoints on images using SuperPoint [24] and then\nAlgorithm 1 Rotation-only RANSAC\nInput: 2D keypoints K = [xK1 , \u00b7 \u00b7 \u00b7 ,xKM ] and corresponding 3D coordinates D = [LpK1 , \u00b7 \u00b7 \u00b7 , LpKM ]\n1: function ESTIMATEROTATIONRANSAC(K,D) 2: Cdj \u2190\n\u03c0\u22121(xKj ) \u2016\u03c0\u22121(xKj )\u2016\n. Bearing vectors of xKj\n3: Ldj \u2190 LpKj \u2016LpKj \u2016\n. Bearing vectors of LpKj 4: for i \u2208 [1, \u00b7 \u00b7 \u00b7 , N iteration] do 5: Randomly sample two correspondences j0 and j1 6: CRL \u2190 FINDROTATIONLSQ(j0, j1) 7: N \u2190 count of xij s.t. |\u03c0 ( CRL LpKj ) \u2212xKj | < \u03b1 8: if i = 1 or N > N\u2217 then 9: N\u2217 \u2190 N 10: CR\u2217L \u2190 CRL 11: return CR\u2217L 12: function ESTIMATEROTATIONLSQ(j0, j1) [25] 13: A\u2190 [Cdj0Cdj1 ], B \u2190 [Ldj0Ldj1 ] 14: U\u03a3V \u2217 = AB . SVD 15: s\u2190 1 if |U ||V | >= 0 else \u22121 16: return Udiag([1, 1, s])V \u2217\nfinds correspondences between the keypoints using a graph neural network. The weights pretrained on the MegaDepth dataset is used in this work. While SuperGlue can find correspondences between images in different modalities, we found that the matching threshold needs to be set to a very small value (e.g., 0.05) to obtain a sufficient number of correspondences. However, with this setting, we observed that many false correspondences are created, as shown in Fig. 5.\nGiven 2D keypoint coordinates K = [xK1 , \u00b7 \u00b7 \u00b7 ,xKM ] and corresponding 3D coordinates in the LiDAR frame D = [LpK1 , \u00b7 \u00b7 \u00b7 , LpKM ], we first perform the rotation-only RANSAC described in Alg. 1 to robustly deal with outlier correspondences. Given the estimated rotation as an initial guess, we then obtain the 6 DoF LiDAR-camera transformation C T\u0303L by minimizing the reprojection errors of all keypoints using the Levenberg-Marquardt optimizer:\nC T\u0303L = arg min CTL M\u2211 j=1 \u03c1 ( \u2016\u03c0 ( CTL LpKj ) \u2212 xKj \u20162 ) , (1)\nwhere \u03c1 is the Cauchy robust kernel."
        },
        {
            "heading": "E. NID-based Direct LiDAR-Camera Registration",
            "text": "Some points in the LiDAR point cloud can be occluded and not visible from the camera due to the viewpoint difference. If we simply project all the LiDAR points, such points can cause false correspondences and affect the calibration result, as discussed in [3]. To avoid this problem, we apply efficient view-based hidden point removal to filter out LiDAR points that should not be visible from the viewpoint of the camera. With the current estimate of the LiDAR-camera transformation, we project the LiDAR points in the image and keep only the point with the minimum distance for each pixel (i.e., depth buffer testing). From the projected image\nthat retains only points visible from the camera, we obtain a 3D point cloud and use it for fine registration.\nWe then perform direct LiDAR-camera registration based on the NID metric [15]. To compute the NID, we transform LiDAR points Lpj \u2208 Pi in the camera frame and project them into the image space xj = \u03c0 ( CTL Lpj ) . From the LiDAR point intensities lj and corresponding pixel intensities Ii (xj), we create P(Li), P(Ii), and P(Li, Ii), which are marginal and joint histograms of LiDAR and pixel intensities, and calculate their entropies H(Li), H(Ii), and H(Li, Ii) as follows:\nH (X) = \u2211 x\u2208X p(x) log p(x), (2)\nwhere x is each bin in the histogram. The NID between Li and Ii is then defined as follows:\nNID (Li, Ii) = H (Li, Ii)\u2212MI (Li; Ii)\nH (Li, Ii) , (3)\nMI (Li; Ii) = H (Li) + H (Ii)\u2212 H (Li, Ii) , (4)\nwhere MI (Li; Ii) is the mutual information between Li and Ii. By using the Nelder-Mead optimizer, we find the LiDARcamera transformation that minimizes Eq. 3.\nBecause LiDAR points visible from the camera can change as the LiDAR-camera transformation is updated, we iterate the view-based hidden points removal and NID-based LiDAR-camera registration until the displacement of the transformation update converges."
        },
        {
            "heading": "IV. EXPERIMENT",
            "text": "We evaluated the proposed calibration toolbox with all four combinations of the spinning and non-repetitive scan LiDARs (Ouster OS1-64 and Livox Avia) and pinhole and\nomnidirectional cameras (Omron Sentech STC-MBS202POE and Kodak PixPro 4KVR360) shown in Fig. 6. For each combination, we recorded 15 pairs of LiDAR point clouds and camera images in indoor and outdoor environments, and we ran the proposed calibration process for each pair (i.e., single-shot calibration).\nAs a reference, we estimated the LiDAR-camera transformation using survey-grade high-reflectivity sphere targets, as shown in Fig.7. We manually annotated the 2D and 3D positions of the targets to find the LiDAR-camera transformations that minimized the target reprojection errors. From visual inspection, we confirmed that the estimated transformations closely describe the projection of the cameras. We used the estimated transformations as the \u201cpseudo\u201d ground truth.\nTable I summarizes the calibration results for the combination of the Ouster LiDAR and pinhole camera. For the initial guess estimation, if the translation and rotation errors are smaller than 0.5 m and 1.0\u00b0, respectively, we consider the initial guess estimation as successful. As shown in Table I, the proposed algorithm provided a reasonable initial guess for 12 out of 15 data correlations. Fig. 8 shows the correspondences of a failure case (Dataset 02). We can see that the estimated\ncorrespondences contain many false correspondences due to the flat and repetitive environment structure. Note that this kind of data pairing, where correct correspondences are difficult to find, can automatically be filtered out by RANSAC in multiple-data calibration and does not affect the estimation result. For data that resulted in a failed initial guess, we manually annotated 2D-3D correspondences and re-estimated the transformation for evaluation of the fine registration algorithm.\nThe proposed fine registration algorithm worked well for all the data and achieved 0.043 m and 0.374\u00b0 calibration errors on average. As a baseline, we also applied the stateof-the-art edge alignment-based calibration method [3]. For this method, we used the reference LiDAR-camera transformation as the initial transformation, and thus it was evaluated with an almost ideal initial guess. However, as can be seen in Table I, it showed large calibration errors for several data\ncorrelations, resulting in worse average calibration errors (0.236 m and 1.329\u00b0). This was because both image and point cloud edge extraction in [3] were very sensitive to environment changes and could not properly extract edge points in several environments.\nAs shown in Table II, for the combination of the Livox LiDAR and pinhole camera, the initial guess estimation successfully provided good initial LiDAR-camera transformations for all data pairings, and the fine registration algorithm achieved average calibration errors of 0.069 m and 0.724\u00b0, which were better than those for the edge-based calibration [3] (0.323 m and 3.497\u00b0).\nTable III summarizes the calibration results for the omnidirectional camera. While it showed a good initial guess success rate (15 / 15) and low calibration errors for the Ouster LiDAR (0.069 m and 0.724\u00b0), both the initial guess estimation and the fine LiDAR-camera registration tended be degraded for the combination of the Livox LiDAR and omnidirectional camera (10 / 15 success rate, 0.101 m and 0.807\u00b0). This is because only a small portion of the omnidirectional camera images was used for calibration due to the very different FoVs of the LiDAR and camera, and the resolution of the images was not sufficient to represent fine environmental details with this limited FoV. We think that the calibration accuracy can be improved by using higherresolution or multiple images.\nFinally, we performed multi-data calibration with all data pairings and evaluated the calibration errors for all the LiDAR-camera combinations. Table IV summarizes the calibration errors. We can see that good calibration results were obtained even for the combination of the Livox and omnidirectional camera (0.011 m and 0.400\u00b0). For the combination of the Ouster LiDAR and pinhole camera, we observed the best calibration accuracy (0.010 m and 0.132\u00b0). This is because in this combination, the LiDAR and camera have similar FoVs and most of input data were used for calibration while some points and image regions are not used in other combinations due to the difference of FoV.\nTable V shows the processing times for each calibration step. Depending on the combination of the LiDAR and camera models, it took from 74 to 249 s to calibrate the LiDARcamera transformation from 15 data pairings. Although the combination of the Ouster LiDAR and omnidirectional camera took a longer time because both the sensors have 360\u00b0 FoVs and need projection of most of the points, we consider it is in a reasonable level for offline calibration."
        },
        {
            "heading": "V. CONCLUSION",
            "text": "We developed a general LiDAR-camera calibration toolbox. For a fully automatic calibration process, we used image matching-based initial guess estimation. The initial estimate was then refined by a NID-based direct LiDAR-camera registration algorithm. The experimental results showed that the toolbox can accurately calibrate the transformation between spinning and non-repetitive scan LiDARs and pinhole and omnidirectional cameras."
        }
    ],
    "title": "General, Single-shot, Target-less, and Automatic LiDAR-Camera Extrinsic Calibration Toolbox",
    "year": 2023
}