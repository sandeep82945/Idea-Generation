{
    "abstractText": "In this note, we are interested in discussing characteristics of finite generating sets for F, the set of all semiflows with non negative coordinates of a Petri Net. By systematically positioning these results over semirings such as N or Q then over a field such as Q, we were able to complete the range of results about not only finite but optimal generating sets for a given family of semiflows.",
    "authors": [
        {
            "affiliations": [],
            "name": "Gerard Memmi"
        },
        {
            "affiliations": [],
            "name": "Marguerite Perey"
        }
    ],
    "id": "SP:ad0a9123edae32e32bd5d3dd0f464f66b8b7b504",
    "references": [
        {
            "authors": [
                "N. Alon",
                "K.A. Berman"
            ],
            "title": "Regular Hypergraphs",
            "venue": "Gordon\u2019s Lemma, Steinitz\u2019 Lemma and Invariant Theory. J. OF Combinatorial Theory, A, 43:pp. 91\u201397",
            "year": 1986
        },
        {
            "authors": [
                "H. Alaiwan",
                "G. Memmi"
            ],
            "title": "Algorithmes de Recherche des Solutions Enti\u00e8res Positives d\u2019un Syst\u00e8me lin\u00e9aire d\u2019\u00e9quations homog\u00e8nes",
            "venue": "Revue Technique Thomson-CSF, 14(1):pp. 125\u2013135",
            "year": 1982
        },
        {
            "authors": [
                "G.W. Brams"
            ],
            "title": "R\u00e9seaux de Petri: Th\u00e9orie et Pratique",
            "venue": "Masson, Paris, France",
            "year": 1982
        },
        {
            "authors": [
                "G. Ciardo",
                "G. Mecham",
                "E. Paviot-Adet",
                "M. Wan"
            ],
            "title": "P-Semiflow Computation with Decision Diagrams",
            "venue": "PETRI NETS 2009,",
            "year": 2009
        },
        {
            "authors": [
                "J.M. Colom",
                "M. Silva"
            ],
            "title": "Convex geometry and semiflows in P/T nets",
            "venue": "A comparative study of algorithms for computation of minimal P-semiflows. In G. Rozenberg, editor, Advances in Petri Nets 1990 [10 Int. Conf. on ATPN, Bonn, Germany, Proc.], LNCS 483, pages 79\u2013112. Springer",
            "year": 1989
        },
        {
            "authors": [
                "J.M. Colom",
                "E. Teruel",
                "M. Silva",
                "S. Haddad"
            ],
            "title": "Structural Methods",
            "venue": "pages 277\u2013316. Springer Berlin Heidelberg",
            "year": 2003
        },
        {
            "authors": [
                "L.W. Dworzanski",
                "I.A. Lomazova. Structural Place Invariants for Analyzing the Behavioral Properties of Nested Petri Nets. In F. Kordon",
                "D. Moldt"
            ],
            "title": "editors",
            "venue": "ATPN and Concurrency, pages 325\u2013344, Cham,",
            "year": 2016
        },
        {
            "authors": [
                "C. Girault",
                "R. Valk"
            ],
            "title": "Petri Nets for Systems Engineering",
            "venue": "A guide to Modeling, Verification, and Applications. Springer",
            "year": 2003
        },
        {
            "authors": [
                "F. Kr\u00fcckeberg",
                "M. Jaxy"
            ],
            "title": "Mathematical methods for calculating invariants in Petri nets",
            "venue": "G. Rozenberg, editor, Advances in Petri Nets 1987, pages 104\u2013131. Springer Berlin Heidelberg",
            "year": 1987
        },
        {
            "authors": [
                "S. Lang"
            ],
            "title": "Algebra",
            "venue": "3rd revised Ed. GTM, Springer",
            "year": 2002
        },
        {
            "authors": [
                "J.B. Lasserre",
                "P. Mahey"
            ],
            "title": "Using Linear Programming in Petri Net Analysis",
            "venue": "RAIRO, RO, 23(1):pp 43\u201350",
            "year": 1989
        },
        {
            "authors": [
                "G. Memmi"
            ],
            "title": "Semiflows and Invariants",
            "venue": "Application in Petri Nets Theory. in Journ\u00e9es d\u2019Etudes sur les R\u00e9seaux de Petri AFCETInstitut de Programmation), pages pp. 145\u2013150",
            "year": 1977
        },
        {
            "authors": [
                "G. Memmi"
            ],
            "title": "Fuites et Semi-flots dans les R\u00e9seaux de Petri",
            "venue": "Th\u00e8se de Docteur-Ing\u00e9nieur, U. P. et M. Curie, Paris, France",
            "year": 1978
        },
        {
            "authors": [
                "G. Memmi"
            ],
            "title": "Methodes d\u2019analyse de R\u00e9seaux de Petri",
            "venue": "R\u00e9seaux a Files, Applications au temps reel. Th\u00e8se d\u2019Etat, U. P. et M. Curie, Paris, France",
            "year": 1983
        },
        {
            "authors": [
                "R. Martin",
                "G. Memmi"
            ],
            "title": "Specification and Validation of Sequential Processes Communicating by FIFO Channels",
            "venue": "In: 4h Int. Conf. on Software Engineering for Telecommunication Switching Systems, Warwick U. Conventry, U.K, pages 54\u201357. SIEE",
            "year": 1981
        },
        {
            "authors": [
                "J. Martinez",
                "M. Silva"
            ],
            "title": "A simple and fast algorithm to obtain all invariants of a generalised Petri net",
            "venue": "Application and Theory of Petri nets, pages 301\u2013310. Springer",
            "year": 1982
        },
        {
            "authors": [
                "A. Schrijver"
            ],
            "title": "Theory of Linear and Integer Programming",
            "venue": "Wiley",
            "year": 1987
        },
        {
            "authors": [
                "E. Sperner"
            ],
            "title": "Ein Satz \u00fcber untermengen einer endlichen Menge",
            "venue": "Mathematische Zietschrift, 27:pp. 544\u2013548",
            "year": 1928
        },
        {
            "authors": [
                "M. Silva",
                "E. Teruel",
                "J.M. Colom"
            ],
            "title": "Linear algebraic and linear programming techniques for the analysis of place/transition net systems",
            "venue": "pages 309\u2013373. Springer Berlin Heidelberg, Berlin, Heidelberg",
            "year": 1998
        },
        {
            "authors": [
                "J.M. Toudic"
            ],
            "title": "Algorithmes d\u2019Analyse structurelle des R\u00e9seaux de Petri",
            "venue": "Th\u00e8se de 3 cycle, U. P. et M. Curie, Paris, France",
            "year": 1981
        }
    ],
    "sections": [
        {
            "text": "In this note, we are interested in discussing characteristics of finite generating sets for F+, the set of all semiflows with non negative coordinates of a Petri Net. By systematically positioning these results over semirings such as N or Q+ then over a field such as Q, we were able to complete the range of results about not only finite but optimal generating sets for a given family of semiflows."
        },
        {
            "heading": "1. Introduction",
            "text": "The notion of generating set for semiflows is well known and support efficiently the handling of a specific class of invariants sometimes unduly called linear invariants in the literature. Several results have been published starting from their initial definition and structure [Mem77] to a large array of applications especially to analyze Petri Nets [CTSH03, DL16]. Several algorithms were independently developed to compute a generating set of semiflows [Tou81] or later in [MS82, AM82]. All of them can be considered as variations of Farkas or Fourier algorithms related to integer linear programming and convex geometry (see [CS89] for a comparative study or [Sch87] for the underlying mathematical theory).\nIdentifying the set of minimal supports is critical for developing effective formal analysis of Petri Nets and proving complex behavioral properties (including parameters). This provides its full significance to the three decomposition theorems in section 3 that are slightly revisited an are at the core of this note\nar X\niv :2\n21 1.\n10 40\n5v 2\n[ cs\n.F L\n] 3\nF eb\n2 02\nmotivated by the need to regroup a number of results in the literature closely related to them.\nIn this short note, we are interested in discussing characteristics of finite generating sets for F+, the set of all semiflows with non negative coordinates of a Petri Net. The notion of minimal generating sets for semiflows described in section 5 can be found in [Mem77], then by Colom, Silva, and Teruel in [STC98] p319 and later by the same authors in [GV03], p 68 or more recently, in [CMPAW09]. By systematically comparing and positioning these results over semirings such as N or Q+ then over a field such as Q, we were able to complete as accurately as possible the range of results about finite minimal generating sets for a given family of semiflows. To this effect, simple examples and counterexamples were provided to illustrate our results and show a few differences between minimal or canonical semiflows. However, theorem 5 is new to the best of our knowledge and prove the coincidence between a least generating set and a minimal generating set. Uniqueness of particular generating sets is presented section 5.1.\nIn section 7, a long example illustrates how liveness of Petri Nets can be proven with semiflows, and in particular how the usage of semiflows of minimal support bring simplicity to the analysis. A table is summarizing main results, in particular showing differences when considering N, Q+, or Q 1 before concluding the note.\n1.1. Petri Nets and semiflows\nA Petri Net is a tuple PN =< P, T, Pre, Post > where P is a finite set of places, T a finite set of transitions such that P \u2229 T = \u00d8. A transition t of T is defined by its Pre(\u00b7, t) and Post(\u00b7, t) conditions 2 : Pre : P \u00d7 T \u2192 N is a function providing a weight for pairs ordered from places to transitions,\n1these differences are at the source of few inaccurate statements found in the literature\n[CS89, CMPAW09] 2We use here the usual notation: Pre(\u00b7, t)(p) = Pre(p, t) and Post(\u00b7, t)(p) = Post(p, t)\nPost : P \u00d7 T \u2192 N is a function providing a weight for pairs ordered from transitions to places. d will denote the number of places: d = |P |.\nExtensive definitions, properties, and case studies can be found in particular\nin [Bra82, GV03].\nSemiflows can be defined as solutions of the following homogeneous system\nof |T | diophantine equations:\nfTPost(\u00b7, t) = fTPre(\u00b7, t), \u2200t \u2208 T (1)\nwhere xT y denotes the scalar product of the two vectors x and y.\nEquation 1 allows to directly deduce the following invariant from a non null\nsemmiflow f :\nfor any marking M reachable from a given marking M0, we have :\nfTM = fTM0 (2)\nIn the sequel, we will consider uniquely the set F+ of semiflows with non negative coordinates (semiflows with negative coordinates can also be defined for instance in [CS89]; however, they are not the object of this note). Then, F+ can be defined by:\nF+ = {f \u2208 Nd | \u2200t \u2208 T, fTPost(\u00b7, t) = fTPre(\u00b7, t)}. We abusively use the same symbol \u20180\u2019 to denote (0, ..., 0)T of Nn \u2200n \u2208 N.\nThe support of a semiflow f is denoted by \u2016f\u2016 and is defined by:\n\u2016f\u2016 = {x \u2208 P | f(x) 6= 0}. We will use the usual the componentwise partial order, in which (x1, x2, . . . , xd) T \u2264 (y1, y2, . . . , yd)T if and only if xi \u2264 yi \u2200i \u2208 {1, . . . , d}."
        },
        {
            "heading": "2. Generating sets and minimality",
            "text": "2.1. Basic definitions and results\nA subset G of F+ is a generating set over a set S if and only if \u2200f \u2208 F we have f = \u2211\ngi\u2208G \u03b1igi where \u03b1i \u2208 S, gi \u2208 G, and S \u2208 {N,Q +,Q} where\nQ+ denotes the set of non negative rational numbers. Since N \u2282 Q+ \u2282 Q 3, a generating set over N is also a generating set over Q+ and a generating set over Q+ is also a generating set over Q. The reverse is indeed not true and in our opinion is one source of inaccurate propositions that can be found in the literature.\nThe notion of generating set is strongly related with algebraic concepts especially when the generating set is finite. Let\u2019s consider G a finite generating set such that G{g1, ...gq}, the following definitions can be recalled:\nIf G is a generating set over N then C(G) = {f \u2208 Nd | f = \u2211i=q\ni=1 \u03b1igi} where\n\u03b1i \u2208 N is called a semigroup and F+ = C(G). If G is a generating set over Q+ then Cone(G) = {f \u2208 (Q+)d | f =\u2211i=q i=1 \u03b1igi} where \u03b1i \u2208 Q+ is called a convex polyhedral cone and F+ = Cone(G) \u2229 Nd. It is interesting to recall a result from [LM89] stating that F+ 6= {0} if and only if Cone(G) 6= {0}.\nIf G is a generating set over Q then V S(G) = {f \u2208 (Q+)d | f = \u2211i=q\ni=1 \u03b1igi}\nwhere \u03b1i \u2208 Q is called a vector space and F+ = V S(G) \u2229 Nd. We can extract from G a basis of V S(G) which also is a generating set of F+ over Q (see for instance [Lan02] p. 85).\nThe fact that there exists a finite generating set over N is non trivial. This result has been proven by Gordan circa 1885 then Dickson circa 1913. Here, we directly rewrite Gordan\u2019s lemma [AB86] by adapting it to our notations:\nLemma 1. (Gordan circa 1885) Let F+ be the set of non-negative integer solutions of equation 1. Then, there exists a finite generating set of vectors in F+, such that every element of F+ is a linear combination of these vectors with non-negative integer coefficients.\nIn the sequel, we will not come back on the question of the existence of a\nfinite generating set. Being shown for N, it is necessarily true for Q+ and Q.\n3where \u2282 denotes the strict inclusion between sets\n2.2. Minimal supports and minimal semiflows\nSeveral definitions of the notion of minimal semiflow have been proposed in [STC98] p.319, in [GV03] p.68, [KJ87], [CMPAW09], or in [Mem78, Mem83]. It can be confusing to look into these in details. Rather, we propose to consider only two basic notions in order theory: minimality of support with respect to set inclusion and minimality of semiflow with respect to the componentwise partial order on Nd since the various definitions we found in the literature as well as the results of this note can be described in terms of these sole two classic notions.\nA non empty support I of a semiflow f is minimal with respect to the set\ninclusion if and only if @ g \u2208 F \u2212 {0} such that \u2016g\u2016 \u2282 I.\nSince P is finite, the set MS of minimal supports in P is a Sperner family (i.e. a family of subsets such that none of them contains another one) and we can apply Sperner\u2019s theorem [Spe28] over m = |MS| which is stating that:\nm \u2264 ( d\nbd/2c\n) (3)\n. This provides us with a general upper bound for the number of minimal supports in a given Petri Net (this result is already given in [Mem83, STC98]). To the best of our knowledge, this bound can be reached only by three families of degenerated Petri Nets containing isolated elements: only one, two, or three places and as many isolated transitions as desired. We conjecture that this bound cannot be reached for Petri Nets with more than three places and should be refined on a case-by-case basis by exploiting connectivity between places and transitions as hinted in the example section 7.\nA non null semiflow f is minimal with respect to \u2264 if and only if @ g \u2208\nF+ \u2212 {0, f} such that g \u2264 f .\nIn other words, we cannot decompose a minimal semiflow as the sum of another semiflow and a non null non negative vector. This remark provides us with a first hint on how fundamental the notions of minimality are regarding semiflows decompostion and to finding out how semiflows can be generated by as small as possible a finite subset of semiflows each of them with as small a support as possible. One reason for looking after minimality of semiflows and supports is\nto reduce the complexity of the analysis of various behavioral properties; given first that the number of minimal semiflows can be great second, that considering a basis may not capture constraints deduced from minimal support as easily (see example section 7)."
        },
        {
            "heading": "3. Three decomposition theorems",
            "text": "Generating sets can be characterized thanks to a set of three decomposition theorems that can be found in [Mem78] with their proofs. Here, theorem 1 slightly extended is provided with a new proof by using Gordan\u2019s lemma 1. Theorem 2 is extended to include considerations regarding Q+ and Q.\nTheorem 1. If a semiflow is minimal then it belongs to any generating set over N.\nThe set of minimal semiflows of F+ is a finite generating set over N.\nLet\u2019s consider a semiflow f \u2208 F+ \u2212 {0} such that \u2203f1, ..., fk \u2208 F+ \u2212 {0, f} and a1, ..., ak \u2208 N such that f = \u2211i=k i=1 aifi. Since f 6= 0 and all coefficients ai are in N, \u2203j \u2264 k such that aj > 0. Therefore, ajfj \u2264 f , since fj 6= f , we have fj < f so f is not minimal. Hence, if a semiflow is minimal then it has to belong to every generating sets over N.\nApplying Gordan\u2019s lemma, there exists G a finite generating set. Since any minimal semiflow is in G, the subset of all minimal semiflows is included in G and therefore finite. Let E = {e1, ...en} be this subset.\nFor any semiflow f \u2208 F+, we always can define r \u2208 F+ and a set of n non\nnegative integers {k1, ...kn} such that: i) r = f \u2212 \u2211j=n\nj=1 kjej ii) \u2200i \u2264 n, (f \u2212 \u2211j=i j=1 kjej) \u2208 F+ and (f \u2212 \u2211j=i j=1 kjej \u2212 ei) /\u2208 F+ If r 6= 0 then we would have r \u2208 F+\u2212{0} and by construction, @ei \u2208 E such that ei \u2264 r which would mean that r is minimal and contradict the fact that E includes all minimal semiflows. Therefore, r = 0 and any semiflows can be\ndecomposed as a linear combinations of minimal semiflows and E is a generating set.4\nLet\u2019s point out that since E is not necessarily a basis, the exhibited decomposition is not necessarily unique and depends on the order in which the minimal semiflows are considered as shown in figure 1.\nHowever, a minimal semiflow does not necessarily belong to a generating set over Q+ or Q. This is illustrated in figure 1 where G1 does not include f1 which is minimal or in figure 2 where G3 does not include g4 which is minimal of minimal support.\n4if E was infinite the construction could still be used (since the decreasing sequence is\nbounded by 0 and N is nowhere dense) and we would have:\nlim n\u2192\u221e\nf \u2212 \u2211j=n\nj=1 kjej = 0 with the same definition of the coefficients kj as in ii).\nTheorem 2. If I is a minimal support then\ni) there exists a unique minimal semiflow f such that I = \u2016f\u2016 and \u2200g \u2208 F+\nsuch that \u2016g\u2016 = I, \u2203k \u2208 N such that g = kf ,\nii) any non null semiflow g such that \u2016g\u2016 = I constitutes a generating set\nover Q+ or Q for F+I = {g \u2208 F+| \u2016g\u2016 = I}.\nIn other words, {f} is a unique generating set over N for F+I = {g \u2208 F+ | \u2016g\u2016 = I}. However, this uniqueness property is indeed lost in Q+ or in Q since any element of F+I is a generating set over Q+ or Q.\nFrom Sperner\u2019s theorem, we know that any support I of a semiflow contains a finite number m of minimal supports of semiflows. The following theorem states that these m supports first, cover I, second, provide a generating set directly deduced from these m supports.\nTheorem 3. (decomposition) Any support I of semiflows is covered by the finite subset {I1, I2, . . . , Im} of minimal supports of semiflows included in I:\nI = \u22c3i=m\ni=1 Ii\nMoreover, \u2200f \u2208 F+ such that \u2016f\u2016 = I, we have f = \u2211i=m\ni=1 \u03b1igi where \u03b1i \u2208 Q+ and\nthe semiflows gi are such that \u2016gi\u2016 = Ii\nA sketch of proof of theorem 3 can be found in [Bra82], a complete proof in\n[Mem78]."
        },
        {
            "heading": "4. Canonical semiflows",
            "text": "In [CS89] or in [GV03] p68, a semiflow is said canonical if and only if the gcd of its non null coordinates is equal to one (In [CMPAW09], such a semiflow is said to be scaled back).\nMinimal semiflows and canonical semiflows are two different notions. The\nfollowing lemma and theorem help at comparing them.\nLemma 2. If a semiflow is minimal then it is canonical.\nIf a semiflow is canonical and its support is minimal then it is minimal.\nThe first point is quite evident: if f is not canonical its gcd k is such that\nk > 1 so \u2203g \u2208 F+ such that f = kg and f would not be minimal.\nThe second point is a direct application of theorem 2. However, canonical semiflows are not necessarily minimal semiflows; and minimal semiflows have not necessarily a minimal support. In the example of figure 1, f1 and f2 are canonical and minimal but their support is not minimal. Any semiflow f = ag1 + g2 + bg3 where a, b \u2208 N and a+ b > 0 is canonical and obviously not minimal. As a and b are as great as wanted, this is showing that the number of canonical semiflows can be infinite. Moreover, we can observe in this example that the support of this sequence of infinite canonical semiflows is not minimal. This is hinting on the following theorem\nTheorem 4. Given a support I, CI = |{fcanonical semiflow | \u2016f\u2016 = I}|,\nIf I is a minimal support then CI = 1 else CI is infinite. If CI = 1 then I is minimal\nFrom theorem 2, there is a unique minimal semiflow having a given minimal support. From lemma 2, a minimal semiflow is canonical. Hence, If I is minimal then CI = 1.\nIf I is not minimal then \u2203 e, f \u2208 F+ such that \u2016e\u2016 \u2282 \u2016f\u2016 = I. We can build an infinite sequence of semiflows fi, i \u2208 N such that fi = \u03b1i(f +kie) where 1/\u03b1i is the gcd of the non null coordinates of fi, and ki \u2208 N. \u2200i \u2208 N, fi is canonical by construction. Let\u2019s consider i, j such that fi = fj ; then \u03b1i(f+kie) = \u03b1j(f+kj). This leads to: (\u03b1i \u2212 \u03b1j)f = (ki \u2212 kj)e. However, since \u2016e\u2016 \u2282 \u2016f\u2016, we must have \u03b1i = \u03b1j and ki = kj . Hence, we built an infinite sequence of canonical semiflows based upon the infinite sequence of non negative integers.\nIf CI = 1 then let\u2019s f be the unique canonical semiflow of support I. Let\u2019s consider g \u2208 F+ such that \u2016g\u2016 \u2286 I. With the same construction as before, we can build a canonical semiflow h = \u03b1(f + kg) where 1/\u03b1i is the gcd of the non null coordinates of h, and k \u2208 N. We have \u2016h\u2016 = I and CI = 1, therefore, h = \u03b1(f + kg) = f . Then, g = ((1 \u2212 \u03b1)/k\u03b1)f which means that any semiflow of support included in I is a multiple of f . Hence, I is minimal.\nThe fact that the number of canonical semiflows can be infinite was already pointed out in [KJ87, CS89, CMPAW09]. The fact that this number is infinite only when the considered support is non minimal as described in theorem 4 is new to the best of our knowledge."
        },
        {
            "heading": "5. Minimal generating sets, least generating sets, and fundamental",
            "text": "sets\nMinimal generating sets have been defined over N in [Mem78], over Q+ in [Mem78, Mem83], and least generating sets over Q in [CS89, GV03]. Similarly to the notion of generating set defined in section 2.1, we slightly extend their definition to hold over a set S \u2208 {N, Q+,Q}.\nFrom [Mem83] p 39, a minimal generating set over S is a generating set that\ndoes not strictly include any generating set.\nFrom [CS89] p 82, or in [GV03] p 68, a least generating set of semiflows \u201dis made up of the least number of elements to generate any semiflow\u201d over S 5 In other words, G is a least generating set if and only if it does not exist a generating set H such that |H| \u2264 |G|.\nA minimal generating set is defined with respect to set inclusion while a least generating set is defined with respect to its cardinality. In the case of generating sets of semiflows, theorem 5 hereunder is a new result stating that these two different notions are in fact equivalent over S.\nLemma 3. If G is a generating set over Q+ or N, I a minimal support, then \u2203g \u2208 G such that I = \u2016g\u2016.\nWe consider e a semiflow of minimal support, G = {g1, ...gk}, a generating set over Q+ or N. Then, e = \u2211i=k\ni=1 \u03b1igi. All the coefficients are non negative\nand e 6= 0 then, \u2203j \u2264 k such that \u03b1j > 0 and e \u2265 \u03b1jgj . Since \u2016e\u2016 is minimal, \u2016e\u2016 = \u2016gj\u2016.\n5More precisely, the least generating set is defined over Q in [CS89, GV03] and over N in\n[CMPAW09].\nThis lemma states that any generating set over Q+ or N contains at least one semiflow per minimal support. Indeed, this point is not true over Q. In figure 2, G2 is a minimal generating set over Q+ and {g2, g3, g4} \u2282 G2 is a generating set over Q since g1 = g2 + g3 \u2212 g4 is of minimal support but generated over Q (since one coefficient is negative) by the other minimal semiflows of minimal support.\nTheorem 5. If G is a generating set over S, where S \u2208 {N,Q+,Q} then the two properties are equivalent:\nG is a minimal generating set, G is a least generating set.\nFirst, the fact that a least generating set be a minimal generating set is\nstraightforward and true in general.\nLet\u2019s consider G, a minimal generating set over N. By applying theorem 1, we directly conclude that G is the set of minimal semiflows and is a least generating set.\nLet\u2019s consider G, a minimal generating set over Q+. Then, the lemma 3 can apply stating that G includes G\u2032 a family of exactly one semiflow for each minimal support. From theorem 3, we draw that G\u2032 is a generating set. G is minimal then G = G\u2032. This being true for any minimal generating set, G is also a least generating set.\nLet\u2019s consider G, a minimal generating set over Q. From G we can extract a subset B of linearly independent semiflows (see [Lan02] p. 85 for basic results on vector spaces). Then, B is a least and minimal generating set over Q.\nTheorem 4 states that there is exactly one canonical semiflow for each min-\nimal support. This particularity characterizes the notion of fundamental set.\nIn [STC98] p 319, the set of all canonical semiflows of minimal support is\ncalled fundamental set.\nCorollary 1. (fundamental set) A fundamental set is a generating set over Q+ or Q but not necessarily over N.\nA fundamental set over Q+ is a minimal generating set but not necessarily\nover Q.\nThe first point of this corollary is a direct consequence of theorem 3 and lemma 2: we conclude that a fundamental set is one possible generating set over Q+ and therefore over Q.\nthe second point is directly deduced from the first point and lemma 3. The last parts of the two points of the corollary are illustrated by the two\nfollowing counterexamples:\nIn figure 1, G1 = {g1, g2, g3} is a fundamental set which is not a generating set over N since f1 or f2 are minimal and cannot be decomposed as a linear combination of elements of G1 over N 6.\nA fundamental set over Q is not necessarily a minimal generating set: in\nfigure 2, G2 is a fundamental set and is not a minimal generating set.\nAlso, the fact that a semiflow f belongs to a least generating set denoted by\nlgs does not provide it with a lot a properties 7:\nIf f \u2208 lgs over N then f is minimal but not necessarily canonical or of\nminimal support.\nIf f \u2208 lgs over Q+ then f has a minimal support but is not necessarily\ncanonical or minimal.\nf \u2208 lgs over Q then f is not necessarily minimal, not necessarily canonical\nor of minimal support.\n5.1. About uniqueness\nCorollary 2. (uniqueness) The set of minimal semiflows is the unique minimal generating set over N.\nIf G is a least generating set over Q+ then for any minimal support I of\nsemiflows, \u2203g \u2208 G unique such that I = \u2016g\u2016.\n6To this regard, the statement p.143-147 of [CMPAW09] must be rewritten. 7the properties 2.2 p. 82 of [CS89], 5.2.5 p.68 of [GV03] must be rewritten by taking the\nfollowing statements into account\nThe fundamental set is the unique minimal generating set of minimal semi-\nflows over Q+. In a given Petri Net, there exists only one fundamental set.\nThe first point can be directly deduced from theorem 1, the second and third\nones are directly deduced from theorems 2; 3 and lemma 2.\nThe third point of this corollary can be found in [STC98]. However, a minimal generating set over Q+ or Q is not unique even among\nminimal semiflows of minimal support. In the example of figure 2,\n{k1g1, k2g2, k3g3, k4g4} where ki \u2208 N constitutes a family of minimal generating sets over Q+. Also, G3 = {g1, g2, g3} and {g2, g3, g4} are two minimal generating sets over Q."
        },
        {
            "heading": "6. Results summary",
            "text": "We have seen through several counterexamples that no result must be taken for granted and that any proposition must be carefully proven. The table of figure 3 is summarizing the main results of this note."
        },
        {
            "heading": "7. Reasoning with invariants, an example",
            "text": "The example described figure 4 is a simplified version of a Petri Net published in [MM81] representing two subscribers (in idle state in places LA and A) who will have a conversation (places CLA and CA) then hang up (transitions t3, t4, t5 for LA and t8 for A) before going back to their idle states. During these operations, they exchange messages PU, R from LA to A and S, F from A to LA.\nFirst, let us notice that inequation 3 gives us the following bound for m, the number of supports: m \u2264 (\n9 b9/2c\n) = 126. However, it is easy to notice that the\ntransitions t1, t2, t8, t9 have only one input and one output which means that any support including such an input also includes the corresponding output to verify the equations associated to t1, t2, t8, t9. We can reduce the bound and\nhave: m = (\n5 b5/2c\n) = 10. It would be possible to improve again this bound by\nreasoning on the other transitions.\n7.1. Using two different generating sets for the same analysis\nWe then want to prove that the initial marking M0 such that M0(LA) = M0(A) = 1, M0(p) = 0 for any other place, is a home state (i.e. a marking such that whatever is the evolution of the Petri Net, it is always possible to reach it back) from which it is easy to deduce that the Petri Net is live.\nWe are going to prove this important property starting from two different generating sets. The first one is a minimal generating set over Q+ formed with GB1 = {f1, f2, f3} the set of minimal semiflows of minimal support defined figure 4; the second one is a minimal generating set over Q defined by GB2 = {f1, g = f2 + f3, h = f1 + f3}.\nFrom GB1, three invariants can be drawn: fT1 M = 1, fT2 M = 1, fT3 M = 1 for any reachable marking from M0. In other words, there is exactly one token in the support of any semiflow of GB1.\nTo prove that M0 is a home state, we start to prove that HS = {M | M(LA) = 1} is a home space (i.e. a set of marking such that whatever is the evolution of the Petri Net, it is always possible to reach one\nelement of the set). If we consider the invariant deduced from f2, we know that any reachable marking M is in one of the four following cases:\ni) M(LA) = 1, then M \u2208 HS, ii) M(F ) = 1, since fT2 M = 1, we have M(LA) = M(PU) = M(CA) = 0.\nFrom fT1 M = 1, we have three sub-cases:\nii-1) M(CLA) = 1, t3 can occur from M and we can reach M \u2032 \u2208 HS with\nM \u2032(LA) = 1\nii-2) M(W ) = 1, t6 can occur from M and we can reach M \u2032 \u2208 HS with\nM \u2032(LA) = 1\nii-3) M(S) = 1, t2 can occur from M then we are in the sub-case ii-1). iii) M(CA) = 1, t8 can occur from M then we are in the case ii). iv) M(PU) = 1, then considering the invariants deduced from f1 and f2, we\nhave: M(LA) = M(CLA) = M(W ) = M(F ) = M(S) = M(CA) = 0\nFrom fT3 M = 1, we have two sub-cases: iv-1) M(A) = 1, t7 can occur from M then we are in the case iii). iv-2) M(R) = 1, the sequence t9t7 can occur then we are in the case iii)\nagain.\nFrom these 4 cases and 5 sub-cases, we directly deduce that HS is a home space from where it is easy to conclude that M0 is a home state and the Petri Net is live.\nLet us now develop the same method of proof with the second generating set GB2. This time, we consider the invariant deduced from f1, we know that any reachable marking M is in one of the five following cases:\ni) M(LA) = 1, then M \u2208 HS, ii) M(W ) = 1, then considering the invariants deduced from f1, we have: M(LA) = M(CLA) = M(PU) = M(S) = 0 From hTM = 2, we have three possible sub-cases: ii-1) M(A) = 1, this time, gTM = 2 can be used to deduce two similar\nsub-sub-cases:\nii-1-\u03b1) M(F ) = 1, t6 can occur from M and we can reach M \u2032 \u2208 HS with\nM \u2032(LA) = 1\nii-1-\u03b2) M(CA) = 1, the sequence t8t6 can occur with the same result as in\nsub-sub-case ii-1-\u03b1).\nii-2) M(R) = 1, t9 can occur from M and we are in sub-case ii-1). ii-3) M(W ) = 2, this last sub-case does not satisfy the invariant deduced\nfrom f1 and must be discarded.\niii) MCLA) = 1, then considering the invariants deduced from f1 and h, we\nhave: M(LA) = M(W ) = M(PU) = M(S) = M(R) = M(A) = 0\nSimilarly as in case ii-1), we use gTM = 2 and have two sub-cases: iii-1) M(F ) = 1, t3 can occur from M and we can reach M \u2032 \u2208 HS with\nM \u2032(LA) = 1\niii-2) M(CA) = 1, the sequence t8t3 can occur with the same result as in\nsub-case iii-1).\niv) M(S) = 1, t2 can occur from M and we are back in the iii). v) M(PU) = 1,then considering the invariants deduced from f1, we have: M(LA) = M(W ) = M(CLA) = M(S) = 0, we then use gTM = 2 and have two sub-cases: v-1) M(A) = 1, t7 can occur from M and we can reach the case iii), v-2) M(R) = 1, t9 can occur from M and we can reach the case v-1). Since we started we the same amount of information, we fortunately reach the same conclusion however the second time with 5 more complex cases and 7 sub-cases and 2 sub-sub cases. We conclude that the smaller the support are, the more effective the analysis will be since cases and sub cases depend on the number of elements of each considered support. Of course, this is to balance with the complexity of computing minimal supports.\nThe same proof scheme could be used the same Petri Net enriched with\nparameters to model x subscribers of type LA and y of type A."
        },
        {
            "heading": "8. Conclusion",
            "text": "By considering N, then Q+, then Q, the size of a minimal generating set decreases as expected since more and more possibilities to combine semiflows are provided. More interestingly, if m is the number of minimal supports in a Petri Net then:\na minimal generating set over N is finite and has at least m elements, a minimal generating set over Q+ has exactly m elements, a minimal generating set over Q has at most m elements. Looking at canonical semiflows appears to us less significant. We have seen through the example of section 7 how gross the Sperner\u2019s bound is as well as a first idea to improve it. The same example provides us with a reason to consider non negative semiflows of minimal support. There exist other ones described in [CTSH03].\nWe have seen that the results in [GV03] p68 need to be rephrased and rather\nconsider the previous publication of the same authors [STC98, CMPAW09].\nAt last, we believe that these results may be extended along two dimensions. From a mathematical point of view, the relation with integer linear programming has been published many times particularly in [CS89], however, a private communication with D. Madore suggests to look at the notion of toric varieties and saturated semigroups. From a Petri Net theory point of view, it remains to apply them to a variety of Petri Nets (such as colored Petri Nets)."
        }
    ],
    "title": "A Note on Minimal Generating Sets for Semiflows",
    "year": 2023
}