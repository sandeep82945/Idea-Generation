{
    "abstractText": "In this work, a novel anti-saturation model-free adaptive control (AS-MFAC) algorithm is proposed for the problem of pure electric vehicle\u2019s braking energy recovery with the uncertain dynamic external factors. In the process of energy recovery during vehicle braking, actuator saturation and error accumulation occur due to various external conditions. In AS-MFAC, the non-linear dynamics of the vehicle braking energy recovery process is firstly linearized via a novel dynamical linearization technique with a time-varying parameter pseudo partial derivative (PPD). Then, by proposing the concept of the saturation parameter, the AS-MFAC controller is designed. Consequently, the stability and safety of the braking system are guaranteed while ensuring energy recovery. The major advantages of the AS-MFAC algorithm are that the controller uses only input and output data from the regenerative braking control system and this approach addresses the actuator saturation problem as well as provides a feasible solution. Moreover, the stability of the AS-MFAC algorithm is proven by rigorous mathematical theory and its effectiveness is verified by a series of experimental simulations. Remarkably, the proposed AS-MFAC controller has the property of symmetry since the controller structure and the corresponding parameter (time-varying PPD) estimator are both inferred based on the project algorithm. Consequently, the structures of the controller and the parameters of AS-MFAC have a symmetric similarity.",
    "authors": [
        {
            "affiliations": [],
            "name": "Jan Awrejcewicz"
        },
        {
            "affiliations": [],
            "name": "Shida Liu"
        },
        {
            "affiliations": [],
            "name": "Zhen Li"
        },
        {
            "affiliations": [],
            "name": "Honghai Ji"
        },
        {
            "affiliations": [],
            "name": "Li Wang"
        },
        {
            "affiliations": [],
            "name": "Zhongsheng Hou"
        }
    ],
    "id": "SP:3f79476cf52fcf8118323fe27b2513a3b430052e",
    "references": [
        {
            "authors": [
                "Z. Zhongshi",
                "M. Ruihai",
                "W. Lifang",
                "Z. Junzhi"
            ],
            "title": "Novel PMSM Control for Anti-Lock Braking Considering Transmission Properties of the Electric Vehicle",
            "venue": "IEEE Trans. Veh. Technol",
            "year": 2018
        },
        {
            "authors": [
                "A. Kr\u00f3l",
                "G. Sierpi\u0144ski"
            ],
            "title": "Application of a Genetic Algorithm With a Fuzzy Objective Function for Optimized Siting of Electric Vehicle Charging Devices in Urban Road Networks",
            "venue": "IEEE Trans. Intell. Transp. Syst",
            "year": 2021
        },
        {
            "authors": [
                "S. Mehta",
                "S. Hemamalini"
            ],
            "title": "A Dual Control Regenerative Braking Strategy for Two-Wheeler Application",
            "venue": "Energy Procedia",
            "year": 2017
        },
        {
            "authors": [
                "S. Hardman",
                "A. Chandan",
                "G. Tal",
                "T. Turrentine"
            ],
            "title": "The effectiveness of financial purchase incentives for battery electric vehicles\u2014A review of the evidence",
            "venue": "Renew. Sustain. Energy Rev",
            "year": 2017
        },
        {
            "authors": [
                "Y. Gao",
                "L. Chen",
                "M. Ehsani"
            ],
            "title": "Investigation of the Effectiveness of Regenerative Braking for EV and HEV",
            "venue": "SAE Trans",
            "year": 1999
        },
        {
            "authors": [
                "M. Masih-Tehrani",
                "M. Dahmardeh"
            ],
            "title": "A Novel Power Distribution System Employing State of Available Power Estimation for a Hybrid Energy Storage System",
            "venue": "IEEE Trans. Ind. Electron",
            "year": 2018
        },
        {
            "authors": [
                "S. Jung",
                "J. Ko"
            ],
            "title": "Study on Regenerative Energy RecoSvery of Electric Vehicle Through Voltage Control Using Switched Capacitor",
            "venue": "IEEE Trans. Veh. Technol",
            "year": 2021
        },
        {
            "authors": [
                "J. Ko",
                "S. Ko",
                "H. Son",
                "B. Yoo",
                "J. Cheon",
                "H. Kim"
            ],
            "title": "Development of Brake System and Regenerative Braking Cooperative Control Algorithm for Automatic-Transmission-Based Hybrid Electric Vehicles",
            "venue": "IEEE Trans. Veh. Technol",
            "year": 2015
        },
        {
            "authors": [
                "S. Heydari",
                "P. Fajri",
                "M. Rasheduzzaman",
                "R. Sabzehgar"
            ],
            "title": "Maximizing Regenerative Braking Energy Recovery of Electric Vehicles Through Dynamic Low-Speed Cutoff Point Detection",
            "venue": "IEEE Trans. Transp. Electrif. 2019,",
            "year": 2019
        },
        {
            "authors": [
                "N. Fujiki",
                "Y. Koike",
                "Y. Ito",
                "G. Suzuki",
                "S. Gotoh",
                "O. Yukio",
                "T. Yamagucki"
            ],
            "title": "Development of an Electrically-Driven Intelligent Brake System for EV",
            "venue": "Autom. Veh. Technol",
            "year": 2011
        },
        {
            "authors": [
                "C. Aldred"
            ],
            "title": "Brake applied to recall cover",
            "venue": "Bus. Insur. 2004,",
            "year": 2004
        },
        {
            "authors": [
                "Y. Aoki",
                "K. Suzuki",
                "H. Nakano",
                "Y. Nojiri",
                "T. Shirase",
                "K. Sakai"
            ],
            "title": "Development of Hydraulic Servo Brake System for Hybrid Vehicle",
            "venue": "Trans. Soc. Automot. Eng. Jpn",
            "year": 2007
        },
        {
            "authors": [
                "E. Nakamura",
                "M. Soga",
                "A. Sakai",
                "A. Otomo",
                "T. Kobayashi"
            ],
            "title": "Development of Electrically Controlled Brake System for Hybrid Vehicle; SAE Technical Papers; SAE International: Warrendale, PA",
            "year": 2002
        },
        {
            "authors": [
                "T. Rigaut",
                "P. Carpentier",
                "J.P. Chancelier",
                "M. De Lara",
                "J. Waeytens"
            ],
            "title": "Stochastic Optimization of Braking Energy Storage and Ventilation in a Subway Station",
            "venue": "IEEE Trans. Power Syst",
            "year": 2019
        },
        {
            "authors": [
                "H. Peng",
                "W. Wang",
                "C. Xiang",
                "L. Li",
                "X. Wang"
            ],
            "title": "Torque Coordinated Control of Four In-Wheel Motor Independent-Drive Vehicles With Consideration of the Safety and Economy",
            "venue": "IEEE Trans. Veh. Technol",
            "year": 2019
        },
        {
            "authors": [
                "W. Xu",
                "H. Chen",
                "H. Zhao",
                "B. Ren"
            ],
            "title": "Torque optimization control for electric vehicles with four in-wheel motors equipped with regenerative braking system",
            "venue": "Mechatronics",
            "year": 2019
        },
        {
            "authors": [
                "X. Guoqing",
                "X. Kun",
                "Z. Chunhua",
                "Z. Xinye",
                "Z. Taimoor"
            ],
            "title": "Fully Electrified Regenerative Braking Control for Deep Energy Recovery and Maintaining Safety of Electric Vehicles",
            "venue": "IEEE Trans. Veh. Technol",
            "year": 2016
        },
        {
            "authors": [
                "M. Fnadi",
                "W. Du",
                "F. Plumet",
                "F. Benamar"
            ],
            "title": "Constrained Model Predictive Control for dynamic path tracking of a bi-steerable rover on slippery grounds",
            "venue": "Control Eng. Pract",
            "year": 2021
        },
        {
            "authors": [
                "J. Gao",
                "G. Zhang",
                "P. Wu",
                "X. Zhao",
                "T. Wang",
                "W. Yan"
            ],
            "title": "Model Predictive Visual Servoing of Fully-Actuated Underwater Vehicles With a Sliding Mode Disturbance Observer",
            "venue": "IEEE Access 2019,",
            "year": 2019
        },
        {
            "authors": [
                "M. Fnadi",
                "J. Alexandre dit Sandretto"
            ],
            "title": "Experimental Validation of a Guaranteed Nonlinear Model Predictive Control",
            "venue": "Algorithms",
            "year": 2021
        },
        {
            "authors": [
                "Y. Zhang",
                "H. Zhang",
                "C. Yang",
                "C. Xiang",
                "L. Li"
            ],
            "title": "Research on predictive control strategy for efficient braking energy recovery of hybrid electric bus based on new improved genetic algorithm",
            "venue": "J. Mech. Eng. 2020,",
            "year": 2020
        },
        {
            "authors": [
                "R. Deng",
                "Y. Liu",
                "W. Chen",
                "H. Liang"
            ],
            "title": "A Survey on Electric Buses\u2014Energy Storage, Power Management, and Charging Scheduling",
            "venue": "IEEE Trans. Intell. Transp. Syst",
            "year": 2021
        },
        {
            "authors": [
                "X. Huang",
                "J. Wang"
            ],
            "title": "Model Predictive Regenerative Braking Control for Lightweight Electric Vehicles with in-Wheel Motors",
            "venue": "J. Automob. Eng",
            "year": 2012
        },
        {
            "authors": [
                "W. Yaonan",
                "Z. Xizheng",
                "Y. Xiaofang",
                "L. Guorong"
            ],
            "title": "Position-Sensorless Hybrid Sliding-Mode Control of Electric Vehicles With Brushless DC Motor",
            "venue": "IEEE Trans. Veh. Technol",
            "year": 2011
        },
        {
            "authors": [
                "C. Wang",
                "W. Zhao",
                "W. Li"
            ],
            "title": "Braking sense consistency strategy of electro-hydraulic composite braking system",
            "venue": "Mech. Syst. Signal Process",
            "year": 2018
        },
        {
            "authors": [
                "H.S. Hoang",
                "R. Baraille"
            ],
            "title": "A simple numerical method based simultaneous stochastic perturbation for estimation of high dimensional matrices",
            "venue": "Multidimens. Syst. Signal Process",
            "year": 2018
        },
        {
            "authors": [
                "Z. Hou",
                "S. Jin"
            ],
            "title": "A Novel Data-Driven Control Approach for a Class of Discrete-Time Nonlinear Systems",
            "venue": "IEEE Trans. Control Syst. Technol",
            "year": 2011
        },
        {
            "authors": [
                "M.G. Safonov",
                "T.-C. Tsao"
            ],
            "title": "The unfalsified control concept and learning",
            "venue": "IEEE Trans. Autom. Control",
            "year": 1997
        },
        {
            "authors": [
                "H. Hjalmarsson",
                "M. Gevers",
                "S. Gunnarsson",
                "O. Lequin"
            ],
            "title": "Iterative Feedback Tuning: Theory and Applications",
            "venue": "IEEE Control Syst",
            "year": 1998
        },
        {
            "authors": [
                "F. Previde",
                "D. Belloli",
                "A. Cologne",
                "S.M. Savaresi"
            ],
            "title": "Virtual Reference Feedback Tuning (VRFT) Design of Cascade Control Systems with Application to an Electro-Hydrostatic Actuator",
            "venue": "IFAC Proc. Vol",
            "year": 2010
        },
        {
            "authors": [
                "D. Meng",
                "K.L. Moore"
            ],
            "title": "Robust Iterative Learning Control for Nonrepetitive Uncertain Systems",
            "venue": "IEEE Trans. Autom. Control",
            "year": 2017
        },
        {
            "authors": [
                "H. Ji",
                "Y. Wei",
                "L. Fan",
                "S. Liu",
                "Y. Wang",
                "L. Wang"
            ],
            "title": "Disturbance-Improved Model-Free Adaptive Prediction Control for Discrete-Time Nonlinear Systems with Time Delay",
            "venue": "Symmetry",
            "year": 2021
        },
        {
            "authors": [
                "L. Shida",
                "H. Zhongsheng",
                "T. Taotao",
                "D. Zhidong",
                "L. Zhenxuan"
            ],
            "title": "A Novel Dual Successive Projection-Based Model-Free Adaptive Control Method and Application to an Autonomous Car",
            "venue": "IEEE Trans. Neural Netw. Learn. Syst",
            "year": 2019
        },
        {
            "authors": [
                "L. Coelho",
                "A. Coelho"
            ],
            "title": "Model-free adaptive control optimization using a chaotic particle swarm approach",
            "venue": "Chaos Solitons Fractals",
            "year": 2009
        },
        {
            "authors": [
                "W. Rong-Jong",
                "Y. Zhi-Wei"
            ],
            "title": "Adaptive Fuzzy Neural Network Control Design via a T\u2013S Fuzzy Model for a Robot Manipulator Including Actuator Dynamics",
            "venue": "IEEE Trans. Syst. Man Cybern",
            "year": 2019
        },
        {
            "authors": [
                "K.K. Tan",
                "T.H. Lee",
                "S.N. Huang",
                "F.M. Leu"
            ],
            "title": "Adaptive-Predictive Control of a Class of SISO Nonlinear Systems",
            "venue": "Dyn. Control",
            "year": 2001
        },
        {
            "authors": [
                "W. Li",
                "H. Du"
            ],
            "title": "Four-Wheel Electric Braking System Configuration With New Braking Torque Distribution Strategy for Improving Energy Recovery Efficiency",
            "venue": "IEEE Trans. Intell. Transp. Syst",
            "year": 2020
        },
        {
            "authors": [
                "N. Jabbour",
                "C. Mademlis"
            ],
            "title": "Supercapacitor-Based Energy Recovery System With Improved Power Control and Energy Management for Elevator Applications",
            "venue": "IEEE Trans. Power Electron",
            "year": 2017
        },
        {
            "authors": [
                "J. Ni",
                "J. Hu",
                "C. Xiang"
            ],
            "title": "Control-Configured-Vehicle Design and Implementation on an X-by-Wire Electric Vehicle",
            "venue": "IEEE Trans. Veh. Technol",
            "year": 2018
        },
        {
            "authors": [
                "Z. Xudong",
                "G. Dietmar",
                "L. Jiayuan"
            ],
            "title": "Energy-Efficient Toque Allocation Design of Traction and Regenerative Braking for Distributed Drive Electric Vehicles",
            "venue": "IEEE Trans. Veh. Technol",
            "year": 2018
        },
        {
            "authors": [
                "J.C. Wang",
                "R. He",
                "Y.B. Kim"
            ],
            "title": "Optimal Anti-Lock Braking Control With Nonlinear Variable Voltage Charging Scheme for an Electric Vehicle",
            "venue": "IEEE Trans. Veh. Technol",
            "year": 2020
        },
        {
            "authors": [
                "B. Liu",
                "L. Li",
                "X. Wang",
                "S. Cheng"
            ],
            "title": "Hybrid Electric Vehicle Downshifting Strategy Based on Stochastic Dynamic Programming During Regenerative Braking Process",
            "venue": "IEEE Trans. Veh. Technol",
            "year": 2018
        },
        {
            "authors": [
                "C. Liang",
                "H. Qiang",
                "F. Zicheng",
                "L. Zhe",
                "P. Yanwen"
            ],
            "title": "Research on regenerative braking control strategy of pure electric vehicle",
            "venue": "J. Automot. Eng. 2016,",
            "year": 2016
        },
        {
            "authors": [
                "G.V. Kumar",
                "C.H. Chuang",
                "M.Z. Lu",
                "C.-M. Liaw"
            ],
            "title": "Development of an Electric Vehicle Synchronous Reluctance Motor Drive",
            "venue": "IEEE Trans. Veh. Technol",
            "year": 2020
        },
        {
            "authors": [
                "W. Naranjo",
                "L.E.M. Camargo",
                "J.E. Pereda",
                "C. Cortes"
            ],
            "title": "Design of Electric Buses of Rapid Transit Using Hybrid Energy Storage and Local Traffic Parameters",
            "venue": "IEEE Trans. Veh. Technol",
            "year": 2017
        },
        {
            "authors": [
                "D. Tavernini",
                "F. Vacca",
                "M. Metzler",
                "D. Savitski",
                "V. Ivanov",
                "P. Gruber",
                "A.E. Hartavi",
                "M. Dhaens",
                "A. Sorniotti"
            ],
            "title": "An Explicit Nonlinear Model Predictive ABS Controller for Electro-Hydraulic Braking Systems",
            "venue": "IEEE Trans. Ind. Electron",
            "year": 2019
        },
        {
            "authors": [
                "K. Donghyun",
                "K. Chulsoo",
                "H. Sungho",
                "K. Hyunsoo"
            ],
            "title": "Hardware in the Loop Simulation of Vehicle Stability Control using Regenerative Braking and Electro Hydraulic Brake for Hybrid Electric Vehicle",
            "venue": "IFAC Proc. Vol",
            "year": 2008
        },
        {
            "authors": [
                "M. Fnadi",
                "F. Plumet",
                "F. Benamar"
            ],
            "title": "Nonlinear Tire Cornering Stiffness Observer for a Double Steering Off-Road Mobile Robot",
            "venue": "In Proceedings of the 2019 International Conference on Robotics and Automation (ICRA), Montreal, QC, Canada,",
            "year": 2019
        },
        {
            "authors": [
                "M. Oudghiri",
                "M. Chadli",
                "A.E. Hajjaji"
            ],
            "title": "Lateral vehicle velocity estimation using fuzzy sliding mode observer",
            "venue": "In Proceedings of the Conference on Control & Automation, Ajaccio, France,",
            "year": 2008
        }
    ],
    "sections": [
        {
            "text": "Citation: Liu, S.; Li, Z.; Ji, H.; Wang,\nL.; Hou, Z. A Novel Anti-Saturation\nModel-Free Adaptive Control\nAlgorithm and Its Application in the\nElectric Vehicle Braking Energy\nRecovery System. Symmetry 2022, 14,\n580. https://doi.org/10.3390/\nsym14030580\nAcademic Editor: Jan Awrejcewicz\nReceived: 19 February 2022\nAccepted: 13 March 2022\nPublished: 15 March 2022\nPublisher\u2019s Note: MDPI stays neutral\nwith regard to jurisdictional claims in\npublished maps and institutional affil-\niations.\nCopyright: \u00a9 2022 by the authors.\nLicensee MDPI, Basel, Switzerland.\nThis article is an open access article\ndistributed under the terms and\nconditions of the Creative Commons\nAttribution (CC BY) license (https://\ncreativecommons.org/licenses/by/\n4.0/).\nKeywords: anti-saturation model-free adaptive control; pure electric vehicle; braking energy recovery\n1. Introduction\nIn the current situation of limited battery energy, there is a large gap between the driving range of pure electric vehicles (PEVs) and traditional internal combustion engine vehicles [1\u20133]. Energy consumption analyses of vehicles and improving the utilization rate of energy are important to improve the driving range of PEV [4]. Studies have shown that in urban driving conditions, from 30% to 50% of driving energy is consumed by the braking process, thus the recycling of braking energy is key to improving the driving range of PEV [5\u20137]. Research on the control of braking energy is necessary to be studied. Braking energy recovery means that in the deceleration or braking process of an electric vehicle, by using assistant braking, which is added by the electric motor, some kinetic energy during braking can be regenerated into the battery to improve the energy utilization efficiency and endurance of the vehicle [8,9]. At present, most of the braking energy recovery systems in PEV combine hydraulic breaking and motor braking [10]. In recent years, this composite braking control strategy has gradually become the object of research on braking energy recovery and the subject of development by major automobile enterprises, such as General Motors in the United States [11] and both Nissan and Toyota in Japan [12,13]. The distribution strategy of the braking system is very important for energy feedback efficiency because only the driving wheels of a pure electric vehicle can recover energy [14].\nSymmetry 2022, 14, 580. https://doi.org/10.3390/sym14030580 https://www.mdpi.com/journal/symmetry\nSymmetry 2022, 14, 580 2 of 17\nHow to reasonably distribute the braking torque and recover the braking energy as much as possible on the basis of ensuring vehicle braking safety and effectiveness has been always the most critical problem of regenerative braking systems [15\u201317]. Therefore, the essence of this research study is on braking energy recovery, focusing on controlling the reasonable distribution of the braking force. For the problem of braking energy recovery, some model-based control methods can be applied [18\u201320]. In recent years, through the research of many scholars, the braking energy recovery technology of EVs has been continuously improved and developed. Focusing on the distribution control of braking energy recovery, Reference [21] proposed a predictive control strategy of braking energy recovery based on an improved genetic algorithm to ensure the balance and optimization of vehicle stability and economy. Reference [22] took the position of the brake pedal and the value of the state of charge (SOC) of the battery as input as well as the proportion of the motor braking force in the total braking force as the output to more accurately control the distribution of braking force according to the driving state. Reference [23] proposed a non-linear model of a predictive controller for a regenerative braking system that improved regenerative energy by distributing front and rear braking force moments. Reference [24], combined with the neural network algorithm, proposed a braking torque control strategy based on the neural network algorithm. Reference [25] comprehensively considered the braking feeling, braking energy recovery, and braking stability, and used a particle swarm optimization algorithm to optimize the distribution of the proportion of braking torque. However, the above research did not consider the vehicle as a complex non-linear system with many model variables that operate under changing parameters and conditions. It is obviously not feasible to establish an accurate dynamic model of a vehicle and then design a control system. Aiming at the above problems, in order to solve the problems caused by inaccurate dynamic modeling of the vehicle regenerative braking system, a data-driven control method is introduced in this paper. Since the 1990s, a variety of data-driven control methods emerged in academia, such as the synchronous perturbation random approximation algorithm [26], model-free adaptive control method (MFAC) algorithm [27], unfalsified control algorithm [28], iterative feedback tuning algorithm [29], virtual reference feedback tuning algorithm [30], and iterative learning control algorithm [31]. Among them, the MFAC algorithm, a typical data-driven control algorithm, has the advantage of requiring a small amount of calculation and having strong adaptability [32]; it has strong robustness and a good control effect for non-linear systems. MFAC has been successfully applied in many practical applications, such as autonomous car control [33], chemical industry [34], robot manipulator control [35], the injection molding process [36], etc. Therefore, focusing on the problem of vehicle regenerative braking, this paper will take MFAC as the main method. In actual driving, due to the particularity of compound braking and other unpredictable external conditions (entering wading sections, bad road conditions, etc.), the vehicle braking force distribution strategy cannot achieve the goal quickly [37\u201339], which leads to large error accumulation in the vehicle braking process of the MFAC algorithm, relying on output data. Accumulated errors cause actuator saturation, which leads to large overshoots and affects the vehicle control. At present, there is little research on the antisaturation of MFAC. Therefore, it is of great practical significance to study the MFAC method when the actuator is saturated. The contribution of this paper is to propose an anti-saturation model-free adaptive control (AS-MFAC) algorithm to realize the control of the regenerative braking system. In the AS-MFAC algorithm, the non-linear dynamics of the vehicle braking energy recovery process are first linearized via a novel dynamical linearization technique with a timevarying parameter pseudo partial derivative (PPD). Then, the AS-MFAC controller is designed via a proposed concept for the saturation parameter. This scheme uses only (input and output) I/O data during vehicle operation and does not contain information about the vehicle model. Thus, it has strong portability for use in different vehicles. The main\nSymmetry 2022, 14, 580 3 of 17\ndifference between the AS-MFAC and prototype MFAC method is that when establishing and solving the corresponding optimization problem, the actuator saturation caused by error accumulation is considered and the anti-saturation problem is dealt with in the algorithm. The stability of the method is mathematically proven and a semi-physical simulation proves the effectiveness of the proposed method. The rest of this paper is organized as follows. In Section 2, the braking force distribution strategy of the driving and driven wheels during longitudinal braking of electric vehicles is studied. Section 3 introduces the AS-MFAC regenerative braking control strategy. Section 4 describes the results of simulations of the regenerative braking control strategy of the AS-MFAC algorithm. Section 5 summarizes the main conclusions of this paper and discusses future work.\n2. Design of Braking Energy Optimization Controller and Dynamic Analysis of Braking Process 2.1. Dynamics Description of Regenerative Braking System\nBraking energy recovery means that when the electric vehicle executes a deceleration or stop command, the motor braking is used to recover the braking energy and return this part of the energy to the energy storage device [40]. At this time, the motor is used as a generator [41]. When the electric vehicle is driven next time, the battery can drive the motor with the recovered energy to generate driving torque. At this time, the motor is used as an engine [42]. Figure 1 shows a braking energy recovery system for an electric vehicle.\nSymmetry 2022, 14, x FOR PEER REVIEW 3 of 19\nprocess are first linearized via a novel dynamical linearization technique with a time-varying parameter pseudo partial derivative (PPD). Then, the AS-MFAC controller is designed via a proposed concept for the saturation parameter. This scheme uses only (input and output) I/O data during vehicle operation and does not contain information about the vehicle model. Thus, it has strong portability for use in different vehicles. The main difference between the AS-MFAC and prototype MFAC method is that when establishing and solving the corresponding optimization problem, the actuator saturation caused by error accumulation is considered and the anti-saturation problem is dealt with in the algorithm. The stability of the method is mathematically proven and a semi-physical simulation proves the effective ess of the proposed et od. The rest of this paper is organized s follows. I Chapter 2, the braking force distribution strategy of the driving and driven wheels during longitu inal braking of electric vehicles is studied. Chapter 3 introduces the AS-MFAC regenerative braking control strategy. Chapter 4 describes the results of simulations of the regenerative braking control strategy of the AS-MFAC algorithm. Chapter 5 summarizes the main conclusions of this paper and discusses future work.\n2. Design of Braking Energy Optimization Controller and Dynamic Analysis of Braking Process 2.1. Dynamics Description of Regenerative Braking System\nBraking energy rec very means th t when the electric vehicle executes a deceleration or stop command, the motor braking is used to r cover t e braking energy and return this part f the energy to the ene gy storage evic [40]. At this tim , the moto is used as a gener tor [41]. When the lect ic vehicl is driven next time, the battery can drive the motor with the recovered energy to generate driving torque. At this time, the motor is used as an engine [42]. Figure 1 shows a braking energy recovery system for an electric vehicle.\nFigure 1. Mazda i-eloop braking energy recovery system.\nFigure 2 shows the basic control principle of the braking energy recovery system. The braking controller determines the front and rear axle braking forces according to the braking demand, vehicle speed, and other signals, and then distributes the motor braking force and mechanical braking force. The specific control strategy is embedded in the front/rear electric/hydraulic braking coordination controller [43]. After the distribution of forces, the brake controller sends a control signal to the motor control unit and hydraulic control unit. In general, only the rear wheels (driving wheels) of the double drive pure electric bus can recover energy [44]. The greater the braking force allocated to the rear wheels, the higher the braking energy recovery efficiency of the whole vehicle. However, if too much braking force is distributed to the rear wheels, then the rear wheels lock before the front wheels and the rear wheels sideslip (i.e., lateral sliding), which makes the vehicle rotate uncontrollably [45,46]. Only when the front and rear wheels lock at the same time can the\nFigure 1. Mazda i-eloop braking energy recovery system.\nFigure 2 shows the basic control principle of the braking energy recovery system. The braking controller determines the front and rear axle braking forces according to the braking demand, vehicle speed, and other signals, and then distributes the motor braking force and mechanical braking force. The specific control strategy is embedded in the front/r ar electric/hydraulic braking coordination controller [43]. After the istribution of for es, the brake controller sends a control sig al to the motor control unit and hydraulic control unit. In general, only the rear wheels (driving wheels) of the double drive pure electric bus can recover energy [44]. The greater the braking force allocated to the rear wheels, the higher the braking energy recovery efficiency of the whole vehicle. However, if too much braking force is distributed to the rear wheels, then the rear wheels lock before the front wheels and the rear wheels sideslip (i.e., lateral sliding), which makes the vehicle rotate uncontrollably [45,46]. Only when the front and rear wheels lock at the same time can the vehicle be in a stable state and make full use of the longitudinal adhesion coefficient [47]. How to distribute more braking force to the rear wheels and ensure the braking stability of the whole vehicle are key research points in this subject area.\nSymmetry 2022, 14, 580 4 of 17\nSymmetry 2022, 14, x FOR PEER REVIEW 4 of 19\nvehicle be in a stable state and make full use of the longitudinal adhesion coefficient [47]. How to distribute more braking force to the rear wheels and ensure the braking stability of the whole vehicle are key research points in this subject area.\nFigure 2. Basic principle of the braking energy recovery system.\n2.2. Forces during Braking and Braking Force Distribution Before analyzing the braking force distribution ratio of the front and rear brakes, the forces during braking must be understood. Taking the BAIC BJ6123EVCA-52 pure electric city bus as an example, Figure 3 shows the stress analysis diagram during its operation.\nFigure 3. Stress diagram of a pure electric bus.\nAs shown in the figure above, the torque for the rear wheel grounding point is\n1 dvW L = Gb + m h dt\n(1)\nwhere: W1 represents the normal reaction force of the ground facing the front wheel (N); G represents the force of gravity on the vehicle (N); b represents the distance from the vehicle centroid to the centerline of the rear axle (mm); m is the vehicle mass (kg); h is the height of the vehicle centroid (mm); and dv/dt indicates the deceleration of the vehicle ( 2m/s ).\nIn taking the torque for the front wheel grounding point, we obtain\n2 \u2212 dvW L = Ga m h dt\n(2)\nFigure 2. Basic principle of the braking energy recovery system.\n2.2. Forces during Braking and Braking Force Distribution\nBefore analyzing the braking force distribution ratio of the front and rear brakes, the forces during braking must be understood. Taking the BAIC BJ6123EVCA-52 pure electric city bus as an example, Figure 3 shows the stress analysis diagram during its operation.\nSymmetry 2022, 14, x FOR PEER REVIEW 4 of 19\nvehicle be in a stable state and make full use of the longitudinal adhesion coefficient [47]. How to distribute more braking force to the rear wheels and ensur the braking stability of the whole vehicle are key research p ints in this subject ar a.\nFigure 2. Basic principle of the braking energy recovery system.\n2.2. Forces during Braking and Braking Force Distribution Before analyzing the braking force distribution ratio of the front and rear brakes, the forces during braking must be unde stood. Taking the BAIC BJ6123EVCA-52 pure lectric city bus as an example, Figure 3 shows the stress analysis diagram during its op ration.\nFigure 3. Stress diagram of a pure electric bus.\nAs shown in the figure above, the torque for the rear wheel grounding point is\n1 dvW L = Gb + m h dt\n(1)\nwhere: W1 represents the normal reaction force of the ground facing the front wheel (N); G represents the force of gravity on the vehicle (N); b distance from the vehicl centroid to the centerline of the rear axle (mm); m is the vehicl mass (kg); h h ight of the vehicle centroid (mm); and dv/dt indicates the deceleration of the vehicle ( 2m/s ).\nIn taking the torque for the front wheel grounding point, we obtain\n2 \u2212 dvW L = Ga m h dt\n(2)\nFigure 3. Stress diagra of a pure electric bus.\ns sho n in the figure above, the torque for the rear whe l grounding point is\nW1L = Gb + m dv dt h (1)\nwhere:\nW1 represents the normal reaction force of the ground facing the front wheel (N); G represents the force of gravity on the vehicle (N); b represents the distance from the vehicle centroid to the centerline of the rear axle (mm); m is the vehicle mass (kg); h is the height of the vehicle centroid (mm); and dv/dt indicates the deceleration of the vehicle (m/s2).\nIn taking the torque for the front wheel grounding point, we obtain\nW2L = Ga\u2212 dv dt h (2)\nwhere:\nW2 represents the normal reaction force of the ground facing the rear wheel (N) and a represents the distance from the vehicle centroid to the centerline of the front axle (mm).\nSymmetry 2022, 14, 580 5 of 17\nThen, the ground normal reaction force can be obtained as{ W1 = GL (b + h g dv dt )\nW2 = GL (a\u2212 h g dv dt )\n(3)\nwhere:\ng represents the acceleration of gravity.\nIf the front and rear wheels lock (successively or simultaneously) under the adhesion coefficient \u03b3, then the total braking force of vehicle F = \u03b3G, dv/dt = \u03b3g, and the following equations can be obtained. {\nW1 = GL (b + \u03b3h) W2 = GL (a\u2212 \u03b3h)\n(4)\nwhere:\n\u03b3 represents the road adhesion coefficient.\nOn the road surface with any adhesion coefficient \u03b3, the condition of simultaneous locking of the front and rear wheels is that the sum of the braking forces of the front and rear wheels is equal to the adhesion, and the braking forces of the front and rear brakes are equal to their respective adhesion, that is:\nF\u00b51 + F\u00b52 = \u03b3G F\u00b51 = \u03b3W1 F\u00b52 = \u03b3W2\n(5)\nor { F\u00b51 + F\u00b52 = \u03b3G\nF\u00b51 F\u00b52 = W1W2 (6)\nwhere:\nF\u00b51 represents the braking force of the front wheel brake and F\u00b52 represents the braking force of the rear wheel brake.\nSubstituting Equation (4) into Equation (6) yields:{ F\u00b51 + F\u00b52 = \u03b3G\nF\u00b51 F\u00b52 = b+\u03b3ha\u2212\u03b3h (7)\nEliminating the variable \u03b3 obtains:\nF\u00b52 = 1 2 [ G h\n\u221a b2 +\n4hL G F\u00b51 \u2212 ( G h + 2F\u00b51)] (8)\nIn Equation (8), the change in the weight of the vehicle G has the greatest impact on braking and G can be measured by the vehicle\u2019s own sensor. Other parameters such as L, b, and h can be regarded as constants. Therefore, Equation (8) can be described by the following non-linear discrete time dynamic system:\nF\u00b52(k + 1) = f (F(k), F(k\u2212 1), . . . F(k\u2212 nF), F\u00b52(k), F\u00b52(k\u2212 1), . . . , F\u00b52(k\u2212 nF\u00b52)) (9)\nwhere F(k) and F\u00b52(k) represent the total braking torque and rear wheel braking torque at time k, respectively; nF and nF\u00b52 are two unknown positive integers; and f (. . .) : R\nnF+nF\u00b52 +2 7\u2192 R is an unknown non-linear function. According to Equation (8), a curve can be drawn, that is, the relationship curve between the braking force of the front and rear brakes when the front and rear wheels are locked at the same time: the ideal braking force distribution curve of the front and rear\nSymmetry 2022, 14, 580 6 of 17\nbrakes, referred to as line I for short [25]. Line I is a kind of complex non-linear function that is closely related to the center of gravity and weight of the vehicle, as well as to other parameters. According to the technical parameters of the vehicle in Table 1, Figure 4 shows line I of the vehicle under no-load and fully loaded conditions.\nTable 1. Technical parameters of BAIC BJ6123EVCA-52.\nParameter Name Symbol Numerical Value\nCurb weight (complete vehicle) kg 11,600/12,000 Wheelbase mm 5900\nFront suspension mm 2670 Rear suspension mm 3430\nMaximum number of passengers person 60\nSymmetry 2022, 14, x FOR PEER REVIEW 6 of 19 In Equation (8), the change in the weight of the vehicle G has the greatest impact on braking and G can be measured by the vehicle\u2019s own sensor. Other parameters such as L, b, and h can be regarded as constants. Therefore, Equation (8) can be described by the following non-linear discrete time dynamic system: 1 1 1+ = \u2212 \u2212 \u2212 \u2212 \u03bc\u03bc F \u03bc \u03bc \u03bc F F k f F k F k F k n F k F k F k n 22 2 2 2 ( ) ( ( ), ( ),... ( ), ( ), ( ),..., ( )) (9)\nwhere ( )F k and 2 ( )F k\u03bc represent the total braking torque and rear wheel braking torque at time k, respectively; Fn and 2 Fn \u03bc are two unknown positive integers; and\n2F F n \u03bc  n + + f ... : R R 2 ( ) is an unknown non-linear function.\nAccording to Equation (8), a curve can be drawn, that is, the relationship curve between the braking force of the front and rear brakes when the front and rear wheels are locked at the same time: the ideal braking force distribution curve of the front and rear brakes, referred to as line I for short [25]. Line I is a kind of complex non-linear function that is closely elated to the center of gravity and weight of the vehic , as we l as to other parameters. According t the technical parameters of the ve icl in Table 1, Figure 4 shows line I of the vehicle under no-lo d and fully loaded conditio s.\nTable 1. Technical parameters of BAIC BJ6123EVCA-52.\nParameter Name Symbol Numerical Value Curb weight (complete vehicle) kg 11,600/12,000\nWheelbase mm 5900 Front suspension mm 2670 Rear suspension mm 3430\nMaximum number of passengers person 60\nFigure 4. Line I of the pure electric bus.\nIn Figure 4, the longitudinal and traverse axes represent the braking torques of the rear and front axles of the vehicle, respectively. If the braking force distribution curve is above line I, the unstable working condition of locking the rear wheel first will occur; if the braking force distribution curve is below line I, the recovery efficiency of the vehicle cannot be guaranteed. Only when the braking forces of the front and rear axles of the\nFigure 4. Line I of the pure electric bus.\nIn Figure 4, the longitudin l and traverse axes repr sent the braking torques of the re r and front axles of the vehicle, respectively. If the braking force distribution curve is above line I, the unstable working condition of locki l first wil oc ur; if the braking force distribution curve is below line I, the recovery fficien y of the vehicl cannot be guaranteed. Only when t e braking forces of the front and rear axles of the ve icle correspond to line I can the vehicle brake efficiently and work safely, and maximize energy recovery efficiency. Therefore, in the actual operation of the vehicle, it is very helpful to ensure that the braking force distribution curve of the vehicle is as close as possible to line I. Based on line I, a new parallel braking distribution strategy with a high energy recovery rate is established under the actual operating conditions of vehicles by setting the total braking torque required by the vehicle as the input and the braking torque distributed to the rear wheels as the output. Due to the particularity of compound braking, the control based on system input and output data has a certain error accumulation that results in actuator saturation; this must be considered in the design of the control algorithm.\n3. Design of the AS-MFAC Controller\nIn this section, the AS-MFAC algorithm based on the compact format dynamic linearization (CFDL) data model is used to solve the control problem of the regenerative braking system. The required total braking torque F(k) is the input and the braking torque to be distributed to the rear wheel F\u00b52 is the output. The regenerative braking control\nSymmetry 2022, 14, 580 7 of 17\nsystem is a single-input single-output (SISO) discrete non-linear system and the general form of the CFDL of the SISO non-linear system is introduced in the following section.\n3.1. Dynamic Linearization\nBased on the above analysis, for the convenience of description, a general SISO nonlinear discrete-time dynamic system is transformed from Equation (9) to Equation (10), which is used to describe the dynamic process of total braking force and rear axle braking force in braking force distribution engineering, as follows:\ny(k + 1) = f (y(k), . . . , y(k\u2212 ny), u(k), . . . , u(k\u2212 nu)) (10)\nwhere y(k) \u2208 R and u(k) \u2208 R represent the control output and input of the system at time k, respectively; ny and nu are two unknown positive integers; and f (. . .) : Rnu+ny+2 7\u2192 R is an unknown non-linear function. To establish the CFDL data model and use the AS-MFAC strategy, the following assumptions are introduced.\nAssumption 1. Except for the finite time point, the partial derivative of f (. . .) with respect to the (ny + 2) variable is continuous.\nAssumption 2. Except for finite time points, Equation (10) satisfies the generalized Lipschitz, that is,\u2016y(k1 + 1)\u2212 y(k2 + 1)\u2016 \u2264 b \u00b7 \u2016u(k1)\u2212 u(k2)\u2016 for any k > 0, u(k1) 6= u(k2) where b > 0 is a constant.\nRemark 1. From a practical point of view, the above assumptions imposed on the braking system are reasonable and acceptable. Assumption 1 is a typical condition for the design of a general non-linear system control system. Assumption 2 limits the rate of change in system output driven by changes in control inputs. From the perspective of energy, if the change in input energy is controlled within a limited range, the rate of change of output energy in the system cannot reach infinity.\nTheorem 1. Considering that the non-linear Equation (9) satisfies Assumptions 1 and 2, there must be a time-varying parameter\u03c6c(k) \u2208 R called the pseudo partial derivative (PPD) such that Equation (1) can be transformed into the following CFDL data model:\n\u2206y(k + 1) = \u03c6c(k)\u2206u(k) (11)\nwhere \u2206y(k + 1) = y(k + 1)\u2212 y(k), \u2206u(k) = u(k)\u2212 u(k\u2212 1), and \u03c6c(k) are bounded to any k.\nProof of Theorem 1. See Reference [27].\nRemark 2. According to Theorem 1, for each fixed k when the vehicle is running, there is a timevarying pseudo partial derivative \u03c6c(k) such that the non-linear system of vehicle braking energy recovery can be transformed into a CFDL data model. Notably, the existence of \u03c6c(k) is guaranteed by a rigorous mathematical analysis. Therefore, the data model (11) is an accurate and equivalent linearized description of the equipment at an instant.\nRemark 3. It can be seen from the proof of Theorem 1 that \u03c6c(k) is related to the input and output of the system at time k. However, in a sense, \u03c6c(k) is a differential signal and bounded to any k, thus we can regard \u03c6c(k) as a parameter that varies slowly with time. If \u2016\u2206u(k)\u2016 6= 0 and the value of \u2016\u2206u(k)\u2016 is small, then the relationship between \u03c6c(k) and control input u(k) can be ignored. In this paper, \u03c6c(k) is only related to the total braking torque and rear wheel braking torque of the vehicle, which changes slowly following the operation of the vehicle.\nNext, the AS-MFAC controller is designed based on the linear data model (11).\nSymmetry 2022, 14, 580 8 of 17\n3.2. Design of the Controller\nTo realize the anti-saturation function of the controller, a new parameter called the saturation parameter \u0393(k) is introduced in this paper and its numerical algorithm is shown as follows.\n\u0393(k) = {\n\u03b6(um(k)\u2212 u(k\u2212 1)) if sign(e\u2217(k)) 6= sign(y(k)) and u(k\u2212 1) < um(k) 1 else\n(12)\nwhere um is the upper maximum allowable input of the system and \u03b6 > 0 is a weight parameter, and e\u2217(k) = y\u2217(k + 1)\u2212 y(k) is the tracking error of the system.\nRemark 4. In fact, the effect of \u03b6 is very important for the design of the MFAC control system. The simulation results show that the proper selection of \u03b6 can ensure the anti-saturation ability of the control system and make the system obtain better output performance.\nAfter dynamic linearization of the regenerative braking control system, by introducing the parameter \u0393(k), the AS-MFAC strategy is designed. The following index function related to the control input is set:\nJ(u(k)) = \u03bb|u(k)\u2212 u(k\u2212 1)|2 + |e\u2217(k)\u0393(k)\u2212 \u2206y(k + 1)|2 (13)\nwhere \u03bb > 0; y\u2217(k + 1) is the braking torque value to be distributed to the rear wheels of the vehicle.\nSubstituting Equation (11) into Equation (13) yields the following equation:\nJ(u(k)) = \u03bb|u(k)\u2212 u(k\u2212 1)|2 + |e\u2217(k)\u0393(k)\u2212 \u03c6c(k)\u2206u(k)|2 (14)\nTake the derivative of J(u(k)) with respect to u(k) and let J(u(k))/u(k) = 0, and it can be obtained:\nu(k) = u(k\u2212 1) + \u03c1\u03c6c(k) \u03bb + |\u03c6c(k)|2 e\u2217(k)\u0393(k) (15)\nwhere \u03c1 \u2208 (0, 1) is the step factor. In addition, since the \u03c6c(k) in Equation (4) is unknown, it must be estimated. Theorem 1 proves the existence of \u03c6c(k). The criterion function for estimating \u03c6c(k) is as follows:\nJ(\u03c6c(k)) = \u2223\u2223\u2223y(k)\u2212 y(k\u2212 1)\u2212 \u03c6c(k)\u2206u(k\u2212 1)\u2223\u2223\u22232 + \u00b5\u2223\u2223\u03c6c(k)\u2212 \u03c6\u0302c(k)\u2223\u22232 (16)\nTaking the derivative of \u03c6c(k), letting the derivative be 0, and using the matrix inverse lemma provides the following results:\n\u03c6\u0302c(k) = \u03c6\u0302c(k\u2212 1) + \u03b7\u2206u(k\u2212 1)\n\u00b5 + \u2206u(k\u2212 1)2 (\u2206y(k)\u2212 \u03c6\u0302c(k\u2212 1)\u2206u(k\u2212 1)) (17)\nwhere \u03b7 \u2208 (0, 1] is a step size constant to make the algorithm more flexible and general, and \u03c6\u0302c(k) is the estimated value of the PPD of \u03c6c(k).\nRemark 5. The control input cost function and parameter estimation criterion function in the design of the adaptive control system have a symmetrical and similar structure if the positions of the expected output signal in the control input cost function and the actual output signal of the system exist.\nSymmetry 2022, 14, 580 9 of 17\nTo make the PPD estimation algorithm better able to track time-varying parameters and adapt to the actual driving situation of PEV, the reset algorithm must be introduced as follows:\n\u03c6\u0302c(k) = \u03c6\u0302c(1) (18) If \u2223\u2223\u03c6\u0302c(k)\u2223\u2223 < 1 or |\u2206u(k\u2212 1)| \u2264 \u03b5 or sign(\u03c6\u0302c(k)) = sign(\u03c6\u0302c(1)), then \u03b5 is a sufficiently\nsmall positive number.\nTheorem 2. When y\u2217(k + 1) = y\u2217(k) = const, the AS-MFAC algorithm based on the above formula is adopted and there is always a positive number \u03bbmin such that when \u03bb > \u03bbmin, there is:\nWhen the system is in the state of integral saturation, that is, sign(e\u2217(k)) = sign(y(k)), u(k\u2212 1) \u2265 um(k), then the input of the system can always recover to um(k) or less. When the system is not in the state of integral saturation, the following error of the system is convergent and lim\nk\u2192\u221e |y\u2217 \u2212 y(k + 1)| = 0.\nRemark 6. The AS-MFAC algorithm proposed in this paper can be applied not only to the braking energy recovery system and longitudinal control system of pure electric vehicles but also to other vehicle control problems, such as lateral control [48] and path tracking [49].\nProof of Theorem 2. See Appendix A.\n4. Experimental Simulation\nIn order to verify the effectiveness of the AS-MFAC algorithm, this section carries out numerical simulation through Simulink software. At the same time, in order to verify the effectiveness of the control strategy, this section is verified by hardware in the loop experiment with AVL cruise simulation software.\n4.1. Numerical Simulation Comparison 4.1.1. Algorithm Effect Comparison\nTo more clearly compare the traditional MFAC, MFAC with input constraint (IC-MFAC), and the AS-MFAC algorithms proposed in this paper, numerical simulations were conducted using Simulink software.\nThe designed simulation object is the second-order system as follows.\nG(s) = 3\n2s2 + 3s + 4 (19)\nThe expected value is 100 and the simulation time is 250 s. The proposed model is used only to generate input and output data in this part of the study and does not contribute to the design of the controller. A forced variable is applied from 50 s to 60 s and from 150 s to 160 s to cause error accumulation. The parameters of the three algorithms are set as follows: \u03c1 = 0.3, \u03b7 = 1, \u00b5 = 10, \u03b5 = 0.001, set \u03b6 = 3, um(k) = 150 for the AS-MFAC algorithm, and the constraint value of the IC-MFAC algorithm is set to 150 to resist saturation.\nThe simulation results are shown in Figures 5 and 6. As seen in Figure 5, when the actuator is saturated, the traditional MFAC algorithm\n(blue line) has controller saturation caused by great error accumulation, resulting in a very large output value. In the actual system, this situation would damage the controller. For the IC-MFAC algorithm, after the system undergoes controller saturation, the error accumulation is not eliminated and it takes a certain amount of time to restore normal control. As seen in Figure 6, the input value remains at the constraint value of 150 during the process of eliminating error accumulation. The AS-MFAC algorithm proposed in this paper has an obvious anti-saturation effect. After error accumulation, it quickly desaturates, eliminates the accumulated error, and tracks the expected value of the system.\nSymmetry 2022, 14, 580 10 of 17\nSymmetry 2022, 14, x FOR PEER REVIEW 10 of 19 4.1. Numerical Simulation Comparison 4.1.1. Algorithm Effect Comparison To more clearly compare the traditional MFAC, MFAC with input constraint (IC-MFAC), and the AS-MFAC algorithms proposed in this paper, numerical simulations were conducted using Simulink software. The designed simulation object is the second-order system as follows. 2 3( ) 2 3 4 = + + G s s s (19)\nThe expected value is 100 and the simulation time is 250 s. The proposed model is used only to generate input and output data in this part of the study and does not contribute to the design of the controller. A forced variable is applied from 50 s to 60 s and from 150 s to 160 s to cause error accumulation. The parameters of the three algorithms are set as follows: \u03c1 = 0.3, 1\u03b7 = , \u03bc = 10, \u03b5 = 0.001, set \u03b6 = 3, ( )mu k = 150 for the AS-MFAC algorithm, and the constraint value of the IC-MFAC algorithm is set to 150 to resist saturation.\nThe simulation results are shown in Figures 5 and 6.\nFigure 5. Control output of the traditional MFAC, AS-MFAC, and IC-MFAC algorithms.\nFigure 6. Control input of the traditional MFAC, AS-MFAC, and IC-MFAC algorithms.\nAs seen in Figure 5, when the actuator is saturated, the traditional MFAC algorithm (blue line) has controller saturation caused by great error accumulation, resulting in a very large output value. In the actual system, this situation would damage the controller. For the IC-MFAC algorithm, after the system undergoes controller saturation, the error accumulation is not eliminated and it takes a certain amount of time to restore normal control. As seen in Figure 6, the input value remains at the constraint value of 150 during the process of eliminating error accumulation. The AS-MFAC algorithm proposed in this paper has an obvious anti-saturation effect. After error accumulation, it quickly desaturates, eliminates the accumulated error, and tracks the expected value of the system.\nFigure 5. Control output of the traditional MFAC, AS-MFAC, and IC- FAC algorithms.\nSymmetry 2022, 14, x FOR PEER REVIEW 10 of 19 4.1. Numerical Simulation Comparison 4.1.1. Algorithm Effect Comparison To more clearly compare the traditional MFAC, MFAC with input constraint (IC-MFAC), and the AS-MFAC algorithms proposed in this paper, numerical simulations were conducted using Simulink software. The designed simulation object is the second-order system as follows. 2 3( ) 2 3 4 = + + G s s s (19)\nThe expected value is 100 and the simulation time is 250 s. The proposed model is used only to generate input and output data in this part of the study and does not contribute to the design of the controller. A forced variable is applied from 50 s to 60 s and from 150 s to 160 s to cause error accumulation. The parameters of the three algorithms are set as follows: \u03c1 = 0.3, 1\u03b7 = , \u03bc = 10, \u03b5 = 0.001, set \u03b6 = 3, ( )mu k = 150 for the AS-MFAC algorithm, and the constraint value of the IC-MFAC algorithm is set to 150 to resist saturation.\nThe simulation results are shown in Figures 5 and 6.\nFigure 5. Control output of the traditional MFAC, AS-MFAC, and IC-MFAC algorithms.\nFigure 6. Control input of the traditional MFAC, AS-MFAC, and IC-MFAC algorithms.\nAs seen in Figure 5, when the actuator is saturated, the traditional MFAC algorithm (blue line) has controller saturation caused by great error accumulation, resulting in a very large output value. In the actual system, this situation would damage the controller. For the IC-MFAC algorithm, after the system undergoes controller saturation, the error accumulation is not eliminated and it takes a certain amount of time to restore normal control. As seen in Figure 6, the input value remains at the constraint value of 150 during the process of eliminating error accumulation. The AS-MFAC algorithm proposed in this paper has an obvious anti-saturation effect. After error accumulation, it quickly desaturates, eliminates the accumulated error, and tracks the expected value of the system.\nFigure 6. Control inp t of the traditional MFAC, AS-MFAC, and IC-MFAC algorithms.\n4.1.2. Key Parameters Analysis of AS-MFAC\nAs mentioned abov , \u03b6 i an impo tant p rameter for the AS-MFAC algorithm. Next, the influence of \u03b6 on the anti-windup MFAC controller is simulated a d analyzed. Th values of \u03b6 are 1, 3, and 6, and the othe values r main unchange . Figures 7 and 8 are different output and input ch nge curves corresponding to three types of \u03b6, respectively.\nSymmetry 2022, 14, x FOR PEER REVIEW 11 of 19\n4.1.2. Key Parameters Analysis of AS-MFAC As mentioned above, \u03b6 is an important parameter for the AS-MFAC algorithm.\nNext, the influence of \u03b6 on the anti-windup MFAC controller is s mul ted and analyzed. The values of \u03b6 are 1, 3, and 6, and the other values remain unchanged. Figures 7 and 8 are differen output and input chang curves corresponding to three typ s f \u03b6 , respectively.\nFigure 7. Output curves when the value of \u03b6 is 1, 3, and 6.\nFigure 8. Input curves when the value of \u03b6 is 1, 3, and 6.\nFigure 8 shows that in three cases, the AS-MFAC controller has a certain anti- saturation ability. When \u03b6 is 1, the anti- saturation ability of the system is weak; when \u03b6 is 6, the anti-saturation ability is strong but the desaturation is too large and the output is lower than the expected value for a period of time. According to the output in Figure 8, when the selected value of \u03b6 is 6, the input of the system is stuck in the error accumulation stage, which has a certain adverse impact on the controller.\n4.2. AVL Cruise Hardware in the Loop Simulation In this part, AVL cruise simulation will be used to verify the impact of the proposed AS-MFAC on the braking energy recovery control system. A professional vehicle and powertrain simulation, as well as analysis software bring the advantages of multidisciplinary system simulation, which can simulate the vehicle\u2019s power, fuel economy, emission performance, and braking performance. The simulation interface is shown in Figure 9. The vehicle braking strategy has been written in MATLAB and encapsulated in the Matlab DLL module to jointly control the vehicle with AVL cruise. The specific parameter information of the vehicle is shown in Table 2.\nFigure 7. Output curves when the value of \u03b6 is 1, 3, and 6.\nSy metry 2022, 14, x FOR P ER REVIEW 11 of 19\n4.1.2. Key Parameters nalysis of S- F C As mentio ed above, \u03b6 is an i portant para eter for the AS- FAC algorithm.\nNext, the influence of \u03b6 on the anti-windup FAC controller is simulated and analyzed. The values of \u03b6 a e 1, 3, nd 6, d he ther values em in unch nged. Figures 7 and 8 are differen output and input change curves corresponding to three types of \u03b6 , respectively.\nFigure 7. Output curves when the value of \u03b6 is 1, 3, and 6.\nFigure 8. Input curves when the value of \u03b6 is 1, 3, and 6.\nFigure 8 shows that in three cases, the AS-MFAC controller has a certain anti- saturation ability. When \u03b6 is 1, the anti- saturation ability of the system is weak; when \u03b6 is 6, the anti-saturation ability is strong but the desaturation is too large and the output is low r than the expected value for a period of time. Acc rd ng t the output in Figure 8, wh n the selected value of \u03b6 is 6, the input of the system is stuck in the error accumulation stage, which has a certain adverse impact on the controller.\n4.2. AVL Cruise Hardware in the Loop Simulation In this part, AVL cruise simulation will be used to verify the impact of the proposed AS-MFAC on the braking energy recovery control syst m. A professional v hicle and powertrain simulation, as well as analysis software bring the advantages of multidisciplinary system simulation, which can simulate the v hicle\u2019s power, fuel econo y, emission performance, and braking performance. The simulation interface is shown in Figure 9. The vehicle braking strategy has been written in MATLAB and encapsulated in the Matlab DLL module to jointly control the vehicle with AVL cruise. The specific parameter information of the vehicle is shown in Table 2.\nFigure 8. Input curves when the valu of \u03b6 is 1, 3, and 6.\nSymmetry 2022, 14, 580 11 of 17\nFigure 8 shows that in three cases, the AS-MFAC controller has a certain anti- saturation ability. When \u03b6 is 1, the anti- saturation ability of the system is weak; when \u03b6 is 6, the anti-saturation ability is strong but the desaturation is too large and the output is lower than the expected value for a period of time. According to the output in Figure 8, when the selected value of \u03b6 is 6, the input of the system is stuck in the error accumulation stage, which has a certain adverse impact on the controller.\n4.2. AVL Cruise Hardware in the Loop Simulation\nIn this part, AVL cruise simulation will be used to verify the impact of the proposed AS-MFAC on the braking energy recovery control system. A professional vehicle and powertrain simulation, as well as analysis software bring the advantages of multidisciplinary system simulation, which can simulate the vehicle\u2019s power, fuel economy, emission performance, and braking performance. The simulation interface is shown in Figure 9. The vehicle braking strategy has been written in MATLAB and encapsulated in the Matlab DLL module to jointly control the vehicle with AVL cruise. The specific parameter information of the vehicle is shown in Table 2. Symmetry 2022, 14, x FOR PEER REVIEW 12 of 19\nFigure 9. AVL cruise hardware in the loop simulation interface.\n4.2.1. Battery Consumption Experiment The distribution strategy of the braking force of the whole vehicle adopts the ideal braking force curve distribution strategy mentioned above. The simulation is under the New European Driving Cycle (NEDC) condition. The algorithm adopts the anti-windup PID (Proportional Integral Differential) algorithm, IC-MFAC algorithm, and AS-MFAC algorithm. The anti-windup PID algorithm is set as follows.\n1\n1 1( ) ( ) ( ) [ ( ) ( )]\nk\np i d i\nu k K e k aK e i K e k e k \u2212\n=\n= + + \u2212 \u2212 (20)\n1 0 ( ) ( ) e k a e k \u03c4 \u03c4  \u2264=  > (21)\nwhere \u03c4 a is a positive constant. The appropriate value of \u03c4 can affect the steady-state accuracy of the algorithm and reduce the influence of actuator saturation.\nTable 2. Main parameters of the whole vehicle.\nSymmetry 2022, 14, 580 12 of 17\n4.2.1. Battery Consumption Experiment\nThe distribution strategy of the braking force of the whole vehicle adopts the ideal braking force curve distribution strategy mentioned above. The simulation is under the New European Driving Cycle (NEDC) condition. The algorithm adopts the anti-windup PID (Proportional Integral Differential) algorithm, IC-MFAC algorithm, and AS-MFAC algorithm. The anti-windup PID algorithm is set as follows.\nu(k) = Kpe(k) + aKi k\u22121 \u2211 i=1 e(i) + Kd[e(k)\u2212 e(k\u2212 1)] (20)\na = {\n1|e(k)| \u2264 \u03c4 0|e(k)| > \u03c4 (21)\nwhere \u03c4 a is a positive constant. The appropriate value of \u03c4 can affect the steady-state accuracy of the algorithm and reduce the influence of actuator saturation. The optimum parameters of anti-windup PID obtained by the trial and error method are Kp = 0.15, Ki = 0.5, Kd = 1.2, and \u03c4 = 210. The values of the AS-MFAC and IC-MFAC parameters are set as follows: \u03c1 = 0.3, \u03b7 = 1, \u00b5 = 10, \u03b5 = 0.001, set \u03b6 = 3, um(k) = 1200 for the AS-MFAC algorithm, and the constraint value of the IC-MFAC algorithm is set to 1200 to resist saturation. The vehicle is set to be in a no-load state when starting the simulation. Passengers get on and off the vehicle at 226 s, 430 s, 577 s, and 775 s, and the operation of the complete working condition is typically 1200 s. When the initial SOC of the vehicle is 0.9, the change in the SOC is shown in Figures 10 and 11.\nSymmetry 2022, 14, x FOR PEER REVIEW 13 of 19\nThe optimum parameters of anti-windup PID obtained by the trial and error method are pK = 0.15, iK = 0.5, dK = 1.2, and \u03c4 = 210. The values of the AS-MFAC and ICMFAC parameters are set as follows: \u03c1 = 0.3, 1\u03b7 = , \u03bc = 10, \u03b5 = 0.001, set \u03b6 = 3, ( )mu k = 1200 for the AS-MFAC algorithm, and the constraint value of the IC-MFAC algorithm is set to 1200 to resist saturation. The vehicle is set to be in a no-load state when starting the simulation. Passengers get on and off the vehicle at 226 s, 430 s, 577 s, and 775 s, and the operation of the complete working condition is typically 1200 s. When the initial SOC of the vehicle is 0.9, the change in the SOC is shown in Figures 10 and 11.\nFigure 10. SOC initial value is 0.9. SOC change curve under three different algorithms under NEDC working condition.\nFigure 11. SOC initial value is 0.65. SOC change curve under three different algorithms under NEDC working condition.\nBy analyzing SOC curves of the simulation experiment under the NEDC working condition shown in Figures 10 and 11, and the simulation results in Tables 3 and 4, it can be concluded that there are two kinds of MFAC and anti-windup PID control strategy models after the 1200 s simulation experiment, wherein AS-MFAC has the highest energy recovery efficiency. If the vehicle consumes all the power, the vehicle under AS-MFAC can have about 12 km more conventional urban mileage than the vehicle under IC-MFAC control, and about 20 km more conventional urban mileage than the vehicle under anti-\nFigure 10. SOC initial value is 0.9. SOC change curve under three different algorithms under NEDC working condition.\nSymmetry 2022, 14, x FOR PEER REVIEW 13 of 19\nThe optimu parameters of anti-windup PID obtained by the trial and error method are pK = 0.15, iK = 0.5, dK = 1.2, and \u03c4 = 210. The values of the AS-MFAC and ICMFAC parameters are set as follows: \u03c1 = 0.3, 1\u03b7 = , \u03bc = 10, \u03b5 = 0.001, set \u03b6 = 3, ( )mu k = 1200 for the AS-MFAC algorithm, and the constraint value of the IC-MFAC algorithm is set to 1200 to resist saturation. The vehicle is set to be in a no-load st te wh n star ing the simulation. Passeng rs get on and off the vehicle at 226 s, 430 s, 577 s, and 775 s, and the operation f the complete working condition is typically 1200 s. When t initial SOC of the v hicle is 0.9, the change in the SOC is shown in Figures 10 and 11.\nFigure 10. SOC initial value is 0.9. SOC change curve under three different algorithms under NEDC working condition.\nFigure 11. SOC initial value is 0.65. SOC change curve under three different algorithms under NEDC working condition.\nBy analyzing SOC curves of the simulation experiment under the NEDC working condition shown in Figures 10 and 11, and the simulation results in Tables 3 and 4, it can be c cluded that there are two ki s of MFAC and anti-windup PID control strategy models after the 1200 s simul tion experiment, wherein AS-MFAC has the highest energy recovery efficiency. If the vehicle consumes all the power, the vehicle under AS-MFAC can have about 12 km more conventional urban mileag than the v hicle under IC-MFAC control, nd abo t 20 k ore conventional urba ilea e tha the vehicle under anti-\nFigure 11. SOC initial value is 0.65. SOC change curve under three different algorithms under NEDC working condition.\nSymmetry 2022, 14, 580 13 of 17\nBy analyzing SOC curves of the simulation experiment under the NEDC working condition shown in Figures 10 and 11, and the simulation results in Tables 3 and 4, it can be concluded that there are two kinds of MFAC and anti-windup PID control strategy models after the 1200 s simulation experiment, wherein AS-MFAC has the highest energy recovery efficiency. If the vehicle consumes all the power, the vehicle under AS-MFAC can have about 12 km more conventional urban mileage than the vehicle under IC-MFAC control, and about 20 km more conventional urban mileage than the vehicle under anti-windup PID control, that is, under the control of AS-MFAC, the distribution of the braking force is more effective and more braking force is distributed to the rear wheels.\nTable 3. SOC initial value is 0.9. SOC data under three different algorithms under NEDC working condition.\nMethod AS-MFAC IC-MFAC Anti-windup PID\nInitial SOC 90% 90% 90% Final SOC 80.599% 79.978% 79.282%\nTable 4. SOC initial value is 0.65. SOC data under three different algorithms under NEDC working condition.\n4.2.2. Speed Tracking Experiment\nThe speed control of the three algorithms on the vehicle under the NEDC test condition is shown in Figure 12. The AS-MFAC algorithm mentioned in this paper can track the vehicle speed well during braking. The control effect of anti-windup PID is slightly poor. Due to error accumulation, the IC-MFAC algorithm has the worst speed tracking ability among the three algorithms, which would have a certain impact on the safe driving of vehicles.\nSymmetry 2022, 14, x FOR PEER REVIEW 14 of 19\nwindup PID control, that is, under the control of AS-MFAC, the distribution of the braking force is more effective and more braking force is distributed to the rear wheels.\nTable 3. SOC initial value is 0.9. SOC data under three different algorithms under NEDC working condition.\nMethod AS-MFAC IC-MFAC Anti-windup PID Initial SOC 90% 90% 90% Final SOC 80.599% 79.978% 79.282%\n4.2.2. Speed Tracking Experiment The speed control of the three algorithms on the vehicle under the NEDC test condition is shown in Figure 12. The AS-MFAC algorithm mentioned in this paper can track the vehicle speed well during braking. The control effect of anti-windup PID is slightly poor. Due to error accumulation, the IC-MFAC algorithm has the worst speed tracking ability among the three algorithms, which would have a certain impact on the safe driving of vehicles.\n5. Conclusions In this paper, aiming at the problem of braking energy recovery and braking force distribution between front and rear axles of pure electric bus, a novel AS-MFAC control method against saturation was designed. In the AS-MFAC method, the non-linear dynamics of the vehicle braking energy recovery process are first linearized via a novel dynamical linearization technique with a time-varying parameter pseudo partial derivative (PPD). Then, the AS-MFAC controller is designed via the proposed concept of a saturation parameter. Notably, the AS-MFAC control algorithm does not involve a system model and needs only input and output data of the system to complete the control task. Moreover, the stability of the AS-MFAC algorithm is proven by rigorous mathematical theory. The Simulink model simulation proves the controllability of the algorithm and the joint\nIn this paper, aiming at the problem of braking energy recovery and braking force distribution between front and rear axles of pure electric bus, a novel AS-MFAC control method against saturation was designed. In the AS-MFAC method, the non-linear dynamics of the vehicle braking energy recovery process are first linearized via a novel dynamical linearization technique with a time-varying parameter pseudo partial derivative\nSymmetry 2022, 14, 580 14 of 17\n(PPD). Then, the AS-MFAC controller is designed via the proposed concept of a saturation parameter. Notably, the AS-MFAC control algorithm does not involve a system model and needs only input and output data of the system to complete the control task. Moreover, the stability of the AS-MFAC algorithm is proven by rigorous mathematical theory. The Simulink model simulation proves the controllability of the algorithm and the joint simulation of both AVL cruise and MATLAB proves the effectiveness of the algorithm in braking energy recovery. The main contribution of this paper is as follows: the control method proposed in this paper can distribute more braking torque to the rear axle, as much as possible, while ensuring the braking efficiency and stability of the vehicle; improve the regenerative braking energy recovery rate; and eliminate the saturation problem caused by the error accumulation caused by composite braking. In future work, we will continue to deeply study the proposed AS-MFAC algorithm and realize more complex functionality. The system will undergo various disturbances and become more complex. Therefore, the partial format dynamic linearization (PFDL) technology that can deal with more complex systems is adopted. At the same time, the distribution strategy between motor braking and friction braking will be further discussed.\nAuthor Contributions: Conceptualization, H.J. and S.L.; methodology, Z.L. and S.L.; validation, S.L. and H.J.; formal analysis, S.L. and Z.L.; writing\u2014original draft preparation, Z.L. and S.L.; writing\u2014review and editing, Z.L. and S.L.; supervision, Z.H. and S.L.; project administration, S.L.; funding acquisition, L.W. All authors have read and agreed to the published version of the manuscript.\nFunding: This work is supported by the Beijing Municipal Natural Science Foundation under grant 4212035 and 4204098; National Natural Science Foundation (NNSF) of China under grant 61903004 and 61833001; North China University of Technology Scientific Research Foundation; North China University of Technology Yu You Talent Training Program; and Beijing Municipal Great Wall Scholar Program (CIT&TCD20190304).\nInstitutional Review Board Statement: Not applicable.\nInformed Consent Statement: Not applicable.\nData Availability Statement: Not applicable.\nConflicts of Interest: The authors declare that there are no conflict of interest.\nAppendix A\nIn the appendix, we will first prove that in the case of saturation, the control system can desaturate in time and eliminate error accumulation in part 1. Then, it will be proven that the controller can make the desaturated system converge and stabilize in part 2.\nPart 1: If \u03c6\u0302c(k) \u2264 \u03b5, |\u2206u(k\u2212 1)| \u2264 \u03b5, or sign(\u03c6\u0302c(k)) 6= sign(\u03c6\u0302c(1)), then \u03c6\u0302c(k) is obviously\nbounded. \u03c6\u0303c(k) = \u03c6\u0302c(k)\u2212 \u03c6c(k) can be defined as the estimation error of the PPD. Subtract \u03c6c(k) from both sides of its parameter estimation to obtain:\n\u03c6\u0303c(k) = [ 1\u2212 \u03b7|\u2206u(k\u2212 1)| 2\n\u00b5 + |\u2206u(k\u2212 1)| 2\n] \u03c6\u0303c(k\u2212 1) + \u03c6c(k\u2212 1)\u2212 \u03c6c(k) (A1)\nTake the absolute value on both sides of the above formula to obtain: \u2223\u2223\u03c6\u0303c(k)\u2223\u2223 = \u2223\u2223\u2223\u2223\u2223 [ 1\u2212 \u03b7|\u2206u(k\u2212 1)| 2\n\u00b5 + |\u2206u(k\u2212 1)| 2\n]\u2223\u2223\u2223\u2223\u2223\u2223\u2223\u03c6\u0303c(k\u2212 1)\u2223\u2223+ |\u03c6c(k\u2212 1)\u2212 \u03c6c(k)| (A2)\nSymmetry 2022, 14, 580 15 of 17\nNote that function \u03b7|\u2206u(k\u22121)| 2\n\u00b5+|\u2206u(k\u22121)| 2 is monotonically increasing with respect to variable\n|\u2206u(k\u2212 1)| 2 and its minimum value is \u03b7\u03b5 2\n\u00b5+\u03b52 . Then, when 0 \u2264 \u03b7 \u2264 1 and \u00b5 \u2265 0, there must\nbe a constant d1, which satisfies:\n0 \u2264 \u2223\u2223\u2223\u2223\u2223 [ 1\u2212 \u03b7|\u2206u(k\u2212 1)| 2\n\u00b5 + |\u2206u(k\u2212 1)| 2 ]\u2223\u2223\u2223\u2223\u2223 \u2264 1\u2212 \u03b7\u03b52\u00b5 + \u03b52 = d1 < 1 (A3) According to Theorem 1, \u03c6c(k) is bounded and |\u03c6c(k)| \u2264 b, |\u03c6c(k\u2212 1)\u2212 \u03c6c(k)| \u2264 2b,\nand b are constant. Using Equations (20) and (21), the following inequalities are obtained:\n\u2223\u2223\u03c6\u0303c(k)\u2223\u2223 \u2264 d1\u2223\u2223\u03c6\u0303c(k\u2212 1)\u2223\u2223+ 2b \u2264 d12\u2223\u2223\u03c6\u0303c(k\u2212 2)\u2223\u2223+ 2d1b + 2b \u2264 . . . \u2264 d1k\u22121\u2223\u2223\u03c6\u0303c(1)\u2223\u2223+ 2b(1\u2212 d1k\u22121)1\u2212 d1 (A4) The above formula means that \u03c6\u0303c(k) a is bounded and because \u03c6c(k) is bounded, \u03c6\u0302c(k)\nis bounded. When the system is in the state of integral saturation, namely e\u2217(k) \u2265 0, \u0393(k) \u2264 0, then e\u2217(k) \u00b7 \u0393(k) \u2264 0. According to the reset algorithm:\n\u03c1\u03c6\u0302c(k) \u03bb + \u2223\u2223\u03c6\u0302c(k)\u2223\u22232 > 0 (A5)\nThen, u(k) < u(k\u2212 1); in this state, u(k) is monotonically decreasing and u(k) can obviously recover below um(k). When u(k) returns below um(k), the system releases the integral saturation state.\nPart 2: When the integral saturation state of the system is released, the Lyapunov function\nis assumed: V(k) = e2(k) (A6)\nThen,\n\u2206V(k + 1) = V(k + 1)\u2212V(k) = (\u2206e(k + 1) + e(k))2 \u2212 e2(k) (A7)\nIn the case of y\u2217(k + 1) = y\u2217(k):\n\u2206e(k + 1) = (y \u2217 (k+1)\u2212 y(k + 1))\u2212 (y \u2217 (k)\u2212 y(k)) = (y \u2217 (k+1)\u2212 y \u2217 (k)) + (y(k)\u2212 y(k + 1))\n= \u2212\u2206y(k+1) (A8)\nBring Equation (11) into Equation (A5) to obtain:\n\u2206V(k + 1) = (\u2212 \u03c6c(k)\u2206u(k)+e(k))2 \u2212 e2(k) = (\u2212\u03c6c(k) \u03c1\u03c6\u0302c(k)\n\u03bb+|\u03c6\u0302c(k)|2 e(k)\u0393(k) + e(k))2 \u2212 e2(k)\n= (1\u2212 \u03c6c(k) \u03c1\u03c6\u0302c(k) \u03bb+|\u03c6\u0302c(k)|2\ne(k)\u0393(k))2e2(k)\u2212 e2(k) (A9)\nAccording to the reset algorithm, \u03c6c(k)\u03c6\u0302c(k) > 0 and \u0393(k) = 1. Let \u03bbmin = b 2 4 . Using inequality \u03b1 2 + \u03b22 \u2265 2\u03b1\u03b2, the guarantee condition \u03c6\u0302c(k) \u2265 \u03b5 of\nthe reset algorithm, and the boundedness of \u03c6\u0302c(k), it can be seen that if \u03bb > \u03bbmin is selected, there must be a constant 0 < M < 1 so that the following formula holds:\n0 < M \u2264 \u03c6c(k) \u03c6\u0302c(k) \u03bb + \u2223\u2223\u03c6\u0302c(k)\u2223\u22232 \u0393(k) \u2264 b\u03c6\u0302c(k)\u03bb + \u2223\u2223\u03c6\u0302c(k)\u2223\u22232 \u2264 b\u03c6\u0302c(k)2\u221a\u03bb\u03c6\u0302c(k) < b\u03c6\u0302c(k)2\u221a\u03bbmin\u03c6\u0302c(k) = 1 (A10)\nSymmetry 2022, 14, 580 16 of 17\nAccording to Equation (A7), 0 < \u03c1 < 1, and \u03bb > \u03bbmin, there must be a constant d2 such that:\u2223\u2223\u2223\u2223\u22231\u2212 \u03c6c(k) \u03c1\u03c6\u0302c(k)\u03bb + \u2223\u2223\u03c6\u0302c(k)\u2223\u22232 \u0393(k)\n\u2223\u2223\u2223\u2223\u2223 = 1\u2212 \u03c6c(k) \u03c1\u03c6\u0302c(k)\u03bb + \u2223\u2223\u03c6\u0302c(k)\u2223\u22232 \u0393(k) \u2264 1\u2212 \u03c1M = d2 < 1 (A11) Then,\n\u2206V(k + 1) = d2e2(k)\u2212 e2(k) < 0 (A12)\nThe system is asymptotically stable. Theorem 2 is proved.\nReferences 1. Zhongshi, Z.; Ruihai, M.; Lifang, W.; Junzhi, Z. Novel PMSM Control for Anti-Lock Braking Considering Transmission Properties of the Electric Vehicle. IEEE Trans. Veh. Technol. 2018, 67, 10378\u201310386. [CrossRef] 2. Kr\u00f3l, A.; Sierpin\u0301ski, G. Application of a Genetic Algorithm With a Fuzzy Objective Function for Optimized Siting of Electric Vehicle Charging Devices in Urban Road Networks. IEEE Trans. Intell. Transp. Syst. 2021, 1\u201312. [CrossRef] 3. Mehta, S.; Hemamalini, S. A Dual Control Regenerative Braking Strategy for Two-Wheeler Application. Energy Procedia 2017, 117, 299\u2013305. [CrossRef] 4. Hardman, S.; Chandan, A.; Tal, G.; Turrentine, T. The effectiveness of financial purchase incentives for battery electric vehicles\u2014A review of the evidence. Renew. Sustain. Energy Rev. 2017, 80, 1100\u20131111. [CrossRef] 5. Gao, Y.; Chen, L.; Ehsani, M. Investigation of the Effectiveness of Regenerative Braking for EV and HEV. SAE Trans. 1999, 108, 3184\u20133190. 6. Masih-Tehrani, M.; Dahmardeh, M. A Novel Power Distribution System Employing State of Available Power Estimation for a Hybrid Energy Storage System. IEEE Trans. Ind. Electron. 2018, 65, 6676\u20136685. [CrossRef] 7. Jung, S.; Ko, J. Study on Regenerative Energy RecoSvery of Electric Vehicle Through Voltage Control Using Switched Capacitor. IEEE Trans. Veh. Technol. 2021, 70, 4324\u20134339. [CrossRef] 8. Ko, J.; Ko, S.; Son, H.; Yoo, B.; Cheon, J.; Kim, H. Development of Brake System and Regenerative Braking Cooperative Control Algorithm for Automatic-Transmission-Based Hybrid Electric Vehicles. IEEE Trans. Veh. Technol. 2015, 64, 431\u2013440. [CrossRef] 9. Heydari, S.; Fajri, P.; Rasheduzzaman, M.; Sabzehgar, R. Maximizing Regenerative Braking Energy Recovery of Electric Vehicles Through Dynamic Low-Speed Cutoff Point Detection. IEEE Trans. Transp. Electrif. 2019, 5, 262\u2013270. [CrossRef] 10. Fujiki, N.; Koike, Y.; Ito, Y.; Suzuki, G.; Gotoh, S.; Yukio, O.; Yamagucki, T. Development of an Electrically-Driven Intelligent Brake System for EV. Autom. Veh. Technol. 2011, 65, 399\u2013405. [CrossRef] 11. Aldred, C. Brake applied to recall cover. Bus. Insur. 2004, 38, 1. 12. Aoki, Y.; Suzuki, K.; Nakano, H.; Nojiri, Y.; Shirase, T.; Sakai, K. Development of Hydraulic Servo Brake System for Hybrid Vehicle. Trans. Soc. Automot. Eng. Jpn. 2007, 38, 25\u201330. 13. Nakamura, E.; Soga, M.; Sakai, A.; Otomo, A.; Kobayashi, T. Development of Electrically Controlled Brake System for Hybrid Vehicle; SAE Technical Papers; SAE International: Warrendale, PA, USA, 2002; Volume 2, pp. 129\u2013137. 14. Rigaut, T.; Carpentier, P.; Chancelier, J.P.; De Lara, M.; Waeytens, J. Stochastic Optimization of Braking Energy Storage and Ventilation in a Subway Station. IEEE Trans. Power Syst. 2019, 34, 1256\u20131263. [CrossRef] 15. Peng, H.; Wang, W.; Xiang, C.; Li, L.; Wang, X. Torque Coordinated Control of Four In-Wheel Motor Independent-Drive Vehicles With Consideration of the Safety and Economy. IEEE Trans. Veh. Technol. 2019, 68, 9604\u20139618. [CrossRef] 16. Xu, W.; Chen, H.; Zhao, H.; Ren, B. Torque optimization control for electric vehicles with four in-wheel motors equipped with regenerative braking system. Mechatronics 2019, 57, 95\u2013108. [CrossRef] 17. Guoqing, X.; Kun, X.; Chunhua, Z.; Xinye, Z.; Taimoor, Z. Fully Electrified Regenerative Braking Control for Deep Energy Recovery and Maintaining Safety of Electric Vehicles. IEEE Trans. Veh. Technol. 2016, 65, 1186\u20131198. [CrossRef] 18. Fnadi, M.; Du, W.; Plumet, F.; Benamar, F. Constrained Model Predictive Control for dynamic path tracking of a bi-steerable rover on slippery grounds. Control Eng. Pract. 2021, 107, 104693. [CrossRef] 19. Gao, J.; Zhang, G.; Wu, P.; Zhao, X.; Wang, T.; Yan, W. Model Predictive Visual Servoing of Fully-Actuated Underwater Vehicles With a Sliding Mode Disturbance Observer. IEEE Access 2019, 7, 25516\u201325526. [CrossRef] 20. Fnadi, M.; Alexandre dit Sandretto, J. Experimental Validation of a Guaranteed Nonlinear Model Predictive Control. Algorithms 2021, 14, 248. [CrossRef] 21. Zhang, Y.; Zhang, H.; Yang, C.; Xiang, C.; Li, L. Research on predictive control strategy for efficient braking energy recovery of hybrid electric bus based on new improved genetic algorithm. J. Mech. Eng. 2020, 56, 11. 22. Deng, R.; Liu, Y.; Chen, W.; Liang, H. A Survey on Electric Buses\u2014Energy Storage, Power Management, and Charging Scheduling. IEEE Trans. Intell. Transp. Syst. 2021, 22, 9\u201322. [CrossRef] 23. Huang, X.; Wang, J. Model Predictive Regenerative Braking Control for Lightweight Electric Vehicles with in-Wheel Motors. J. Automob. Eng. 2012, 226, 1220\u20131232. [CrossRef] 24. Yaonan, W.; Xizheng, Z.; Xiaofang, Y.; Guorong, L. Position-Sensorless Hybrid Sliding-Mode Control of Electric Vehicles With\nBrushless DC Motor. IEEE Trans. Veh. Technol. 2011, 60, 421\u2013432. [CrossRef]\nSymmetry 2022, 14, 580 17 of 17\n25. Wang, C.; Zhao, W.; Li, W. Braking sense consistency strategy of electro-hydraulic composite braking system. Mech. Syst. Signal Process. 2018, 109, 196\u2013219. [CrossRef] 26. Hoang, H.S.; Baraille, R. A simple numerical method based simultaneous stochastic perturbation for estimation of high dimensional matrices. Multidimens. Syst. Signal Process. 2018, 30, 195\u2013217. [CrossRef] 27. Hou, Z.; Jin, S. A Novel Data-Driven Control Approach for a Class of Discrete-Time Nonlinear Systems. IEEE Trans. Control Syst. Technol. 2011, 19, 1549\u20131558. [CrossRef] 28. Safonov, M.G.; Tsao, T.-C. The unfalsified control concept and learning. IEEE Trans. Autom. Control 1997, 42, 843\u2013847. [CrossRef] 29. Hjalmarsson, H.; Gevers, M.; Gunnarsson, S.; Lequin, O. Iterative Feedback Tuning: Theory and Applications. IEEE Control Syst. 1998, 18, 26\u201341. [CrossRef] 30. Previde, F.; Belloli, D.; Cologne, A.; Savaresi, S.M. Virtual Reference Feedback Tuning (VRFT) Design of Cascade Control Systems with Application to an Electro-Hydrostatic Actuator. IFAC Proc. Vol. 2010, 43, 626\u2013632. [CrossRef] 31. Meng, D.; Moore, K.L. Robust Iterative Learning Control for Nonrepetitive Uncertain Systems. IEEE Trans. Autom. Control 2017, 62, 907\u2013913. [CrossRef] 32. Ji, H.; Wei, Y.; Fan, L.; Liu, S.; Wang, Y.; Wang, L. Disturbance-Improved Model-Free Adaptive Prediction Control for Discrete-Time Nonlinear Systems with Time Delay. Symmetry 2021, 13, 2128. [CrossRef] 33. Shida, L.; Zhongsheng, H.; Taotao, T.; Zhidong, D.; Zhenxuan, L. A Novel Dual Successive Projection-Based Model-Free Adaptive Control Method and Application to an Autonomous Car. IEEE Trans. Neural Netw. Learn. Syst. 2019, 30, 3444\u20133457. [CrossRef] 34. Coelho, L.; Coelho, A. Model-free adaptive control optimization using a chaotic particle swarm approach. Chaos Solitons Fractals 2009, 41, 2001\u20132009. [CrossRef] 35. Rong-Jong, W.; Zhi-Wei, Y. Adaptive Fuzzy Neural Network Control Design via a T\u2013S Fuzzy Model for a Robot Manipulator Including Actuator Dynamics. IEEE Trans. Syst. Man Cybern. 2019, 38, 1326\u20131346. [CrossRef] 36. Tan, K.K.; Lee, T.H.; Huang, S.N.; Leu, F.M. Adaptive-Predictive Control of a Class of SISO Nonlinear Systems. Dyn. Control 2001, 11, 151\u2013174. [CrossRef] 37. Li, W.; Du, H.; Li, W. Four-Wheel Electric Braking System Configuration With New Braking Torque Distribution Strategy for Improving Energy Recovery Efficiency. IEEE Trans. Intell. Transp. Syst. 2020, 21, 87\u2013103. [CrossRef] 38. Jabbour, N.; Mademlis, C. Supercapacitor-Based Energy Recovery System With Improved Power Control and Energy Management for Elevator Applications. IEEE Trans. Power Electron. 2017, 32, 9389\u20139399. [CrossRef] 39. Ni, J.; Hu, J.; Xiang, C. Control-Configured-Vehicle Design and Implementation on an X-by-Wire Electric Vehicle. IEEE Trans. Veh. Technol. 2018, 67, 3755\u20133766. [CrossRef] 40. Xudong, Z.; Dietmar, G.; Jiayuan, L. Energy-Efficient Toque Allocation Design of Traction and Regenerative Braking for Distributed Drive Electric Vehicles. IEEE Trans. Veh. Technol. 2018, 67, 285\u2013295. [CrossRef] 41. Wang, J.C.; He, R.; Kim, Y.B. Optimal Anti-Lock Braking Control With Nonlinear Variable Voltage Charging Scheme for an Electric Vehicle. IEEE Trans. Veh. Technol. 2020, 69, 7211\u20137222. [CrossRef] 42. Liu, B.; Li, L.; Wang, X.; Cheng, S. Hybrid Electric Vehicle Downshifting Strategy Based on Stochastic Dynamic Programming During Regenerative Braking Process. IEEE Trans. Veh. Technol. 2018, 67, 4716\u20134727. [CrossRef] 43. Liang, C.; Qiang, H.; Zicheng, F.; Zhe, L.; Yanwen, P. Research on regenerative braking control strategy of pure electric vehicle. J. Automot. Eng. 2016, 5, 244\u2013251. 44. Kumar, G.V.; Chuang, C.H.; Lu, M.Z.; Liaw, C.-M. Development of an Electric Vehicle Synchronous Reluctance Motor Drive. IEEE Trans. Veh. Technol. 2020, 69, 5012\u20135024. [CrossRef] 45. Naranjo, W.; Camargo, L.E.M.; Pereda, J.E.; Cortes, C. Design of Electric Buses of Rapid Transit Using Hybrid Energy Storage and Local Traffic Parameters. IEEE Trans. Veh. Technol. 2017, 66, 5551\u20135563. [CrossRef] 46. Tavernini, D.; Vacca, F.; Metzler, M.; Savitski, D.; Ivanov, V.; Gruber, P.; Hartavi, A.E.; Dhaens, M.; Sorniotti, A. An Explicit\nNonlinear Model Predictive ABS Controller for Electro-Hydraulic Braking Systems. IEEE Trans. Ind. Electron. 2019, 67, 3990\u20134001. [CrossRef]\n47. Donghyun, K.; Chulsoo, K.; Sungho, H.; Hyunsoo, K. Hardware in the Loop Simulation of Vehicle Stability Control using Regenerative Braking and Electro Hydraulic Brake for Hybrid Electric Vehicle. IFAC Proc. Vol. 2008, 41, 5664\u20135669. [CrossRef] 48. Fnadi, M.; Plumet, F.; Benamar, F. Nonlinear Tire Cornering Stiffness Observer for a Double Steering Off-Road Mobile Robot. In Proceedings of the 2019 International Conference on Robotics and Automation (ICRA), Montreal, QC, Canada, 20\u201324 May 2019. 49. Oudghiri, M.; Chadli, M.; Hajjaji, A.E. Lateral vehicle velocity estimation using fuzzy sliding mode observer. In Proceedings of the Conference on Control & Automation, Ajaccio, France, 25\u201327 June 2008."
        }
    ],
    "title": "A Novel Anti-Saturation Model-Free Adaptive Control Algorithm and Its Application in the Electric Vehicle Braking Energy Recovery System",
    "year": 2022
}