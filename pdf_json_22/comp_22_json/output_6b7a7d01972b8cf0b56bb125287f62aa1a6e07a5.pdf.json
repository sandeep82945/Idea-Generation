{
    "abstractText": "In 1985, Bucher, Ehrenfeucht and Haussler studied derivation relations associated with a given set of context-free rules. Their research motivated a question regarding homomorphisms from the semigroup of all words onto a finite ordered semigroup. The question is which of these homomorphisms induce a well quasi-order on the set of all words. We show that this problem is decidable and the answer does not depend on the homomorphism, but it is a property of the ordered semigroup.",
    "authors": [
        {
            "affiliations": [],
            "name": "Jonatan Kolegar"
        }
    ],
    "id": "SP:bfafd9a6b7a8afc15dbc2d829028b924db9389c7",
    "references": [
        {
            "authors": [
                "W. Bucher",
                "A. Ehrenfeucht",
                "D. Haussler"
            ],
            "title": "On total regulators generated by derivation relations",
            "venue": "Theor. Comput. Sci. 40, 131\u2013148",
            "year": 1985
        },
        {
            "authors": [
                "F. D\u2019Alessandro",
                "S. Varricchio"
            ],
            "title": "Well quasi-orders in formal language theory",
            "venue": "Ito, M., Toyama, M. (eds.) DLT 2008. LNCS, vol. 5257, pp. 84\u201395. Springer",
            "year": 2008
        },
        {
            "authors": [
                "A. Ehrenfeucht",
                "D. Haussler",
                "G. Rozenberg"
            ],
            "title": "On regularity of context-free languages",
            "venue": "Theor. Comput. Sci. 27, 311\u2013332",
            "year": 1983
        },
        {
            "authors": [
                "C. Haase",
                "S. Schmitz",
                "P. Schnoebelen"
            ],
            "title": "The Power of Priority Channel Systems",
            "venue": "Logical Methods in Computer Science 10(4)",
            "year": 2014
        },
        {
            "authors": [
                "G. Higman"
            ],
            "title": "Ordering by divisibility in abstract algebras",
            "venue": "Proceedings of the London Mathematical Society s3-2(1), 326\u2013336",
            "year": 1952
        },
        {
            "authors": [
                "J.M. Howie"
            ],
            "title": "An Introduction to Semigroup Theory",
            "venue": "Academic Press",
            "year": 1976
        },
        {
            "authors": [
                "J.B. Kruskal"
            ],
            "title": "The theory of well-quasi-ordering: A frequently discovered concept",
            "venue": "J. Comb. Theory, Ser. A 13(3), 297\u2013305",
            "year": 1972
        },
        {
            "authors": [
                "M. Kunc"
            ],
            "title": "Regular solutions of language inequalities and well quasi-orders",
            "venue": "Theor. Comput. Sci. 348, 277\u2013293",
            "year": 2005
        },
        {
            "authors": [
                "A. de Luca",
                "S. Varricchio"
            ],
            "title": "Finiteness and Regularity in Semigroups and Formal Languages",
            "venue": "Springer",
            "year": 1999
        },
        {
            "authors": [
                "J.\u00c9. Pin"
            ],
            "title": "Varieties of Formal Languages",
            "venue": "Foundations of computer science, North Oxford Academic",
            "year": 1986
        },
        {
            "authors": [
                "J.\u00c9. Pin"
            ],
            "title": "Syntactic semigroups",
            "venue": "Rozenberg, G., Salomaa, A. (eds.) Handbook of Formal Languages. vol. 1, pp. 679\u2013746. Springer",
            "year": 1997
        },
        {
            "authors": [
                "J.\u00c9. Pin"
            ],
            "title": "How to prove that a language is regular or star-free",
            "venue": "LATA 2020. LNCS,",
            "year": 2020
        },
        {
            "authors": [
                "K. Sch\u00fctte",
                "S.G. Simpson"
            ],
            "title": "Ein in der reinen zahlentheorie unbeweisbarer satz \u00fcber endliche folgen von nat\u00fcrlichen zahlen",
            "venue": "Arch. Math. Log. 25(1), 75\u201389",
            "year": 1985
        }
    ],
    "sections": [
        {
            "text": "ar X\niv :2\n20 3.\n06 53\n5v 1\n[ cs\n.F L\n] 1\n2 M\nKeywords: finite semigroups \u00b7 well quasi-order \u00b7 unavoidable words"
        },
        {
            "heading": "1 Introduction",
            "text": "The notion of well quasi-order (wqo) is a well-established tool in mathematics and in many areas of theoretical computer science that was rediscovered by many authors (see [7] by Kruskal). A comprehensive overview of the applications of the notion in theory of formal languages and combinatorics on words can be found in the book [9] by de Luca and Varricchio or in the survey paper [2] by D\u2019Alessandro and Varricchio. Since our contribution belongs to formal language theory, we recall the central notion of wqo directly for the set of all words over a finite alphabet A. A quasi-order\u2264 on a set A\u2217 is wqo if it has no infinite antichains and no decreasing infinite chain (the latter property is often called well-foundness). There are several equivalent conditions of the notion (see, e.g., [9, Theorem 6.1.1]); among them we recall the following: for every infinite sequence of words w1, w2, . . . there exist integers 0 < i < j such that wi \u2264 wj . We point out that the important property which makes the notion of wqo a useful tool is that every upper closed subset of A\u2217 with respect to a wqo \u2264 is a regular language (see [9, Theorem 6.3.1]).\nThe first example of wqo in the area of formal languages was given by Higman [5]. We mention the simplest consequence of the general statement, namely the result that the embedding relation E on A\u2217 is wqo. The embedding relation E is often called subword ordering, because a word u embeds in a word v if u is a scattered subword of v, i.e., uE v if there are factorizations of the same length\n\u22c6 The research was supported by Grant 19-12790S of the Grant Agency of the Czech Republic.\nu = a1 . . . ak and v = v1 . . . vk such that, for all i \u2208 {1, . . . , k}, we have ai \u2208 A, vi \u2208 A+, and ai appears in vi.\nThe considered notion of embedding relation can be modified by requiring different conditions on the factorizations. For example, if the alphabet A is quasiordered by , then we may replace the condition that ai appears in vi by the condition that there is j such that ai aj and aj appears in vi. In this way we obtain a quasi-order which is a well known (and more general) instance of Higman result. Another variant is the following gap embedding considered by Schu\u0308tte and S. G. Simpson in [13] for an alphabet equipped by linear order \u2291: the defining condition that ai appears in vi is replaced by the condition that the letter ai is the last letter in vi and it is a minimal letter in vi with respect to \u2291. Notice that yet another modification of gap embedding is the priority embedding in [4] by Haase, Schmitz, and Schnoebelen.\nOur paper concentrates on an application of wqos motivated by the work of Bucher, Ehrenfeucht and Haussler [1], which leads to a purely algebraic question in the realm of ordered semigroups. Notice that the topic is nicely overviewed in the recent survey paper [12] by Pin.\nBefore we introduce the primary question, we briefly recall the role of ordered semigroups in the algebraic theory of regular languages. At first, when we talk about an ordered semigroup (S, \u00b7,\u2264), we assume that the partial order \u2264 is stable, i.e., compatible with the multiplication \u00b7 in the sense that, for arbitrary x, y, s \u2208 S, the inequality x \u2264 y implies both s \u00b7 x \u2264 s \u00b7 y and x \u00b7 s \u2264 y \u00b7 s. The finite ordered semigroups are used to recognize regular languages similarly to unordered semigroups \u2013 see, e.g., the fundamental survey on the algebraic theory of regular languages [11] by Pin. The modification is natural as the syntactic semigroup of a regular language is implicitly ordered in the following way. In the syntactic congruence of the regular language, words are related if they have the same set of contexts putting the words into the language. Then one may also compare these sets of contexts by the inclusion relation; this comparison gives the syntactic quasi-order and consequently the partial order on the syntactic semigroup of the considered regular language. Let us note that in the literature the syntactic quasi-order is not always defined in this way, but the dual quasiorder is considered instead, e.g., in [11].\nThe starting point in the study of well quasi-orders in [1] was a research by Ehrenfeucht, Haussler, and Rozenberg [3] concerning certain rewriting systems preserving regularity, where a well quasi-order plays a role of a sufficient condition guaranteeing the required property of the rewriting system. Particular attention in that research is paid to rewriting systems R with rules of the form a \u2192 u with a being a letter and u being a word. For such a rewriting system, in [1], there are stated equivalent conditions to the fact that the derivation relation \u2217 =\u21d2R is a well quasi-order. For example, one of the equivalent conditions is that the set L = {aua | a \u2208 A, u \u2208 A\u2217, a \u2217 =\u21d2R aua} is unavoidable (in the sense that every infinite word over the alphabet A contains a finite factor from the language L). Unfortunately, they did not give algorithms to test the conditions. They also showed that a derivation relation that is a wqo comes from a rewriting\nsystem induced by a semigroup homomorphism \u03c3 : A+ \u2192 S onto a finite ordered semigroup (S, \u00b7,\u2264) by the following formula:\nR\u03c3 = {a \u2192 u | a \u2208 A, u \u2208 A +, \u03c3(a) \u2264 \u03c3(u)}.\nFinally, the open question is to characterize homomorphisms \u03c3 such that \u2217 =\u21d2R\u03c3 is a well quasi-order. Another research goal is a characterization of those finite ordered semigroups S, such that the relation\n\u2217 =\u21d2R\u03c3 is a wqo for every alphabet A\nand a homomorphism \u03c3 : A+ \u2192 S. For the purpose of this paper we call these ordered semigroups congenial.\nLet us note that the examples of wqo mentioned earlier also fit to the introduced scheme of relations arising from a homomorphism onto a finite ordered semigroup. Indeed, for an alphabet A we may consider an ordered semigroup (P (A),\u222a,\u2286) consisting of non-empty subsets of A equipped with the operation of union, and ordered by the inclusion relation. Taking then the homomorphism \u03c3 : A+ \u2192 P (A), where \u03c3(a) = {a}, the above considered relation\n\u2217 =\u21d2R\u03c3 coin-\ncides with the embedding relation E. Similarly, we can consider an appropriate homomorphism onto an ordered semigroup in the other mentioned examples.1\nUp to our knowledge, and also according to the survey paper [12], there is just one significant contribution to the mentioned open questions. Namely, in the paper [8] by Kunc, the questions are solved for the semigroups ordered by the equality relation. It is stated in [8] (implicitly contained in the proof of Theorem 10) that the property depends only on the semigroup S, not on the actual homomorphism \u03c3. The congenial semigroups ordered by the equality relation are characterized as finite chains of finite simple semigroups. One of the equivalent characterizations of this transparent structural property is the following condition which can be checked in polynomial time: for every s, t \u2208 S, we have (s \u00b7 t)\u03c9 \u00b7 s = s or t \u00b7 (s \u00b7 t)\u03c9 = t, where (s \u00b7 t)\u03c9 is the power of s \u00b7 t which is idempotent.\nOur research aims to give an analogous characterization in the general case; however, we do not fulfill that program yet, and our contribution brings tentative results. As the main result, we show that the problem of whether a homomorphism induces a well quasi-order is decidable. The proof is almost a straightforward application of the mentioned characterization from [1]. Furthermore, we give some necessary conditions related to the studied property, and, on the other hand, we establish other conditions which ensure the property. Next, we show that the mentioned side result from [8] holds in the full generality: the property is indeed a property of an ordered semigroup and does not depend on the homomorphism.\nThe proofs of results marked by the symbol \u2660 are available in Appendix.\n1 For a variant of Higman\u2019s Lemma where the alphabet A is equipped with the quasiorder , we take for the ordered semigroup S the subsemigroup of P (A) consisting of all downward closed subsets of A with respect to the considered quasi-order . For the gap embedding, one may construct the semigroup A\u00d7 A (ordered by equality), where the multiplication is given by (a, b) \u00b7(c, d) = (min(a, c), d), where min is taken with respect to \u2291 (and the homomorphism \u03c3 : A \u2192 A\u00d7A is the diagonal mapping)."
        },
        {
            "heading": "2 Preliminaries",
            "text": "We briefly recall basic notions and fix notation used in the paper. We start with that from semigroup theory. When we talk about ordered semigroup or semigroup, we write simply S instead of formal notation (S, \u00b7,\u2264) and (S, \u00b7). Throughout the paper we work with finite semigroups with the exception of the free monoid A\u2217 (the free semigroup A+) formed by (non-empty) words over an alphabet A. We use the symbol \u03b5 for the empty word. An element e in a semigroup S is called idempotent if e \u00b7 e = e. For all s \u2208 S, the set {sn |n \u2208 N} contains exactly one idempotent, which is denoted s\u03c9. We put s\u03c9+1 = s\u03c9 \u00b7 s which equals (by definition) to s \u00b7 s\u03c9. By S1 we mean the monoid S \u222a{1} with a new neutral element 1 added when S is not a monoid and S1 = S otherwise. We denote evalS : S\n+ \u2192 S the evaluation homomorphism from the free semigroup over S defined by the rule evalS(s) = s for all s \u2208 S. Here, an element w \u2208 S+ is a word w = s1s2 . . . sk, where si \u2208 S for i \u2208 {1, . . . , k}, and for such w we have evalS(w) = evalS(s1s2 . . . sk) = s1 \u00b7 s2 \u00b7 \u00b7 \u00b7 sk.\nFurthermore, we use the Green relations, a basic notion in the theory of semigroups (see [6] by Howie). For the reader\u2019s convenience we recall that an ideal of a semigroup S is a non-empty subset I \u2286 S such that for all t \u2208 I and s \u2208 S we have t \u00b7 s \u2208 I and s \u00b7 t \u2208 I. The ideal generated by an element s \u2208 S is equal to S1sS1 = {x \u00b7 s \u00b7 y |x, y \u2208 S1}. Then the Green relation J is defined by the rule s J t \u21d0\u21d2 S1sS1 = S1tS1. We say that a semigroup is simple if it has no proper ideal, i.e., if all elements of the semigroup are J-equivalent.\nThe following lemma is well known (see, e.g., [10, Theorem 1.11] by Pin).\nLemma 1. Let S be a finite semigroup. There exists n \u2208 N such that for every sequence of elements s1, . . . , sn \u2208 S there are indices i, j \u2208 {1, . . . , n}, i \u2264 j for which the product si \u00b7 si+1 \u00b7 \u00b7 \u00b7 sj is an idempotent.\nFor words w, x, y, z \u2208 A\u2217 such that w = xyz, we say that x is a prefix, y is a factor and z is a suffix. We say that the prefix x of w is proper if |x| < |w|, where |w| is the length of the word w. A language L \u2286 A\u2217 is unavoidable if an arbitrary infinite word u over A has a factor v in L. We denote the set of all infinite words over A by A\u221e.\nA quasi-order \u2264 on a set X is a reflexive and transitive binary relation. It is called a well quasi-order (wqo) if for an infinite sequence (xn)n\u2208N of elements of X there exist indices m,n \u2208 N such that m < n and xm \u2264 xn. Many equivalent defining conditions are known (see, e.g., [9, Theorem 6.1.1]).\nThe next definition is partially motivated by results from [1]. We prefer to follow the formalism and notation used in [8].\nDefinition 2. Let \u03c3 : A+ \u2192 S be a homomorphism onto a finite ordered semigroup. We denote \u2264\u03c3 a quasi-order on A\u2217 defined by setting u \u2264\u03c3 v if and only if there exist factorizations u = a1 . . . an and v = v1 . . . vn, such that for all i \u2208 {1, . . . , n} we have ai \u2208 A, vi \u2208 A+ and \u03c3(ai) \u2264 \u03c3(vi).\nWe refer to the list of inequalities \u03c3(aj) \u2264 \u03c3(vj) for j \u2208 {1, . . . , n} as to the proof of u \u2264\u03c3 v, and we can use the proof to form other inequalities. We say that\nai . . . aj \u2264\u03c3 vi . . . vj is the consequence of the proof given by the factor ai . . . aj . Note that u \u2264\u03c3 v implies \u03c3(u) \u2264 \u03c3(v) and either u = v = \u03b5 or u, v \u2208 A+. Finally, it is clear that \u2264\u03c3 is a stable quasi-order on A\n\u2217. The main result from [1] has the following natural interpretation. To see it, one needs other results [1, Section 3] concerning rewriting systems of the form mentioned in the introduction (called OS scheme in [1]). If the relation \u2217 =\u21d2R with rules of the form a \u2192 u, a \u2208 A, u \u2208 A+ is a wqo, then there is a homomorphism \u03c3 : A+ \u2192 S onto a finite ordered semigroup such that the relations \u2217 =\u21d2R and \u2264\u03c3 coincide. And vice versa, if \u2264\u03c3 is a wqo, then there is a system R with the property \u2217 =\u21d2R = \u2264\u03c3.\nProposition 3 ([1]). Let \u03c3 : A+ \u2192 S be a homomorphism onto a finite ordered semigroup. Then the following conditions are equivalent:\n1. The relation \u2264\u03c3 is a well quasi-order on A\u2217. 2. The language L\u03c3 = {awa | a \u2208 A,w \u2208 A\u2217, a \u2264\u03c3 awa} is unavoidable over A. 3. The language {aw | a \u2208 A,w \u2208 A\u2217, a \u2264\u03c3 aw} is unavoidable over A.\nWe say that an ordered semigroup S is congenial if for every homomorphism \u03c3 : A+ \u2192 S the corresponding relation \u2264\u03c3 is a well quasi-order. The class of congenial semigroups is denoted C.\nWe finish this section with a basic observation that it is enough to consider the case of the homomorphism evalS when a congeniality of S is tested. We establish the following auxiliary lemma with the proof essentially same as to the unordered case (see [8, Theorem 10, (iii)=\u21d2(i)]).\nLemma 4. Let \u03c3 : A+ \u2192 S be a homomorphism to an ordered semigroup S such that \u2264\u03c3 is a wqo. Let B be an alphabet, \u03b1 : B\n+ \u2192 A+ be a homomorphism of free semigroups such that \u03b1(B) \u2286 A, and \u03d5 = \u03c3 \u25e6\u03b1. Then the quasi-order \u2264\u03d5 is a wqo. \u2660\nThe following statement is a direct consequence of Lemma 4, where we take A = S and \u03c3 = evalS .\nLemma 5. A semigroup S is congenial if and only if \u2264evalS is a wqo. \u2660"
        },
        {
            "heading": "3 What Makes an Ordered Semigroup Congenial",
            "text": "Due to [8, Lemma 2], we know that a semigroup S ordered by equality is congenial if and only if for every s, t \u2208 S either s = (s \u00b7 t)\u03c9 \u00b7 s or t = t \u00b7 (s \u00b7 t)\u03c9 . The natural generalization of this condition for an ordered semigroup S is\n\u2200s, t \u2208 S : s \u2264 (s \u00b7 t)\u03c9 \u00b7 s or t \u2264 t \u00b7 (s \u00b7 t)\u03c9 . (1)\nWe show that this condition is indeed necessary. Note that a semigroup satisfying (1) also satisfies s \u2264 s\u03c9+1 as it is just the condition (1) with s = t.\nProposition 6. Every congenial semigroup satisfies the condition (1). \u2660\nNote that for the condition s \u2264 s\u03c9+1 leaving the realm of ordered semigroups we get the equality s = s\u03c9+1 defining the widely studied class of finite completely regular semigroups.\nThe following example shows that the condition (1) is not a sufficient condition. It indicates that the ordered situation is more complicated.\nExample 7. Denote FLRB(3) the free left-regular band (i.e., semigroup satisfying the identities xyx = xy and x2 = x) over three generators a, b, c. The semigroup has 15 elements represented by words listed in Fig. 1, where the order is depicted. For the product of a pair of elements, we simply concatenate the words and then\nomit the second occurrence of each letter if it occurs. It is a routine to check that FLRB(3) satisfies the condition (1).\nNow we take \u03c3 : {a, b, c}+ \u2192 FLRB(3) where \u03c3(a) = a, \u03c3(b) = b, \u03c3(c) = c. For the language L\u03c3 given by Proposition 3, we see that u \u2208 L\u03c3 if and only if \u03c3(u) \u2208 {a, ac, acb, b, ba, bac, c, cb, cba}. The periodical infinite word generated by abc, that is (abc)\u221e = abcabc . . . , has no factor in the language L\u03c3 since \u03c3((abc)na) = abc (for n \u2208 N) and similarly for factors starting and ending with b, resp. c. This means that the language L\u03c3 is avoidable and FLRB(3) /\u2208 C. Therefore, the condition (1) is not the characterization of the class of congenial semigroups.\nWe also add an example of ordered semigroup which is not completely regular.\nExample 8. We consider two ordered versions B+2 and B \u2212 2 of the Brandt semigroup B2. The semigroup is generated by two elements a and b satisfying a 2 = 0, b2 = 0, aba = a, and bab = b. The semigroup has five elements a, b, ab, ba, and 0, where ab, ba, 0 are idempotents. The orders are given in Fig. 2. In both cases we consider a homomorphism \u03c3 : {a, b}+ \u2192 B2, where \u03c3(a) = a, \u03c3(b) = b.\nFirstly, we deal with B+2 . Taking the sequence of words (a i)i\u2208N, we get an infinite antichain with respect to \u2264\u03c3 showing that \u2264\u03c3 is not a wqo and thus B+2 /\u2208 C. For the ordered semigroup B \u2212 2 , we see that a \u2264 a\n2 = 0, b \u2264 b2 = 0, and a = aba, and so a2, b2, aba \u2208 L\u03c3 for L\u03c3 from Proposition 3. The language {a2, aba, b2} is unavoidable, which implies B\u22122 \u2208 C.\nMotivated by the previous examples and basic observations, we show the first sufficient condition ensuring the congeniality.\nProposition 9. Let S be a finite ordered semigroup satisfying the inequality x \u2264 x \u00b7 (y \u00b7 x)\u03c9. Then S is congenial.\nProof. Let \u03c3 : A+ \u2192 S be an arbitrary homomorphism. We show that the language L\u03c3 = {awa | a \u2208 A,w \u2208 A\u2217, \u03c3(a) \u2264 \u03c3(awa)} from Proposition 3 is unavoidable. Let v be an infinite word over the alphabet A. Since the alphabet is finite, some letter a \u2208 A has infinitely many occurrences in v. We consider the factorization v = w0aw1aw2aw3 . . . , where the words wi do not contain the letter a. We take the sequence s1 = \u03c3(w1a), s2 = \u03c3(w2a), . . . and use Lemma 1 to show that there exist indices i, j such that \u03c3(wia . . . wja) is an idempotent. If we denote x = \u03c3(a), y = \u03c3(wia . . . wj), then we get y \u00b7 x = (y \u00b7 x)\u03c9 and x \u2264 x \u00b7 (y \u00b7 x)\u03c9 = x \u00b7 y \u00b7 x. Therefore a \u2264\u03c3 awia . . . wja and the infinite word v has a factor in L\u03c3. \u2293\u2294\nNatural examples of ordered semigroups satisfying the assumption in the previous statement can be found in Appendix."
        },
        {
            "heading": "4 Effective Characterization of the Class C",
            "text": "In order to check the condition in Proposition 3, we introduce some technical notation. Let A be an alphabet, and w \u2208 A+ be a word. Then we write f(w) for the first letter in w, i.e., the letter a such that w \u2208 aA\u2217. Dually, \u2113(w) means the last letter in the word w. Moreover, we denote the set of all factors and suffixes of a given word in a usual way with an exception that we do not consider letters as factors and suffixes here:\nFac(w) = {u \u2208 A+ \\A | \u2203p, q \u2208 A\u2217, w = puq}, and\nSuf(w) = {u \u2208 A+ \\A | \u2203p \u2208 A\u2217, w = pu}.\nNow, let \u03c3 : A+ \u2192 S be a homomorphism onto a finite ordered semigroup. We introduce the main technical notation: for w \u2208 A+ we put\nFac\u03c3(w) = {(\u03c3(u), f(u), \u2113(u)) \u2208 S \u00d7A\u00d7A | u \u2208 Fac(w)}, and\nSuf\u03c3(w) = {(\u03c3(u), f(u), \u2113(u)) \u2208 S \u00d7A\u00d7A | u \u2208 Suf(w)}.\nNotice that Fac\u03c3(w) = Suf\u03c3(w) = Fac(w) = Suf(w) = \u2205 whenever w \u2208 A. Furthermore, Suf\u03c3(w) \u2286 S \u00d7 A \u00d7 {\u2113(w)} for every word w, that is a useful\nproperty motivating the following definition. A non-empty subset M of the set S\u00d7A\u00d7A is called coherent if there is a letter a \u2208 A such that M \u2286 S\u00d7A\u00d7{a}; if such a letter exists, we denote it by \u2113(M).\nClearly, w \u2208 A+ does not avoid L\u03c3 = {ava | a \u2208 A, v \u2208 A\u2217, a \u2264\u03c3 ava} if and only if there exist w\u2032, v, w\u2032\u2032 \u2208 A\u2217 such that w = w\u2032avaw\u2032\u2032 and \u03c3(a) \u2264 \u03c3(ava). The latter condition is equivalent to (\u03c3(ava), a, a) \u2208 Fac\u03c3(w) with \u03c3(a) \u2264 \u03c3(ava). In other words, a word w \u2208 A+ avoids the set L\u03c3 if and only if Fac\u03c3(w) is disjoint with the set F = {(s, a, a) \u2208 S \u00d7 A \u00d7 A | \u03c3(a) \u2264 s}. Now, we are ready to formulate a direct consequence of Proposition 3.\nLemma 10. Let \u03c3 : A+ \u2192 S be a homomorphism onto a finite ordered semigroup S. Then the relation \u2264\u03c3 is a well quasi-order if and only if the set {w \u2208 A+ \\A | Fac\u03c3(w) \u2229 F = \u2205} is finite. \u2293\u2294\nTo test whether the considered set is finite, we use that every Fac\u03c3(w) is a subset of S \u00d7 A \u00d7 A, and therefore there are only finitely many of them. In fact, we compute all possible Suf\u03c3(w) disjoint with F instead of computing all Fac\u03c3(w). It is enough as Fac\u03c3(w) is a union of all Suf\u03c3(u) where u is a prefix of w. Naturally, we compute sets Suf\u03c3(u) recursively, since Suf\u03c3(wa) can be determined by Suf\u03c3(w) in the following way. Informally speaking, we add a at the end of all elements of Suf\u03c3(w) and evaluate the suffix \u2113(Suf\u03c3(w))a of wa of length two. Therefore, we see the sets Suf\u03c3(w) as states of the following finite deterministic incomplete automaton A\u03c3 over the alphabet A. Notice that the automaton does not have final states.\nWe put A\u03c3 = (Q,A, \u03b4, \u03b9) where Q = {\u03b9} \u228e A\u0304 \u228e P , A\u0304 = {a\u0304 | a \u2208 A}, and P = {M \u2286 S \u00d7A\u00d7A |M 6= \u2205,M \u2229 F = \u2205,M coherent}. For a given set M \u2208 P and a letter a \u2208 A we define\nM \u2217 a = {(s \u00b7 \u03c3(a), b, a) | (s, b, c) \u2208 M} \u222a {(\u03c3(\u2113(M)a), \u2113(M), a)}.\nSimilarly, for b\u0304 \u2208 A\u0304 we put b\u0304 \u2217 a = {(\u03c3(ba), b, a))}. Furthermore, we define the partial transition function \u03b4 : Q \u00d7 A \u2192 Q by \u03b4(\u03b9, a) = a\u0304 for the initial state \u03b9, and for q \u2208 Q \\ {\u03b9} we put \u03b4(q, a) = q \u2217 a if q \u2217 a \u2208 P . Note that the condition q \u2217 a \u2208 P is equivalent to q \u2217 a \u2229 F = \u2205 since q \u2217 a is always non-empty and coherent. In particular, we have \u2113(q \u2217a) = a. As usual, the partial function \u03b4 can be extended to the partial function \u03b4 : Q\u00d7A+ \u2192 Q, which is denoted by \u03b4 too.\nThe following lemma summarises the properties of the previous constructions, with an obvious proof by an induction with respect to the length of words.\nLemma 11. Let \u03c3 : A+ \u2192 S be a homomorphism onto a finite ordered semigroup S, and A\u03c3 be the automaton defined as above. For every word w \u2208 A+ \\A, the state \u03b4(\u03b9, w) is defined in A\u03c3 if and only if Fac\u03c3(w) \u2229 F = \u2205. Moreover, if \u03b4(\u03b9, w) is defined, then \u03b4(\u03b9, w) = Suf\u03c3(w). \u2293\u2294\nNow, we are ready to state the main result. The proof is straightforward consequence of Propositon 3 and the constructions and lemmas in this section.\nTheorem 12. Let \u03c3 : A+ \u2192 S be a homomorphism onto a finite ordered semigroup S. Then \u2264\u03c3 is a wqo if and only if the automaton A\u03c3 does not contain an infinite path starting in the initial state \u03b9. \u2660\nThe reader may look into Appendix for an illustrative example of the construction of A\u03c3. The purpose of Theorem 12 is the following statement.\nCorollary 13. Let \u03c3 : A+ \u2192 S be a homomorphism onto a finite ordered semigroup S. Then it is decidable whether \u2264\u03c3 is a well quasi-order. \u2293\u2294\nRecall that all states in P are coherent subsets of S \u00d7 A \u00d7 A. Since the automaton A\u03c3 is finite, the existence of an infinite path starting in the initial state \u03b9 is equivalent to the existence of a loop reachable from \u03b9. If we assume that there is a loop labeled by u and reachable by v, then we have that vu\u221e = vuuu . . . avoids L\u03c3. Hence the periodical infinite word u \u221e avoids L\u03c3 too.\nCorollary 14. Let \u03c3 : A+ \u2192 S be a homomorphism onto a finite ordered semigroup S. Then there is an infinite word avoiding L\u03c3 if and only if there is a periodic infinite word u\u221e with that property. \u2293\u2294\nThe number of states of the automaton A\u03c3 is bounded by |A| \u00d7 2|S|\u00d7|A| + |A|+1, that gives the obvious exponential bound for the time complexity of the algorithm based on Theorem 12.\nOne may modify the construction of A\u03c3 if the condition (3) from Proposition 3 replaces the condition (2). This means that Corollary 14 holds if we take the set {aw | a \u2208 A,w \u2208 A+, \u03c3(a) \u2264 \u03c3(aw)} instead of the set L\u03c3."
        },
        {
            "heading": "5 Other Necessary and Sufficient Conditions",
            "text": "The motivation for this section is to examine whether the condition that \u2264\u03c3 is a wqo depends on the homomorphism \u03c3 or it is just a property of the semigroup. Therefore, we try to prove necessary conditions from Section 3 under the assumption that \u2264\u03c3 is a wqo.\nProposition 15. Let \u03c3 : A+ \u2192 S be a homomorphism onto a finite ordered semigroup S such that \u2264\u03c3 is a wqo. Then for every u \u2208 A+ there exists an integer p > 1 such that u \u2264\u03c3 up.\nProof. We show the statement by induction with respect to the length of the word u. For every a \u2208 A the definition of wqo implies that ak \u2264\u03c3 a\u2113 for some integers k < \u2113, and by the definition of \u2264\u03c3 we have a \u2264\u03c3 a\np for some p > 1. Assume that the statement is true for all words shorter than a given word u \u2208 A+ \\ A. Similarly to the initial step, we have uk \u2264\u03c3 u\u2113 for some k < \u2113. We consider the consequences of the proof of uk \u2264\u03c3 u\u2113 given by factors u of uk. The first non-trivial inequality among these consequences in the order from left to right is of the form u \u2264\u03c3 umv where v is a proper prefix of u. Notice that for v = \u03b5 we are done.\nFor the considered prefix v of u we may also have some inequality of the form v \u2264\u03c3 ujw with j \u2208 N, in particular the proof of the inequality uk \u2264\u03c3 u\u2113 has such a consequence. We analyze the inequalities of that form for all prefixes of u.\nOn the set P = {v \u2208 A\u2217 | v is prefix of u} we define the relation\u2192 as follows: v \u2192 w if there is j \u2265 0 such that v \u2264\u03c3 ujw and |v| < |ujw|. (Notice that if w = v, then j > 0.) Since \u2264\u03c3 is a stable quasi-order the relation \u2192 is transitive. As is discussed above, there is v \u2208 P , v 6= u such that u \u2192 v and so at least one of the following cases occurs.\nCase I: u \u2192 \u03b5. This means u \u2264\u03c3 uj with j > 1 and we are done. Case II: there is v \u2208 P such that u \u2192 v 6= \u03b5, and there is no w such that v \u2192 w. In particular, v 6= u. Let v\u0304 be the suffix of u such that vv\u0304 = u. Since v 6= \u03b5, we have |v\u0304| < |u| and by the induction assumption there is p such that v\u0304 \u2264\u03c3 v\u0304p. If we consider the proof of u \u2264\u03c3 ujv, then the consequence given by the prefix v is trivial equality (by the assumption that there is no inequality of the form v \u2264\u03c3 ujw with |v| < |ujw|). Then the consequence of the proof given by the suffix v\u0304 is in the form v\u0304 \u2264\u03c3 v\u0304uj\u22121v. Now we use this inequality (p\u2212 1)-times to get v\u0304p\u22121 \u2264\u03c3 (v\u0304uj\u22121v)p\u22121 = v\u0304u(p\u22121)j\u22121v. Then we multiply the former inequality by v\u0304 on the right and we get v\u0304p \u2264\u03c3 v\u0304u(p\u22121)j . Since we assumed v\u0304 \u2264\u03c3 v\u0304 p, we also get v\u0304 \u2264\u03c3 v\u0304u (p\u22121)j. Finally, we multiply by v on the left and obtain u \u2264\u03c3 u(p\u22121)j+1. Case III: there is v \u2208 P such that u \u2192 v 6= \u03b5, and v \u2192 v. This means that there is j > 0 such that v \u2264\u03c3 ujv. Now, it is enough to multiply the former inequality by the suffix v\u0304 of u on the right, and we get u \u2264\u03c3 uj+1. \u2293\u2294\nWe try to show that an ordered semigroup S is congenial whenever we have an onto homomorphism \u03c3 : A+ \u2192 S determining wqo \u2264\u03c3. This means that for every homomorphism \u03d5 : B+ \u2192 S, the set L\u03d5 = {bwb | b \u2208 B,w \u2208 B\u2217, b \u2264\u03d5 bwb} has to be unavoidable. Hence, every periodic infinite word w\u221e must contain a factor from L\u03d5. In particular, if B contains n letters b1, b2, . . . , bn, then, for the word w = b1b2 . . . bn, there is an index i \u2208 {1, . . . , n} and an integer p \u2208 N such that \u03d5(bi) \u2264 \u03d5(bi(bi+1 . . . bi)p). Since the homomorphism \u03c3 is onto, we may consider words wj \u2208 A+ such that \u03c3(wj) = \u03d5(bj). In this setting, we want to show that \u03c3(wi) \u2264 \u03c3(wi(wi+1 . . . wi)p). In fact, we aim on the stronger inequality wi \u2264\u03c3 wi(wi+1 . . . wi)p. Proposition 15 is a special case of this property for n = 1. The following statement fulfills the sketched program.\nTheorem 16. Let S be a finite ordered semigroup. Then the following conditions are equivalent:\n(i) There exists an alphabet A and an onto homomorphism \u03c3 : A+ \u2192 S such that \u2264\u03c3 is a well quasi-order. (ii) There exists an alphabet A and an onto homomorphism \u03c3 : A+ \u2192 S such that, for every n \u2208 N and a1, . . . , an \u2208 A, there exists i \u2208 {1, . . . , n} and p \u2208 N such that ai \u2264\u03c3 ai(ai+1 . . . ana1 . . . ai)p. (iii) There exists an alphabet A and an onto homomorphism \u03c3 : A+ \u2192 S such that, for every n \u2208 N and u1, . . . , un \u2208 A+, there exists i \u2208 {1, . . . , n} and p \u2208 N such that ui \u2264\u03c3 ui(ui+1 . . . unu1 . . . ui)p.\n(iv) There exists an alphabet A and an onto homomorphism \u03c3 : A+ \u2192 S such that, for every n \u2208 N and u1, . . . , un \u2208 A+, there exists i \u2208 {1, . . . , n} and p \u2208 N such that \u03c3(ui) \u2264 \u03c3 (ui(ui+1 . . . unu1 . . . ui)\np). (v) For every n \u2208 N and s1, . . . , sn \u2208 S, there exists i \u2208 {1, . . . , n} and p \u2208 N\nsuch that si \u2264 si \u00b7 (si+1 \u00b7 \u00b7 \u00b7 sn \u00b7 s1 \u00b7 \u00b7 \u00b7 si)p. (vi) For every alphabet B and a homomorphism \u03d5 : B+ \u2192 S the relation \u2264\u03d5 is\na well quasi-order.\nProof. We show the implications from top to bottom. The omitted implications are easy to see. In the conditions (i) \u2013 (iv), the same pair (A, \u03c3) is employed.\n\u201c(i) =\u21d2 (ii)\u201d: We consider a new alphabet B = {b1, . . . , bn} of size n and a homomorphism \u03b1 : B+ \u2192 A+ such that \u03b1(bi) = ai for all i \u2208 {1, . . . , n}. We denote the composition \u03c3 \u25e6 \u03b1 by \u03d5. By Lemma 4, we know that the relation \u2264\u03d5 is a wqo. In particular, the infinite word (b1b2 . . . bn)\u221e has a factor in L\u03d5 = {bwb | b \u2208 B,w \u2208 B\n\u2217, b \u2264\u03d5 bwb}. Therefore, there is i \u2208 {1, . . . , n} and p \u2208 N such that bi \u2264\u03d5 bi(bi+1 . . . bnb1 . . . bi)p. Finally, we get \u03c3(ai) = \u03d5(bi) \u2264 \u03d5(bi(bi+1 . . . bnb1 . . . bi) p) = \u03c3(ai(ai+1 . . . ana1 . . . ai) p).\n\u201c(ii) =\u21d2 (iii)\u201d: We apply the condition (ii) on the word u = u1u2 . . . un which we see as a concatenation of individual letters. So, there is i \u2208 {1, . . . , n}, p \u2208 N and u\u2032i, u \u2032\u2032 i \u2208 A \u2217 such that ui = u \u2032 iau \u2032\u2032 i and a \u2264\u03c3 a(u \u2032\u2032 i ui+1 . . . unu1 . . . ui\u22121u \u2032 ia)\np. If we multiply this inequality by the word u\u2032i on left and by the word u \u2032\u2032 i on right, we get ui \u2264\u03c3 ui(ui+1 . . . unu1 . . . ui\u22121ui)p. \u201c(v) =\u21d2 (vi)\u201d: It follows from Corollary 14. \u2293\u2294\nThe condition (ii) from Theorem 16 was mentioned in [1] in the setting of rewriting systems, namely it occurs as condition (c) in the concluding section. Also, the condition in Proposition 15 is mentioned there as the condition (b). It is mentioned in [1] without proof that the conditions (a), (b) and (c) are equivalent.\nThe equivalence of the conditions (i) and (vi) in Theorem 16 gives the following result saying that whether the induced quasi-order \u2264\u03c3 is wqo does not depend on the homomorphism \u03c3 and it is indeed a property of the ordered semigroup.\nCorollary 17. Let \u03c3 : A+ \u2192 S be a homomorphism onto a finite ordered semigroup S. Then \u2264\u03c3 is a wqo if and only if the semigroup S is congenial. \u2293\u2294\nWe get the following characterization of congeniality using the condition (v) of Theorem 16.\nCorollary 18. Let S be an ordered semigroup. Then S is congenial if and only if for every n \u2208 N and s1, . . . , sn \u2208 S, there exists i \u2208 {1, . . . , n} such that si \u2264 si \u00b7 (si+1 \u00b7 \u00b7 \u00b7 sn \u00b7 s1 \u00b7 \u00b7 \u00b7 si)\u03c9. \u2660\nUnfortunately, it is not possible to bound n in Corollary 18. Indeed, there is a sequence of ordered semigroups Sm such that Sm satisfies the condition in Corollary 18 if n < m and does not satisfy the condition for n = m"
        },
        {
            "heading": "6 Conclusion",
            "text": "We have shown that for a homomorphism \u03c3 : A+ \u2192 S onto a finite ordered semigroup, it is decidable whether \u2264\u03c3 is a wqo. We also proved that the question does not depend on \u03c3, but it is indeed a property of the given ordered semigroup. One may expect more effective or transparent characterization similar to that of the unordered case in [8]. Nevertheless, our observations suggest that such a characterization could be more difficult to obtain.\nWe conclude with a brief discussion of the applications of our results. We do not see any direct impact of the research to the work done in [1]. On the other hand, in [8], the wqo was applied to prove regularity of maximal solutions of very general language equations and inequalities (see also [12]). The theory developed in [8] may be naturaly extended to the ordered case, so our new class of ordered semigroups inducing well quasi-orders may find the application there."
        },
        {
            "heading": "Acknowledgement",
            "text": "We are grateful to the referees for their numerous valuable suggestions which improved the paper, in particular, its introductory part. We also thank to Michal Kunc for inspiring discussions."
        },
        {
            "heading": "Appendix",
            "text": ""
        },
        {
            "heading": "The Proofs for Technical Lemmas from Section 2",
            "text": "Lemma 4. Let \u03c3 : A+ \u2192 S be a homomorphism to an ordered semigroup S such that \u2264\u03c3 is a wqo. Let B be an alphabet, \u03b1 : B+ \u2192 A+ be a homomorphism of free semigroups such that \u03b1(B) \u2286 A, and \u03d5 = \u03c3 \u25e6\u03b1. Then the quasi-order \u2264\u03d5 is a wqo.\nProof. Let (wi)i\u2208N be a sequence of words over B. Then (\u03b1(wi))i\u2208N is a sequence of words over A. Since \u2264\u03c3 is a wqo, there exist k and \u2113 such that k < \u2113 and \u03b1(wk) \u2264\u03c3 \u03b1(w\u2113). Its proof consists of a list of inequalities ai \u2264\u03c3 ui where i \u2208 {1, . . . ,m}. The considered factorizations correspond to the factorizations wk = b1b2 . . . bm and w\u2113 = v1v2 . . . vm such that bi \u2208 B, vi \u2208 B+, \u03b1(bi) = ai, \u03b1(vi) = ui, because \u03b1 maps letters to letters. Now, ai \u2264\u03c3 ui means \u03c3(ai) \u2264 \u03c3(ui), which can be written as \u03d5(bi) \u2264 \u03d5(vi), that is bi \u2264\u03d5 vi. Composing these inequalities for i \u2208 {1, . . . ,m}, we get wk \u2264\u03d5 w\u2113 and we are done. \u2293\u2294\nLemma 5. A semigroup S is congenial if and only if \u2264evalS is a wqo.\nProof. The implication \u201c=\u21d2\u201d is trivial. Let \u03d5 : B+ \u2192 S be a homomorphism to a finite ordered semigroup S such that \u2264evalS is a wqo. We denote C = \u03d5(B) \u2286 S and consider the homomorphism \u03b1 : C+ \u2192 S which is the restriction of evalS to C+. Then \u2264\u03b1 is a wqo, since \u2264\u03b1 is a restriction of \u2264evalS on C\n+. Now, knowing that \u2264\u03b1 is a wqo, we apply Lemma 4 and obtain that \u2264\u03d5 is wqo too. \u2293\u2294"
        },
        {
            "heading": "The Proof of Proposition 6",
            "text": "Proposition 6. Every congenial semigroup S satisfies the condition\n\u2200s, t \u2208 S : s \u2264 (s \u00b7 t)\u03c9 \u00b7 s or t \u2264 t \u00b7 (s \u00b7 t)\u03c9 . (1)\nProof. Let S be a congenial semigroup. Then \u2264evalS is wqo. However, it is useful to distiguish a role of letters and elements of the semigroup S. Thus we replace S+ by an isomorphic semigroup A+ and denote by \u03c3 the homomorphism \u03c3 : A+ \u2192 S. This homomorphism has a useful property, namely, the restriction of \u03c3 to A is a bijection between A and S. By the assumption, the relation \u2264\u03c3 is a wqo.\nWe start the proof by showing that a congenial semigroup S satisfies s \u2264 s\u03c9+1 for every s \u2208 S. Consider a sequence of words {(ai)}\u221ei=1, where s = \u03c3(a). Due to \u2264\u03c3 being a wqo, there are some positive integers k < \u2113 such that ak \u2264\u03c3 a\u2113. By definition of \u2264\u03c3 we have a \u2264\u03c3 an+1 for some n \u2208 N. This means s \u2264 sn+1 = s \u00b7 sn \u2264 s2n+1 and by iteration we conclude that s \u2264 s\u03c9+1.\nWe continue the proof with elements s, t \u2208 S and letters a, b \u2208 A such that s = \u03c3(a) and t = \u03c3(b). Consider the sequence of words {(ab)i}\u221ei=1 over the alphabet A. Then for some positive integers k < \u2113 it holds that (ab)k \u2264\u03c3 (ab)\u2113.\nUsing the definition of the order \u2264\u03c3 we find the first non-trivial inequality of the form ab \u2264\u03c3 ab . . . . This means that a \u2264\u03c3 au and b \u2264\u03c3 v for some u, v \u2208 A\u2217 such that auv is a prefix of (ab)\u2113 of the length at least 3. Now, assume that u 6= \u03b5. Then from a \u2264\u03c3 au it follows s \u2264 s \u00b7 t \u00b7 \u00b7 \u00b7 r, where r \u2208 {s, t}. In case of r = s, we have for some p \u2208 N that s \u2264 s \u00b7 (t \u00b7 s \u00b7 \u00b7 \u00b7 t \u00b7 s) = s \u00b7 (t \u00b7 s)p. Iterating this inequality, we get s \u2264 s \u00b7 (t \u00b7 s)\u03c9. In case of r = t, we have for some p \u2208 N that s \u2264 s \u00b7 t \u00b7 s \u00b7 \u00b7 \u00b7 s \u00b7 t = (s \u00b7 t)p. Taking the \u03c9-power of both sides, we obtain s\u03c9 \u2264 (s \u00b7 t)\u03c9 . Now we multiply by s on the right to get s\u03c9 \u00b7 s \u2264 (s \u00b7 t)\u03c9 \u00b7 s. Using s \u2264 s\u03c9+1 we conclude that s \u2264 (s \u00b7 t)\u03c9 \u00b7 s = s \u00b7 (t \u00b7 s)\u03c9.\nAssume that u = \u03b5. Then we have b \u2264 v, where v starts with b and has the length at least 2. Similar to the previous case we obtain t \u2264 t \u00b7 s \u00b7 \u00b7 \u00b7 r, and we may proceed in the same way. \u2293\u2294"
        },
        {
            "heading": "The Additional Material for Section 3",
            "text": "Example 8 gives a useful insight. Moreover, it inspires us to show that an arbitrary finite 0-simple semigroup can be ordered in such a way that it is congenial. Recall that, by a 0-simple semigroup S is a semigroup with zero element 0 that has exactly two distinct ideals: {0} and S. Then in a finite 0-simple semigroup we take 0 as the top element that covers the antichain of all non-zero elements. We denote the class of such ordered semigroups by 0-CS\u2212.\nProposition 19. Every finite ordered semigroup in 0-CS\u2212 is congenial.\nProof. We check that every finite 0-simple semigroup satisfies the inequality x \u2264 x \u00b7 (y \u00b7 x)\u03c9, which gives the statement by Proposition 9. Since 0 is the top element, we have to discuss only the case when x \u00b7 (y \u00b7 x)\u03c9 6= 0. However, in this case we have x \u00b7 (y \u00b7 x)\u03c9 = x. \u2293\u2294\nAnother class of ordered semigroups to which the example B\u22122 fits very well is the class of inverse semigroups. This class is extensively studied as it is a natural generalization of groups. For reader not familiar with that theory, we just mention that every inverse semigroup may be represented as a semigroup of partial bijections on an aprropriate set X (the so-called Vagner-Preston representation theorem). In this representation, every element can be viewed as a relation, i.e., the element is a subset of X \u00d7X . Thus elements can be compared by the inclusion \u2286 if they are represented by relations. In this way, any inverse semigroup is implicitly ordered, however we worked with the dual order in Example 8. We call this dual order anti-natural. Since every considered ordered inverse semigroup satisfies the inequality x \u2264 x \u00b7 (y \u00b7 x)\u03c9, we obtain the next consequence of Proposition 9.\nProposition 20. Let S be a finite inverse semigroup ordered anti-naturally. Then S is congenial. \u2293\u2294\nThe following theorem describes a condition generalizing that from Proposition 9. The proof is based on the same ideas. After the proof we also explain that\na semigroup ordered by the equality satisfies the assumtions from the statement if and only if the semigroup is a chain of simple semigroups.\nBefore we formulate the result, we need to recall the definition of the one sided Green relation L. For s, t \u2208 S, we have sLt if there are elements x, y \u2208 S1 such that x \u00b7 s = t and y \u00b7 t = s. Under this definiton, the relation L is an equivalence relation. We also write s \u2264L t if there is y \u2208 S1 such that y \u00b7 t = s. (The dual relations R and \u2264R are not used in our paper.)\nFor a non-empty subset X of a semigroup S we write \u3008X\u3009 for a subsemigroup of S generated by X . By E(S) we mean the set of all idempotents of a semigroup S.\nTheorem 21. Let S be a finite ordered semigroup. If the semigroup S satisfies\n(\u2200F \u2286 S, F 6= \u2205)(\u2203s \u2208 F )(\u2200e \u2208 E(\u3008F \u3009)) : e \u2264L s =\u21d2 s \u2264 s \u00b7 e, (2)\nthen S is congenial.\nProof. We deal with the situation when A = S and evalS is a considered homomorphism. Let v be an infinite word over an alphabet A. Denote v\u2032 its suffix which contains every letter infinitely many times. Now we take"
        },
        {
            "heading": "F = {\u03c3(a) | a \u2208 A, a occurs in v\u2032}",
            "text": "and the condition (2) gives us the choice of the letter a, which is contained in v\u2032 infinitely many times. The rest of the proof is analogous to the proof of Proposition 9. \u2293\u2294\nWe explain the situation when the considered semigroup is the chain of simple semigroups. For every F we take s \u2208 F in the lowest J-class. The idempotent e satisfies e \u2265J s and with e \u2264L s we have eLs. The idempotent e is a right neutral element in its L-class. We get s \u00b7 e = s and we see that every chain of simple semigroups satisfies the condition (2).\nOn the other hand, if the semigroup S is ordered by equality and satisfies the condition (2), then we may take F = {t, t\u2032}. Let s \u2208 F be the element satisfying the condition (2). If s = t then we take e = (t\u2032 \u00b7 t)\u03c9 , for which t \u2264 t \u00b7 (t\u2032 \u00b7 t)\u03c9 follows. If s = t\u2032 then we take e = (t \u00b7 t\u2032)\u03c9 , and obtain t\u2032 \u2264 t\u2032 \u00b7 (t \u00b7 t\u2032)\u03c9. That means that the semigroup is a chain of simple semigroups."
        },
        {
            "heading": "The Additional Material for Section 4",
            "text": "Theorem 12. Let \u03c3 : A+ \u2192 S be a homomorphism onto a finite ordered semigroup S. Then \u2264\u03c3 is a wqo if and only if the automaton A\u03c3 does not contain an infinite path starting in the initial state \u03b9.\nProof. If \u2264\u03c3 is not a wqo, then by Propositon 3 there exists an infinite word avoiding L\u03c3 = {ava | a \u2208 A, v \u2208 A\u2217, a \u2264\u03c3 ava}. Thus, for its each finite prefix w, we know that \u03b4(\u03b9, w) is defined in A\u03c3 by Lemma 11. Hence there is an infinite path in A\u03c3 starting in the initial state.\nOn the contrary, assume that A\u03c3 contains an infinite path starting in the initial state \u03b9. Then the label of that path is an infinite word avoiding the set of words L\u03c3 by Lemma 11. Again, by Proposition 3, we get that \u2264\u03c3 is not a wqo. \u2293\u2294\nWe add an illustrative example of the construction of the automaton A\u03c3.\nExample 22. In Example 8 we saw that B+2 /\u2208 C. If we consider \u03c3 as a canonical mapping sending a letter from A = {a, b} onto the element in the semigroup B+2 of the same name, then S \u00d7A\u00d7A has 20 elements. The automaton A\u03c3 consists of states \u03b9, a\u0304, b\u0304 and then states in P . Every state M \u2208 P is coherent, non-empty and disjoint with F = {(a, a, a), (b, b, b)}. If we remove these two elements from S \u00d7A\u00d7A and divide the resulting set into two parts by the last coordinate, we obtain two nine-elements sets Ma = {(s, x, a) \u2208 S \u00d7A\u00d7A | s 6= a\u2228 x 6= a}, and Mb = {(s, x, b) \u2208 S \u00d7A\u00d7A | s 6= b \u2228 x 6= b}. Hence the number of states of A\u03c3 is 3 + 2 \u00b7 (29 \u2212 1) = 1025.\nHowever, we are not interested in all states, but only those reachable from the initial state \u03b9. We see that only tripples of the form (\u03c3(u), f(u), \u2113(u)), where u \u2208 A+ \\ A, may occur as elements of these states. Hence, in the previous considerations, we may replace Ma by {(0, a, a), (0, b, a), (ba, b, a)} and Mb by {(0, a, b), (0, b, b), (ab, a, b)}. This gives a better uper bound for the size of the part of A\u03c3 reachable from \u03b9. (The bound is 3+2 \u00b7 (23\u22121) = 17.) Fig. 3 describes\nthat part of the automaton A\u03c3 completely. To simplify the notation, the states in P are labeled by the lists of elements (i.e., without curly brackets)."
        },
        {
            "heading": "The proof of Corollary 18",
            "text": "Corollary 18. Let S be an ordered semigroup. Then S is congenial if and only if for every n \u2208 N and s1, . . . , sn \u2208 S, there exists i \u2208 {1, . . . , n} such that si \u2264 si \u00b7 (si+1 \u00b7 \u00b7 \u00b7 sn \u00b7 s1 \u00b7 \u00b7 \u00b7 si)\u03c9.\nProof. With respect to Theorem 16, it is enough to show that the two following conditions are equivalent for a given pair of elements s, t \u2208 S:\n(a) there exists p \u2208 N such that s \u2264 s \u00b7 (t \u00b7 s)p; (b) s \u2264 s \u00b7 (t \u00b7 s)\u03c9 .\nIf (a) holds, then we may iterate the inequality and obtain\ns \u2264 s \u00b7 (t \u00b7 s)p \u2264 s \u00b7 (t \u00b7 s)p \u00b7 (t \u00b7 s)p \u2264 \u00b7 \u00b7 \u00b7 \u2264 s \u00b7 (t \u00b7 s)pk\nfor an arbitrary k \u2208 N. Since there is an integer k \u2208 N such that (t \u00b7s)k = (t \u00b7s)\u03c9, we get the condition (b).\nThe existence of such k gives the implication \u201c(b) =\u21d2 (a)\u201d directly. \u2293\u2294"
        },
        {
            "heading": "The Sequence of Ordered Semigroups Sm",
            "text": "For m \u2265 2 we construct an ordered semigroup Sm as follows. We describe the semigroup by the presentation over the m-letter alphabet Am = {a1, . . . am}:\nSm = \u3008 a1, . . . , am | aiaj = 0 (for i, j \u2208 {1, . . . ,m} such that j \u2212 i 6\u2208 {1, 1\u2212m}),\n(ai . . . ama1 . . . ai\u22121) 2 = ai . . . ama1 . . . ai\u22121 (for i \u2208 {1, . . . ,m})\u3009.\nWe explain the meaning of the previous semigroup presentation informally. We denote u = a1 . . . am. The non-zero elements of Sm are words of length at most 2m \u2212 1 which are factors of u\u221e. Every word which is not a factor of u\u221e is identified with 0 by the rule aiaj = 0 for appropriate indices. Now, any word which is a factor of u\u221e of length at least 2m contains a factor w of length 2m which is a conjugate of uu. Each such factor w may be shortened by the rule (ai . . . ama1 . . . ai\u22121)\n2 = ai . . . ama1 . . . ai\u22121. This procedure may be repeated until the resulting word has length smaller than 2m. The important property of the previous reduction is that the prefixes and suffixes of length m are kept.\nThe description explains both the natural homomorphism \u03c3m : Am \u2192 Sm and the multiplication on Sm. For the reader familiar with the structure theory of semigroups, we mention that Sm has the minimal ideal {0}, one regular class and irregular singleton J-classes consisting of factors of uu of length smaller than m. The regular class consists of factors of uuu of length at least m and at most 2m\u2212 1. It is a m\u00d7m box with singleton H-classes and exactly m idempotents (conjugates of u).\nFinally, we introduce the order on Sm. At first, we put 0 to be the largest element. Then for two factors x, y of u\u221e of length smaller than 2m\u2212 1, we have\nx \u2264 y if\n{\nx = y or 1 < |x| < m \u2264 |y| \u2227 x is both the prefix and the suffix of y.\nOne may check that the relation \u2264 is a stable order on the semigroup S. We point out that ai \u2264 y only for y \u2208 {ai, 0}.\nIn Corollary 18, we consider the following condition for a given integer n:\n(\u2200s1, . . . , sn \u2208 S)(\u2203i \u2208 {1, . . . , n}) : si \u2264 si \u00b7 (si+1 \u00b7 \u00b7 \u00b7 sn \u00b7 s1 \u00b7 \u00b7 \u00b7 si) \u03c9 . (3)\nIf we want to test whether Sm satisfies the condition (3) for a given n, we distinguish two cases depending on whether m divides n or not.\nFirst assume that m divides n. For every i \u2208 {1, . . . , n} we denote [i,m] the remainder after dividing i by m and put si = a[i,m]. Then s1 \u00b7 s2 \u00b7 \u00b7 \u00b7 sn = (a1 \u00b7 \u00b7 \u00b7 am) n\nm = a1 . . . am and we see that Sm does not satisfy the condition (3). If we assume that m does not divide n, then (si+1 \u00b7 \u00b7 \u00b7 sn \u00b7 s1 \u00b7 \u00b7 \u00b7 si)\u03c9 6= 0 only if s1s2 . . . sn is conjugate to some power of a1 . . . am. This is not possible when each si is an element in Am. Thus there is an index i such that si 6\u2208 Am, and the condition (3) is valid.\nWe conclude with the statement that Sm satisfies the condition (3) if and only if m does not divide n. In particular, Sm satisfies the condition (3) for n < m and does not satisfy the condition for n = m."
        }
    ],
    "year": 2022
}