{
    "abstractText": "For the Phase-2 CMS upgrade for the High-Luminosity LHC, a luminosity uncertainty of 1% is targeted. To achieve this goal, measurements from multiple luminometers with orthogonal systematics are required. A standalone luminometer, the Fast Beam Condition Monitor (FBCM) is being designed for the online bunch-by-bunch luminosity measurement. Its fast timing properties also enable the measurement of beam-induced backgrounds. In this paper, the hardware architecture and the readout protocol of the FBCM is described. The expected performance with a simple behavioral model of the front-end comprising a constant fraction discriminator is discussed, although the final implementation in the ASIC is still under discussion. Simulation results show that the FBCM will provide the required statistical uncertainty and deviation from linearity by employing 336 silicon-pad sensors, each with an area of about 3 mm. In addition, the front-end with sensitivity to at least 6000 electrons will satisfy the longevity constraints for an exposure of 1 MeV neutron equivalent fluence of 3.5\u00d7 10 per cm. Presented at TWEPP2021 TWEPP 2021 Topical Workshop on Electronics for Particle Physics Prepared for submission to JINST TWEPP 2021 Topical Workshop on Electronics for Particle Physics 20-24 Sep 2021 Switzerland (On-line) The Fast Beam Condition Monitor as standalone luminometer of the CMS experiment at the HL-LHC Mohammad Sedghi1 on behalf of the CMS collaboration 1Department of Electrical and Computer Engineering, Isfahan University of Technology, Isfahan 84156-83111, Iran E-mail: msedghi@cern.ch Abstract: For the Phase-2 CMS upgrade for the High-Luminosity LHC, a luminosity uncertainty of 1% is targeted. To achieve this goal, measurements from multiple luminometers with orthogonal systematics are required. A standalone luminometer, the Fast Beam Condition Monitor (FBCM) is being designed for the online bunch-by-bunch luminosity measurement. Its fast timing properties also enable the measurement of beam-induced backgrounds. In this paper, the hardware architecture and the readout protocol of the FBCM is described. The expected performance with a simple behavioral model of the front-end comprising a constant fraction discriminator is discussed, although the final implementation in the ASIC is still under discussion. Simulation results show that the FBCM will provide the required statistical uncertainty and deviation from linearity by employing 336 silicon-pad sensors, each with an area of about 3 mm2. In addition, the front-end with sensitivity to at least 6000 electrons will satisfy the longevity constraints for an exposure of 1 MeV neutron equivalent fluence of 3.5 \u00d7 1015 per cm2. For the Phase-2 CMS upgrade for the High-Luminosity LHC, a luminosity uncertainty of 1% is targeted. To achieve this goal, measurements from multiple luminometers with orthogonal systematics are required. A standalone luminometer, the Fast Beam Condition Monitor (FBCM) is being designed for the online bunch-by-bunch luminosity measurement. Its fast timing properties also enable the measurement of beam-induced backgrounds. In this paper, the hardware architecture and the readout protocol of the FBCM is described. The expected performance with a simple behavioral model of the front-end comprising a constant fraction discriminator is discussed, although the final implementation in the ASIC is still under discussion. Simulation results show that the FBCM will provide the required statistical uncertainty and deviation from linearity by employing 336 silicon-pad sensors, each with an area of about 3 mm2. In addition, the front-end with sensitivity to at least 6000 electrons will satisfy the longevity constraints for an exposure of 1 MeV neutron equivalent fluence of 3.5 \u00d7 1015 per cm2.",
    "authors": [
        {
            "affiliations": [],
            "name": "Mohammad Sedghi"
        }
    ],
    "id": "SP:b14308c1187ce13a84c2ee19cb50ee9ee5c56a12",
    "references": [
        {
            "authors": [
                "P. Moreira"
            ],
            "title": "The lpgbt: a radiation tolerant asic for data, timing, trigger and control applications in hl-lhc",
            "venue": "Topical Workshop on Electronics for Particle Physics,",
            "year": 2019
        },
        {
            "authors": [
                "J. Troska",
                "A. Brandon-Bravo",
                "S. Detraz",
                "A. Kraxner",
                "L. Olanter\u00e4",
                "C. Scarcella"
            ],
            "title": "The VTRx+, an optical link module for data transmission at HL-LHC, PoS TWEPP-17",
            "year": 2017
        },
        {
            "authors": [
                "D. Przyborowski",
                "J. Kaplon",
                "P. Rymaszewski"
            ],
            "title": "Design and performance of the BCM1F front end ASIC for the beam condition monitoring system at the CMS experiment",
            "venue": "IEEE Trans. Nucl. Sci",
            "year": 2016
        },
        {
            "authors": [
                "D. Abbaneo"
            ],
            "title": "Design of a constant fraction discriminator for the VFAT3 front-end ASIC of the CMS GEM detector, JINST",
            "year": 2016
        },
        {
            "authors": [
                "M. Sedghi"
            ],
            "title": "Fast Beam Condition Monitor of the CMS experiment at HL-LHC, in International Conference on Technology and Instrumentation in Particle Physics, no. CMS CR-2021/111 in TIPP, 2021",
            "year": 2021
        }
    ],
    "sections": [
        {
            "text": "Presented at TWEPP2021 TWEPP 2021 Topical Workshop on Electronics for Particle Physics\nPrepared for submission to JINST\nTWEPP 2021 Topical Workshop on Electronics for Particle Physics 20-24 Sep 2021 Switzerland (On-line)\nThe Fast Beam Condition Monitor as standalone luminometer of the CMS experiment at the HL-LHC\nMohammad Sedghi1 on behalf of the CMS collaboration 1Department of Electrical and Computer Engineering, Isfahan University of Technology, Isfahan 84156-83111, Iran\nE-mail: msedghi@cern.ch\nAbstract: For the Phase-2 CMS upgrade for the High-Luminosity LHC, a luminosity uncertainty of 1% is targeted. To achieve this goal, measurements from multiple luminometers with orthogonal systematics are required. A standalone luminometer, the Fast Beam Condition Monitor (FBCM) is being designed for the online bunch-by-bunch luminosity measurement. Its fast timing properties also enable the measurement of beam-induced backgrounds. In this paper, the hardware architecture and the readout protocol of the FBCM is described. The expected performance with a simple behavioral model of the front-end comprising a constant fraction discriminator is discussed, although the final implementation in the ASIC is still under discussion. Simulation results show that the FBCM will provide the required statistical uncertainty and deviation from linearity by employing 336 silicon-pad sensors, each with an area of about 3 mm2. In addition, the front-end with sensitivity to at least 6000 electrons will satisfy the longevity constraints for an exposure of 1 MeV neutron equivalent fluence of 3.5 \u00d7 1015 per cm2.\nKeywords: Front-end electronics for detector readout, Models and simulations\nContents"
        },
        {
            "heading": "1 Introduction 1",
            "text": ""
        },
        {
            "heading": "2 Readout electronics 2",
            "text": ""
        },
        {
            "heading": "3 Front-end ASIC 2",
            "text": ""
        },
        {
            "heading": "4 Simulation results 4",
            "text": ""
        },
        {
            "heading": "5 Conclusion 4",
            "text": ""
        },
        {
            "heading": "1 Introduction",
            "text": "A fast beam condition monitor (FBCM) is being designed as a standalone luminometer to run independently of the CMS central trigger and data acquisition systems at the HL-LHC and to provide a bunch-by-bunch luminosity measurement in real time. The ultimate goal of 1% luminosity uncertainty after final calibration requires a negligible statistical error on the calibration constant, the visible cross-section and a deviation from linear response of less than 0.02%/(Hz/\ud835\udf07b) up to an average pileup of 200 [1]. To meet this goal, the FBCM will utilize 336 silicon-pad sensors with a zero-counting algorithm of the observed hits and it will provide the time of arrival (ToA) and the time over threshold (ToT) of the signal pulses with a few ns resolution. The FBCM will have a semi-digital readout to transfer these data to the back-end, with the front-end chip producing a non-clocked output pulse upon the creation of an ionising signal in the silicon-pad sensor. The FBCM will be divided into four quarters, as shown in Figure 1 (right), where one quarter covers one half at one end of the detector. In the baseline design, each quarter of FBCM comprises four front-end modules, each one is connected to an inner tracker port card [2] for data transmission and for connection to the power supply. It is proposed to install the FBCM behind disk 4 of the Tracker Endcap Pixel Detector system, close to the bulkhead, corresponding to 8 < \ud835\udc5f < 30 cm and 277 < |\ud835\udc67 | < 290 cm, as illustrated in Figure 1.\n\u2013 1 \u2013"
        },
        {
            "heading": "2 Readout electronics",
            "text": "The readout chain for a channel is depicted in Figure 2. Once a hit is received on a silicon-pad sensor, the collected ionization charge produces a short pulse. The signal will be amplified and shaped in the front-end ASIC, then a non-clocked digital output pulse will be produced which is transmitted to the lpGBT (Low Power GigaBit Transceiver [3], an ASIC widely used for data transmission and control in the Phase-2 projects) via flex cables called e-links. The lpGBT continuously samples the output signal of the front-end channels every 0.78 ns corresponding to the e-link speed (1.28 Gbps). Then the data will be sent to the back-end by versatile optical link transceivers (VTRx+) [4]. At the back-end, an ATCA (Advanced Telecommunications Computing Architecture) digital processing unit makes histogram of the number of hits per bunch-crossing per sensor and performs labeling the ToA and the ToT after synchronizing to the LHC clock. The timing information will be used for beam-induced background measurement. By counting the number of zero-hit occurrence, known as the zero-counting method, the hit rate and consequently, the luminosity will be calculated. The FBCM ASIC design is planed to be launched in early 2022, and it will make the best use of existing 65 nm electronic building blocks."
        },
        {
            "heading": "3 Front-end ASIC",
            "text": "The requirements on the analog part of the FBCM front-end ASIC are similar to the current BCM1F ASIC [5] which include an analog amplifier, shaper, and a discriminator to produce a non-clocked semi-digital signal. The output carries the ToA and ToT information, so that the ASIC would be compatible with a readout over the Phase-2 pixel electronics. The FBCM front-end ASIC will be designed such a way that the ToT is maintained below 25 ns. This feature makes it compatible with high data rate applications that are needed for linearity for a luminometer. The front-end ASIC will be designed in 65 nm technology to benefit from building blocks already developed by CERN EP/ESE and other collaborators for Phase-2 projects. The ASIC would be capable of adjusting the thresholds to tune the rising edge at the signal peak. The discriminator in the ASIC could be either a constant fraction discriminator (CFD) or a fixed-threshold discriminator with time-walk compensation. The choice between these two architectures will be made during the engineering design stage, taking into account performance and existing ASIC building blocks in\n\u2013 2 \u2013\nthe 65 nm technology that can be adopted for use in the FBCM ASIC. In this paper, the results of a hypothetical front-end ASIC with a CFD is reported as a case-study.\nFront-end with a CFD as a case-study\nIn order to evaluate the effects of the front-end ASIC on the detector performance, the behavioral model of various blocks of the front-end electronics was implemented with C++ programming embedded in CMSSW, the CMS software framework [6]. Here, an ASIC model based on CFD is simulated using the transfer function of each block. The simulation model includes a fast analog transimpedance amplifier followed by a post-amplifier and shapers, similar to the BCM1F front-end ASIC [5] with peaking time < 7 ns and peak to the baseline less than 14 ns, as well as a CFD block inspired by the VFAT3 architecture [7]. Figure 3 illustrates a simplified block diagram of the front-end. The simulated output of the amplifier as a function of injected charge is depicted in Figure 3 (bottom-left), showing a linear relationship up to 6 fC with a gain of \ud835\udc3a \u2248 100 mV/fC. The delay (\ud835\udf0fcfd) and the fraction ( \ud835\udc53 ) in the CFD block are two parameters used for amplitude-\n\u2013 3 \u2013\nindependent analog peak detection. Figure 3 (bottom-right) shows simulated signals at nodes A and B in Figure 3. Two hysteresis comparators (assuming non-inverting ones), namely zero-crossing (ZC) and arming (AR), are employed to feed the clock (clk) and the active-low reset (rst) inputs of a positive edge-triggered D-type flip-flop. The lower (VL) and the upper (VH) thresholds in a noninverting hysteresis comparator are adjustable parameters, so that the comparator output becomes high when its input voltage (\ud835\udc63\ud835\udc56) is larger than VH and returns to the low state when \ud835\udc63\ud835\udc56 < VL. The lower threshold of the zero-crossing and the arming comparators, namely VLZC and VLAR, adjust the cut-off for the amount of collected charges and the duration of output pulse (i.e., ToT) respectively. With an appropriate setting of parameters, the CFD block produces an asynchronous pulse, rising at the peak of received signal and lasting for the duration of ToT. Eight different sensor sizes were considered for CMSSW simulations, and for each case, \ud835\udc53 was set to a value for which the zero crossing occurs at the peak of signal and VL\ud835\udc4d\ud835\udc36 was tuned so that the front-end model was sensitive to signals with collected charges >1 fC (\u22486000 electrons)."
        },
        {
            "heading": "4 Simulation results",
            "text": "In [8], it has been shown that very large sensors sizes (> 8 mm2) are not practical, because the large sensor capacitance leads to long-lasting pluses. In this study, an upper limit of 8 mm2 was considered, corresponding to the maximum input capacitance of 7 pF for the front-end ASIC. Eight sensor sizes, as labeled in the vertical axis of Figure 4, and positions at different \ud835\udc5f, spanning the range from 8 to 20 cm, were studied. The final sensor area will be optimized during the engineering design of the FBCM detector. The linearity of the FBCM measurement as a function of average pileup, \u3008PU\u3009, was evaluated with CMSSW simulations in which the front-end electronics was modeled as described in Section 3. Figure 4 [1] shows the deviation from linearly and the statistical uncertainty as a function of various combinations of sensor sizes and radius with \u3008PU\u3009 = 200 corresponding to the leveled instantaneous luminosity of 7.5\u00d71034 cm\u22122 s\u22121. The results show that there is a trade-off between statistical uncertainty of rate and the linearity, where the linearity becomes worse for large sensors located at lower radii close to \ud835\udc5f = 8 cm. Assuming sensor sizes equal to 2.89 mm2 at \ud835\udc5f = 14.5 cm and with front-end parameters mentioned in the captions of Figure 3, the statistical rate uncertainty per second and the deviation from linearity could be reached as 0.18% and 0.1%, respectively, on average pileup of 200."
        },
        {
            "heading": "5 Conclusion",
            "text": "The FBCM ASIC was modeled by using a transfer function of building blocks, including a fast analog amplifier with 14 ns settling time from peak to baseline, shapers and a constant fraction discriminator (CFD) with the capability of adjusting the thresholds to tune the rising edge to the signal peak. The pulse width of the semi-digital output is a monotonic function of the signal amplitude, which is also beneficial to monitor the MIP amplitude spectrum and thus the sensor\u2019s radiation damage. Simulation results also show that the FBCM will provide the required statistical uncertainty and deviation from linearity by employing 336 silicon-pad sensors, each with an area of about 2.89 mm2. In addition, the front-end with sensitivity to at least 6000 electrons will satisfy the longevity constraints for an exposure of 1 MeV neutron equivalent fluence of 3.5\u00d71015 per cm2.\n\u2013 4 \u2013"
        },
        {
            "heading": "Acknowledgments",
            "text": "Thanks to the members of the CMS beam radiation instrumentation and luminosity (BRIL) project and the colleagues at Isfahan University of Technology whose guidance made this possible."
        }
    ],
    "title": "The Fast Beam Condition Monitor as standalone luminometer of the CMS experiment at the HL-LHC",
    "year": 2021
}