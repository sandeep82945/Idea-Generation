The role of a market maker is to simultaneously offer to buy and sell quantities of goods, often a financial asset such as a share, at specified prices. An automated market maker (AMM) is a mechanism that offers to trade according to some predetermined schedule; the best choice of this schedule depends on the market maker’s goals. The literature on the design of AMMs has mainly focused on prediction markets with the goal of information elicitation. More recent work motivated by DeFi has focused instead on the goal of profit maximization, but considering only a single type of good (traded with a numeraire), including under adverse selection (Milionis et al. 2022). Optimal market making in the presence of multiple goods, including the possibility of complex bundling behavior, is not well understood. In this paper, we show that finding an optimal market maker is dual to an optimal transport problem, with specific geometric constraints on the transport plan in the dual. We show that optimal mechanisms for multiple goods and under adverse selection can take advantage of bundling, both improved prices for bundled purchases and sales as well as sometimes accepting payment “in kind.” We present conjectures of optimal mechanisms in additional settings which show further complex behavior. From a methodological perspective, we make essential use of the tools of differentiable economics to generate conjectures of optimal mechanisms, and give a proof-of-concept for the use of such tools in guiding theoretical investigations. 1 conclusion We analyze market-making across multiple goods in the face of adverse selection. In the settings we study, the market maker has the capacity to buy and sell different bundles at different prices, as well as to accept sales of goods “in kind” in lieu of money. We show that the problem of maximizing profit under adverse selection is dual to an optimal transport problem. Using our framework, we produce dual certificates for known single-good mechanisms and then show how to use differentiable economics to search through the space of mechanisms in settings with multiple goods, in order to generate conjectures for optimal mechanisms. Based on some of these conjectures, we derive optimal mechanisms and dual certificates. From an economics perspective, our results establish that in some cases, the optimal mechanism for market makers who work across multiple goods must involve making use of their capacity to bundle and to accept goods “in kind”, resulting in significant improvements in profit. Further conjectured optimal mechanisms in a range of other cases which show a variety of additional complex behaviors including offers of a continuous spectrum of allocations. This is by contrast with the single-good case, where a much simpler bid-ask spread is optimal. It is common in practice to restrict market makers to these simple mechanisms, even when there are multiple goods; our model and results suggest this imposes a cost on them. From a methodological perspective, we provide theoretical results for another area in the relatively underexplored field of multi-parameter mechanism design, and we show how differentiable economics can be used to guide theory in otherwise very challenging settings. We also hope that these techniques can lead to the design of better market-making mechanisms which will actually be deployed. a connection to constant-function market makers Angeris et al. [5] defines constant-function market makers in terms of a concave portfolio value function and a conjugate trading function. The portfolio value function V (x) is the value that the market maker expects to retain in their portfolio after an arbitrageur, who knows the correct price vector x, engages in a trade. 