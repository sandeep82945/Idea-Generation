{
    "abstractText": "Metrological traceability is essential to ensure the reliability of calibration tests. Calibration certificates usually include information on only one upper-level reference standard. As metrological traceability is multi-layered, generally there is no method available for end users to instantly confirm the traceability from the reference standard to a primary standard. This study focuses on the Ethereum blockchain, which has both tamper resistance and high availability, as a digital data management method. To improve the transparency and reliability of calibration tests, a smart contract that traces back to the primary standard is proposed. Consequently, it is confirmed that end users can instantly obtain traceability information. In addition, the execution of smart contracts requires transaction fees. Here, the calculation of the transaction fees is organized, and the traceability management system is discussed from a cost-effective perspective in the field of metrology.",
    "authors": [
        {
            "affiliations": [],
            "name": "Naoki Takegawa"
        },
        {
            "affiliations": [],
            "name": "Noriyuki Furuichi"
        }
    ],
    "id": "SP:184adb6e130086a7c7a619f0264e84216847532b",
    "references": [
        {
            "authors": [
                "T. Takatsuji",
                "H. Watanabe",
                "Y. Yamashita"
            ],
            "title": "Blockchain technology to visualize the metrological traceability",
            "venue": "Precis. Eng",
            "year": 2019
        },
        {
            "authors": [
                "K. Mili\u010devi\u0107",
                "I. Toli\u0107",
                "D. Vinko",
                "G. Horvat"
            ],
            "title": "Blockchain-Based Concept for Digital Transformation of Traceability Pyramid for Electrical Energy Measurement",
            "venue": "Sensors 2022,",
            "year": 2022
        },
        {
            "authors": [
                "M. Marques",
                "J.A. Sousa",
                "L. Ribeiro"
            ],
            "title": "Calibration 4.0\u2013Information system for usage of digital calibration certificates",
            "venue": "In Proceedings of the 19th International Congress of Metrology (CIM2019), Paris, France,",
            "year": 2019
        },
        {
            "authors": [
                "G. Boschung",
                "M. Wollensack",
                "M. Zeier",
                "C. Blaser",
                "C. Hof",
                "M. Stathis",
                "P. Blattner",
                "F. Stuker",
                "N. Basic",
                "F.G. Toro"
            ],
            "title": "PDF/A-3 solution for digital calibration certificates",
            "venue": "Meas. Sens. 2021,",
            "year": 2021
        },
        {
            "authors": [
                "T. Bruns",
                "J. Nordholz",
                "D. R\u00f6ske",
                "T. Schrader"
            ],
            "title": "A demonstrator for measurement workflows using digital calibration certificates (DCCs)",
            "venue": "Meas. Sens. 2021,",
            "year": 2021
        },
        {
            "authors": [
                "S. Hackel",
                "F. H\u00e4rtig",
                "J. Hornig",
                "T. Wiedenh\u00f6fer"
            ],
            "title": "The digital calibration certificate",
            "venue": "PTB-Mitt. 2017,",
            "year": 2017
        },
        {
            "authors": [
                "T. Mustap\u00e4\u00e4",
                "P. Nikander",
                "D. Hutzschenreuter",
                "R. Viitala"
            ],
            "title": "Metrological challenges in collaborative sensing: Applicability of digital calibration certificates",
            "venue": "Sensors 2020,",
            "year": 2020
        },
        {
            "authors": [
                "B. A\u010dko",
                "H. Weber",
                "D. Hutzschenreuter",
                "I. Smith"
            ],
            "title": "Communication and validation of metrological smart data in IoT-networks",
            "venue": "Adv. Prod. Eng. Manag",
            "year": 2020
        },
        {
            "authors": [
                "M.S. Gadelrab",
                "R.A. Abouhogail"
            ],
            "title": "Towards a new generation of digital calibration certificate: Analysis and survey",
            "venue": "Measurement",
            "year": 2021
        },
        {
            "authors": [
                "C.L. Chen",
                "Z.P. Zhu",
                "M. Zhou",
                "W.J. Tsaur",
                "C.M. Wu",
                "H. Sun"
            ],
            "title": "A Secure and Traceable Vehicles and Parts System Based on Blockchain and Smart Contract",
            "venue": "Sensors 2022,",
            "year": 2022
        },
        {
            "authors": [
                "Y. Ai",
                "C.L. Chen",
                "W. Weng",
                "M.L. Chiang",
                "Y.Y. Deng",
                "Z.Y. Lim"
            ],
            "title": "A Traceable Vaccine Supply Management System",
            "venue": "Sensors 2022,",
            "year": 2022
        },
        {
            "authors": [
                "H.D. Zubaydi",
                "P. Varga",
                "S. Moln\u00e1r"
            ],
            "title": "Leveraging Blockchain Technology for Ensuring Security and Privacy Aspects in Internet of Things: A Systematic Literature Review",
            "venue": "Sensors 2023,",
            "year": 2023
        },
        {
            "authors": [
                "A.K. Tyagi",
                "S. Dananjayan",
                "D. Agarwal",
                "H.F. Thariq Ahmed"
            ],
            "title": "Blockchain\u2014Internet of Things Applications: Opportunities and Challenges for Industry 4.0 and Society 5.0",
            "venue": "Sensors 2023,",
            "year": 2023
        },
        {
            "authors": [
                "M. Andoni",
                "V. Robu",
                "D. Flynn",
                "S. Abram",
                "D. Geach",
                "D. Jenkins",
                "P. McCallum",
                "A. Peacock"
            ],
            "title": "Blockchain technology in the energy sector: A systematic review of challenges and opportunities",
            "venue": "Renew. Sustain. Energy Rev",
            "year": 2019
        },
        {
            "authors": [
                "Y. Zhou",
                "J. Wu",
                "C. Long",
                "W. Ming"
            ],
            "title": "State-of-the-art analysis and perspectives for peer-to-peer energy trading",
            "venue": "Engineering 2020,",
            "year": 2020
        },
        {
            "authors": [
                "J. Leng",
                "G. Ruan",
                "P. Jiang",
                "K. Xu",
                "Q. Liu",
                "X. Zhou",
                "C. Liu"
            ],
            "title": "Blockchain-empowered sustainable manufacturing and product lifecycle management in industry 4.0: A survey",
            "venue": "Renew. Sustain. Energy Rev",
            "year": 2020
        },
        {
            "authors": [
                "S. Chen",
                "L. Yang",
                "C. Zhao",
                "V. Varadarajan",
                "K. Wang"
            ],
            "title": "Double-blockchain assisted secure and anonymous data aggregation for fog-enabled smart grid",
            "venue": "Engineering 2020,",
            "year": 2020
        },
        {
            "authors": [
                "Z. Iftikhar",
                "Y. Javed",
                "S.Y.A. Zaidi",
                "M.A. Shah",
                "Z. Iqbal Khan",
                "S. Mussadiq",
                "K. Abbasi"
            ],
            "title": "Privacy preservation in resourceconstrained IoT devices using blockchain\u2014A survey",
            "year": 2021
        },
        {
            "authors": [
                "M. Suvarna",
                "K.S. Yap",
                "W. Yang",
                "J. Li",
                "Y.T. Ng",
                "X. Wang"
            ],
            "title": "Cyber\u2013Physical Production Systems for Data-Driven, Decentralized, and Secure Manufacturing\u2014A Perspective",
            "venue": "Engineering 2021,",
            "year": 2021
        },
        {
            "authors": [
                "C.R.H. Barbosa",
                "M.C. Sousa",
                "M.F.L. Almeida",
                "R.F. Calili"
            ],
            "title": "Smart Manufacturing and Digitalization of Metrology: A Systematic Literature Review and a Research Agenda",
            "venue": "Sensors 2022,",
            "year": 2022
        },
        {
            "authors": [
                "K. Mili\u010devi\u0107",
                "L. Omr\u010den",
                "M. Kohler",
                "I. Luki\u0107"
            ],
            "title": "Trust model concept for IoT blockchain applications as part of the digital transformation of metrology",
            "venue": "Sensors 2022,",
            "year": 2022
        },
        {
            "authors": [
                "C. Zakaret",
                "N. Peladarinos",
                "V. Cheimaras",
                "E. Tserepas",
                "P. Papageorgas",
                "M. Aillerie",
                "D. Piromalis",
                "K. Agavanakis"
            ],
            "title": "Blockchain and Secure Element, a Hybrid Approach for Secure Energy Smart Meter Gateways",
            "venue": "Sensors 2022,",
            "year": 2022
        },
        {
            "authors": [
                "E. Androulaki",
                "A. Barger",
                "V. Bortnikov",
                "C. Cachin",
                "K. Christidis",
                "A. De Caro",
                "D. Enyeart",
                "C. Ferris",
                "G. Laventman",
                "Y Manevich"
            ],
            "title": "Hyperledger fabric: A distributed operating system for permissioned blockchains",
            "venue": "In Proceedings of the Thirteenth EuroSys Conference,",
            "year": 2018
        },
        {
            "authors": [
                "M. Moni",
                "Melo",
                "W.",
                "D. Peters",
                "R. Machado"
            ],
            "title": "When Measurements Meet Blockchain: On Behalf of an Inter-NMI Network",
            "venue": "Sensors 2021,",
            "year": 2021
        },
        {
            "authors": [
                "W. Melo",
                "L.F. Carmo",
                "A. Bessani",
                "N. Neves",
                "A. Santin"
            ],
            "title": "How blockchains can improve measuring instruments regulation and control",
            "venue": "In Proceedings of the 2018 IEEE International Instrumentation and Measurement Technology Conference (I2MTC),",
            "year": 2018
        },
        {
            "authors": [
                "W.S. Melo",
                "A. Bessani",
                "N. Neves",
                "A.O. Santin",
                "L.F.R.C. Carmo"
            ],
            "title": "Using blockchains to implement distributed measuring systems",
            "venue": "IEEE Trans. Instrum. Meas. 2019,",
            "year": 2019
        },
        {
            "authors": [
                "A. Yurchenko",
                "M. Moni",
                "D. Peters",
                "J. Nordholz",
                "F. Thiel"
            ],
            "title": "Security for Distributed Smart Meter: Blockchain-based Approach, Ensuring Privacy by Functional Encryption",
            "venue": "In Proceedings of the 10th International Conference on Cloud Computing and Services Science (CLOSER 2020),",
            "year": 2020
        },
        {
            "authors": [
                "D. Peters",
                "J. Wetzlich",
                "F. Thiel",
                "J.P. Seifert"
            ],
            "title": "Blockchain applications for legal metrology",
            "venue": "In Proceedings of the 2018 IEEE International Instrumentation and Measurement Technology Conference (I2MTC),",
            "year": 2018
        },
        {
            "authors": [
                "D. Peters",
                "A. Yurchenko",
                "W. Melo",
                "K. Shirono",
                "T. Usuda",
                "J.P. Seifert",
                "F. Thiel"
            ],
            "title": "IT security for measuring instruments: Confidential checking of software functionality",
            "venue": "In Proceedings of the Future of Information and Communication Conference,",
            "year": 2020
        },
        {
            "authors": [
                "C. Dannen"
            ],
            "title": "Introducing Ethereum and Solidity; Apress",
            "venue": "New York, NY, USA,",
            "year": 2017
        },
        {
            "authors": [
                "N. Atzei",
                "M. Bartoletti",
                "T. Cimoli"
            ],
            "title": "A survey of attacks on ethereum smart contracts (sok)",
            "venue": "In Proceedings of the International Conference on Principles of Security and Trust, Uppsala, Sweden,",
            "year": 2017
        },
        {
            "authors": [
                "E. Wood"
            ],
            "title": "A secure decentralised generalised transaction ledger",
            "venue": "Ethereum Proj. Yellow Pap. 2014,",
            "year": 2014
        },
        {
            "authors": [
                "R. Iqbal",
                "T.A. Butt",
                "M. Afzaal",
                "K. Salah"
            ],
            "title": "Trust management in social internet of vehicles: Factors, challenges, blockchain, and fog solutions",
            "venue": "Int. J. Distrib. Sens. Netw. 2019,",
            "year": 1982
        },
        {
            "authors": [
                "R. Shah",
                "M. McIntee",
                "S. Nagaraja",
                "S. Bhandary",
                "P. Arote",
                "J. Kuri"
            ],
            "title": "Secure Calibration for Safety-Critical IoT: Traceability for Safety Resilience",
            "venue": "arXiv 2019,",
            "year": 2019
        },
        {
            "authors": [
                "L. De Santis",
                "V. Paciello",
                "A. Pietrosanto"
            ],
            "title": "Blockchain-based infrastructure to enable trust in IoT environment",
            "venue": "In Proceedings of the 2020 IEEE International Instrumentation and Measurement Technology Conference (I2MTC), Dubrovnik, Croatia,",
            "year": 2020
        },
        {
            "authors": [
                "M. Peterek",
                "B. Montavon"
            ],
            "title": "Prototype for dual digital traceability of metrology data using X. 509 and IOTA",
            "venue": "CIRP Ann",
            "year": 2020
        },
        {
            "authors": [
                "S. Popov"
            ],
            "title": "The tangle",
            "venue": "White Pap. 2018,",
            "year": 2018
        },
        {
            "authors": [
                "W.F. Silvano",
                "R. Marcelino"
            ],
            "title": "Iota Tangle: A cryptocurrency to communicate Internet-of-Things data",
            "venue": "Future Gener. Comput. Syst",
            "year": 2020
        },
        {
            "authors": [
                "Melo",
                "W.S.",
                "L.V. Tarelho",
                "B.A. Rodrigues Filho",
                "A.N. Bessani",
                "L.F. Carmo"
            ],
            "title": "Field surveillance of fuel dispensers using IoT-based metering and blockchains",
            "venue": "J. Netw. Comput. Appl",
            "year": 2021
        },
        {
            "authors": [
                "Z.C. Kennedy",
                "D.E. Stephenson",
                "J.F. Christ",
                "T.R. Pope",
                "B.W. Arey",
                "C.A. Barrett",
                "M.G. Warner"
            ],
            "title": "Enhanced anti-counterfeiting measures for additive manufacturing: Coupling lanthanide nanomaterial chemical signatures with blockchain technology",
            "venue": "J. Mater. Chem. C 2017,",
            "year": 2017
        },
        {
            "authors": [
                "G. D\u2019Emilia",
                "A. Gaspari",
                "E. Natale",
                "G. Adduce",
                "S. Vecchiarelli"
            ],
            "title": "All-Around Approach for Reliability of Measurement Data in the Industry 4.0",
            "venue": "IEEE Instrum. Meas. Mag",
            "year": 2021
        },
        {
            "authors": [
                "S.S. More",
                "N. Patel",
                "S. Parab",
                "S. Maurya"
            ],
            "title": "Blockchain based Tamper Proof Certificates",
            "venue": "In Proceedings of the International Conference on Smart Data Intelligence (ICSMDI",
            "year": 2021
        },
        {
            "authors": [
                "K. Christidis",
                "M. Devetsikiotis"
            ],
            "title": "Blockchains and smart contracts for the internet of things",
            "venue": "IEEE Access 2016,",
            "year": 2016
        },
        {
            "authors": [
                "S. Wang",
                "Y. Yuan",
                "X. Wang",
                "J. Li",
                "R. Qin",
                "F.Y. Wang"
            ],
            "title": "An overview of smart contract: Architecture, applications, and future trends",
            "venue": "In Proceedings of the 2018 IEEE Intelligent Vehicles Symposium (IV), Suzhou, China,",
            "year": 2018
        },
        {
            "authors": [
                "T. Hewa",
                "M. Ylianttila",
                "M. Liyanage"
            ],
            "title": "Survey on blockchain based smart contracts: Applications, opportunities and challenges",
            "venue": "J. Netw. Comput. Appl",
            "year": 2021
        },
        {
            "authors": [
                "Q. Wang",
                "R. Li",
                "S. Chen"
            ],
            "title": "Non-fungible token (NFT): Overview, evaluation, opportunities and challenges",
            "venue": "arXiv 2021,",
            "year": 2021
        },
        {
            "authors": [
                "V. Buterin",
                "E. Conner",
                "R. Dudley",
                "M. Slipper",
                "I. Norden",
                "A. Bakhta"
            ],
            "title": "EIP-1559: Fee Market Change for ETH 1.0 Chain. Available online: https://eips.ethereum.org/EIPS/eip-1559 (accessed on",
            "year": 2023
        },
        {
            "authors": [
                "E. Wood"
            ],
            "title": "A Secure Decentralised Generalised Transaction Ledger Berlin Version",
            "venue": "Available online: https://ethereum.github.io/ yellowpaper/paper.pdf (accessed on",
            "year": 2023
        },
        {
            "authors": [
                "J. Poon",
                "T. The Bitcoin Lightning Network Dryja"
            ],
            "title": "Scalable Off-Chain Instant Payments",
            "venue": "Available online: https://lightning. network/lightning-network-paper.pdf",
            "year": 2023
        },
        {
            "authors": [
                "E. Rohrer",
                "J. Malliaris",
                "F. Tschorsch"
            ],
            "title": "Discharged payment channels: Quantifying the lightning network\u2019s resilience to topologybased attacks",
            "venue": "In Proceedings of the 2019 IEEE European Symposium on Security and Privacy Workshops (EuroS&PW), Stockholm, Sweden,",
            "year": 2019
        },
        {
            "authors": [
                "M. Bez",
                "G. Fornari",
                "T. Vardanega"
            ],
            "title": "The scalability challenge of ethereum: An initial quantitative analysis",
            "venue": "In Proceedings of the 2019 IEEE International Conference on Service-Oriented System Engineering (SOSE), San Francisco, CA, USA,",
            "year": 2019
        },
        {
            "authors": [
                "F. Saleh"
            ],
            "title": "Blockchain without waste: Proof-of-stake",
            "venue": "Rev. Financ. Stud",
            "year": 2021
        },
        {
            "authors": [
                "A. Gervais",
                "G.O. Karame",
                "K. W\u00fcst",
                "V. Glykantzis",
                "H. Ritzdorf",
                "S. Capkun"
            ],
            "title": "On the security and performance of proof of work blockchains",
            "venue": "In Proceedings of the 2016 ACM SIGSAC Conference on Computer and Communications Security, Vienna, Austria,",
            "year": 2016
        }
    ],
    "sections": [
        {
            "text": "Citation: Takegawa, N.; Furuichi, N.\nTraceability Management System\nUsing Blockchain Technology and\nCost Estimation in the Metrology\nField. Sensors 2023, 23, 1673. https://\ndoi.org/10.3390/s23031673\nAcademic Editors: Maurizio Talamo\nand Christian H. Schunck\nReceived: 12 January 2023\nRevised: 29 January 2023\nAccepted: 30 January 2023\nPublished: 3 February 2023\nCopyright: \u00a9 2023 by the authors.\nLicensee MDPI, Basel, Switzerland.\nThis article is an open access article\ndistributed under the terms and\nconditions of the Creative Commons\nAttribution (CC BY) license (https://\ncreativecommons.org/licenses/by/\n4.0/).\nKeywords: measurement; traceability; management; blockchain; operating cost"
        },
        {
            "heading": "1. Introduction",
            "text": "The introduction describes metrological traceability and examines the benefits of its management and visualization system. It also surveys the previous literature on digital calibration certificate (DCC) and the use of blockchain, which are related technologies for digitizing metrological traceability. The overview of this research and the contents of the chapters are provided."
        },
        {
            "heading": "1.1. Issues Related to Traceability Management in the Field of Metrology",
            "text": "In manufacturing, accurate measurement is indispensable for achieving the required quality and improving productivity. Calibration of equipment with reference standards is important in ensuring the reliability of measurement results, and the establishment of metrological traceability is required in international standards, such as ISO 10012 [1] and ISO 17025 [2]. Metrological traceability is defined in ISO/IEC Guide 99:2012 VIM [3] as \u201cProperty of a measurement result whereby the result can be related to a reference through a documented unbroken chain of calibrations, each contributing to the measurement uncertainty\u201d. A calibration certificate issued by an accredited calibration laboratory is a stand-alone proof of metrological traceability and usually includes information on only one upper-level reference standard. Therefore, as metrological traceability is multi-layered, there is no immediate way for end users to ascertain the traceability from a device under test (DUT) to a primary standard in general. Note that the results in a certificate are metrologically traceable in the above situation. Takatsuji et al. [4] highlighted the existence of certificate holders who require details of metrological traceability and proposed the visualization of metrological traceability. Milic\u030cevic\u0301 et al. [5] presented the concept of a traceability system for electrical energy measurement based on blockchains. Although the management and visualization system of metrological traceability is important and expected to improve the reliability and transparency of calibration tests, there are several\nSensors 2023, 23, 1673. https://doi.org/10.3390/s23031673 https://www.mdpi.com/journal/sensors\nissues related to (1) the digital format and (2) the digital security of calibration information in its construction."
        },
        {
            "heading": "1.2. Calibration Information as Digital Data and Digital Calibration Certificate (DCC)",
            "text": "To organize the handling of calibration information as digital data, studies on DCC have been conducted [6\u20138]. Hackel et al. [9] mentioned the necessary content for DCC and proposed XML as a data format. Mustap\u00e4\u00e4 et al. [10] discussed the contribution of DCC to the uncertainty, completeness, and authenticity of measurement data and introduced applications of DCC such as smart cities. Ac\u030cko et al. [11] summarized the SmartCom (communication and validation of smart data in IoT networks) project adopted by EMPIR of EURAMET, which aims to develop a digital format, and presented the interim progress of SmartCom, including the DCC format. Gadelrab et al. [12] conducted an exhaustive survey study on DCC. In addition, CIPM is actively undertaking a project [13] called Digital-SI to establish a metadata format that conforms to SI units."
        },
        {
            "heading": "1.3. Digital Security of Calibration Information and Blockchain Technology",
            "text": "In recent years, the use of blockchain as a highly robust and highly available database in the industrial sector has increased [14\u201318]. Compared with the usual centralized databases, the advantages of blockchains are considered to be the tamper resistance, elimination of single points of failure, high availability, and savings in human costs. Andoni et al. [19] reviewed the current business cases and presented blockchain solutions for the energy industry. Zhou et al. [20] summarized the global development of peer-to-peer energy trading and introduced blockchains supporting the trading. Leng et al. [21] investigated the contribution of blockchains to achieving sustainability from the perspective of the manufacturing system and product lifecycle management. Chen et al. [22] designed an efficient and secure data collection framework in the smart grid by integrating fog computing and blockchain. Iftikhar et al. [23] studied recent research based on blockchains in the IoT for privacy protection. Suvarna et al. [24] focused on the concept of cyber\u2013physical production systems (CPPSs) and proposed applying blockchains to CPPS to secure data sharing in decentralized systems. In metrological transactions, the tamper resistance of calibration information is important because there is an economic incentive to tamper with the information on measuring instruments. When traceability management and visualization are implemented as a system, high system availability and elimination of single points of failure are also required. Therefore, blockchain has attracted attention as a useful tool in the field of metrology [25\u201327]. Blockchains can be broadly classified into private and public chains based on the presence or absence of an administrator. Table 1 presents a summary of private and public blockchains. Hyperledger Fabric (HF) [28] is a private chain that is being considered for use in metrology. Moni et al. [29] used HF to connect peers between the national metrology institute in Germany and Brazil to identify and authenticate smart meters. Melo et al. [30,31] compared the blockchain with existing paper- and cloud-based data management and examined the throughput and latency of HF applied to smart meters. Yurchenko et al. [32] proposed a model for a secure smart meter system using HF and cryptography. Peters et al. [33,34] proposed a use of blockchain in legal metrology and verified the confidentiality of decentralized meters combining HF and homomorphic cryptography. One public chain that is being considered for use the field of metrology is Ethereum [35,36]. Gavin [37] released the first yellow paper outlining the technical specifications of Ethereum. Ethereum is explained in detail in Section 2 and beyond. Iqbal et al. [38] addressed issues related to trust in IoT systems and proposed tracking, management, governance, and access control of smart vehicles using Ethereum. Shah et al. [39] proposed the management of calibration information using Ethereum and examined the effect of the number of calibrators and calibration hierarchy on the time to obtain traceability in the Ethereum blockchain. Santis et al. [40] proposed a combination of blockchain and physical unclonable function-based authentication protocols for an auditing system for metrological traceability. The system for voltage and current\nmeasurements used Ethereum as the blockchain technology and Node.js as the web interface. Peterek and Montavon [41] proposed the IOTA [42,43] blockchain, a public chain, as a database of hash values of measured data."
        },
        {
            "heading": "1.4. Contents of This Study",
            "text": "Section 1 summarizes the management and visualization system of metrological traceability and the adoption of blockchains in the field of metrology. In Section 2, a simple system for the RTP is created using the Ethereum blockchain, which is extremely difficult to tamper with. There are only a few studies in the field of metrology that have written a blockchain program and verified its operation. Section 3 estimates the cost of recording information on the Ethereum blockchain and examines the Ethereum-based traceability management and visualization system from an economic cost perspective. There is a debate about whether to choose private or public chains, such as HF or Ethereum, respectively. An important indicator for choosing between private or public chains is the cost of the chain (Table 1). However, to the best of the authors\u2019 knowledge, there is no study in the field of metrology that examines the economic feasibility of using blockchain to manage digital data."
        },
        {
            "heading": "2. Building a Traceability Management System Using a Smart Contract",
            "text": ""
        },
        {
            "heading": "2.1. Smart Contract of Ethereum",
            "text": "The Ethereum blockchain has a feature called a smart contract [48,49] that automatically executes contracts (programs), allowing for complex processing. Applications using smart contracts are examined in detail by Hewa et al. [50]. For instance, smart contracts have been used to develop various services, such as decentralized finance (DeFi) and non-fungible token [51], which is proof of the uniqueness of digital art. Smart contracts are often written in a programming language called Solidity [35]. The smart contract on the RTP described below is written in Solidity and their behavior is checked on Ropsten, Ethereum\u2019s test network. The behavior is also confirmed on another test network, Goerli."
        },
        {
            "heading": "2.2. Preparations Required to Execute Smart Contract",
            "text": "There are many methods for deploying and using smart contracts written in Solidity on the Ethereum network. One method is to use Go Ethereum (Geth), a node operation software developed by the Ethereum Foundation, and another method is to use an integrated development environment called Remix, which allows the creation, compilation, and deployment of smart contracts in a web browser. Unlike the above methods, this study implements and uses smart contracts, employing Truffle, INFURA, and web3.js, which are relatively easy and highly flexible. Truffle is the de facto standard framework for Ethereum application development and can compile and deploy smart contracts. INFURA, an Ethereum node hosting service, makes it possible to connect to the Ethereum network without downloading Ethereum nodes such as Geth. web3.js is a JavaScript library and can be used to access deployed smart contracts. Figure 2 illustrates these relationships.\nSensors 2023, 23, x FOR PEER REVIEW 5 of 12\nsoftware developed by the Ethereum Foundation, and another method is to use an integrated development environment called Remix, which allows the creation, compilation, and deployment of smart contracts in a web browser. Unlike the above methods, this study implements and uses smart contracts, employing Truffle, INFURA, and web3.js, which are relatively easy and highly flexible. Truffle is the de facto standard framework for Ethereum application development and can compile and deploy smart contracts. INFURA, an Ethereum node hosting service, makes it possible to connect to the Ethereum network without downloading Ethereum nodes such as Geth. web3.js is a JavaScript library and can be used to access deployed smart contracts. Figure 2 illustrates these relationships.\nFigure 2. Method of creating and using smart contracts in this study."
        },
        {
            "heading": "2.3. Smart Contract on the RTP",
            "text": "An overview and program of a simple smart contract on the RTP are depicted in Figure 3 and Algorithm 1. There are two types of functions in Algorithm 1. One is \u201cfunction add\u201d that records data such as a DUT or reference standard in the Ethereum blockchain, and the other is \u201cfunction RTP\u201d that references the RTP from a DUT to a primary standard. \u201cconstructor()\u201d is executed when a smart contract is deployed and records the address of the smart contract issuer. This grants access to \u201cfunction add\u201d, which is described next only to the smart contract issuer. This is necessary to resolve user authentication issues such as verifying the identity of national metrology institutes and calibration laboratories.\nFigure 3. Overview of smart contract on RTP in this study.\nFigure 2. Method of creating and using smart contracts in this study.\nSensors 2023, 23, 1673 5 of 12"
        },
        {
            "heading": "2.3. Smart Contract on the RTP",
            "text": "An overview and program of a simple smart contract on the RTP are depicted in Figure 3 and Algorithm 1. There are two types of functions in Algorithm 1. One is \u201cfunction add\u201d that records data such as a DUT or reference standard in the Ethereum blockchain, and the other is \u201cfunction RTP\u201d that references the RTP from a DUT to a primary standard. \u201cconstructor()\u201d is executed when a smart contract is deployed and records the address of the smart contract issuer. This grants access to \u201cfunction add\u201d, which is described next only to the smart contract issuer. This is necessary to resolve user authentication issues such as verifying the identity of national metrology institutes and calibration laboratories.\nSensors 2023, 23, x FOR PEER REVIEW 5 of 12 software developed by the Ethereum Foundation, and another method is to use an integrated development environment called Remix, which allows the creation, compilation, and deployment of smart contracts in a web browser. Unlike the above methods, this study implements and uses smart contracts, employing Truffle, INFURA, and web3.js, which are relatively easy and highly flexible. Truffle is the de facto standard framework for Ethereum application development and can compile and deploy smart contracts. INFURA, an Ethereum node hosting service, makes it possible to connect to the Ethereum network without downloading Ethereum nodes such as Geth. web3.js is a JavaScript library and can be used to access deployed smart contracts. Figure 2 illustrates these relationships.\nFigure 2. Method of creating and using smart contracts in this study."
        },
        {
            "heading": "2.3. Smart Contract on the RTP",
            "text": "An overview and program of a simple smart contract on the RTP are depicted in Figure 3 and Algorithm 1. There are two type of functions in Algorithm 1. On is \u201cfunction add\u201d that records data such as a DUT or reference standard in the Eth reum blockchain, and the other is \u201cfunction RTP\u201d that references the RTP from a DUT to a prim ry standard. \u201cconstr ctor()\u201d is executed when a smart contract is depl yed and records the address of the smart contract issuer. This grants access to \u201cfunction add\u201d, which i described next only to the smart co tr t i uer. This is necessary to resolve user authe tication issues such as verifying the id ntity of national metrology institutes and calibration laboratories.\n\u201cfunction add\u201d records the two arguments, \u201cstring data\u201d and \u201cuint referenceID\u201d, on the Ethereum blockchain. \u201creferenceID\u201d indicates the ID with which the information on one upper-level reference standard is linked. Transaction fees must be paid when using \u201cfunction add\u201d because of the data writing process involved. According to Hackel et al. [9], there are six types of information to be recorded as string data: identifier, measurement value, expanded measurement uncertainty, coverage factor, unit, and time. If six items are recorded as RTP data, it is desirable to prepare six types of variables (\u201cstring data\u201d) to store data. The data recorded in the smart contract should be limited to what can be disclosed to the outside world, and information that cannot be disclosed should be recorded as hash values. \u201cfunction RTP\u201d allows the end user to enter the ID of a DUT and receive RTP information as the return value. In the case of data for reference only, no transaction fees are incurred. To make this clear, the function modifier \u201cview\u201d is used in \u201cfunction RTP\u201d. In this study, calibration clients and end users are assumed as User 1 using \u201cfunction RTP\u201d, and national metrology institutes and accredited calibration laboratories are assumed as User 2 using \u201cfunction add\u201d. An example of RTP information received by User 1 is depicted in Figure 4, revealing the actual acquisition of pre-registered data from Ropsten (Ethereum\u2019s test network) by a local server built on node.js through web3.js and INFURA. The calibration information in Figure 4 corresponds to \u201cstring data\u201d in Algorithm 1, and the data are stored in each traceability hierarchy. Information registered on Ropsten using Algorithm 1 is obtained through web3.js and INFURA and reflected in node.js. Traceability hierarchy 1 describes the calibration information on a primary standard, and 4 describes the calibration information on a DUT.\nAlgorithm 1: Smart contract on the recognizable traceability path (RTP) written using Solidity in this study.\n1: 2: 3: 4: 5: 6: 7: 8: 9: 10: 11: 12: 13: 14: 15: 16: 17: 18: 19: 20: 21: 22: 23: 24: 25: 26: 27: 28: 29: 30: 31: 32: 33: 34: 35: 36: 37: 38: 39: 40:\n// SPDX-License-Identifier: MIT pragma solidity \u02c60.8.0;\ncontract RecognizableTraceabilityPath { address public institutionID; Point[] public points; struct Point {\nstring data; uint referenceID;\n}\nconstructor() { institutionID = msg.sender;\n}\nfunction add(string memory _data, uint _referenceID) public { if(institutionID != msg.sender){\nrevert(); }else{\npoints.push(Point(_data, _referenceID)); }\n}\nfunction RTP(uint _startID) view public returns(string[] memory) { uint ID = points[_startID].referenceID; uint rank = 1; while(ID != 0) {\nrank++; ID = points[ID].referenceID;\n} string[] memory rtp = new string[](rank); rtp[0] = points[_startID].data; ID = points[_startID].referenceID; for (uint i = 1; i < rank; i++) { rtp[i] = points[ID].data; ID = points[ID].referenceID; } return rtp;\n} }\nSensors 2023, 23, x FOR PEER REVIEW 7 of 12\nIn this study, calibration clients and end users are assumed as User 1 using \u201cfunction RTP\u201d, and national metrology institutes and accredited calibration laboratories are assumed as User 2 using \u201cfunction dd\u201d. An example of RTP information received by User 1 is depicted in Figure 4, revealing the actual acquisition of pre-registered data from Ropsten (Ethereum\u2019s test network) by a local server built on node.js through web3.js and INFURA. The calibration information in Figure 4 corresponds to \u201cstring data\u201d in Algorithm 1, and the data are stored in each traceability hierarchy. Information registered on Ropsten using Algorithm 1 is obtained through web3.js and INFURA and reflected in node.js. Traceability hierarchy 1 describes the calibration information on a primary standard, and 4 describes the calibration information on a DUT."
        },
        {
            "heading": "3. Cost estimation of the RTP",
            "text": "Section 3 estimates the costs associated with the RTP proposed above and discusses the economic feasibility of managing calibration information using Ethereum, a public chain. To deploy and execute a smart contract on Ethereum, a transaction must be issued and a fee called \u201cgas\u201d must be paid. The transaction fees are paid to the miner, who tends to record transactions with high transaction fees in the blockchain. This gas-based transaction fee is represented by the following equation:\n= \u00d7( ) ( ) ( )gas eth gas price eth gas gasusage gas (1)\nThe gas price is set by the transaction issuer based on the congestion of the Ethereum network. The gas usage varies depending on the content of the program to be executed by the smart contract. Therefore, to estimate the cost of a smart contract for the RTP, it is necessary to estimate the gas price and gas usage.\n3.2. Gas Price The gas price can be set by the transaction issuer. Setting a higher gas price increases the likelihood that the transaction is recorded in the blockchain more quickly. Therefore, the gas price setting depends on the urgency of transaction approval. The gas price comprises three components: Base Fee Per Gas, Priority Fee Per Gas, and Max Fee Per Gas. For more details, please refer to EIP-1559 [52]. As an indication of the gas price, you can use web3.eth.getGasPrice() of web3.js, a JavaScript library, to obtain the median gas price set in multiple transactions in the past. Figure 5a depicts the time variation in the gas prices obtained from web3.eth.getGasPrice() observed in the main network of Ethereum. The units of gas price are expressed in Gwei (=10\u22129 ETH). The gas price is affected by various factors, such as the congestion of Ethereum\u2019s main network, etc. Therefore, it is extremely difficult to predict future gas prices even though it is possible to know the current appropriate gas prices. It is not necessary to pay for the gas price depicted in Figure 5a at each\nFigure 4. An example of the RTP received by an end user."
        },
        {
            "heading": "3. Cost Estimation of the RTP",
            "text": ""
        },
        {
            "heading": "3.1. Overview of Transaction Fees",
            "text": "Section 3 estimates the costs associated with the RTP proposed above and discusses the economic feasibility of managing calibration information using Ethereum, a public chain. To deploy and execute a smart contract on Ethereum, a transaction must be issued and a fee called \u201cgas\u201d must be paid. The transaction fees are paid to the miner, who tends to record transactions with high transaction fees in the blockchain. This gas-based transaction fee is represented by the following equation:\ngas(eth) = gas price(eth/gas)\u00d7 gas usage(gas) (1)\nThe gas price is set by the transaction issuer based on the congestion of the Ethereum network. The gas usage varies depending on the content of the program to be executed by the smart contract. Therefore, to estimate the cost of a smart contract for the RTP, it is necessary to estimate the gas price and gas usage."
        },
        {
            "heading": "3.2. Gas Price",
            "text": "The gas price can be set by the transaction issuer. Setting a higher gas price increases the likelihood that the transaction is recorded in the blockchain more quickly. Therefore, the gas price setting depends on the urgency of transaction approval. The gas price comprises three components: Base Fee Per Gas, Priority Fee Per Gas, and Max Fee Per Gas. For more details, please refer to EIP-1559 [52]. As an indication of the gas price, you can use web3.eth.getGasPrice() of web3.js, a JavaScript library, to obtain the median gas price set in multiple transactions in the past. Figure 5a depicts the time variation in the gas prices obtained from web3.eth.getGasPrice() observed in the main network of Ethereum. The units of gas price are expressed in Gwei (=10\u22129 ETH). The gas price is affected by various factors, such as the congestion of Ethereum\u2019s main network, etc. Therefore, it is extremely difficult to predict future gas prices even though it is possible to know the current appropriate gas prices. It is not necessary to pay for the gas price depicted in Figure 5a at each time, where users can set their gas price as low as not less than Base Fee Per Gas. Figure 5b is the gas price converted to the dollar notation by multiplying Figure 5a with the price of Ethereum, providing an intuitive gas price. The gas prices represented in Figure 5a or Figure 5b multiplied by the gas usage is the transaction fee on Ethereum\u2019s main network. Sensors 2023, 23, x FOR PEER REVIEW 8 of 12 time, where users can set their gas price as low as not less than Base Fee Per Gas. Figure 5b is the gas price converted to the dollar notation by multiplying Figure 5a with the price of Ethereum, providing an intuitive gas price. The gas prices represented in Figure 5a or Figure 5b multiplied by the gas usage is the transaction fee on Ethereum\u2019s main network."
        },
        {
            "heading": "3.3. Gas Usage",
            "text": "Languages such as Solidity that describe smart contracts on Ethereum are compiled into bytecode and opcode that are executed by the Ethereum Virtual Machine in the node. The gas usage is determined by the arithmetic operations performed in the opcode. For example, addition of two elements (ADD) consumes three gas; multiplication of two elements (MUL) consumes five gas; obtaining block height (NUMBER) consumes two gas, and obtaining balance (SELFBALANCE) consumes five gas in the opcode. All the above opcodes are static gas costs; the opcodes whose gas cost varies depending on the amount of data handled are called dynamic gas costs. For more information on each opcode, please refer to the Ethereum Yellow Paper (Berlin) [53]. The gas usage required to execute \u201cfunction add\u201d, which records the calibration information described in Algorithm 1, can be estimated by examining the opcodes used. In this study, \u201cfunction add\u201d is executed on Ropsten (Ethereum\u2019s test network) to extract the opcode operations with large gas usage and verified the dominant factors in transaction fees. The results of the validation reveal that when \u201cstring data\u201d and \u201cuint referenceID\u201d are recorded on Ropsten in Algorithm 1, the gas usage is 72,572. The two opcodes with the highest gas costs are TRANSACTION and SSTORE, as depicted in Figure 6. TRANSACTION consumes 21,000 gas as the minimum cost of issuing a transaction. SSTORE consumes 22,100 gas as the cost of recording data (cold access) on each Ethereum node. In the program described here, SSTORE is used twice because two data, \u201cstring data\u201d and \u201cuint referenceID\u201d, are recorded (44,200 gas). TRANSACTION and two SSTOREs account for approximately 90% of the total gas usage of 72,572 gas. This ratio is similar when the number of variables (number of \u201cstring data\u201d) increases. From this, it is possible to estimate the overall gas usage from the number of times SSTORE are used, i.e., the number of variables. Note that recording more than 256 bits of data in \u201cstring data\u201d may cause the gas usage to fluctuate. Sensors 2023, 23, x FOR PEER REVIEW 9 of 12\nvariables. Note that recording more than 256 bits of data in \u201cstring data\u201d may cause the gas usage to fluctuate."
        },
        {
            "heading": "3.4. Feasibility of RTP Using Ethereum in the Field of Metrology",
            "text": "According to the Physikalisch-Technische Bundesanstalt (PTB) report [9], the number of calibration certificates issued is estimated to be approximately 10,000 per year by PTB and approximately 100,000 per year by accredited calibration laboratories in Germany. In addition, the National Metrology Institute of Japan (NMIJ) issues approximately 700 calibration certificates per year (jcss calibration: 500, calibration and testing service except jcss: 200), excluding those in the field of legal metrology, and approximately 610,000 calibration certificates [54] are issued by accredited calibration laboratories in Japan. As mentioned above, the number of calibration certificates issued by each national metrology institute is enormous, and it is unrealistic to manage all the information in a public chain, which requires transaction fees. For a single measurement, the cost of recording the six items proposed by Hackel et al. [9] on the Ethereum blockchain using the smart contract described in Algorithm 1 is estimated. As the majority of the gas usage is accounted for by one TRANSACTION and six SSTOREs, the usage is estimated to be approximately 170,000 gas based on Section 3.3. The necessary transaction fees for a single measurement can be estimated by multiplying this gas usage by the median gas price of 37 Gwei/gas (Figure 5a) or 0.000089 USD/gas (Figure 5b). For reference, as of 2022, the NMIJ\u2019s fee for issuing a certificate for calibration and testing service except jcss is 1,300 JPY for Japanese text and 2,300 JPY for English text (excluding tax). The data recording on a blockchain is expected to improve the reliability and added value of the measurement system, as exemplified by the traceability management and visualization system (i.e., the RTP) proposed in this study. Therefore, companies and research institutions should conduct a cost\u2013benefit analysis before recording data on a blockchain. Blockchain usage may be appropriate for valuable data with high calibration costs (e.g., flow meter calibrations with large bore under high flow rates and calibration of cryogenic thermometers) because of the need to pay transaction fees at the time of using a public chain (Ethereum). Moreover, important standards that are frequently referenced, such as national and primary standards, would also be worth registering on the blockchain. If the transaction fee is an issue in the use of blockchain, utilizing a private chain such as HF rather than a public chain such as Ethereum would reduce costs. However, tamper resistance and other factors need to be considered when using a private chain. On public chains, practical applications for lowering transaction fees are also underway. For instance, Layer2 technologies such as Lightning Network [55,56] and proof-of-stake [57,58] alternatives to proof-of-work [59] are being developed."
        },
        {
            "heading": "4. Conclusions",
            "text": "This study focuses on the Ethereum blockchain, which is both tamper-resistant and highly available, as a method of managing digital data in the field of metrology as only a few studies have clearly identified the economic costs of blockchains. This study then proposes the RTP that can be accessed by end users using smart contracts to improve the transparency and reliability of calibration tests. Only a few existing studies have created\nr ing to the Physikalisch-Technische Bundesanstalt (PTB) report [9], the number of calibr tion certificates issued is estimated to be approximately 10,000 per year by PTB and approximately 100,000 per year b accredited calibration laboratories in Germany. In addition, the National Metrology Institute of Japan (NMIJ) issues approximately 700 calibration certificates per year (jcss calibration: 500, calibration and testing service except jcss: 200), excluding those in the field of legal metrology, and approximately 610,000 calibration certificates [54] are issued by accredited calibration laboratories in Japan. As mentioned above, the number of calibration certificates issued by each national metrology institute is enormous, and it is unrealistic to manage all the information in a public chain, which requires transaction fees. For a single measurement, the cost of recording the six items proposed by Hackel et al. [9] on the Ethereum blockchain using the smart contract described in Algorithm 1 is estimated. As the majority of the gas usage is accounted for by one TRANSACTION and six SSTOREs, the usage is estimated to be approximately 170,000 gas based on Section 3.3. The necessary transaction fees for a single measurement can be estimated by multiplying this gas usage by the median gas price of 37 Gwei/gas (Figure 5a) or 0.000089 USD/gas (Figure 5b). For reference, as of 2022, the NMIJ\u2019s fee for\nissuing a certificate for calibration and testing service except jcss is 1300 JPY for Japanese text and 2300 JPY for English text (excluding tax). The data recording on a blockchain is expected to improve the reliability and added value of the measurement system, as exemplified by the traceability management and visualization system (i.e., the RTP) proposed in this study. Therefore, companies and research institutions should conduct a cost\u2013benefit analysis before recording data on a blockchain. Blockchain usage may be appropriate for valuable data with high calibration costs (e.g., flow meter calibrations with large bore under high flow rates and calibration of cryogenic thermometers) because of the need to pay transaction fees at the time of using a public chain (Ethereum). Moreover, important standards that are frequently referenced, such as national and primary standards, would also be worth registering on the blockchain. If the transaction fee is an issue in the use of blockchain, utilizing a private chain such as HF rather than a public chain such as Ethereum would reduce costs. However, tamper resistance and other factors need to be considered when using a private chain. On public chains, practical applications for lowering transaction fees are also underway. For instance, Layer2 technologies such as Lightning Network [55,56] and proof-of-stake [57,58] alternatives to proof-of-work [59] are being developed."
        },
        {
            "heading": "4. Conclusions",
            "text": "This study focuses on the Ethereum blockchain, which is both tamper-resistant and highly available, as a method of managing digital data in the field of metrology as only a few studies have clearly identified the economic costs of blockchains. This study then proposes the RTP that can be accessed by end users using smart contracts to improve the transparency and reliability of calibration tests. Only a few existing studies have created smart contracts and verified their operation. While describing the development environment and procedures in detail, this study works on the management and visualization of the traceability path. As a result, the recording of data on the blockchain (\u201cfunction add\u201d in Algorithm 1), the retrieval of data from the blockchain (\u201cfunction RTP\u201d in Algorithm 1), and the verification of the output as the RTP (Figure 4) are confirmed. Furthermore, using Ethereum, the transaction fee of executing smart contracts is estimated. The calculation of the transaction fee requires gas prices and gas usage. First, the required gas prices are recorded (2022/03~2022/07) and clarified on Ethereum\u2019s main network. Then, calculation method of the gas usage is explained in detail, and the opcodes of TRANSACTION and SSTORE account for 90% of the gas usage in the smart contract for the present RTP. In addition, the traceability management system is verified from an economic cost perspective. The basic cost of executing smart contracts on Ethereum is described so that everyone can reproduce it. This study makes a valuable contribution to the literature by presenting a decision method based on economic costs in an era where there is debate in the field of metrology about choosing between private and public chains such as HF and Ethereum, respectively.\nAuthor Contributions: N.T.: Conceptualization, Methodology, Draft preparation, Visualization. N.F.: Supervision, Validation, Writing\u2014reviewing and editing. All authors have read and agreed to the published version of the manuscript.\nFunding: This research received no external funding.\nData Availability Statement: The data that support the findings of this study are available from the corresponding authors upon reasonable request.\nConflicts of Interest: The authors declare no conflict of interest."
        }
    ],
    "title": "Traceability Management System Using Blockchain Technology and Cost Estimation in the Metrology Field",
    "year": 2023
}