{
    "abstractText": "DarkSUSY is a versatile tool for precision calculations of a large variety of dark matter-related signals, ranging from predictions for the dark matter relic density to dark matter self-interactions and rates relevant for direct and indirect detection experiments. In all of these areas significant new code additions have been made in recent years, since the release of DarkSUSY 6 in 2018, which we summarize in this overview. In particular, DarkSUSY now allows users to compute the relic density for feebly interacting massive particles via the freeze-in mechanism, but also offers new routines for freeze-out calculations in the presence of secluded dark sectors as well as for models where kinetic equilibrium is not fully established during the freeze-out process. On the direct detection side, the effect of cosmic-ray upscattering of dark matter has been fully implemented, leading to a subdominant relativistic component in the expected dark matter flux at Earth. Finally, updated yields relevant for indirect searches with gamma rays, neutrinos or charged cosmic rays have been added; the new default spectra are based on a large number of Pythia 8 runs, but users can also easily switch between various alternative spectra. Further code details, including a manual and various concrete example applications, are provided at www.darksusy.org. CERN-TH-2022-031",
    "authors": [
        {
            "affiliations": [],
            "name": "Torsten Bringmanna"
        },
        {
            "affiliations": [],
            "name": "Joakim Edsj\u00f6"
        },
        {
            "affiliations": [],
            "name": "Torsten Bringmann"
        }
    ],
    "id": "SP:0af0d2ea17b8024a38c9fd154f0607165171e941",
    "references": [
        {
            "authors": [
                "P. Gondolo",
                "J. Edsjo",
                "P. Ullio",
                "L. Bergstrom"
            ],
            "title": "M",
            "venue": "Schelke, et al., DarkSUSY: Computing supersymmetric dark matter properties numerically, JCAP 07 ",
            "year": 2004
        },
        {
            "authors": [
                "T. Bringmann",
                "J. Edsj\u00f6",
                "P. Gondolo",
                "P. Ullio",
                "L. Bergstr\u00f6m"
            ],
            "title": "DarkSUSY 6 : An Advanced Tool to Compute Dark Matter Properties Numerically",
            "venue": "JCAP 07 ",
            "year": 2018
        },
        {
            "authors": [
                "G. B\u00e9langer",
                "F. Boudjema",
                "A. Goudelis",
                "A. Pukhov"
            ],
            "title": "and B",
            "venue": "Zaldivar, micrOMEGAs5.0 : Freeze-in, Comput. Phys. Commun. 231 ",
            "year": 2018
        },
        {
            "authors": [
                "F. Ambrogi",
                "C. Arina",
                "M. Backovic",
                "J. Heisig"
            ],
            "title": "F",
            "venue": "Maltoni, et al., MadDM v.3.0: a Comprehensive Tool for Dark Matter Studies, Phys. Dark Univ. 24 ",
            "year": 2019
        },
        {
            "authors": [
                "A. Arbey",
                "F. Mahmoudi"
            ],
            "title": "SuperIso Relic: A Program for calculating relic density and flavor physics observables in Supersymmetry",
            "venue": "Comput. Phys. Commun. 181 ",
            "year": 2010
        },
        {
            "authors": [
                "C. Arina"
            ],
            "title": "Review on Dark Matter Tools",
            "venue": "PoS TOOLS2020 ",
            "year": 2021
        },
        {
            "authors": [
                "CTA Collaboration"
            ],
            "title": "A",
            "venue": "Acharyya et al., Sensitivity of the Cherenkov Telescope Array to a dark matter signal from the Galactic centre, JCAP 01 ",
            "year": 2021
        },
        {
            "authors": [
                "HAWC Collaboration"
            ],
            "title": "A",
            "venue": "Albert et al., Constraints on Spin-Dependent Dark Matter Scattering with Long-Lived Mediators from TeV Observations of the Sun with HAWC, Phys. Rev. D 98 ",
            "year": 2018
        },
        {
            "authors": [
                "Super-Kamiokande Collaboration",
                "K. Abe"
            ],
            "title": "Indirect search for dark matter from the Galactic Center and halo with the Super-Kamiokande",
            "venue": "detector, Phys. Rev. D",
            "year": 2020
        },
        {
            "authors": [
                "IceCube Collaboration",
                "C. T\u00f6nnis"
            ],
            "title": "Search for secluded dark matter with 6 years of IceCube data, in 37th International",
            "venue": "Cosmic Ray Conference,",
            "year": 2021
        },
        {
            "authors": [
                "T. Bringmann"
            ],
            "title": "DarkBit: A GAMBIT module for computing dark matter observables and likelihoods",
            "venue": "Eur. Phys. J. C",
            "year": 2017
        },
        {
            "authors": [
                "GAMBIT Collaboration"
            ],
            "title": "P",
            "venue": "Athron et al., GAMBIT: The Global and Modular Beyond-the-Standard-Model Inference Tool, Eur. Phys. J. C 77 (2017), no. 11 784, [1705.07908]. [Addendum: Eur.Phys.J.C 78, 98 ",
            "year": 2018
        },
        {
            "authors": [
                "S. Bloor",
                "T.E. Gonzalo",
                "P. Scott",
                "C. Chang"
            ],
            "title": "A",
            "venue": "Raklev, et al., The GAMBIT Universal Model Machine: from Lagrangians to likelihoods, Eur. Phys. J. C 81 ",
            "year": 2021
        },
        {
            "authors": [
                "P. Gondolo",
                "G. Gelmini"
            ],
            "title": "Cosmic abundances of stable particles: Improved analysis",
            "venue": "Nucl. Phys. B 360 ",
            "year": 1991
        },
        {
            "authors": [
                "J. Edsjo",
                "P. Gondolo"
            ],
            "title": "Neutralino relic density including coannihilations",
            "venue": "Phys. Rev. D 56 ",
            "year": 1997
        },
        {
            "authors": [
                "M. Laine",
                "Y. Schroder"
            ],
            "title": "Quark mass thresholds in QCD thermodynamics",
            "venue": "Phys. Rev. D 73 ",
            "year": 2006
        },
        {
            "authors": [
                "M. Laine",
                "M. Meyer"
            ],
            "title": "Standard Model thermodynamics across the electroweak crossover",
            "venue": "JCAP 07 ",
            "year": 2015
        },
        {
            "authors": [
                "M. Pospelov",
                "A. Ritz",
                "M.B. Voloshin"
            ],
            "title": "Secluded WIMP Dark Matter",
            "venue": "Phys. Lett. B 662 ",
            "year": 2008
        },
        {
            "authors": [
                "M. Pospelov"
            ],
            "title": "Secluded U(1) below the weak scale",
            "venue": "Phys. Rev. D 80 ",
            "year": 2009
        },
        {
            "authors": [
                "J.L. Feng",
                "H. Tu",
                "H.-B. Yu"
            ],
            "title": "Thermal Relics in Hidden Sectors",
            "venue": "JCAP 10 ",
            "year": 2008
        },
        {
            "authors": [
                "T. Bringmann",
                "P.F. Depta",
                "M. Hufnagel",
                "K. Schmidt-Hoberg"
            ],
            "title": "Precise dark matter relic abundance in decoupled sectors",
            "venue": "Phys. Lett. B 817 ",
            "year": 2021
        },
        {
            "authors": [
                "L.G. van den Aarssen",
                "T. Bringmann",
                "Y.C. Goedecke"
            ],
            "title": "Thermal decoupling and the smallest subhalo mass in dark matter models with Sommerfeld-enhanced annihilation rates",
            "venue": "Phys. Rev. D",
            "year": 2012
        },
        {
            "authors": [
                "M. Duch",
                "B. Grzadkowski"
            ],
            "title": "Resonance enhancement of dark matter interactions: the case for early kinetic decoupling and velocity dependent resonance width",
            "venue": "JHEP 09 ",
            "year": 2017
        },
        {
            "authors": [
                "T. Binder",
                "T. Bringmann",
                "M. Gustafsson",
                "A. Hryczuk"
            ],
            "title": "Early kinetic decoupling of dark matter: when the standard way of calculating the thermal relic density fails",
            "venue": "Phys. Rev. D 96 (2017), no. 11 115010, [1706.07433]. [Erratum: Phys.Rev.D 101, 099901 ",
            "year": 2020
        },
        {
            "authors": [
                "T. Binder",
                "M. Gustafsson",
                "A. Kamada",
                "S.M.R. Sandner",
                "M. Wiesner"
            ],
            "title": "Reannihilation of self-interacting dark matter",
            "venue": "Phys. Rev. D 97 ",
            "year": 2018
        },
        {
            "authors": [
                "T. Binder",
                "T. Bringmann",
                "M. Gustafsson",
                "A. Hryczuk"
            ],
            "title": "DRAKE: Dark matter Relic Abundance beyond Kinetic Equilibrium",
            "venue": "Eur. Phys. J. C 81 ",
            "year": 1944
        },
        {
            "authors": [
                "L.J. Hall",
                "K. Jedamzik",
                "J. March-Russell",
                "S.M. West"
            ],
            "title": "Freeze-In Production of FIMP Dark Matter",
            "venue": "JHEP 03 ",
            "year": 2010
        },
        {
            "authors": [
                "X. Chu",
                "T. Hambye",
                "M.H.G. Tytgat"
            ],
            "title": "The Four Basic Ways of Creating Dark Matter Through a Portal",
            "venue": "JCAP 05 ",
            "year": 2012
        },
        {
            "authors": [
                "V. Silveira",
                "A. Zee",
                "SCALAR PHANTOMS"
            ],
            "title": "Phys",
            "venue": "Lett. B 161 ",
            "year": 1985
        },
        {
            "authors": [
                "XENON Collaboration"
            ],
            "title": "E",
            "venue": "Aprile et al., Dark Matter Search Results from a One Ton-Year Exposure of XENON1T, Phys. Rev. Lett. 121 ",
            "year": 2018
        },
        {
            "authors": [
                "T. Bringmann",
                "M. Pospelov"
            ],
            "title": "Novel direct detection constraints on light dark matter",
            "venue": "Phys. Rev. Lett. 122 ",
            "year": 2019
        },
        {
            "authors": [
                "C.V. Cappiello",
                "K.C.Y. Ng",
                "J.F. Beacom"
            ],
            "title": "Reverse Direct Detection: Cosmic Ray Scattering With Light Dark Matter",
            "venue": "Phys. Rev. D 99 ",
            "year": 2019
        },
        {
            "authors": [
                "Y. Ema",
                "F. Sala",
                "R. Sato"
            ],
            "title": "Light Dark Matter at Neutrino Experiments",
            "venue": "Phys. Rev. Lett. 122 ",
            "year": 2019
        },
        {
            "authors": [
                "C.V. Cappiello",
                "J.F. Beacom"
            ],
            "title": "Strong New Limits on Light Dark Matter from Neutrino Experiments",
            "venue": "Phys. Rev. D 100 (2019), no. 10 103011, [1906.11283]. [Erratum: Phys.Rev.D 104, 069901 ",
            "year": 2021
        },
        {
            "authors": [
                "J.B. Dent",
                "B. Dutta",
                "J.L. Newstead",
                "I.M. Shoemaker"
            ],
            "title": "Bounds on Cosmic Ray-Boosted Dark Matter in Simplified Models and its Corresponding Neutrino-Floor",
            "venue": "Phys. Rev. D 101 ",
            "year": 2020
        },
        {
            "authors": [
                "C. Xia",
                "Y.-H. Xu",
                "Y.-F. Zhou"
            ],
            "title": "Constraining light dark matter upscattered by ultrahigh-energy cosmic rays",
            "venue": "Nucl. Phys. B 969 ",
            "year": 2021
        },
        {
            "authors": [
                "T.B.J. Alvey",
                "K. Kolesova"
            ],
            "title": "No room to hide: cosmic-ray upscattering of GeV-scale dark matter",
            "venue": "prep. ",
            "year": 2022
        },
        {
            "authors": [
                "K. Bondarenko",
                "A. Boyarsky",
                "T. Bringmann",
                "M. Hufnagel"
            ],
            "title": "K",
            "venue": "Schmidt-Hoberg, et al., Direct detection and complementary constraints for sub-GeV dark matter, JHEP 03 ",
            "year": 2020
        },
        {
            "authors": [
                "M.J. Boschini"
            ],
            "title": "Deciphering the local Interstellar spectra of primary cosmic ray species with HelMod, Astrophys",
            "venue": "J. 858 (2018),",
            "year": 2018
        },
        {
            "authors": [
                "M.J. Boschini"
            ],
            "title": "Inference of the Local Interstellar Spectra of Cosmic-Ray Nuclei Z \u2264 28 with the GalProp\u2013HelMod Framework, Astrophys",
            "venue": "J. Suppl",
            "year": 2020
        },
        {
            "authors": [
                "T. Sjostrand",
                "S. Mrenna"
            ],
            "title": "and P",
            "venue": "Z. Skands, PYTHIA 6.4 Physics and Manual, JHEP 05 ",
            "year": 2006
        },
        {
            "authors": [
                "T. Sj\u00f6strand",
                "S. Ask",
                "J.R. Christiansen",
                "R. Corke"
            ],
            "title": "N",
            "venue": "Desai, et al., An introduction to PYTHIA 8.2, Comput. Phys. Commun. 191 ",
            "year": 2015
        },
        {
            "authors": [
                "J. Edsj\u00f6"
            ],
            "title": "NuSigma Neutrino Interaction Monte Carlo.",
            "venue": "http://www.fysik.su.se/~edsjo/wimpsim/,",
            "year": 2007
        },
        {
            "authors": [
                "I. Esteban",
                "M.C. Gonzalez-Garcia",
                "M. Maltoni",
                "T. Schwetz",
                "A. Zhou"
            ],
            "title": "The fate of hints: updated global analysis of three-flavor neutrino oscillations",
            "venue": "JHEP 09 ",
            "year": 2020
        },
        {
            "authors": [
                "I. Esteban",
                "M.C. Gonzalez-Garcia",
                "M. Maltoni",
                "I. Martinez-Soler"
            ],
            "title": "and T",
            "venue": "Schwetz, \u201cNuFIT 5.0.\u201d http://www.nu-fit.org/",
            "year": 2021
        },
        {
            "authors": [
                "S. Amoroso",
                "S. Caron",
                "A. Jueid"
            ],
            "title": "R",
            "venue": "Ruiz de Austri, and P. Skands, Estimating QCD uncertainties in Monte Carlo event generators for gamma-ray dark matter searches, JCAP 05 ",
            "year": 2019
        },
        {
            "authors": [
                "T. Plehn",
                "P. Reimitz",
                "P. Richardson"
            ],
            "title": "Hadronic Footprint of GeV-Mass Dark Matter",
            "venue": "SciPost Phys. 8 ",
            "year": 2020
        },
        {
            "authors": [
                "C.W. Bauer",
                "N.L. Rodd",
                "B.R. Webber"
            ],
            "title": "Dark matter spectra from the electroweak to the Planck scale",
            "venue": "JHEP 06 ",
            "year": 2021
        },
        {
            "authors": [
                "K.M. G\u00f3rski",
                "E. Hivon",
                "A.J. Banday",
                "B.D. Wandelt"
            ],
            "title": "F",
            "venue": "K. Hansen, et al., HEALPix - A Framework for high resolution discretization, and fast analysis of data distributed on the sphere, Astrophys. J. 622 ",
            "year": 2005
        },
        {
            "authors": [
                "S. Heinemeyer",
                "W. Hollik",
                "G. Weiglein"
            ],
            "title": "FeynHiggs: A Program for the calculation of the masses of the neutral CP even Higgs bosons in the MSSM",
            "venue": "Comput. Phys. Commun. 124 ",
            "year": 2000
        },
        {
            "authors": [
                "T. Hahn",
                "S. Heinemeyer",
                "W. Hollik",
                "H. Rzehak"
            ],
            "title": "and G",
            "venue": "Weiglein, FeynHiggs: A program for the calculation of MSSM Higgs-boson observables - Version 2.6.5, Comput. Phys. Commun. 180 ",
            "year": 2009
        },
        {
            "authors": [
                "P. Bechtle",
                "O. Brein",
                "S. Heinemeyer",
                "O. St\u00e5l"
            ],
            "title": "T",
            "venue": "Stefaniak, et al., HiggsBounds \u2212 4: Improved Tests of Extended Higgs Sectors against Exclusion Bounds from LEP, the Tevatron and the LHC, Eur. Phys. J. C 74 ",
            "year": 2014
        },
        {
            "authors": [
                "P. Bechtle",
                "S. Heinemeyer",
                "O. St\u00e5l",
                "T. Stefaniak",
                "G. Weiglein"
            ],
            "title": "HiggsSignals: Confronting arbitrary Higgs sectors with measurements at the Tevatron and the LHC",
            "venue": "Eur. Phys. J. C 74 ",
            "year": 1933
        },
        {
            "authors": [
                "F.E. Paige",
                "S.D. Protopopescu",
                "H. Baer",
                "X. Tata"
            ],
            "title": "ISAJET 7.69: A Monte Carlo event generator for pp, anti-p p, and e+e- reactions, hep-ph/0312045",
            "year": 2045
        },
        {
            "authors": [
                "F. Mahmoudi"
            ],
            "title": "SuperIso v2.3: A Program for calculating flavor physics observables in Supersymmetry",
            "venue": "Comput. Phys. Commun",
            "year": 2009
        }
    ],
    "sections": [
        {
            "text": "P o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8\nDarkSUSY 6.3 \u2013 Freeze-in, out-of-equilibrium freeze-out, cosmic-ray upscattering and further new features\nTorsten Bringmann\ud835\udc4e,\ud835\udc4f,\u2217 and Joakim Edsj\u00f6\ud835\udc50 \ud835\udc4eDepartment of Physics, University of Oslo, Box 1048, N-0316 Oslo, Norway \ud835\udc4fTheoretical Physics Department, CERN, 1211 Geneva 23, Switzerland \ud835\udc50The Oskar Klein Centre for Cosmoparticle Physics, Department of Physics, Stockholm University, AlbaNova, SE-106 91 Stockholm, Sweden.\nE-mail: torsten.bringmann@fys.uio.no, edsjo@fysik.su.se\nDarkSUSY is a versatile tool for precision calculations of a large variety of dark matter-related signals, ranging from predictions for the dark matter relic density to dark matter self-interactions and rates relevant for direct and indirect detection experiments. In all of these areas significant new code additions have been made in recent years, since the release of DarkSUSY 6 in 2018, which we summarize in this overview. In particular, DarkSUSY now allows users to compute the relic density for feebly interacting massive particles via the freeze-in mechanism, but also offers new routines for freeze-out calculations in the presence of secluded dark sectors as well as for models where kinetic equilibrium is not fully established during the freeze-out process. On the direct detection side, the effect of cosmic-ray upscattering of dark matter has been fully implemented, leading to a subdominant relativistic component in the expected dark matter flux at Earth. Finally, updated yields relevant for indirect searches with gamma rays, neutrinos or charged cosmic rays have been added; the new default spectra are based on a large number of Pythia 8 runs, but users can also easily switch between various alternative spectra. Further code details, including a manual and various concrete example applications, are provided at www.darksusy.org.\nCERN-TH-2022-031\nComputational Tools for High Energy Physics and Cosmology (CompTools2021) 22-26 November 2021 Institut de Physique des 2 Infinis (IP2I), Lyon, France\n\u2217Speaker\n\u00a9 Copyright owned by the author(s) under the terms of the Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License (CC BY-NC-ND 4.0). https://pos.sissa.it/\nP o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8\nContents"
        },
        {
            "heading": "1 Introduction 2",
            "text": ""
        },
        {
            "heading": "2 Relic density: Boltzmann equations 3",
            "text": "2.1 Dark sector freeze-out 4 2.2 Freeze-out beyond kinetic equilibrium 5 2.3 Freeze-in 7"
        },
        {
            "heading": "3 Direct detection: cosmic-ray upscattering of dark matter 8",
            "text": ""
        },
        {
            "heading": "4 Indirect detection: particle yields 10",
            "text": ""
        },
        {
            "heading": "5 Summary 11",
            "text": ""
        },
        {
            "heading": "A Technical updates: installation and make system 11",
            "text": ""
        },
        {
            "heading": "1. Introduction",
            "text": "The identity of dark matter (DM) remains one of the central questions of fundamental physics, even though its present abundance of \u03a9\ud835\udf12\u210e2 = 0.12 has been precisely measured over an impressive range of cosmological distance scales [1]. The minimal requirement on any theory beyond the standard model (BSM) that includes a potential DM candidate is therefore a DM production mechanism in the early universe explaining the observed value of \u03a9\ud835\udf12\u210e2. Further experimental observables, based on non-gravitational interactions introduced in such BSM theories, are generally needed in order to actually close in on the nature of DM. Consequently, there is a huge demand on precision calculations both for the relic density and rates associated to other potentially observable DM signals. DarkSUSY [2, 3] is one of the major public and generic codes to perform such calculations (complemented by MicrOMEGAs [4], MadDM [5] and SuperIso Relic [6], which each have a somewhat different focus [7]). The upgrade to DarkSUSY 6 [3] represented a major overhaul and restructuring of the code. The main novelty introduced in that release, besides many new physics features, is a highly modular structure that allows users to numerically compute DM properties beyond supersymmetric models (and more generally beyond weakly interacting massive particles as DM candidates). Since then, DarkSUSY has been widely used in the community. Recent major applications include sensitivity studies for a DM signal from the Galactic center by the Cherenkov Telescope Array (CTA) collaboration [8], searches for DM-related gamma-rays from the sun by the HAWC [9] and Fermi [10] collaborations, as well as searches for neutrino signals with Super-Kamionkande [11] and IceCube [12]; furthermore, DarkSUSY is one of the main backends that DarkBit [13] relies on, for\nP o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8\nits rate and relic density calculations, and as such decisive for the global fits performed by the GAMBIT collaboration [14, 15]. At the same time, the code has seen further active development and new features added, warranting an updated description beyond what is regularly reported on the homepage.1 In these proceedings we summarize the most important updates since version 6.1. [3] of the code, both in terms of physics and actual implementation.2 The text is organized along the three main directions where significant code updates have been implemented, namely relic density calculations (section 2), direct detection (section 3) and indirect detection routines (section 4). After a brief summary, in section 5, we also include a more technical Appendix A where we describe recent updates to the installation and make system that address in particular commonly encountered problems when building contributed code like HEALPix."
        },
        {
            "heading": "2. Relic density: Boltzmann equations",
            "text": "The evolution of the DM phase-space density \ud835\udc53\ud835\udf12 (\ud835\udc61, \ud835\udc5d) in the early universe is governed by the Boltzmann equation\n\ud835\udc38 ( \ud835\udf15\ud835\udc61 \u2212 \ud835\udc3b\ud835\udc5d\ud835\udf15\ud835\udc5d ) \ud835\udc53\ud835\udf12 = \ud835\udc36ann [ \ud835\udc53\ud835\udf12] + \ud835\udc36el [ \ud835\udc53\ud835\udf12] , (1)\nwhere\n\ud835\udc36ann = 1\n2\ud835\udc54\ud835\udf12\n\u222b \ud835\udc513\ud835\udc5d\n(2\ud835\udf0b)32?\u0303?\n\u222b \ud835\udc513\ud835\udc58\n(2\ud835\udf0b)32\ud835\udf14\n\u222b \ud835\udc513 ?\u0303?\n(2\ud835\udf0b)32?\u0303? (2\ud835\udf0b)4\ud835\udeff (4) (\ud835\udc5d + \ud835\udc5d \u2212 ?\u0303? \u2212 \ud835\udc58) |M|2\ud835\udf12\ud835\udf12\u2194\ud835\udf13\ud835\udf13 \u00d7 [ \ud835\udc53\ud835\udf13 (\ud835\udf14) \ud835\udc53\ud835\udf13 (?\u0303?) \ud835\udc53\ud835\udf12 (\ud835\udc38) \ud835\udc53\ud835\udf12 (?\u0303?) \u2212 \ud835\udc53\ud835\udf12 (\ud835\udc38) \ud835\udc53\ud835\udf12 (?\u0303?) \ud835\udc53\ud835\udf13 (\ud835\udf14) \ud835\udc53\ud835\udf13 (?\u0303?) ] , (2)\n\ud835\udc36el = 1\n2\ud835\udc54\ud835\udf12\n\u222b \ud835\udc513\ud835\udc5d\n(2\ud835\udf0b)32?\u0303?\n\u222b \ud835\udc513\ud835\udc58\n(2\ud835\udf0b)32\ud835\udf14\n\u222b \ud835\udc513 ?\u0303?\n(2\ud835\udf0b)32?\u0303? (2\ud835\udf0b)4\ud835\udeff (4) (\ud835\udc5d + \ud835\udc5d \u2212 ?\u0303? \u2212 \ud835\udc58) |M|2\ud835\udf12\ud835\udf13\u2194\ud835\udf12\ud835\udf13 \u00d7 [ \ud835\udc53\ud835\udf12 (\ud835\udc38) \ud835\udc53\ud835\udf13 (\ud835\udf14) \ud835\udc53\ud835\udf12 (?\u0303?) \ud835\udc53\ud835\udf13 (?\u0303?) \u2212 \ud835\udc53\ud835\udf12 (?\u0303?) \ud835\udc53\ud835\udf13 (?\u0303?) \ud835\udc53\ud835\udf12 (\ud835\udc38) \ud835\udc53\ud835\udf13 (\ud835\udf14) ] (3)\ndescribe the effect of two-body annihilations and elastic scattering processes with non-DM particles \ud835\udf13, respectively. Here \ud835\udc3b = \u00a4\ud835\udc4e/\ud835\udc4e is the Hubble parameter, with \ud835\udc4e the Friedman-Robertson-Walker scale factor, |M|2 is the squared amplitude summed over both initial and final state internal or spin degrees of freedom, \ud835\udc54\ud835\udc56 , and for ease of notation we suppressed the implicit sum over all contributing particle species \ud835\udf13. We also introduced \ud835\udc53\ud835\udc56 \u2261 1\u2212\ud835\udf00\ud835\udc56 \ud835\udc53\ud835\udc56 to capture the effect of final-state Pauli blocking for fermions (\ud835\udf00\ud835\udf12,\ud835\udf13 = +1) and Bose enhancement for Bosons (\ud835\udf00\ud835\udf12,\ud835\udf13 = \u22121). For standard freeze-out calculations, it is assumed that all relevant particle species \ud835\udf13 are in full thermal equilibrium with the standard model, such that \ud835\udc53\ud835\udf13 (\ud835\udf14) = 1/[exp(\ud835\udf14/\ud835\udc47) \u00b1 1] at a photon temperature \ud835\udc47 . Assuming furthermore that the DM particles are non-relativistic and stay in kinetic equilibrium with \ud835\udf13 during the entire freeze-out process, Eq. (1) can then be integrated [16] to an evolution equation for the DM number density \ud835\udc5b\ud835\udf12 that takes the familiar form\n\u00a4\ud835\udc5b\ud835\udf12 + 3\ud835\udc3b\ud835\udc5b\ud835\udf12 = \u2212 \u3008\ud835\udf0e\ud835\udc63\u3009 ( \ud835\udc5b2\ud835\udf12 \u2212 \ud835\udc5b2\ud835\udf12,MB ) . (4)\n1http://www.darksusy.org\n2These proceedings do however not replace Ref. [3] as the correct way of referring to the most recent version of DarkSUSY 6. If you use DarkSUSY, please also consider citing Ref. [2] for code prior to version 4.2 that is still contained in the current release. Finally, most routines in DarkSUSY have been implemented in the context of original research work. Therefore, when using those routines, please also give proper credit to the relevant articles indicated in section 5 of the manual (as well as in the respective sections in these proceedings).\nP o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8\nIf the total entropy \ud835\udc60 is conserved, this can equivalently be stated as an equation for the DM abundance \ud835\udc4c \u2261 \ud835\udc5b\ud835\udf12/\ud835\udc60:\n\ud835\udc51\ud835\udc4c \ud835\udc51\ud835\udc65 = \u3008\ud835\udf0e\ud835\udc63\u3009 \ud835\udc65\ud835\udc60?\u0303?\n( \ud835\udc5b2\ud835\udf12 \u2212 \ud835\udc5b2\ud835\udf12,MB ) . (5)\nIn the above equations, \ud835\udc5bMB\ud835\udf12 \u2261 \ud835\udc54\ud835\udf12 (2\ud835\udf0b)\u22123 \u222b \ud835\udc513\ud835\udc5d \ud835\udc53MB\ud835\udf12 = \ud835\udc54\ud835\udf12\ud835\udc5a 2 \ud835\udf12\ud835\udc47\ud835\udc3e2(\ud835\udc65)/(2\ud835\udf0b2) denotes the number density of DM particles following a Maxwell-Boltzmann distribution of temperature \ud835\udc47 , with \ud835\udc65 \u2261 \ud835\udc5a\ud835\udf12/\ud835\udc47 and \ud835\udc3e2 being a modified Bessel function of the second kind, and\n\u3008\ud835\udf0e\ud835\udc63\u3009 = \u222b \u221e\n1 \ud835\udc51\ud835\udc60\n4\ud835\udc65 \u221a \ud835\udc60(\ud835\udc60 \u2212 1) \ud835\udc3e1 ( 2 \u221a \ud835\udc60\ud835\udc65 ) \ud835\udc3e2 2(\ud835\udc65) \ud835\udf0e\ud835\udf12\ud835\udf12\u2192\ud835\udf13\ud835\udf13 \u2261 \u222b \u221e 1 \ud835\udc51\ud835\udc60 \ud835\udc65 \u221a \ud835\udc60 \u2212 1\ud835\udc3e1 ( 2 \u221a \ud835\udc60\ud835\udc65 ) 2\ud835\udc5a2\ud835\udf12\ud835\udc3e22(\ud835\udc65) \ud835\udc4aeff (\ud835\udc60) (6)\nis the thermally averaged annihilation cross section w.r.t. such a distribution. Further, ?\u0303? \u2261 \ud835\udc3b/[1 + (1/3)\ud835\udc51 (log \ud835\udc54\u2217)/\ud835\udc51 (log\ud835\udc47)], where the number of entropy degrees of freedom \ud835\udc54\u2217 is defined through the relation \ud835\udc60 \u2261 (2\ud835\udf0b2/45)\ud835\udc54\u2217\ud835\udc473. \ud835\udc4aeff is referred to as the (effective) invariant rate. Eqs. (4\u20136) are widely used in relic density calculations, not the least because they take the same form even when including co-annihilations [17]. These equations have been implemented to a high numerical precision since the early versions of DarkSUSY, and we refer to Refs. [2, 3] for a detailed description. Notable additions since DarkSUSY 6.1 include updated degrees-of-freedom tables, based on lattice simulations as well as perturbative computations up to the 3-loop level [18, 19], and a major revision of how \ud835\udf0e\ud835\udf12\ud835\udf12\u2192\ud835\udf13\ud835\udf13 in Eq. (6) is tabulated while solving Eq. (5). In detail this method uses an adaptive integrator to on the fly tabulate \ud835\udc4aeff where needed; if nearby points have already been tabulated, an interpolation is used instead of the numerically expensive calculation of \ud835\udc4aeff . On top of this, before this tabulation starts, possible resonances in \ud835\udc4aeff are inspected to see if they can be accurately fit with a Breit-Wigner form. If this is the case, the analytic Breit-Wigner form will be used instead of the actual expensive calculation of\ud835\udc4aeff . Compared to earlier tabulation methods in DarkSUSY, this new method is typically both faster and more accurate. A further addition in DarkSUSY 6.3 is that the Hubble expansion rate now is a replaceable function, dsrdHubble, allowing e.g. for relic density calculations in cosmologies with non-standard expansion histories. In the following we describe in some more detail recent code updates that allow relic density calculations also in situations where one or more of the assumptions leading to Eqs. (4\u20136) are not satisfied. This has highly relevant applications for example when the DM particles are part of a secluded dark sector (section 2.1), the relic density is dominantly set by annihilation through a narrow resonance (section 2.2) or for freeze-in production of feably interacting DM particles (section 2.3)."
        },
        {
            "heading": "2.1 Dark sector freeze-out",
            "text": "Secluded dark sectors [20\u201322] constitute a prominent class of models where the DM relic density is not as usual set by freeze-out from the SM heat bath. The underlying idea of such scenarios is that DM might be interacting very weakly with the SM, but still sufficiently strongly to equilibrize with itself or other new particles. In general one therefore has to distinguish the photon temperature, \ud835\udc47 , from that of the DM (and other new \u2018dark\u2019) particles, \ud835\udc47\ud835\udf12. For example, the visible and the dark sector could have been in thermal contact at high temperatures, with \ud835\udc47\ud835\udf12 = \ud835\udc47 , and\nP o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8\nonly later decoupled at some temperature \ud835\udc47dec. In that case, since entropy is typically conserved separately in the two sectors, the temperature ratio will evolve as\n\ud835\udf09 (\ud835\udc47) \u2261 \ud835\udc47\ud835\udf12 (\ud835\udc47) \ud835\udc47 =\n[ \ud835\udc54SM\u2217 (\ud835\udc47)/\ud835\udc54SM\u2217 (\ud835\udc47dec) ] 1 3[\n\ud835\udc54DS\u2217 (\ud835\udc47)/\ud835\udc54DS\u2217 (\ud835\udc47dec) ] 1 3 , (7)\nwhere \ud835\udc54SM,DS\u2217 refers to the effective number of relativistic entropy d.o.f. in the visible and dark sector, respectively.3 In order to accurately describe the freeze-out of DM particles from such a secluded dark sector, the standard Boltzmann equation (4) must be adapted at three places:\n1. the equilibrium density \ud835\udc5b\ud835\udf12,MB must be evaluated at \ud835\udc47\ud835\udf12 rather than the SM temperature \ud835\udc47 ;\n2. the same replacement, \ud835\udc65 \u2192 \ud835\udc65/\ud835\udf09, must also be made in the expression for \u3008\ud835\udf0e\ud835\udc63\u3009 in Eq. (6);\n3. the additional energy content of the dark sector must be reflected in an increased Hubble rate. During radiation domination, in particular, this implies \ud835\udc3b2 = (8\ud835\udf0b3/90)\ud835\udc54tot\ud835\udc40\u22122Pl \ud835\udc47\n4, with \ud835\udc54tot = \ud835\udc54SM + \ud835\udf094\ud835\udc54DS and \ud835\udc54SM,DS denoting the number of relativistic energy d.o.f. in the visible and dark sector, respectively.\nThe option to perform such relic density calculations has been implemented in DarkSUSY in the context of a more general endeavour [23] to update precision calculations of the \u2018thermal\u2019 annihilation cross section, i.e. the size of \u3008\ud835\udf0e\ud835\udc63\u3009 that is needed \u2013 close to freeze-out \u2013 in order to match the observed DM relic abundance, and how the presence of dark sectors affects the numerical value of this quantity. Concretely, two new functions dsrddofDS and dsrdxi have been introduced and are now consistently used in all freeze-out calculations, returning \ud835\udc54DS(\ud835\udc47\ud835\udf12) and \ud835\udf09 (\ud835\udc47), respectively. If any of these functions is declared in a particle module, or when linking a main program, this automatically replaces their trivial implementation in the main library that corresponds to standard freeze-out (i.e. \ud835\udc54DS \u2261 0, \ud835\udf09 \u2261 1). In order to facilitate the implementation of such a model-specific version of dsrddofDS, DarkSUSY furthermore provides an auxiliary function dsrdsingledof that returns the temperature-dependent effective number of relativistic degrees of freedom for a single massive particle (resulting in exactly 1 and 7/8 for bosons and fermions, respectively, in the massless limit). An example of dsrdxi implementing Eq. (7) can be found in the vdSIDM module."
        },
        {
            "heading": "2.2 Freeze-out beyond kinetic equilibrium",
            "text": "The standard treatment of the freeze-out process consists in numerically solving Eq. (4) \u2013 which rests, just like the extensions described in section 2.1, on the assumption that DM remains in kinetic equilibrium during freeze-out.4 There is however an important subset of DM models that feature a strongly velocity-dependent annihilation cross section and where this assumption is not met. For example, using the conventional Eq. (4) may result in a relic density that does not even\n3It is worth noting that this relation tacitly assumes that at least one of the additional particles \ud835\udf13 that the DM particles interact with has vanishing chemical potential. If all other dark sector particles are massive, too, this is in general no longer the case. See Ref. [23] for how to treat such situations.\n4 Technically, what enters in the derivation [16] of Eqs. (4\u20136) is that the DM phase-space distribution is of the form \ud835\udc53\ud835\udf12 (\ud835\udc5d, \ud835\udc47) = \ud835\udc34(\ud835\udc47) exp(\u2212\ud835\udc38/\ud835\udc47) both before and during the entire decoupling process.\nP o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8\nhave the correct order of magnitude in models with narrow resonances (like in particular for the standard model Higgs boson), Sommerfeld-enhanced annihilation, or for DM particles degenerate in mass with the annihilation products [24\u201328]. In such situations, a convenient alternative to the numerically challenging integration of the full Boltzmann equation at the phase-space level, Eq. (1), is to consider a set of Boltzmann equations that couple the evolution of the DM number density and velocity dispersion, respectively (as first introduced in Ref. [24], and later refined in Ref. [26]).\nIntroducing \ud835\udc47\ud835\udf12 \u2261 \ud835\udc54\ud835\udf12/(3\ud835\udc5b\ud835\udf12) \u222b \ud835\udc513\ud835\udc5d (2\ud835\udf0b)\u22123(\ud835\udc5d2/\ud835\udc38) \ud835\udc53\ud835\udf12 and \ud835\udc66(\ud835\udc65) \u2261 \ud835\udc5a\ud835\udf12\ud835\udc47\ud835\udf12\ud835\udc60\u22122/3, in analogy to \ud835\udc5b\ud835\udf12\nand \ud835\udc4c = \ud835\udc5b\ud835\udf12/\ud835\udc60, these equations generalize Eq. (5) to\n\ud835\udc65\n\ud835\udc4c\n\ud835\udc51\ud835\udc4c \ud835\udc51\ud835\udc65 = \ud835\udc60\ud835\udc4c\n?\u0303?\n[ \ud835\udc4c2eq\n\ud835\udc4c2 \u3008\ud835\udf0e\ud835\udc63\u3009\ud835\udc47 \u2212 \u3008\ud835\udf0e\ud835\udc63\u3009\ud835\udc47\ud835\udf12\n] , (8)\n\ud835\udc65\n\ud835\udc66\n\ud835\udc51\ud835\udc66 \ud835\udc51\ud835\udc65 = \ud835\udefe\ud835\udc64\n?\u0303?\n[ \ud835\udc66eq\n\ud835\udc66 \u2212 1 ] + \ud835\udc60\ud835\udc4c ?\u0303? [ \u3008\ud835\udf0e\ud835\udc63\u3009\ud835\udc47\ud835\udf12 \u2212 \u3008\ud835\udf0e\ud835\udc63\u30092,\ud835\udc47\ud835\udf12 ] + \ud835\udc60\ud835\udc4c ?\u0303? \ud835\udc4c2eq \ud835\udc4c2 [ \ud835\udc66eq \ud835\udc66 \u3008\ud835\udf0e\ud835\udc63\u30092,\ud835\udc47 \u2212\u3008\ud835\udf0e\ud835\udc63\u3009\ud835\udc47 ] + 2(1 \u2212 \ud835\udc64)\ud835\udc3b ?\u0303? .\n(9)\nHere, a subscript \ud835\udc47 or \ud835\udc47\ud835\udf12 indicates the temperature at which to take thermal averages, and \u3008\ud835\udf0e\ud835\udc63\u30092 is a variant of Eq. (6) that is explicitly stated in Ref. [26]; the parameter \ud835\udc64(\ud835\udc47\ud835\udf12) \u2261 1\u2212 \u3008\ud835\udc5d4/\ud835\udc383\u3009\ud835\udc47\ud835\udf12/(6\ud835\udc47\ud835\udf12) indicates deviations from DM being highly non-relativistic (where \ud835\udc64 = 1). The momentum transfer rate \ud835\udefe(\ud835\udc47), finally, is given by\n\ud835\udefe = 1\n3\ud835\udc54\ud835\udf12\ud835\udc5a\ud835\udf12\ud835\udc47 \u222b d3\ud835\udc58 (2\ud835\udf0b)3 \ud835\udc54\u00b1(\ud835\udf14) [ 1\u2213\ud835\udc54\u00b1(\ud835\udf14) ] 0\u222b \u22124\ud835\udc582cm d\ud835\udc61 (\u2212\ud835\udc61) d\ud835\udf0e d\ud835\udc61 \ud835\udc63 , (10)\nwhere \ud835\udc582cm \u2261 \ud835\udc5a2\ud835\udf12\ud835\udc582/(\ud835\udc5a2\ud835\udf12 + 2\ud835\udf14\ud835\udc5a\ud835\udf12 + \ud835\udc5a2\ud835\udc53 ) and |M| 2 in (d\ud835\udf0e/d\ud835\udc61)\ud835\udc63 \u2261 |M|2 \ud835\udf12 \ud835\udc53 \u2194\ud835\udf12 \ud835\udc53 /(64\ud835\udf0b\ud835\udc58\ud835\udf14\ud835\udc5a 2 \ud835\udf12) is evaluated at \ud835\udc60 ' \ud835\udc5a2\ud835\udf12 + 2\ud835\udf14\ud835\udc5a\ud835\udf12 + \ud835\udc5a2\ud835\udc53 . By construction, these equations accurately describe the evolution of \ud835\udc4c (\ud835\udc65) as long as efficient DM self-interactions force \ud835\udc53\ud835\udf12 (\ud835\udc61, \ud835\udc5d) into a thermal shape with \ud835\udc47\ud835\udf12 \u2260 \ud835\udc47 (or, rather, as long as the resulting thermal averages are not significantly affected by deviations from such a thermal shape); even more generally, in fact, relic density calculations based on these equations often provide a good estimate of the relic density that results from directly integrating Eq. (1). For a more detailed discussion see Ref. [28].\nThe numerical solution of the coupled system of Eqs. (8,9) has been implemented in DarkSUSY in the context of Ref. [28]. Concretely, a routine dsrdomega_cBE has been added that returns the final DM relic density based on these coupled Boltzmann equations \u2013 just as the conventional dsrdomega returns the relic density based on a solution of Eq. (4). The usage of both routines is illustrated in detail in a number of example programs located at examples/aux/oh2_*.f. A call to dsrdomega_cBE also initializes the function dsrdthav_select which for convenience returns the various thermal averages appearing in Eqs. (8,9), including the momentum exchange rate \ud835\udefe. In order to enable a main program to use dsrdomega_cBE, finally, a particle module must provide the typical interface functions required by both relic density and kinetic decoupling routines, i.e. dsrdparticles, dsanwx, dskdparticles and dskdm2 (see the manual or Ref. [3] for more details).\nP o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8"
        },
        {
            "heading": "2.3 Freeze-in",
            "text": "Another important exception to the validity of Eqs. (4) are DM particles with interactions so weak that they never thermalized with the heat bath. Such feably interacting massive particles (FIMPs) could still obtain the correct relic density through continuous production from the thermal bath of standard model particles, a mechanism known as freeze-in production of DM [29, 30]. Starting from Eq. (1), the main technical difference to the freeze-out case is that a much larger range of temperatures are relevant for determining the final relic abundance, implying in particular that the DM particles can no longer be assumed to be non-relativistic and that the effect of quantum statistics ( \ud835\udc53\ud835\udc56 \u2260 1), but also other thermal effects, potentially become relevant. Still, it is possible to capture all these effects with a description that closely resembles that of the freeze-out case [31]. As long as the FIMP abundance stays far below the equilibrium abundance, in particular, it increases as\n\ud835\udc51\ud835\udc4c\ud835\udf12 \ud835\udc51\ud835\udc65 = \ud835\udc5b2 \ud835\udf12,MB \ud835\udc65\ud835\udc60?\u0303? \u3008\ud835\udf0e\ud835\udc63\u3009 . (11)\nWhile this is formally the same as Eq. (5), without the \u2018backreaction\u2019 term that would describe the annihilation of FIMPs into standard model particles, there are some important differences:\n1. The term \ud835\udc5bMB\ud835\udf12 in Eq. (11) refers to the number density of a would-be Maxwell-Boltzmann distribution of DM particles. Unlike for WIMPs, cf. footnote 4, the above formulation does not assume in any way that the actual DM distribution is related to a thermal one.\n2. Just as in the case of WIMPs, Eq. (11) is formulated in terms of the DM annihilation cross section \ud835\udf0e. The thermal effects appearing due to the presence of relativistic DM particles, however, require a generalization of the thermal average given in Eq. (6).\nConveniently, the quantity \u3008\ud835\udf0e\ud835\udc63\u3009 can still be expressed in terms of the same model-independent thermal kernel as in Eq. (6). The model-dependent invariant rate \ud835\udc4aeff , on the other hand, now is also temperature-dependent and in general given by\n\ud835\udc4aeff (\ud835\udc60, \ud835\udc47) \u2261 16\ud835\udc5a2\ud835\udf12 \ud835\udc65\ud835\udc60 \u221a \ud835\udc60 \u2212 1\n\ud835\udc3e1\n( 2 \u221a \ud835\udc60\ud835\udc65 ) \u222b \u221e 1 \ud835\udc51\ud835\udefe \u221a\ufe03 \ud835\udefe2 \u2212 1\ud835\udc52\u22122 \u221a \ud835\udc60\ud835\udc65\ud835\udefe \u2211\ufe01 \ud835\udf131\ud835\udf132 \ud835\udf0e\ud835\udf12\ud835\udf12\u2192\ud835\udf131\ud835\udf132 (\ud835\udc60, \ud835\udefe) . (12)\nHere the integration is over Lorentz boosts \ud835\udefe from the center-of-mass to the cosmic rest frame, and the in-medium cross section can be written as\n\ud835\udf0e\ud835\udf12\ud835\udf12\u2192\ud835\udf131\ud835\udf132 (\ud835\udc60, \ud835\udefe) = \ud835\udc41\u22121 \ud835\udf13 8\ud835\udf0b\ud835\udc60 |kCM |\u221a\ufe03 \ud835\udc60 \u2212 4\ud835\udc5a2\ud835\udf12 \u222b 1 \u22121 \ud835\udc51 cos \ud835\udf03 2 M 2 \ud835\udf12\ud835\udf12\u2192\ud835\udf131\ud835\udf132 (\ud835\udc60, cos \ud835\udf03)\ud835\udc3a\ud835\udf131\ud835\udf132 (\ud835\udefe, \ud835\udc60, cos \ud835\udf03) , (13)\nwith \ud835\udc41\ud835\udf13 = 2 for identical SM particles (\ud835\udf131 = \ud835\udf132) and \ud835\udc41\ud835\udf13 = 1 otherwise. The quantity \ud835\udc3a\ud835\udf131\ud835\udf132 (\ud835\udefe, \ud835\udc60, cos \ud835\udf03) is explicitly stated in Ref. [31] and encodes the effect of quantum statistics in the final state, leading to an enhancement (\ud835\udc3a\ud835\udf131\ud835\udf132 > 1) or decrease (\ud835\udc3a\ud835\udf131\ud835\udf132 < 1) of the corresponding cross section in vacuum; for \ud835\udc3a\ud835\udf131\ud835\udf132 = 1, in particular, the definition of \ud835\udc4aeff (\ud835\udc60, \ud835\udc47) in Eq. (12) becomes identical to that of the conventional invariant rate given in Eq. (6). It is worth noting that a \ud835\udc47-dependent \ud835\udc4aeff also allows to include temperature-dependent effects other than\nP o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8\nthose due to quantum statistics, such as thermal masses and phase transitions, which can affect both interaction rates and the spectrum of relevant SM states. The capability of DarkSUSY to perform freeze-in calculations has been added in the context of Ref. [31], which discusses in detail freeze-in production of Scalar Singlet DM [32]. In particular, dsfi2to2oh2 numerically solves Eq. (11) and returns the resulting DM relic density, \u03a9\ud835\udf12\u210e2, as a function of the reheating temperature (defined as the starting point of the integration). During the numerical integration, special care is taken to model the effects of QCD and EW phase transitions to sufficient accuracy. The thermally averaged cross section is provided by the function dsfithav (rather than dsrdthav as in the WIMP case). There are two interface functions that a particle physics module must provide for the freeze-in routines in the DarkSUSY core library to work: a subroutine dsrdparticles, providing kinematic information about (potentially \ud835\udc47-dependent) thresholds and resonances, and a function dsanwx_finiteT returning the temperature-dependent effective invariant rate as defined in Eq. (12). Two example programs, examples/aux/FreezeIn_ScalarSinglet andexamples/aux/FreezeIn_generic_fimp, illustrate the usage of the freeze-in routines for the Scalar Singlet model and a \u2018generic\u2019 FIMP model, respectively (where the latter implements a simplified contact-like interaction with |M|2 \u2261 \ud835\udc50 ( \ud835\udc60/\u039b2\n)\ud835\udc5b; for further details we refer to the manual and Ref. [31]). As of version 6.3, DarkSUSY also provides temperature-dependent SM masses (dsmass_finiteT) and Higgs vev (dshvev_finiteT), as well as an improved treatment of the partial Higgs decay width including in particular hadronic final states (dssmgammahpartial.f) \u2013 all of which must be modelled accurately e.g. for freeze-in calculations involving Higgs portal models [31]."
        },
        {
            "heading": "3. Direct detection: cosmic-ray upscattering of dark matter",
            "text": "Conventional direct detection experiments were long thought to be insensitive to sub-GeV DM particles [33], because the typical kinetic energy of Galactic DM is too small to trigger nuclear recoil energies above the necessary threshold. For large elastic scattering cross sections with nuclei, however, there inevitably exists an irreducible flux of relativistic DM particles that are up-scattered by high-energy cosmic rays [34, 35]. This sub-dominant component of the expected DM flux at Earth allows to constrain both very light DM particles and DM particles in the GeV range that would otherwise be stopped in the overburden before reaching the detector [36\u201341].\nThe local interstellar flux of such cosmic-ray upscattered DM (CRDM) particles is given by\n\ud835\udc51\u03a6\ud835\udf12 \ud835\udc51\ud835\udc47\ud835\udf12\n= \ud835\udc37eff \ud835\udf0clocal\ud835\udf12\n\ud835\udc5a\ud835\udf12 \u2211\ufe01 \ud835\udc41 \u222b \u221e \ud835\udc47 min \ud835\udc41 \ud835\udc51\ud835\udc47\ud835\udc41 \ud835\udc51\ud835\udf0e\ud835\udf12\ud835\udc41 \ud835\udc51\ud835\udc47\ud835\udf12 \ud835\udc51\u03a6LIS \ud835\udc41 \ud835\udc51\ud835\udc47\ud835\udc41 , (14)\nwhere \ud835\udc51\ud835\udf0e\ud835\udf12\ud835\udc41 /\ud835\udc51\ud835\udc47\ud835\udf12 is the differential elastic scattering cross section to accelerate DM to a kinetic recoil energy of \ud835\udc47\ud835\udf12, for an incident cosmic-ray (CR) nucleus \ud835\udc41 with energy \ud835\udc47\ud835\udc41 , and \ud835\udc51\u03a6\ud835\udc41 LIS/\ud835\udc51\ud835\udc47\ud835\udc41 is the local interstellar CR flux; \ud835\udf0c\ud835\udf12 is the local DM density and \ud835\udc37eff \u223c 10 kpc is an effective distance out to which the above expression for the production of the CRDM component holds (for further details, see Refs. [40, 41]). The scattering rate of relativistic DM particles in underground detectors is formally given by the same expression as for the standard non-relativistic contribution, i.e.\n\ud835\udc51\u0393\ud835\udc41 \ud835\udc51\ud835\udc47\ud835\udc41 = \u222b \u221e \ud835\udc47 min\ud835\udf12 \ud835\udc51\ud835\udc47\ud835\udf12 \ud835\udc51\ud835\udf0e\ud835\udf12\ud835\udc41 \ud835\udc51\ud835\udc47\ud835\udc41 \ud835\udc51\u03a6\ud835\udf12 \ud835\udc51\ud835\udc47\ud835\udf12 , (15)\nP o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8\nwith \ud835\udc47min\ud835\udf12 being the minimal DM energy needed in order to induce a nuclear recoil \ud835\udc47\ud835\udc41 . Here, the nuclear scattering cross section is in general a function of both the center-of-mass energy and the (spatial) momentum transfer, \ud835\udc442 = 2\ud835\udc5a\ud835\udc41\ud835\udc47\ud835\udc41 . If the dominant dependence on \ud835\udc442 factorizes \u2013 like in particular for form factors \u2013 the above rate has an identical \ud835\udc442-dependence for relativistic and non-relativistic DM. It is then straight-forward to re-interpret published conventional direct detection results into limits on the CRDM component (the same also applies to neutrino detectors sensitive to nuclear recoils, after converting the nuclear recoil to the detected apparent electron energy \ud835\udc47\ud835\udc52) [34]. For large scattering cross sections the complication arises that the CRDM flux in Eq. (14) is not necessarily the one that is relevant for underground laboratories, because the original CRDM flux is attenuated by scattering with nuclei in the overburden of the experimental location. In other words, the kinetic energy \ud835\udc47 \ud835\udc67\ud835\udf12 of a DM particle at depth \ud835\udc67 of the detector may be significantly less than its initial energy \ud835\udc47\ud835\udf12 at the top of the atmosphere (\ud835\udc67 = 0). The expression for the rate in Eq. (15) then continues to apply, after a change of variables from \ud835\udc47 \ud835\udc67\ud835\udf12 to \ud835\udc47\ud835\udf12 (\ud835\udc47 \ud835\udc67\ud835\udf12), but the scattering cross section \ud835\udc51\ud835\udf0e\ud835\udf12\ud835\udc41 /\ud835\udc51\ud835\udc47\ud835\udc41 must still be evaluated at the actual DM energy \ud835\udc47 \ud835\udc67\ud835\udf12 at the detector location. In order to find the average kinetic energy at the detector location, one needs to solve the energy loss equation\n\ud835\udc51\ud835\udc47 \ud835\udc67\ud835\udf12\n\ud835\udc51\ud835\udc67 = \u2212 \u2211\ufe01 \ud835\udc41 \ud835\udc5b\ud835\udc41 \u222b \ud835\udc47 max \ud835\udc41 0 \ud835\udc51\ud835\udc47\ud835\udc41 \ud835\udc51\ud835\udf0e\ud835\udf12\ud835\udc41 \ud835\udc51\ud835\udc47\ud835\udc41 \ud835\udc47\ud835\udc41 , (16)\nwhere the sum runs over the most dominant nuclei in the overburden, i.e. no longer over the CR species as in Eq. (14). When expressed in terms of an integration over \ud835\udc442 instead of \ud835\udc47\ud835\udc41 , the above expression can also be used to include the attenuation due to inelastic scattering, which dominates at high momentum transfers; to a good approximation, this can be modelled by adding a model-independent function \ud835\udc3c2(\ud835\udc442) to the usual nuclear form factors [41].\nThe necessary routines to compute DM limits resulting from the irreducible CRDM flux have been implemented and released with version 6.2 of DarkSUSY in the context of Ref. [34], with significant additions (full \ud835\udc442 and \ud835\udc60-dependent elastic scattering cross sections, inelastic scattering, increased number of nuclei contributing to scattering processes) added subsequently [41, 42]. The interstellar CRDM flux, Eq. (14), is returned by the function dsddDMCRflux, based on the dominant species in the CR flux \ud835\udc51\u03a6LIS\n\ud835\udc41 /\ud835\udc51\ud835\udc47\ud835\udc41 [43, 44] (provided by dscrISRflux). The full relativistic scatter-\ning cross sections \ud835\udc51\ud835\udf0e\ud835\udf12\ud835\udc41 /\ud835\udc51\ud835\udc47\ud835\udc41 and \ud835\udc51\ud835\udf0e\ud835\udf12\ud835\udc41 /\ud835\udc51\ud835\udc47\ud835\udf12 that appear in the above expressions are implemented as the conventional cross sections in the highly non-relativistic limit \u2013 including state-of-the-art nuclear form factors \u2013 and then multiplied by a relativistic correction factor dsddsigmarel to take into account the model-dependent dependence on \ud835\udc60 and \ud835\udc442; in order to use the CDMR routines for arbitrary scattering cross sections, one thus only has to replace the function dsddsigmarel. While there is a separate function to calculate the rate in Eq. (15), namely dsddDMCRdgammadt directly, it is in practice most convenient to call the \u2018driver\u2019 routine dsddDMCRcountrate which only takes the name of a given \u2013 direct detection or neutrino \u2013 experiment as input and directly returns the experimental count rate from the CRDM component, divided by the rate corresponding to the published limit of that experiment; this ensures that all experiment-specific settings are initialized correctly (for example the depth of the detector location, and the composition of the material in the overburden). The usage of dsddDMCRcountrate is demonstrated in the example program\nP o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8\nexamples/aux/DDCR_limits.f (while examples/aux/DDCR_flux.f provides an illustration of how to compute and tabulate the interstellar CRDM flux)."
        },
        {
            "heading": "4. Indirect detection: particle yields",
            "text": "The particle yields from DM annihilation or decay in the halo and in the Sun/Earth have traditionally, in DarkSUSY, been generated with Pythia 6 [45]. However, to allow for more flexibility and improved yield calculations, the possibility to use tables from Pythia 8 [46] runs is being added in DarkSUSY 6.3, based on Pythia 8.306 with default settings. For annihilations in the Sun/Earth, WimpSim [47] is used to handle hadron interactions and neutrino oscillations, and has correspondingly been updated to be based on Pythia 8 as an event generator as well. For the Pythia 8 simulations we include for a range of (annihilating) DM masses between 5 GeV and 20 TeV. We use a total of 30 different masses and simulate annihilations into 15 different final states (all quark-antiquark final states, glue-glue, \ud835\udc4a+\ud835\udc4a\u2212, \ud835\udc4d0\ud835\udc4d0, \ud835\udf0f+\ud835\udf0f\u2212, prompt neutrino final states, \u210e\u210e and \ud835\udc4d0\u210e, with \u210e being the standard model Higgs boson). For each mass and annihilation channel, 107 annihilation events have been simulated. For neutrino oscillations, we use the NuFit 5.1 normal ordering best fit values [48, 49]. For interactions at a detector on Earth, simulations were performed for IceCube during the austral winter, but the results are to within a few percent applicable also for other detectors. The final yields are tabulated in both energy and angle, and then interpolated via the routines in DarkSUSY. Compared to the Pythia 6 runs, the Pythia 8 runs currently have lower statistics and hence the Pythia 6 runs will initially still be kept as the default. Eventually, with higher statistics runs becoming available, the default will change to yield tables based on Pythia 8. Independently of the default settings, the user can easily change which yield tables to use by calling dsseyield_set. Similarly, for indirect DM detection rates related to annihilations or decays in the halo, we also rely on event generators to calculate the yield of positrons, antiprotons, gamma rays, neutrinos and anti-deuterons for a range of different DM masses and annihilation/decay channels. The traditional high-statistics tables based on Pythia 6 runs remain the default here, but we are in the process of adding Pythia 8 tables also for these yields, where we use the same range of masses and set of annihilation channels as described above for annihilation in the Sun/Earth (except that we here also include annihilation into \ud835\udf07+\ud835\udf07\u2212). On top of this, DarkSUSY now allows to use alternative yield calculations in its indirect detection routines; currently, this includes yield tables provided by Refs. [50\u201353]. The main difference between the various implemented yield tables concerns statistics, masses and channels that are simulated, but also assumptions regarding the underlying physics. Concretely, the (current) default tables based on Pythia 6 runs with very high statistics are particularly well tested and also include anti-deuteron yields; corresponding tables based on Pythia 8 runs, with default settings, will soon be available \u2013 but initially ship with somewhat reduced statistics compared to the present DarkSUSY implementation, and include all final states except anti-deuterons in the initial release. Externally provided yield tables are best described in the respective references. Roughly speaking, the tables by Bauer et al. [52] focus specifically on accurately modelling the yield in the multi-TeV regime and beyond, where Pythia ceases to be reliable, while those by Plehn et al. [51] focus on the sub-GeV regime and the impact of hadronic resonances that are not (fully) included in Pythia,\nP o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8\neither. The yield tables by Jueid et al. [53] (as well as an earlier version by Amoroso et al. [50]), on the other hand, are also based on Pythia 8 and cover a similar DM mass range as in the DarkSUSY default implementation \u2013 but are based on a number of different treatments of the underlying QCD uncertainties related to the fragmentation of light quarks; the present DarkSUSY implementation returns their central prediction for the spectra. Accessing the yield routines is straight-forward, as demonstrated in the example program examples/aux/wimpyields.f. In particular, a simple initial call to dsanyield_set allows to switch between the implemented yield tables, as well as to choose between various options (e.g. SMlike or \ud835\udc35\u2212 \ud835\udc3f-like models for the tables from Plehn et al. [51]). Such a call to dsanyield_set does not only affect the output of dsanyield_sim, as demonstrated in this program, but automatically adjusts the output of all routines returning indirect detection rates (e.g. gamma-ray or positron fluxes) as well."
        },
        {
            "heading": "5. Summary",
            "text": "DarkSUSY is a versatile numerical tool to compute potential DM observables that is widely used in the community. Here we have presented the most important updates since version 6.1 of the code, ranging from relic density computations beyond the standard thermal equilibrium assumption (section 2) to direct detection routines including the effect of cosmic-ray upscattering (section 3) and various versions of updated yield routines relevant for indirect detection (section 4). DarkSUSY continues to be in a state of active development, and the range of possible applications is expected to further increase in the near future. We thus recommend to regularly check www.darksusy.org for new releases, updated documentation, as well as new concrete example applications to get started. Using the code is simple and straightforward (see also Appendix A), but we happily encourage users to get in touch with the developers in case of problems \u2013 as well as for suggestions concerning further code additions or improvements."
        },
        {
            "heading": "Acknowledgments",
            "text": "We warmly thank Lars Bergstr\u00f6m, Paolo Gondolo and Piero Ullio for their invaluable help in bringing DarkSUSY 6 into its present shape. The development of DarkSUSY since version 6.1 has also greatly benefitted from direct code contributions by collaborators on various physics projects; in this context we are particularly grateful to Saniya Heeba, Felix Kahlhoefer, Helena Kolesova and Kristian Vangsnes. We further wish to thank all users who provided feedback that helped to improve the code and make it more system-independent."
        },
        {
            "heading": "A. Technical updates: installation and make system",
            "text": "The installation of DarkSUSY is in principle as straightforward as downloading the most recent version from www.darksusy.org/download.html, unpacking the darksusy-6.x.x.tgz file and running\n./configure\nmake\nP o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8\nin the newly created directory darksusy-6.x.x/. While typically not necessary, special options can as usual be specified in the configure step, for example to choose a specific compiler and compiler-specific performance flags (see, e.g., the script ./conf.gfortran for an example optimized for the use with gfortran). Assuming that several cores are available, furthermore, the make command can typically be made significantly faster by adding the -j flag (which, however, makes the output harder to follow).\nAs indicated by the terminal output, the make command first builds contributed code, i.e. external numerical packages that a subset of DarkSUSY\u2019s routines relies on,5 before proceeding to compile genuine DarkSUSY code (resulting in the main library, lib/libds_core.a, as well as a separate library for each of the shipped particle modules). The compilation of those external libraries is included for convenience, not the least to ensure a seamless interface with the rest of the code, but sometimes more demanding in terms of system requirements than that of the proper DarkSUSY libraries. The problem with this setup used to be that failing to compile contributed code would also stop the installation process for the rest of DarkSUSY. The updated make system takes care of this by just displaying a warning in such a situation and then, if possible with minimal damage, automatically removing any dependence of DarkSUSY on the respective contributed code package. If HEALPix fails to compile, e.g., the DarkSUSY main and module libraries will still be built without any problems, the only compromise being that a call to the integration routine dshealpixint will result in a corresponding warning message (for an example of HEALPIx-based line-of-sight integrations of the astrophysical \ud835\udc3d- or \ud835\udc37-factors, another newly added feature, see the short demonstration program examples/aux/DMhalo_los). Likewise, the only noticeable impact of failing to compile HiggsBounds or HiggsSignals is that a call to dshiggsbounds will not as usual compute the \ud835\udc5d-value based on Higgs observables, in the mssm module, but instead return a warning that support for these libraries is disabled.\nFor compilation problems beyond the cases that can be handled automatically, furthermore, a new simplified target is available. The sequence of calls\nmake distclean\n./configure\nmake darksusy_light\nrestores the pristine version of the code (i.e. the one after downloading and unpacking), and then installs a \u2018light\u2019 version of DarkSUSY that does not depend on any contributed code at all. While this will disable particle modules that heavily rely on contributed code, in particular the mssm module, most of the functionality of the core library as well as the majority of the particle modules will not be affected and build as usual.\nFinally it is worth mentioning that the result of the standard installation process, as described above, consists of static libraries located in lib/. Interfacing DarkSUSY with other codes, however, sometimes requires shared libraries instead. We therefore now also provide corresponding targets, e.g. make ds_mssm_shared, which are heavily used for example in GAMBIT [14, 15].\n5Presently, these include HEALPix [54], FeynHiggs [55, 56], HiggsBounds [57], HiggsSignals [58], ISAJET [59] and SuperIso [60].\nP o S ( C o m p T o o l s 2 0 2 1 ) 0 3 8"
        }
    ],
    "title": "DarkSUSY 6.3 \u2013 Freeze-in, out-of-equilibrium freeze-out, cosmic-ray upscattering and further new features",
    "year": 2022
}