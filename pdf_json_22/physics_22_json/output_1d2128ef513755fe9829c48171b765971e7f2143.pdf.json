{
    "abstractText": "In this paper, various Miller-compensated amplifiers are analyzed by using the two-port feedback analysis together with the root-locus diagram. The proposed analysis solves problems of Miller theorem/approximation that fail to predict a polesplitting and that require an impractical assumption that an initial lower frequency pole before connecting a Miller capacitor in a two-stage amplifier should be associated with the input of the amplifier. Since the proposed analysis sheds light on how the closed-loop poles originate from the open-loop poles in the s-plane, it allows the association of the closed-loop poles with the circuit components and thus provides a design insight for frequency compensation. The circuits analyzed are two-stage Miller-compensated amplifiers with and without a current buffer and a three-stage nested Miller-compensated amplifier.",
    "authors": [
        {
            "affiliations": [],
            "name": "Myungjun Kim"
        }
    ],
    "id": "SP:809faf1f973226927d8e9e9d41ba33b45b526205",
    "references": [
        {
            "authors": [
                "Wing-Hung Ki",
                "L. Der",
                "S. Lam"
            ],
            "title": "Re-examination of pole splitting of a generic single stage amplifier",
            "venue": "IEEE Transactions on Circuits and Systems I: Fundamental Theory and Applications, vol. 44, no. 1, pp. 70\u201374, 1997.",
            "year": 1997
        },
        {
            "authors": [
                "K.N. Leung",
                "P. Mok"
            ],
            "title": "Analysis of multistage amplifier-frequency compensation",
            "venue": "IEEE Transactions on Circuits and Systems I: Fundamental Theory and Applications, vol. 48, no. 9, pp. 1041\u20131056, 2001.",
            "year": 2001
        },
        {
            "authors": [
                "A. Grasso",
                "G. Palumbo",
                "S. Pennisi"
            ],
            "title": "Analytical comparison of frequency compensation techniques in three-stage amplifiers",
            "venue": "International Journal of Circuit Theory and Applications, vol. 36, pp. 53 \u2013 80, 01 2008.",
            "year": 2008
        },
        {
            "authors": [
                "A.S. Sedra",
                "K.C. Smith"
            ],
            "title": "Microelectronic Circuits, 5th ed",
            "year": 2004
        },
        {
            "authors": [
                "J. Huijsing",
                "R. Hogervorst",
                "K.-J. de Langen"
            ],
            "title": "Low-power lowvoltage vlsi operational amplifier cells",
            "venue": "IEEE Transactions on Circuits and Systems I: Fundamental Theory and Applications, vol. 42, no. 11, pp. 841\u2013852, 1995.",
            "year": 1995
        },
        {
            "authors": [
                "J. Roberge"
            ],
            "title": "Operational Amplifiers: Theory and Practice, ser. Massachusetts Institute of Technology",
            "venue": "Radiation Laboratory. Wiley,",
            "year": 1975
        },
        {
            "authors": [
                "K.N. Leung",
                "P. Mok",
                "W.-H. Ki",
                "J. Sin"
            ],
            "title": "Three-stage large capacitive load amplifier with damping-factor-control frequency compensation",
            "venue": "IEEE Journal of Solid-State Circuits, vol. 35, no. 2, pp. 221\u2013230, 2000.",
            "year": 2000
        },
        {
            "authors": [
                "B. Ahuja"
            ],
            "title": "An improved frequency compensation technique for cmos operational amplifiers",
            "venue": "IEEE Journal of Solid-State Circuits, vol. 18, no. 6, pp. 629\u2013633, 1983.",
            "year": 1983
        },
        {
            "authors": [
                "P.J. Hurst",
                "S.H. Lewis",
                "J.P. Keane",
                "F. Aram",
                "K.C. Dyer"
            ],
            "title": "Miller compensation using current buffers in fully differential cmos two-stage operational amplifiers",
            "venue": "IEEE Transactions on Circuits and Systems I: Regular Papers, vol. 51, no. 2, pp. 275\u2013285, 2004.",
            "year": 2004
        },
        {
            "authors": [
                "Feng-Tso Chien",
                "Yi-Jen Chan"
            ],
            "title": "Bandwidth enhancement of transimpedance amplifier by a capacitive-peaking design",
            "venue": "IEEE Journal of Solid-State Circuits, vol. 34, no. 8, pp. 1167\u20131170, 1999.",
            "year": 1999
        }
    ],
    "sections": [
        {
            "text": "ar X\niv :2\n20 7.\n10 98\n3v 1\n[ ee\nss .S\nY ]\n2 2\nJu l 2\n02 2\nMiller-compensated amplifiers with and without a current buffer and a three-stage nested Miller-compensated amplifier.\nIndex Terms\u2014Operational amplifier, Miller theorem, stability, frequency compensation, poles and zeros, two-port feedback analysis, root-locus diagram.\nI. INTRODUCTION\nM ILLER theorem converts a feedback circuit into anopen-loop circuit, allowing the association of the poles with the circuit nodes, which thus provides a design insight\nfor frequency compensation. However, Miller theorem re-\nquires an impractical condition that the voltage-gain transfer\nfunction a(s) = V2/V1 in a given two-port network to be independent of Y (s) which is an admittance connected across the ports [1]. For example, consider a two-stage amplifier\nin Fig. 1(a) where R1 and C1 (R2 and C2) model the impedance at the input (output) and Cc is a compensation capacitor. Since Y (s) = sCc and a(s) = \u2212K < 0 which is independent of Y (s), the Miller theorem can be applied to this circuit. However, because a transistor is used to achieve\nthe voltage-gain from the input to output in practice, the\ncircuit should be modeled by using a controlled current source\nwith a transconductance gm as shown in Fig. 1(b). Then, a(s) = \u2212gmR2(1\u2212sCc/gm)/[1+s(C2+Cc)R2] is a function of Y (s); thus, Miller theorem cannot be applied to this circuit.\nAlternatively, Miller approximation using a dc value of a(s), |a(0)| = gmR2, is often used to achieve the open-loop circuit as shown in Fig. 1(c). Assuming an initial lower frequency\npole before connecting Cc is associated with the input of the amplifier (i.e., |po1| = 1/R1C1 < |po2| = 1/R2C2), the Miller approximation predicts that the input pole moves to a lower frequency and is located such that pc1 \u2243 \u22121/gmR1R2Cc which is true. However, it also predicts that a pole associated\nwith the output becomes pc2 with a lower frequency as well, which is in variance with a pole-splitting [See Fig. 1(d)].\nMyungjun Kim is with Samsung Electronics, Hwaseong, Korea e-mail: phaedrus.kim@samsung.com.\nMoreover, if the initial low-frequency pole is at the output (i.e., |po1| = 1/R1C1 > |po2| = 1/R2C2), which is a more general case because amplifiers are often required to drive a\nlarge load-capacitance, the Miller approximation predicts that\nthe input pole moves to a lower frequency, which is completely\nfalse [See Fig. 1(e)]; the pole-splitting still occurs, implying\nthe input pole moves to a higher frequency [1], which is very\ncounter-intuitive.\nOn the other hand, the direct analysis (i.e., solving node\nequations to achieve the desired transfer function) provides\naccurate the pole/zero locations [2], [3]. However, it is so\ncomplex that the design insight for frequency compensation\ncannot be readily obtained.\nIn this paper, we use a two-port feedback analysis [4],\n[5] together with the root-locus diagram [6] to analyze two-\nand three-stage Miller-compensated amplifiers. This method\nsolves the problems of Miller theorem/approximation men-\ntioned above. Also, because the proposed analysis sheds light\non how the closed-loop poles of the amplifier originated from\nthe open-loop poles which can be readily found by inspection\nin the s-plane, it provides the design insight for frequency compensation.\nThis paper is organized as follows. Section II analyzes a\nsimple two-stage Miller-compensated amplifier using the pro-\nposed method. Specifically, we will see that a non-dominant\n2\npole location in a classical textbook [4] should be modified\nto have a smaller magnitude when the right-half-plane (RHP)\nzero is neglected in the amplifier transfer function. Section\nIII analyzes a two-stage Miller-compensated amplifier using a\ncurrent buffer and shows that the stability can be improved due\nto the additional third-pole from the current buffer compared\nto the case without the current buffer. Section IV analyzes a\nthree-stage nested Miller-compensated (NMC) amplifier [7].\nSection V concludes the paper. Finally, appendices are in-\ncluded to present a pole-splitting theorem and perform the\ndirect analysis to investigate the exact locations of the non-\ndominant poles in the NMC amplifier."
        },
        {
            "heading": "II. TWO-STAGE MILLER-COMPENSATED AMPLIFIER",
            "text": "A two-stage Miller-compensated amplifier is shown in\nFig. 2(a). This circuit is a feedback transimpedance amplifier\nthat has a shunt-shunt feedback topology where the basic\namplifier and the feedback network are shown in the dashed\nboxes. Thus, it can be decomposed into a- and \u03b2-circuit as shown Fig. 2(b) and (c), respectively. Note that the a-circuit includes the loading effect of the feedback network. Also, note that there are two open-loop transimpedances with [a\u2032(s)] or without [a(s)] a non-inverting current source sCcVi at the output that models the feedforward current through Cc.\nLet us first investigate a(s). By inspection of Fig. 2(b),\na(s) = Vo Ii (s)\n= \u2212 ( R1 \u2016 1\ns(C1 + Cc)\n)\ngm\n(\nR2 \u2016 1\ns(C2 + Cc)\n)\n= \u2212 gmR1R2 [1 + sR1(C1 + Cc)][1 + sR2(C2 + Cc)]\n(1)\nwhere X \u2016 Y = XY/(X + Y ). Thus, a(s) has two left-halfplane (LHP) real poles given by\npo1 = \u2212 1\nR1(C1 + Cc) (2)\npo2 = \u2212 1\nR2(C2 + Cc) (3)\nwhere po1 and po2 are the open-loop poles associated with the input and output of the amplifier, respectively.\nNext, \u03b2(s) from Fig. 2(c) is given by\n\u03b2(s) = Ix Vo (s) = \u2212sCc. (4)\nThus, \u03b2(s) has a zero z\u03b2 at the origin (i.e., z\u03b2 = 0). Combining (1) and (4), the a(s)\u03b2(s) is given by\na(s)\u03b2(s) = gmR1R2Ccs\n[1 + sR1(C1 + Cc)][1 + sR2(C2 + Cc)] . (5)\nUsing (5), we can draw the positive root-locus diagram for\nincreasing gm as shown in Fig. 3 to find the poles of the closed-loop transimpedance A(s) = V2/I1 in Fig. 2(a). Note that po1, po2 are the poles of a(s)\u03b2(s) or equivalently the poles of A(s) when the feedback loop via Cc is opened, and pcd, pcnd are the possible dominant and non-dominant poles of A(s) when the feedback loop via Cc is closed. And z\u03b2 is not a zero of A(s) because it is from \u03b2(s). Also note that the root-locus diagram includes the two cases where the\ninitial lower frequency pole is either po1 or po2. As can be readily seen, the root-locus diagram reveals the fact that po1 and po2 always split apart for increasing gm irrespective of the condition about the initial low-frequency pole locations,\nwhich the Miller approximation fails to predict.\nLet us now find the exact locations of the closed-loop\npole pcd, pcnd. Since a(s)\u03b2(s) has two LHP real and distinct poles, one zero at the origin and a large midband value1 a0\u03b20 assuming gmR1, gmR2 and Cc are large, we can apply the pole-splitting theorem presented in Appendix A. Depending\non whether the initial lower frequency pole of a(s)\u03b2(s) is po1 or po2, a0\u03b20 is expressed differently as\na0\u03b20 =\n\n  \n \ngmR2Cc C1 + Cc\nif |po1| < |po2| (6a) gmR1Cc C2 + Cc if |po1| > |po2|. (6b)\n1The closed-loop poles are found from the midband value of |a(j\u03c9)\u03b2(j\u03c9)| if a(s)\u03b2(s) has zero(s) at the origin [8].\n3\nApplying the pole-splitting relation (39) yields\npcd \u2243 \u2212 1\ngmR1R2Cc (7)\npcnd \u2243 \u2212 gmCc\n(C1 + Cc)(C2 + Cc) . (8)\nIt should be mentioned that while the dominant pole pcd given by (7) is the same as in [4], the non-dominant pole pcnd given by (8) is in variance because\npcnd in [4] \u2243 \u2212 gmCc\n(C1 + Cc)(C2 + Cc)\u2212 C2c , (9)\nimplying (8) is located at a lower frequency than (9). This\nvariance is due to the assumption that the feedforward current\nthrough Cc is neglected. This is verified as follow. The exact transimpedance Aexact(s) = V2/I1 of the two-stage Millercompensated amplifier in Fig. 2(a) is given by (10a). With\nsome algebra, (10a) can be written in the form of the feedback\nequation as (10b). Comparing (10b) with (11a) obtained from\nthe two-port feedback analysis shows that the only difference is that (gm \u2212 sCc) has been replaced by gm. Thus, such a deviation vanishes if we include the effect of sCcVi current source in Fig. 2(b), yielding\na\u2032(s) = V \u2032o Ii (s)\n= \u2212 ( R1 \u2016 1\ns(C1 + Cc)\n) (gm \u2212 sCc) ( R2 \u2016 1\ns(C2 + Cc)\n)\n.\n(12)\nTherefore, Aexact(s) = a \u2032(s)/[1 + a\u2032(s)\u03b2(s)] as shown in (10b), validating the two-port feedback analysis.\nIndeed, the non-dominant pole given by (8) is more accurate\nthan (9) if the RHP zero (zrhp = gm/Cc) of the two-stage Miller-compensated amplifier is assumed to be at high fre-\nquency so as to be neglected. zrhp can be ignored by assuming a large gm so that (gm \u2212 sCc) \u2243 gm at the frequencies of interest. However, because the term (gm \u2212 sCc) also exists in the denominator of (10b), such condition also alter the\nnon-dominant pole location by modifying the coefficient of s2R1R2 to include an additional term of C 2\nc as shown in the\ndenominator of (11b), which results in (8) to have a smaller\nmagnitude than (9).\nSuch increase in the magnitude of the non-dominant pole\ncan also be explained using the root-locus diagram for a\u2032(s)\u03b2(s) as shown in Fig. 4. Note that the negative locus rule [6] is applied here because of the low-frequency sign\nreversal associated with the RHP zero [8]. Similar to Fig. 3,\npcnd moves toward high frequency in the LHP as gm increases. However, it eventually moves into the RHP, manifesting itself at s = z+rhp if gm \u2192 \u221e; thus, for a given finite gm, pcnd is located at nearer to s = \u2212\u221e when the RHP zero is included as illustrated in Fig. 4.\nSo far, we have investigated the pole/zero locations of the\ntransimpedance V2/I1 of the circuit in Fig. 2(a). It is worth mentioning of the pole/zero locations of the input-impedance\nV1/I1. Since the natural structure of the circuit is unchanged, pcd, pcnd are also unchanged. However, the voltage-amplifier\nAexact(s) = \u2212(gm \u2212 sCc)R1R2\n1 + s[R1C1 +R2C2 + (gmR1R2 +R1 +R2)Cc] + s2R1R2[C1C2 + Cc(C1 + C2)] (10a)\n= \u2212 ( R1 \u2016 1s(C1+Cc) ) (gm \u2212 sCc) ( R2 \u2016 1s(C2+Cc) )\n1 + ( R1 \u2016 1s(C1+Cc) ) (gm \u2212 sCc) ( R2 \u2016 1s(C2+Cc) ) sCc =\na\u2032(s)\n1 + a\u2032(s)\u03b2(s) (10b)\nA(s) = \u2212 ( R1 \u2016 1s(C1+Cc) ) gm ( R2 \u2016 1s(C2+Cc) )\n1 + ( R1 \u2016 1s(C1+Cc) ) gm ( R2 \u2016 1s(C2+Cc) ) sCc =\na(s)\n1 + a(s)\u03b2(s) (11a)\n= \u2212gmR1R2\n1 + s[R1C1 +R2C2 + (gmR1R2 +R1 +R2)Cc] + s2R1R2[C1C2 + Cc(C1 + C2) +C 2 c ]\n(11b)\n4\nVo/Vi or V \u2032 o/Vi in Fig. 2(b) that has a pole po2 is now included not in the basic amplifier but in the feedback network, and\nthus po2 becomes a zero in the input-impedance. For example, the pole-zero diagram of the transimpedance V2/I1, inputimpedance V1/I1 when |po1| > |po2| are shown in Fig. 5(a), (b), respectively. The pole/zero pattern of the input-impedance\ncan be employed as a lag compensating network to control a\ndamping factor of the complex poles in a three-stage amplifier\nin [9]."
        },
        {
            "heading": "III. TWO-STAGE MILLER-COMPENSATED AMPLIFIER USING CURRENT BUFFER",
            "text": "The RHP zero in the Miller-compensated two-stage ampli-\nfier in the previous section was ignored by assuming a large\ngm, which requires a large power consumption in practice. Instead, the RHP zero can be removed by employing a unilat-\neral current buffer [10], [11] in the feedback network, allowing\nonly a current through Cc to flow backward from the output to the input of the transconductor (gm) as shown in Fig. 6(a). Note that the feedback network now has a current buffer with\nan input impedance of 1/gmc and the transconductance gmc. Since this circuit also has a shunt-shunt feedback topology, it\ncan be decomposed into a- and \u03b2-circuit as shown Fig. 6(b) and (c), respectively. Note that unlike the amplifier without the\ncurrent buffer, the feedback loading only occurs at the output\nof the amplifier in the a-circuit.\nAssuming gmcR2 \u226b 1, the open-loop transimpedance\naCB(s) is\naCB(s) = Vo Ii (s)\n= \u2212 gmR1R2(1 + sCc/gmc) [1 + sR1C1][1 + sR2(C2 + Cc)] [ 1 + sC2\u2016Cc gmc ] . (13)\nThus, aCB(s) has three LHP real poles as\npo1 = \u2212 1\nR1C1 (14)\npo2 = \u2212 1\nR2(C2 + Cc) (15)\npo3 = \u2212 gmc\nC2 \u2016 Cc (16)\nand one LHP zero as\nza = \u2212 gmc Cc\n(17)\nFrom Fig. 6(c), \u03b2CB(s) is\n\u03b2CB(s) = Ix Vo (s) = \u2212 sCc 1 + sCc/gmc . (18)\nThus, \u03b2CB(s) has one LHP real pole as\np\u03b2 = \u2212 gmc Cc\n(19)\nand a zero z\u03b2 = 0. Since (19) coincides with (17), the aCB(s)\u03b2CB(s) has the three LHP poles, a zero z\u03b2 at the origin, and is expressed as\naCB(s)\u03b2CB(s)\n= gmR1R2Ccs\n[1 + sR1C1][1 + sR2(C2 + Cc)] [ 1 + sC2\u2016Cc gmc\n] . (20)\nThe positive root-locus diagram of aCB(s)\u03b2CB(s) for increasing gm is shown in Fig. 7. The resulting loci indicate the locations of the poles of the closed-loop transimpedance\nACB(s) = V2/I1 in Fig. 6(a). As gm increases, po1 and po2 split apart and become the dominant pole pcd and the first nondominant pole pcnd1, respectively. Also, po3 moves toward lower frequency and becomes the second non-dominant pole\npcnd2 for increasing gm, implying that pcnd1 and pcnd2 can form a complex pole pair beyond some value of gm. Thus, we should analyze how effective this amplifier is compared to the\n5\nprevious amplifier in Section II and also investigate the effect\nof the third pole po3 on the stability of the amplifier. First, let us compare the Miller compensated amplifier using\nthe current buffer with the previous amplifier by assuming that po3 \u2192 \u2212\u221e so as to be neglected. It is achieved by assuming the ideal current buffer with zero input impednace (i.e., gmc \u2192 \u221e). Then, (20) reduces to have the two LHP poles, a zero at the origin and the midband value a0\u03b20|CB as\na0\u03b20|CB =\n\n  \n  \ngmR2Cc C1\nif |po1| < |po2| (21a) gmR1Cc C2 + Cc if |po1| > |po2|. (21b)\nSince the midband value is typically very large, we apply\nthe pole-splitting theorem in Appendix A to find the splitted\nclosed-loop poles as\npcd(po3\u2192\u2212\u221e) \u2243 \u2212 1\ngmR1R2Cc (22)\npcnd1(po3\u2192\u2212\u221e) \u2243 \u2212 gm\nC2 + Cc Cc C1 . (23)\nWhile the dominant pole (22) is the same with (7), the non-\ndominant pole given by (23) is located at higher frequency\nthan (8) by a multiplication factor of 1 + Cc/C1 which is typically large because C1 is a small parasitic capacitance. Thus, the amplifier with the current buffer has the better\nrelative stability than the amplifier without the current buffer if their gain-bandwidth products (GBWs) are the same.2 The\npole-zero diagrams of the transimpedance V2/I1 of the twostage amplifier without the current buffer and the two-stage\namplifier with the ideal current buffer is shown in Fig. 8(a),\n(b), respectively.\nSuch increase of magnitude of the non-dominant pole is explained as follows. When |po1| < |po2|, (21a) is larger than (6a) by the multiplication factor of 1 + Cc/C1; thus, such increased midband value help move po2 given by (15) to become pcnd1 that is located at higher frequency than (8). When |po1| > |po2|, though the midband value given by (21b) is unchanged compared to (6b), the initial higher frequency\npole po1 given by (14) is located at more higher frequency than (2) by the multiplication factor of 1 + Cc/C1 because the loading effect does not occur at the input of the amplifier;\nthus, pcnd1 is located at higher frequency than (8) as well.\nNext, we consider a non-ideal current buffer that has a finite\ngmc so that po3 and thus pcnd2 are not neglected. Assuming gm, gmc \u226b 1/R1, 1/R2; Cc, C2 \u226b C1; gmR1 \u226b C2/Cc, ACB(s) is given by (24) at the bottom of the page. Note that the dominant pole pcd is the same as (22); this is because po1 is typically located at much lower frequency than po3 and thus |aCB(j\u03c9)\u03b2CB(j\u03c9)| at \u03c9 = |po1| is little affected by po3. Therefore, po1 moves toward the origin for the same amount and becomes pcd as before when feedback-loop is closed for a given gm.\nThe other poles pcnd1, pcnd2 can be found by factoring the second-order polynomial in the denominator of ACB(s). Though simple expressions for pcnd1, pcnd2 cannot be readily generated, they have the following simple relation:\npcnd1pcnd2 = gmgmc C1C2 . (25)\n2GBWs of the voltage-gain V2/Vs of the amplifier in Fig. 2(a) and Fig. 6(a) are expressed as gm0/Cc by replacing the input current source I1 with gm0Vs where gm0 is an additional input transconductance applied to the input voltage Vs.\nACB(s) = aCB(s)\n1 + aCB(s)\u03b2CB(s) \u2243\n\u2212gmR1R2 ( 1 + s Cc gmc )\n(1 + sgmR1R2Cc)\n(\n1 + s CcC2 + gmcR1C1(Cc + C2)\ngmR1gmcCc + s2 C1C2 gmgmc\n) (24)\n6\nSince the right-hand side of (25) can be obtained by multiply-\ning (16) with (23), we write\npcnd1 = po3 pcnd2 pcnd1(po3\u2192\u2212\u221e). (26)\nThus, pcnd1 is modified with a multiplication factor of po3/pcnd2 compared to pcnd1(po3\u2192\u2212\u221e). Let us consider the following two cases where gmc and thus po3 (16) are different but the midband values of aCB(s)\u03b2CB(s) are preserved since (21a) and (21b) are not functions of gmc: 1) gmc is large and thus po3 is located at high frequency so that pcnd1 and pcnd2 are real and 2) gmc is small and thus po3 is located at low frequency so that pcnd1 and pcnd2 are complex.\n1) When gmc is large so that pcnd1 and pcnd2 are real, po3/pcnd2 is obviously larger than \u201d1\u201d as shown in the rootlocus diagram in Fig. 7; thus, pcnd1 is located at higher frequency than pcnd1(po3\u2192\u2212\u221e) as if attracted by pcnd2 as shown in the pole-zero diagram of V2/I1 in Fig. 8(c). Note that because za (17) is the zero of aCB(s) and p\u03b2 (19) is not the pole of aCB(s)\u03b2CB(s), a zero za exists in ACB(s). Though pcnd2 is at the lower frequency than in the previous ideal current buffer case, the stability is not degraded if za and pcnd2 are closely spaced so as to be canceled as shown in Fig. 8(c).\nThus, this case is better than the Miller compensation with\nthe ideal current buffer since it achieves both the improved\nstability margin and the lower power consumption with the\nfinite gmc.\n2) When gmc is small so that pcnd1 and pcnd2 are complex, the magnitude of the complex poles is still larger than that of\npcnd1(po3\u2192\u2212\u221e) [13]. Thus, power consumption can be further reduced by decreasing gmc compared to the previous real non-dominant poles case without deteriorating the stability.\nHowever, since a real part of the complex pole-pair is fixed at s \u2243 po3/2, too small gmc can result in a small damping ratio of the pole-pair, degrading stability margins shown in\nFig. 8(d). Therefore, for a given gm, an optimum design that achieves both good stability and low power consumption can\nbe achieved by locating po3 with the optimum gmc, allowing\npcnd1 and pcnd2 to be located at near za so that they can be considered a LHP real pole as shown in Fig. 8(e) (i.e., pc2 \u2243 pcM \u2243 za)."
        },
        {
            "heading": "IV. THREE-STAGE NMC AMPLIFIER",
            "text": "In this section, we analyze three-stage NMC amplifiers [7]\nby using two-port feedback analysis.\nA three-stage NMC amplifier is shown in Fig. 9(a). Note\nthat two Miller capacitors Cc0, Cc1 are employed and the input current source I0 is expressed as gm0Vs where Vs is the input voltage of the NMC amplifier. Also, note that a two-stage\nMiller-compensated amplifier in Section II is included in this\nNMC amplifier. This circuit is also a feedback transimpedance\namplifier that has a shunt-shunt feedback topology where the\nbasic amplifier and the feedback network are shown in the\ndashed boxes in Fig. 9(a). Thus, it can be decomposed into\na- and \u03b2-circuit as shown Fig. 9(b) and (c), respectively. It should be noted that the a-circuit is drawn by neglecting the signal feedforward through Cc0 for simplicity. Also, the acircuit includes the two-stage amplifier in Fig. 2(a) where the\noutput impedance includes the loading effect by Cc0. Using the same approches and the results in Section II,\naNMC(s)\u03b2NMC(s) which is given by (27) shown at the bottom of the page has three LHP poles given by\npo0 = \u2212 1 R0(C0 + Cc0) \u2243 \u2212 1 R0Cc0 (28) po1 = \u2212 1\ngm2R1R2Cc1 (29)\npo2 = \u2212 gm2Cc1 (C1 + Cc1)(C2 + Cc0 + Cc1) \u2243 \u2212gm2 C2 (30)\nwhere the approximations in (28) and (30) follow if C2 \u226b Cc0, Cc1 \u226b C0, C1 since typically C2 is a large load capacitance and C0, C1 are small parasitics. Also, aNMC(s)\u03b2NMC(s) has a z\u03b2 at the origin from the \u03b2NMC(s) = If0/Vo in Fig. 9(c). Note that po1 and po2 are expressed by neglecting the signal feedforward through Cc1.\naNMC(s)\u03b2NMC(s) = gm1gm2R0R1R2Cc0s\n[1 + sR0(C0 + Cc0)][1 + sgm2R1R2Cc1]\n[\n1 + s (C1 + Cc1)(C2 + Cc0 + Cc1)\ngm2Cc1\n] (27)\n7\nTypically, |po1| < |po0| < |po2| because of a large gm2 in the design of the NMC amplifier [2]. Thus, the positive root-\nlocus diagram for increasing gm1 can be drawn as shown in\nFig. 10. As can be seen, the two low frequency poles po1 and po0 split apart as gm1 increases and become a dominant pole pcd and a first non-dominant pole pcnd1, respectively. It should also be noted that po2 moves toward low frequency and becomes a second non-dominant pole pcnd2 as gm1 increases. Also, note that pcnd1 and pcnd2 can form a complex-conjugate pole-pair beyond some value of gm1.\nUsing a similar approach in the Section III, let us first\nassume po2 is located at very high frequency so as to be neglected and investigate a dominant (pcd) and a first nondominant (pcnd1) pole locations; in this case, (27) can be approximated to have the two LHP poles, a zero at the origin, and a midband value a0\u03b20|NMC as given by\na0\u03b20|NMC = gm1R0Cc0\nCc1 (31)\nwhich is typically large. Thus, the splitted closed-loop poles\ncan be found by applying the pole-splitting relation (39),\nwhich results in\npcd(po2 atHF ) \u2243 \u2212 1\ngm1gm2R0R1R2Cc0 (32)\npcnd1(po2 atHF ) \u2243 \u2212 gm1 Cc1\n(33)\nThus, GBW of this NMC amplifier is gm0/Cc0. Typically, a magnitude of the first non-dominant pole given by (33) is set\nto be\ngm1 Cc1 = 2GBW = 2 gm0 Cc0\n(34)\nso that the phase margin (PM) \u2243 90\u00b0\u2212tan\u22121(1/2) \u2243 63\u00b0 [2]; the pole-zero diagram of the voltage-gain of this NMC am-\nplifier is illustrated in Fig. 11(a). It is worth mentioning that\nthe proposed analysis shows that po2 should be located at a high frequency such that |po2| = |pcnd2| \u226b GBW to satisfy\n(34), implying a seperate pole approach in [2] that satisfies not only (34) but |pcnd2| = 2 GBW cannot be achieved. Next, we consider the case when po2 is located at a lower frequency and investigate its effect on the stability. Though this\ncan be achieved by decreasing gm2, it will also affect po1 given by (29). Instead, increasing C2 only allows po2 to be located at a lower frequency. Then, as mentioned eariler, po2 moves toward low frequency and becomes the second-nondominant\npole pcnd2. Similar to the case in the Miller compensated twostage using the non-ideal current buffer in Section III, the first\nnon-dominant pole pcnd1 here is at a higher frequency than (33) as if attracted by pcnd2. This is verified as follows.\nAssuming gm1, gm2 \u226b 1/R0, 1/R1, 1/R2; C2 \u226b Cc0, Cc1 \u226b C0, C1; ANMC(s) = V2/I0 in Fig. 9(a) is approximately expressed as (35) shown at the bottom of the\npage. From a quadratic function in the denominator of (35),\npcnd1 and pcnd2 have the following relation:\npcnd1pcnd2 \u2243 gm1gm2 Cc1C2 . (36)\nBecause the right-hand side of (36) can also be obtained by\nANMC(s) = V2 I0 (s) = aNMC(s) 1 + aNMC(s)\u03b2NMC(s) \u2243 \u2212gm1gm2R0R1R2\n(1 + sgm1gm2R0R1R2Cc0)\n[\n1 + s Cc1 gm1 + s2 Cc1C2 gm1gm2\n] (35)\n8 multiplying (30) with (33), we can write\npcnd1 \u2243 po2 pcnd2 pcnd1(po2 atHF ). (37)\nThus, pcnd1 is located at higher frequency than pcnd1(po2 atHF ) by a multiplication factor of po2/pcnd2 that is obviously larger than unity as shown in the root-locus diagram in Fig. 10. This\nimplies that even if po2 is not located at very high frequency, the stability margin may be little affected by pcnd2 because the magnitude of pcnd1 is also increased.\nFor example, we consider two cases that have different values of C2 so that 1) po2 = \u22128GBW, and 2) po2 = \u22124GBW and the condition (34) holds in the both cases. The exact\nanalysis is carried out for the both cases in Appendix B.\n1) When po2 = \u22128GBW, the NMC amplifier has the pole-zero diagram as illustrated in Fig. 11(b). Note that the\ndominant pole pcd is at the same location as in the previous case because po1 is typically located at much lower frequency than po2 and thus |aNMC(j\u03c9)\u03b2NMC(j\u03c9)| at \u03c9 = |po2| is little affected by po2. However, po0 and po2 attract each other, becoming the first (pcnd1) and second non-dominant (pcnd2) pole, and form a double pole-pair at s = \u22124GBW, which results in PM \u2243 90\u00b0\u22122tan\u22121(1/4) \u2243 62\u00b0. Thus, the stability of the NMC amplifier is little affected compared to the\nprevious case.\n2) When po2 = \u22124GBW, the NMC amplifier has the polezero diagram as illustrated in Fig. 11(c). The location of pcd is still the same as the previous cases. However, pcnd1 and pcnd2 form a complex-conjugate pole-pair that has the same magnitude of the real- and imaginary-part as 2GBW (i.e., |pcnd1| = |pcnd2| = 2 \u221a 2GBW) with a damping ratio (\u03be) of\n1/ \u221a 2 \u2243 0.707, which results in\nPM \u2243 90\u00b0 \u2212 tan\u22121 [ 2\u03be GBW 2 \u221a 2GBW\n1\u2212 ( GBW 2 \u221a 2GBW )2\n]\n\u2243 60\u00b0. (38)\nThus, the stability of the NMC amplifier is also little affected\ncompared to the previous cases."
        },
        {
            "heading": "V. CONCLUSION",
            "text": "In this paper, various Miller-compensated amplifiers are\nanalyzed by using the two-port feedback analysis together\nwith the root-locus diagram. This method solves the prob-\nlems of Miller theorem/approximation that fail to predict the\npole-splitting and that requires an an impractical assumption\nwhere an initial low-frequency pole before connecting a Miller\ncapacitor in a multi-stage amplifier should be associated with\nthe input of the amplifier. Also, because the proposed analysis\nsheds light on how the closed-loop poles of the amplifier orig-\ninated from the open-loop poles which can be readily found\nby inspection in the s-plane, it provides the design insight for frequency compensation, helping allow the association of the\nclosed-loop poles with the circuit parameters.\nSpecifically, in Section II, the proposed analysis shows\nthat when the RHP zero is neglected the nondominant pole\nlocation of the two-stage Miller-compensated amplifier should\nbe modified to have a smaller magnitude than in a classical\ntextbook [4]. Also, in Section III, when the current buffer is\nused in a Miller compensated two-stage amplifier to block\nthe feedforward path through the compensation capacitor, the\nstability can be improved because of the absence of the RHP\nzero and the loading effect of compensation capacitor at the\ninput of the amplifier. Moreover, the additional third pole\nfrom the current buffer and the zero of the a-circuit can be optimally located to improve the stability and to lower the\npower consumption. Finally, in Section IV, the stabiltiy of the\nthree-stage NMC amplifier can be little affected even if the\nsecond non-dominant pole is considered because the first non-\ndominant pole is located at a higher frequency as if attracted\nby the second non-dominant pole."
        },
        {
            "heading": "APPENDIX A POLE-SPLITTING THEOREM",
            "text": "Let a(s)\u03b2(s) of a feedback circuit has two distinct real poles, pod and pond, in the left-half of the s-plane such that |pod| < |pond|, a zero at the origin, and a midband value a0\u03b20 \u226b 2. Then, the following Pole-splitting relation holds:\na0\u03b20 \u2243 pod pcd \u2243 pcnd pond\n(39)\nwhere pcd and pcnd are the closed-loop poles of the circuit.\nProof: For a given condition, a(s)\u03b2(s) can be written\na(s)\u03b2(s) = a0\u03b20 s |pod| (\n1 + s|pod|\n)(\n1 + s|pond|\n) . (40)\nThe closed-loop poles of the circuit [or equivalently the zeros\nof the characteristic equation 1 + a(s)\u03b2(s)] can be found as the zeros of\nP (s) = 1 + s a0\u03b20 |pod| + s2 1 |podpond| . (41)\nThe two zeros of P (s), pcd and pcnd, are real and widely spaced (i.e., |pcnd| \u226b |pcd|). This can be verified by comparing (41) with the standard form of the second-order polynomial\nwith a damping ratio \u03be and a natural frequency \u03c9n given by\nS(s) = 1 + s 2\u03be\n\u03c9n + s2\n1\n\u03c92n . (42)\nEquating (41) with (42) yields\n\u03be = 1\n2\n\u221a\npond pod a0\u03b20 > 1 2 a0\u03b20 \u226b 1. (43)\nThus, we can write\nP (s) \u2243 1 + s 1|pcd| + s2\n1\n|pcdpcnd| . (44)\nEquating the coefficient of s in (41) and (44) results in\n|pcd| \u2243 |pod| a0\u03b20 . (45)\nSimilarly, by equating coefficients of s2 in (41) and (44) and using (45), pcnd can be estimated as\n|pcnd| \u2243 |pond|a0\u03b20. (46)\n9\nUsing (45), (46) and eliminating the absolute functions, the\npole-splitting relation given by (39) is established and is\nillustrated in Fig. 12."
        },
        {
            "heading": "APPENDIX B",
            "text": "Applying the quadractic formula to the quadratic function\nin the denominator of (35), pcnd1 and pcnd2 are\npcnd1, pcnd2 = \u2212 gm2 2C2 \u00b1 gm2 2C2\n\u221a\n1\u2212 4gm1 Cc1 C2 gm2 . (47)\nUsing (30) and (34), we can write\npcnd1, pcnd2 \u2243 po2 2 \u2213 po2 2\n\u221a\n1 + 8GBW\npo2 . (48)\nThus, when po2 = \u22128GBW, pcnd1, pcnd2 \u2243 po2/2 = \u22124GBW. And, when po2 = \u22124GBW, pcnd1, pcnd2 \u2243 po2/2\u2213 jpo2/2 = \u22122GBW \u2213j2GBW."
        }
    ],
    "title": "Two-Port Feedback Analysis On Miller-Compensated Amplifiers",
    "year": 2022
}