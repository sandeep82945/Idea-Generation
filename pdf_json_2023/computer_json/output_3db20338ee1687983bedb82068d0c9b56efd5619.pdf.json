{
    "abstractText": "Ellipse detection is one of the important parts of intelligent manufacturing, and the efficient detection of elliptical contours corresponding to hole parts is the prerequisite before performing practical applications. Aiming at enhancing the efficiency in ellipse detection, a fast and high-precision ellipse detection method based on the Candy's theorem is proposed, in which the constrained simple polygon constraint and the Candy's theorem constraint are used to improve the efficiency of ellipse detection. The theory of the proposed ellipse detection method is described in detail. The comparison experiments with six popular ellipse detection methods are performed based on three public datasets, which are to verify the ellipse detection ability of the proposed method in improving detection speed and precision. And a small hole detection experiment is performed with the constructed experimental setup, which is to verify the effectiveness of the proposed method to detect small holes in practical applications. The proposed method can provide referenced methods and theories in the field of ellipse detection. INDEX TERMS The Candy's theorem, ellipse detection, detection speed, detection precision.",
    "authors": [
        {
            "affiliations": [],
            "name": "XIUJUN FANG"
        },
        {
            "affiliations": [],
            "name": "ENZHENG ZHANG"
        },
        {
            "affiliations": [],
            "name": "BINGCHEN LI"
        },
        {
            "affiliations": [],
            "name": "BIN ZHAI"
        }
    ],
    "id": "SP:53c149d28409bb0a8e27a44294d2a895dd9d7d3c",
    "references": [
        {
            "authors": [
                "H. Dong",
                "E. Asadi",
                "G. Sun",
                "D.K. Prasad",
                "I. -M. Chen"
            ],
            "title": "Real- Time Robotic Manipulation of Cylindrical Objects in Dynamic Scenarios Through Elliptic Shape Primitives,",
            "venue": "IEEE Trans. Robot.,",
            "year": 2019
        },
        {
            "authors": [
                "T. Jiang",
                "H. Cui",
                "X. Cheng",
                "W. Tian"
            ],
            "title": "A measurement method for robot peg-in-hole prealignment based on combined two-level visual sensors,",
            "venue": "IEEE Trans. Instrum. Meas.,",
            "year": 2021
        },
        {
            "authors": [
                "F. Manuri",
                "A. Sanna",
                "C.P. Petrucci"
            ],
            "title": "PDIF: Pupil Detection After Isolation and Fitting,",
            "venue": "IEEE Access,",
            "year": 2020
        },
        {
            "authors": [
                "P. Quan",
                "Y. Lou",
                "H. Lin",
                "Z. Liang",
                "S. Di"
            ],
            "title": "Research on Fast Identification and Location of Contour Features of Electric Vehicle Charging Port in Complex Scenes,",
            "venue": "IEEE Access,",
            "year": 2022
        },
        {
            "authors": [
                "A.Y.S. Chia",
                "M.K.H. Leung",
                "H. -L. Eng",
                "S. Rahardja"
            ],
            "title": "Ellipse detection with Hough transform in one dimensional parametric space,",
            "venue": "in Proc. IEEE Int. Conf. Image Process.,",
            "year": 2007
        },
        {
            "authors": [
                "Y. Xie",
                "Q. Ji"
            ],
            "title": "A new efficient ellipse detection method,",
            "venue": "Proc. Int. Conf. Pattern Recognit., Quebec, QC, Canada,",
            "year": 2002
        },
        {
            "authors": [
                "W. Lu",
                "J. Tan",
                "R. Floyd"
            ],
            "title": "Automated fetal head detection and measurement in ultrasound images by iterative randomized Hough transform,",
            "venue": "Ultrasound. Med. Biol.,",
            "year": 2005
        },
        {
            "authors": [
                "R.A. McLaughlin"
            ],
            "title": "Randomized Hough transform: improved ellipse detection with comparison,",
            "venue": "Pattern Recognit. Lett., vol. 19,",
            "year": 1998
        },
        {
            "authors": [
                "F. Mai",
                "Y.S. Hung",
                "H. Zhong",
                "W.F. Sze"
            ],
            "title": "A hierarchical approach for fast and robust ellipse extraction,",
            "venue": "Pattern Recognit.,",
            "year": 2008
        },
        {
            "authors": [
                "A.Y. -S. Chia",
                "S. Rahardja",
                "D. Rajan",
                "M.K. Leung"
            ],
            "title": "A split and merge based ellipse detector with self-correcting capability,",
            "venue": "IEEE Trans. Image Process., vol. 20,",
            "year": 2011
        },
        {
            "authors": [
                "D.K. Prasad",
                "M.K.H. Leung",
                "S.Y. Cho"
            ],
            "title": "Edge curvature and convexity based ellipse detection method,",
            "venue": "Pattern Recognit.,",
            "year": 2012
        },
        {
            "authors": [
                "Z. Shen",
                "M. Zhao",
                "X. Jia",
                "Y. Liang",
                "L. Fan",
                "D. Yan"
            ],
            "title": "Combining convex hull and directed graph for fast and accurate ellipse detection,",
            "venue": "Graph. Models,",
            "year": 2021
        },
        {
            "authors": [
                "C. Lu",
                "S. Xia",
                "M. Shao",
                "Y. Fu"
            ],
            "title": "Arc-support line segments revisited: an efficient high-quality ellipse detection,",
            "venue": "IEEE Trans. Image Process.,",
            "year": 2020
        },
        {
            "authors": [
                "R. Grompone von Gioi",
                "J. Jakubowicz",
                "J. -M. Morel",
                "G. Randall"
            ],
            "title": "LSD: A Fast Line Segment Detector with a False Detection Control,",
            "venue": "IEEE Trans. Pattern Anal. Mach. Intell., vol. 32,",
            "year": 2010
        },
        {
            "authors": [
                "Q. Jia",
                "X. Fan",
                "Z. Luo",
                "L. Song",
                "T. Qiu"
            ],
            "title": "A fast ellipse detector using projective invariant pruning,",
            "venue": "IEEE Trans. Image Process.,",
            "year": 2017
        },
        {
            "authors": [
                "H. Dong",
                "G. Sun",
                "W. -C. Pang",
                "E. Asadi",
                "D.K. Prasad",
                "I. -M. Chen"
            ],
            "title": "Fast Ellipse Detection via Gradient Information for Robotic Manipulation of Cylindrical Objects,",
            "venue": "IEEE Robot. Autom. Lett., vol. 3,",
            "year": 2018
        },
        {
            "authors": [
                "P.L. Rosin"
            ],
            "title": "Techniques for assessing polygonal approximations of curves,",
            "venue": "IEEE Trans. Pattern Anal. Mach. Intell.,",
            "year": 1997
        },
        {
            "authors": [
                "A.W. Fitzgibbon",
                "R.B. Fisher"
            ],
            "title": "A buyer's guide to conic fitting,",
            "venue": "British Machine Vision Conference,",
            "year": 1996
        },
        {
            "authors": [
                "D.K. Prasad",
                "M.K.H. Leung"
            ],
            "title": "Clustering of ellipses based on their distinctiveness: an aid to ellipse detection algorithms,",
            "venue": "in Proc. Conf. Compt. Sci. Inf. Technol., Chengdu,",
            "year": 2010
        },
        {
            "authors": [
                "Z. Kulpa"
            ],
            "title": "On the properties of discrete circles, rings, and disks,",
            "venue": "Comput. Graph. Image Process.,",
            "year": 1979
        }
    ],
    "sections": [
        {
            "text": "\u00a0 1\nINDEX TERMS The Candy's theorem, ellipse detection, detection speed, detection precision.\nI. INTRODUCTION Industrial robot is an essential and indispensable part of intelligent manufacturing for its characteristics of high repeatability positioning accuracy, high flexibility, and high reliability, which can perform complex tasks with the assistance of visual perception. Efficient detection of the elliptical contour of the hole is the prerequisite before performing many robot applications and the realization of fast and high-precision ellipse detection is the crucial problem that needs to be solved in the process of robot grasp [1], robot peg-in-hole assembly [2] and other applications [3]-[4]. Currently, the popular ellipse detection methods are mainly based on the theories of Hough transform and edge following.\nThe main idea of ellipse detection based on Hough transform is to construct a five-dimensional parameter space about the ellipse through Hough transform and determine the parameters of the ellipse through the local maximum value of the accumulator in parameter space. It is challenging to meet the needs of fast and high-precision ellipse detection with standard Hough transform. Therefore, some scholars carried out a lot of research work on it to improve its ability [5]-[8]. Although these methods have different degrees of optimization in detection speed and memory consumption, most of them still obtain the parameters of the ellipse through the accumulator, whose local maximum is prone to cause\ndetection errors due to the influence of the environment. Therefore, sensitive accumulator parameters need to be set appropriately when using these kinds of methods.\nThe main idea of the ellipse detection based on edge following is to extract the arc from the edge map first, and then arc combinations that can form the same ellipse are screened out through different constraint methods. Finally, the detected ellipses are obtained by fitting and validating, etc. For example, Mai et al. [9] proposed a hierarchical detection method to improve the detection effect of occlusion and overlapping ellipses by using the connectivity and curvature constraints to discriminate line segments that may form the same elliptical arc. Chia et al. [10] proposed a method through modeling edge connectivity by line segments, matching optimal elliptical arc pairs, and screening hypothetical ellipses using confidence to detect ellipses. Prasad et al. [11] proposed a method that enhances the selectivity of detection by smooth curvature, novel relationship score, and non-heuristic saliency criteria to improve detection ability. The concept of the directed graph is extended into ellipse detection to improve detection efficiency. To construct the directed graph about arcs, Meng et al. [12] utilized the constraints proposed in [11] while Shen et al. [13] used the constraints such as convex hull, distance, length and direction. Arc combinations can be obtained for fitting by traversing the constructed directed\nThis work is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 License. For more information, see https://creativecommons.org/licenses/by-nc-nd/4.0/\nE.\u00a0Zhang\u00a0et\u00a0al.:\u00a0A\u00a0Fast\u00a0and\u00a0High\u2010precision\u00a0Ellipse\u00a0Detection\u00a0Method\u00a0Based\u00a0on\u00a0the\u00a0Candy's\u00a0Theorem\u00a0\n2\ngraph. Lu et al. [14] proposed a method that obtains the contours by [15] to achieve high-quality ellipse detection. Fornaciari et al. [16] proposed a method that improves detection efficiency by focusing on arcs or partial arcs rather than edge points and selecting arcs compatible with the elliptical shape, and the projective invariant constraint is combined with it in [17] to improve the detection speed, whose constraint can efficiently sieve out arc pairs that can not form the same ellipse. Besides, to improve the ellipse detection effect, arcs are extracted in [18] based on edge curvature before grouping arcs into four quadrants like [16]. The above three methods require three arcs from different quadrants to detect an ellipse, which could limit their capacity for incomplete ellipse detection.\nSummering the above ellipse detection methods, the ellipse detection method based on edge following is more popular because it has superiority in balancing detection speed and detection precision. Therefore, referring to the above-related methods, and in order to further improve ellipse detection speed and detection precision, the Candy's theorem [19] is introduced to realize ellipse detection due to its good ellipse detection potential in this paper.\nThe rest of this paper is organized as follows. In section II, ellipse detection and experiments configuration is introduced. In section III, the proposed method is provided in detail. In section IV, the verification experiments are performed. Finally, the conclusion is presented in section V."
        },
        {
            "heading": "II. CONFIGURATION",
            "text": "The ellipse detection and experiments configuration are shown in Fig. 1. Firstly, the image information of the target is sensed by the camera. Secondly, the elliptical targets are detected using the proposed method that uses the constrained simple polygon constraint and the Candy's\ntheorem constraint to discriminate valid and invalid arc pairs. Finally, the validation and analysis of the proposed method experiments are performed, and the detection methods comparison and small hole detection experiments are carried out to study the performance of the proposed ellipse detection method."
        },
        {
            "heading": "III. ELLIPSE DETECTION METHOD BASED ON THE CANDY'S THEOREM",
            "text": "Fig.2 shows the flow chart of the proposed method. Firstly, the edge of the image is obtained by a Canny edge detector and then approximated by a series of line segments. The arcs are extracted by applying some constraints to these line segments. Secondly, two constraints, the constrained simple polygon constraint and the Candy's theorem constraint, are used to screen arc pairs from arcs that are not excellent arcs or the fitted ellipse can not pass validation. Thus, the combinations of arc are obtained and fitted for validation. Finally, the detection is finished after clustering.\nA. IMAGE PREPROCESSING Firstly, the image edge is obtained by a Canny edge detector, whose thresholds are determined by the cumulative distribution of gradient intensity [16]. Secondly, the non-parametric Douglas-Poiker method in [20] is used to approximate the non-branch contour to obtain a series of line segments. Thirdly, the constraints are established to extract arcs using the elliptical contour features of the curvature, no inflection point, and small turning angle.\nThe contour constraint and arc extraction are illustrated in Fig. 3, where gray and red squares represent the pixels of the contour. Contours are substituted by a series of line segments to extract arcs. In the figure, the red pixel points called the split points (SP) represent the endpoints of line segments\nThis work is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 License. For more information, see https://creativecommons.org/licenses/by-nc-nd/4.0/\nE.\u00a0Zhang\u00a0et\u00a0al.:\u00a0A\u00a0Fast\u00a0and\u00a0High\u2010precision\u00a0Ellipse\u00a0Detection\u00a0Method\u00a0Based\u00a0on\u00a0the\u00a0Candy's\u00a0Theorem\u00a0\n3\nshown as vectors. The turning angle at a SP is the angle between two vectors adjacent to it, whose value is limited to be less than the threshold Ta. The curvature defined as the ratio of the lengths of two adjacent vectors is limited between 1/Tcu and Tcu. The turning direction at a SP is the rotation direction from the previous vector to the next vector. When the turning directions of two adjacent SPs are inconsistent, the latter SP is referred to as an inflection point.\nAs shown in Fig. 3, firstly, the vectors formed by P1, P2, and P3 are selected to extract the arc. The turning direction and turning angle of vectors P1P2\u20d7 relative to P2P3\u20d7 at P2 are clockwise and \u03b81, respectively. They satisfy the curvature constraint but can not pass the turning angle constraint due to \u03b81 greater than Ta. Thus, P1 can not serve as an initial point of an arc. Secondly, the vectors formed by P2, P3, and P4 are selected, and both the turning angle and curvature of the two vectors at P3 satisfy constraints. So P2, P3, and P4 are regarded as valid points of the current extracted arc formed by their corresponding contour. Thirdly, P5 is introduced into the current extracted arc to judge, P5 can also be a valid point of the arc since the vectors at P4 pass all constraints, whose inflection constraint refers to the adjacent vectors at P3 and P4 having the same turning direction. Fourthly, when P6 tries to join the current extracted arc, it can be judged that P5 is an inflection point using the same way. Thus, P5 is the last valid point of the currently extracted arc. Then, the next arc is extracted from P5. Moreover, the extracted arcs may be lines or noises, so the arcs are deleted whose sum of the turning angle is less than Tl or the shorter side length of the OBB is less than Tob. The threshold Ta is adaptive, and the basic idea of acquiring its value is introduced using P7 in Fig. 3. It consists of a fixed Tst and a variable Tad that varies with the length of the vector and can be expressed as\na st ad st 7 8 2= + = +T T P T P T  (1)\nBesides, polar coordinates are used to represent vectors to make arc extraction efficient. The polar coordinates of all possible vectors and the corresponding Ta are stored in\nadvance to efficiently obtain the turning angle and the turning direction between two vectors. For example, P1P2\u20d7 and P2P3\u20d7 are two vectors in the Cartesian coordinate system in Fig. 3, whose corresponding polar coordinates are (r1, \u03c61) and (r2, \u03c62). The turning direction and turning angle between them can be obtained by the judgment rules shown in Table I, then combined with the corresponding pre-stored Ta to extract arcs.\nTABLE I TURNING DIRECTION AND TURNING ANGLE JUDGMENT RULES\nJudgment condition Turning direction Turning angle\n|\u03c62 - \u03c61|<180 and \u03c62 - \u03c61>0 Anticlockwise \u03c62 - \u03c61 |\u03c62 - \u03c61|<180 and \u03c62 - \u03c61\u22640 Clockwise - (\u03c62 - \u03c61) |\u03c62 - \u03c61|\u2265180 and \u03c62 - \u03c61>0 Clockwise 360 - (\u03c62 - \u03c61) |\u03c62 - \u03c61|\u2265180 and \u03c62 - \u03c61\u22640 Anticlockwise 360 + (\u03c62 - \u03c61)"
        },
        {
            "heading": "B. ELLIPSE DETECTION BASED ON THE CANDY'S THEOREM CONSTRAINT",
            "text": "As shown in Fig. 2, the extracted arc whose turning angles add up to more than Tos is regarded as an excellent arc that probably forms an ellipse independently and these arcs enter the fitting and validating process directly. If the direct least squares method in [14] fails to fit these arcs or the fitted ellipses can not pass validation, the first method described in [21] will fit again. Then, the ellipses that pass validation are clustered using the method proposed in [22]. For arcs that are not excellent or the fitted ellipse can not pass validation, the proposed two constraints are used to screen arc pairs. The arcs that pass the above two constraints are grouped with two, three, and four arcs for fitting [14] and validating. Ellipses passing validation are also used for clustering.\nThe different types of the constrained simple polygon constraint are shown in Fig. 4, and its relevant principle is illustrated by a polygon formed by connecting the SPs of two arcs in anticlockwise order shown in Fig. 4(a). When the turning direction at the SP connecting the two arcs is clockwise, the constraint demands that the absolute value of the corresponding turning angle is less than Ttol. Besides, the constraint also demands that the sum of the exterior angles of the polygon is 360\u00b0. Here, when the turning direction at a SP is anticlockwise, the turning angle is positive, otherwise, negative. It can be known that the turning direction at B1 S1 is clockwise using the above method and the absolute value of the corresponding turning angle \u03b21 3 is less than Ttol, and the sum of the exterior angles of the polygon is 360\u00b0. Thus, two arcs in Fig. 4(a) can pass the constraint. In Fig. 4(b), the turning direction at the SPs connecting the two arcs are all anticlockwise, and the sum of the exterior angles of the polygon is 360\u00b0. So, this arc pair can pass the constraint. As shown in Fig. 4(c), The length between SP A3 S1 and SP B3 E1 is less than the length between one of the SPs B 3 E1 and its adjacent SP B3 E2 in its own arc. The constraint made an error in judging this arc pair when using the above polygon construction method. In this case, the point N obtained from\nThis work is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 License. For more information, see https://creativecommons.org/licenses/by-nc-nd/4.0/\nE.\u00a0Zhang\u00a0et\u00a0al.:\u00a0A\u00a0Fast\u00a0and\u00a0High\u2010precision\u00a0Ellipse\u00a0Detection\u00a0Method\u00a0Based\u00a0on\u00a0the\u00a0Candy's\u00a0Theorem\u00a0\n4\nthe average value of the pixels of arc B3 E1B3 E2 and arc A3 S1A3 S2 is used to replace A 3 S1 and B 3 E1 to construct the polygon for judgment. Then, it can be concluded that the arc pair can pass the constraint at this time. For this type, the fitting and validation will be directly performed if passing the constraint. In Fig. 4(d), it can be known that the turning direction at B4 E1 and B4 S1 are clockwise, whereas the absolute value of turning angles \u03b24 4 and \u03b24 3 are both larger than Ttol. Thus, the arc pair does not satisfy the constraint. In Fig. 4(e) and Fig. 4(f), when the turning direction at the SPs connecting two arcs are clockwise, the absolute value of corresponding turning angles are more than Ttol, and the sum of the exterior angles of each polygon is not 360\u00b0. So, both two types fail to satisfy the constraint.\nFor the arc pairs passing constraint above, it will lead to slow detection speed if directly fitting and validating. So, the Candy's theorem constraint is used to screen these arc pairs except for type 3 to improve detection efficiency.\nThe principle of the Candy's theorem is shown in Fig. 5(a), where blue arcs are two parts of the same ellipse. In anticlockwise order, E and F are the starting points of the two\narcs, D and C are the ending points. Line segments EF and DC intersect at M, and the line passing through A and M intersects with line segments ED, CF, and arc FBC at P, Q, and B, respectively. According to the Candy's theorem, the geometric relationship of line segments in Fig. 5(a) can be expressed as\n1 1 1 1\nAM PM BM QM    (2)\nWhere, AM, PM, BM, QM are the length of line segments. Based on (2), the established constraint inequality is\n1 1 1 1- rEAM PM BM QM    (3)\nWhen using (3) to screen arc pairs, it is suboptimal to use the constant Er for different lengths of line segments in arc pairs. Thus, the proposed method gives an adaptive Er, which can adapt arc pairs with different sizes by approximating the magnitude of the error.\n= ( ) ( )\nb b\nb b r\nT T AM T PM BM T E QM     \n(4)\nWhere, AM, PM, BM, and QM are the length of line segments formed by the corresponding arc pair. Tb is a threshold that can be obtained from the threshold selection experiment.\nIn order to construct (3), firstly, the arc with fewer SPs is selected as the arc where A is located. Three different positions of points are selected as A for using this constraint stably, whose selection strategy is illustrated in Fig. 6. The green points are the SPs of arcs, and the blue points in Fig. 6(a) and Fig. 6(b) are the midpoint of the arc formed by two adjacent SPs, the blue points in Fig. 6(d) are the quarter points of the arc. Specifically, when the ratio of the shorter line segment to the longer one in EC and DF is less than 0.3, the point C or F is reselected to construct (3). Fig. 5(b) shows this special case, the endpoint C' of shorter line segment E'C' in E'C' and D'F' is replaced by the midpoint C'' of the arc formed by C' and adjacent SP W', where the arc F'B'C' has three SPs C', W', and F'. Furthermore, when more than three SPs are on the arc F'B'C', the SP adjacent to C' is selected to replace C'.\nBesides, Point B is located using the binary search method. Firstly, F and C or their alternative points are used as the two boundary points of the initial search interval. Secondly, the\nThis work is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 License. For more information, see https://creativecommons.org/licenses/by-nc-nd/4.0/\nE.\u00a0Zhang\u00a0et\u00a0al.:\u00a0A\u00a0Fast\u00a0and\u00a0High\u2010precision\u00a0Ellipse\u00a0Detection\u00a0Method\u00a0Based\u00a0on\u00a0the\u00a0Candy's\u00a0Theorem\u00a0\n5\nsearch interval can be narrowed using the upper and lower position relationship between line AM and the midpoint of the arc formed by interval boundary points and iterate this process until two interval boundary points are adjacent. Finally, the intersection of line AM and the line through the last interval boundary points is taken as point B. Compared with the method of traversing pixels in [11], this method can improve the speed of determining point B. When two of the three groups of points corresponding to A selected above satisfy (3), the arc pair is considered to pass the Candy's theorem constraint.\nThe ellipses formed by arc pairs passing two constraints satisfy the validation and are used for clustering directly. Among them, the judgment condition for clustering is the ratio of the number of inliers in the arcs to the perimeter [23] of the fitted ellipse greater than Tsc and the ratio is defined as the score of ellipses. An inlier in the arc should meet the requirements that the position must be within the closed area formed by two ellipses whose length of semi-axis are set by expanding and shrinking the length of the semi-axis of the fitted ellipse by 2 pixels, respectively, and the smaller angle between lines formed by the normal vector of an inlier to the fitted ellipse and the corresponding gradient direction should be less than Tg. Based on arcs from the ellipse that does not enter the clustering process but the ratio of the number of inliers to the number of arc pixels in each of the two arcs of an ellipse is more than Tsr, combinations composed of three or four arcs are generated and validated after fitting. In addition, when an arc is repeatedly used by several detected ellipses, only the ellipse with the highest score can be preserved. Finally, clustering is performed to filter the repeated ellipses with the low score and save the high one."
        },
        {
            "heading": "IV. EXPERIMENTAL RESULTS",
            "text": "In order to verify the feasibility and effectiveness of the proposed method to realize fast and high-precision ellipse detection, experiments based on three public datasets and three synthetic datasets are carried out. The computer used for ellipse detection of the datasets is Intel Core i5-10400 with 16G RAM. A metal plate full of small holes is manufactured to verify the ability of the proposed method to detect small holes.\nIn the experiments, the overlap ratio of two ellipses more than 0.8 is regarded as the same one in the real datasets, and 0.95 in the synthetic datasets. Execution time, Precision, Recall, and F1-Measure are used to evaluate the performance of detection methods, Precision = \u03a8 / \u03a9, Recall = \u03a8 / \u01b1, F1Measure = (2*Precision*Recall) / (Precision + Recall). Where, \u03a9, \u01b1, \u03a8 is the number of detected ellipses, real ellipses, and correctly detected ellipses, respectively."
        },
        {
            "heading": "A. THRESHOLD SELECTION EXPERIMENT OF ELLIPSE DETECTION",
            "text": "The purpose of this experiment is to test and obtain the optimal thresholds required in the proposed method so as to\nprovide the guarantee for subsequent efficient ellipse detection. The thresholds that need to be determined include Tst, Tos, Tsc, and Tb. Tst is the fixed part of the Ta when extracting arcs. Tos is to judge whether the arc is excellent. Tsc determines whether an ellipse is real or not. Tb is used for the Candy's theorem constraint. In this experiment, three public datasets, Dataset Prasad [11], Dataset Smartphone [16], and Dataset Tableware [13] are used to test the influence of the above thresholds on the detection.\nThis work is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 License. For more information, see https://creativecommons.org/licenses/by-nc-nd/4.0/\nE.\u00a0Zhang\u00a0et\u00a0al.:\u00a0A\u00a0Fast\u00a0and\u00a0High\u2010precision\u00a0Ellipse\u00a0Detection\u00a0Method\u00a0Based\u00a0on\u00a0the\u00a0Candy's\u00a0Theorem\u00a0\n6\nFig. 7 shows the influence of thresholds on the detection performance. Fig. 7(a) shows that the greater the value of Tst, the longer the execution time will be. When Tst is greater than 50\u00b0, the F1-Measure of three datasets reaches a larger value. Thus, Tst is set to be 50\u00b0. Fig.7(b) shows that the greater the value of Tos, the shorter the execution time will be. When Tos is 120\u00b0, the execution time and F1-Measure of three datasets are superior. Thus, setting Tos to 120\u00b0 is suitable. Fig. 7(c) shows that the Tsc has a negligible impact on execution time but a significant impact on F1-Measure. The value of F1Measure is outstanding when Tsc is near 0.55, so setting Tsc to 0.55. Fig. 7(d) shows that Tb impacts the performance of the Candy's theorem constraint in discriminating arc pairs. The results show that the larger the value, the lower the constraint effect and the longer execution time, especially the greater impact on Dataset Tableware, and also show an impact on F1-Measure. For balancing the F1-Measure and execution time, the threshold is set to be 2.6 referring to experimental results. In addition, since there is little influence of other thresholds involved in the proposed method, the empirical values of these thresholds are set as follows: Tob=4, Tsh=5, Tcu=3.4, Tl=20\u00b0, Ttol=25\u00b0, Tg=9.32\u00b0, Tsr=0.6.\nIn conclusion, the thresholds are set based on the experimental results and the characteristics of each threshold, which can provide effective thresholds for subsequent fast and high-precision ellipse detection."
        },
        {
            "heading": "B. EXPERIMENTS ON THE ROBUSTNESS OF ELLIPSE DETECTION",
            "text": "The purpose of this experiment is to test the robustness of the proposed method to detect ellipses with different orientations, angular coverage and lengths of semi-major axis, and to verify the adaptability for detecting different ellipses. Dataset Orientation, Dataset Coverage, and Dataset Scale are generated to test. The image size is 400\u00d7400 pixels, and there is only one ellipse at the image center with axis ratio from 0.01 to 1 with step 0.01. For the Dataset Orientation, the length of the semi-major axis is fixed at 100 pixels, and the orientation range is from 0\u00b0 to 90\u00b0 with step 1\u00b0. For the Dataset Coverage, the length of the semi-major axis is fixed at 100 pixels, and the coverage range is from 3\u00b0 to 360\u00b0 with step 3\u00b0. For the Dataset Scale, the orientation is fixed at 0\u00b0, and the length of the semi-major axis range is from 1 pixel to 100 pixels with step 1 pixel. Besides, the Dataset Upsampling formed by 2 times upsampling Dataset Scale is tested.\nThe results on the robustness of ellipse detection based on the above datasets are shown in Fig. 8. The horizontal axis of each figure represents the axis ratio of the ellipses, the black square point represents the corresponding ellipse that fails to detect and the white square points represent a successful detection. Fig. 8(a) shows the influence of the orientation that when the axis ratio is greater than 0.3, the change of the orientation will not affect detection. Fig. 8(b) shows the influence of the angular coverage that the proposed method\ncan effectively detect ellipses with axis ratio greater than 0.3 and angular coverage greater than 220\u00b0. Fig. 8(c) shows the influence of the length of the semi-major axis that for the same semi-major axis length, the larger the axis ratio, the greater the possibility of successful detection, and the shortest length of the semi-major axis of the detected ellipse is only 5 pixels. When the axis ratio of ellipses is greater than 0.47 and the length of the semi-major axis is greater than 13 pixels, it can be detected. Fig. 8(d) shows the detection results of Dataset Upsampling that the proposed method can detect smaller ellipses by 2 times upsample of the image.\nIn conclusion, the experiment results show that the proposed method can effectively detect ellipses within a certain range of orientation, angular coverage, and length of semi-major axis, which reflects the robustness and adaptability of the proposed ellipse detection method."
        },
        {
            "heading": "C. COMPARATIVE EXPERIMENT OF ELLIPSE DETECTION",
            "text": "This experiment is to verify the feasibility and effectiveness of the proposed method for fast and high-precision ellipse detection. Based on the three public datasets mentioned above, the proposed method is compared with the methods proposed by Prasad [11], Fornaciari [16], Jia [17], Lu [14], Meng [12] and Shen [13], respectively.\nIn order to verify the improvement of the proposed method in detection speed, the methods of Fornaciari, Jia, Meng, Shen and the proposed are implemented using C++ to compare execution time. The source code of the above comparison method is provided by the author. Fig. 9 shows that the execution time of the proposed method is reduced by 5.02 ms, 0.85 ms, 0.89 ms and 2.16 ms, respectively, compared with the other four methods in Dataset Prasad. For the Dataset Smartphone, the execution time of the proposed\nThis work is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 License. For more information, see https://creativecommons.org/licenses/by-nc-nd/4.0/\nE.\u00a0Zhang\u00a0et\u00a0al.:\u00a0A\u00a0Fast\u00a0and\u00a0High\u2010precision\u00a0Ellipse\u00a0Detection\u00a0Method\u00a0Based\u00a0on\u00a0the\u00a0Candy's\u00a0Theorem\u00a0\n7\n126.2\n23.21\n5.07\n49.97\n18.01\n3.8\n30.31\n16.15\n3.76\n54.16\n22.8\n7.93\n29.48\n14.8 2.91 Ta bl ew ar e Sm ar tp ho ne Pr as ad\n0 20 40 60 80 100 120 140 Execution time (ms)\nProposed Shen Meng Jia Fornaciari\nFIGURE 9. Comparison results of detection speed.\nmethod is reduced by 8 ms, 1.35 ms, 3.21 ms and 8.41 ms, respectively. For the Dataset Tableware, the execution time of the proposed method is reduced by 24.68 ms, 0.83 ms, 20.49 ms, 96.72 ms, respectively. The results show that the proposed method is superior to the other four methods in terms of detection speed in the same datasets, which verifies the ability of the proposed method to achieve fast detection.\nIn order to verify the improvement of the proposed method in the detection precision, the comparison experiments are performed between the methods mentioned above. The comparative results on three datasets are shown in Table \u2161, Table \u2162 and Table \u2163, respectively. The results show that the ellipse detection precision of the proposed method on three datasets is 83.96%, 74.37%, and 67.05%, respectively, which are higher than the other six methods. Moreover, the F1-Measure of the proposed method on three datasets is 52.23%, 57.36%, and 61.62%, respectively. The F1-Measure of the proposed method is superior to others except that the F1-Measure of the proposed method on the Dataset Smartphone is slightly low. This is mainly due to the suboptimal performance of the proposed method in detecting complex images composed of the cluttered bicycles in the Dataset Smartphone. In addition, the recall of the proposed method on three datasets also has good performance. The results show that the proposed method can achieve highprecision detection.\nIn order to show the effects of the ellipse detection more intuitively, Table \u2164 gives a part of images of the detection result in this experiment, which includes images of the handle, hollow porous ball, planet image, traffic sign, road sign, and wooden plate. The green lines indicate the detected ellipses. The image of the handle shows that the method of Lu, Meng, Shen and the proposed can detect the apparent ellipse contour. The method of Prasad can not detect all ellipses and takes some small contours as ellipses incorrectly, and the detection results of the other two methods are not good enough. The image of the hollow porous ball shows that all methods can detect 6 different colors of the ball. Besides, the methods of Prasad and the proposed can also"
        },
        {
            "heading": "TABLE \u2161",
            "text": ""
        },
        {
            "heading": "EXPERIMENTAL RESULTS OF DETECTION PRECISION ON PRASAD",
            "text": "Method Precision (%) Recall (%) F1-Measure (%)\nPrasad 20.86 25.70 23.02 Fornaciari 51.91 21.65 30.56\nJia 58.78 24.26 34.35 Lu 73.36 34.79 47.20 Meng 75.79 38.50 51.06 Shen 80.04 30.75 44.43 Proposed 83.96 37.91 52.23"
        },
        {
            "heading": "TABLE \u2162",
            "text": ""
        },
        {
            "heading": "EXPERIMENTAL RESULTS OF DETECTION PRECISION ON SMARTPHONE",
            "text": "Method Precision (%) Recall (%) F1-Measure (%)\nPrasad 5.43 41.41 9.60 Fornaciari 27.16 55.26 36.42\nJia 33.92 52.36 41.17 Lu 54.77 66.93 60.24 Meng 67.87 63.85 65.79 Shen 64.88 59.98 62.33 Proposed 74.37 46.67 57.36"
        },
        {
            "heading": "TABLE \u2163",
            "text": ""
        },
        {
            "heading": "EXPERIMENTAL RESULTS OF DETECTION PRECISION ON TABLEWARE",
            "text": "Method Precision (%) Recall (%) F1-Measure (%)\nPrasad 20.84 25.70 23.02 Fornaciari 20.72 58.17 30.56\nJia 30.80 57.59 40.14 Lu 46.55 51.17 48.75 Meng 53.15 57.39 55.19 Shen 57.95 56.03 56.97\nProposed 67.05 57.00 61.62 detect ellipses formed by small holes, which reflects the ability of the proposed method to detect small ellipses. The planet image shows that the methods of Meng, Shen and the proposed method can detect all 7 ellipses corresponding to the contours of the planet, and other methods fail to detect all ellipses effectively. The image of the traffic sign shows that all methods detect the elliptical contour of the sign. However, the method of Prasad also takes part of the contours of the tree as ellipses and the methods of Fornaciari and Jia have the problem of repeated detection. The proposed method also detects a small size traffic sign in a corner. The image of the road sign shows the method of Lu, Meng and the proposed can detect two street signs. The image of the wooden plate shows that all methods except for the method of Prasad detect the elliptical contours of 9 round wooden plates. The proposed method also detects the elliptical contours of some fruits, which reflects the ability to detect small ellipses too. Although the method of Prasad also can detect some fruits, there is a relatively apparent incorrect detection. In summary, the results shown in Table \u2164 reflect the ellipse detection ability of the methods tested above intuitively, which shows that the detection effect of the proposed method is better than others. It not only has the ability to detect large ellipses but also has a strong ability to detect small ones.\nThis work is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 License. For more information, see https://creativecommons.org/licenses/by-nc-nd/4.0/\nE.\u00a0Zhang\u00a0et\u00a0al.:\u00a0A\u00a0Fast\u00a0and\u00a0High\u2010precision\u00a0Ellipse\u00a0Detection\u00a0Method\u00a0Based\u00a0on\u00a0the\u00a0Candy's\u00a0Theorem\u00a0\n8\nTABLE \u2164 A PART OF IMAGES OF THE DETECTION RESULTS\nName Prasad Fornaciari Jia Lu Meng Shen Proposed\nHandle\nHollow porous\nball\nPlanet image\nTraffic sign\nRoad sign\nWooden plate"
        },
        {
            "heading": "D. EXPERIMENT OF SMALL HOLE DETECTION",
            "text": "This experiment is to verify the effectiveness of the proposed method to detect small holes. The constructed experimental setup for small hole detection is shown in Fig. 10. A porous metal plate with various size holes is used as a testing object\nfor small hole detection, and the diameter of the holes on the metal plate covers 3 mm to 10 mm with a step of 1 mm. And one camera fixed at the end of the CR5 robot is used to capture image information of the target metal plate. In this experiment, 100 images of the target metal plate are captured by the camera from different views by controlling the motion of the robot, and then, the ellipse detection methods proposed by Fornaciari, Jia, Lu, Meng, Shen and this paper are used to test the ability of small hole detection through processing the 100 images, respectively.\nFig. 11 shows one of the comparison experimental results of small hole detection, which indicates that there is a significant difference in the detection ability of different ellipse detection methods for small holes mentioned above, and the proposed method has the best small hole detection ability than the comparative methods.\nThis work is licensed under a Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 License. For more information, see https://creativecommons.org/licenses/by-nc-nd/4.0/\nE.\u00a0Zhang\u00a0et\u00a0al.:\u00a0A\u00a0Fast\u00a0and\u00a0High\u2010precision\u00a0Ellipse\u00a0Detection\u00a0Method\u00a0Based\u00a0on\u00a0the\u00a0Candy's\u00a0Theorem\u00a0\n9\nFig. 12 shows the comparison experimental results of small hole detection by using 100 captured images at a resolution of 3840\u00d72160 pixels. The experimental results indicate that when the perimeter [23] of the ellipses corresponding to the holes is less than 105 pixels, the proposed method outperforms other ellipse detection methods in detecting small holes. When the perimeter of the ellipses corresponding to the holes is less than 45 pixels, the proposed method still has a strong detection ability, and the average number of detected small holes per image is about 8. The experimental results verify the strong ability of the proposed method to detect small holes.\nIn summary, the proposed ellipse detection method possesses advantages in small hole detection, which mainly benefits from that an arc is directly fitted and validated in\nthe proposed method when its turning angles add up to more than a certain value. However, when the perimeter of ellipses corresponding to the holes is larger than 105 pixels, the number of the detected holes is slightly down to the second highest. This is primarily due to the greater possibility of fragmentation of contours of larger holes and strict constraints. The proposed detection method performs relatively well on these simulated factory environment images without adjusting related thresholds carefully. This feature of the proposed method enables it to be efficiently and conveniently used in manufacturing applications."
        },
        {
            "heading": "V. CONCLUSION",
            "text": "In this paper, the ellipse detection method based on the Candy's theorem is proposed to improve ellipse detection speed and precision. The principle of the constrained simple polygon constraint method and the Candy's theorem constraint method are described in detail. The optimal threshold selection experiments are performed with three public datasets of Prasad, Smartphone, and Tableware. Based on three synthetic datasets, the ellipse detection robustness experiments verify the robustness and adaptability of the proposed method. The comparison experiments with six popular ellipse detection methods of Prasad, Fornaciari, Jia, Lu, Meng and Shen are performed, which show that the ellipse detection speed of the proposed method is superior to the method of Jia, Fornaciari, Meng and Shen, and the ellipse detection precision corresponding to the three datasets are 83.96%, 74.37%, and 67.05%, respectively, which are better than the compared methods. Besides, the small hole detection experiment shows the proposed method has a good ability to detect small holes. The proposed method can adapt to the need for fast and high-precision ellipse detection and provide information support for positioning parts with small holes in intelligent manufacturing. The proposed method is about to combine with the tracking method to detect holes in parts in a fast and high-precision way within the following work, which guides a robot to complete the peg-in-hole assembly application in dynamic and unstructured environments."
        }
    ],
    "title": "A Fast and High-precision Ellipse Detection Method Based on the Candys Theorem",
    "year": 2023
}